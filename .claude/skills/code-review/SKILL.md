# Code Review Skill

코드 품질과 보안을 검증하기 위한 코드 리뷰 스킬입니다.

## 핵심 역할

1. **코드 품질 보증**: 일관된 코드 스타일과 품질 유지
2. **보안 검토**: 취약점 및 보안 이슈 탐지
3. **성능 분석**: 성능 문제 및 병목 지점 식별
4. **베스트 프랙티스**: 모범 사례 준수 검증

## 코드 품질 체크리스트

### 📋 구조 및 설계
- [ ] **단일 책임 원칙**: 파일/함수가 하나의 책임만 가지는가?
- [ ] **파일 크기**: 500줄 이하인가?
- [ ] **함수 크기**: 50줄 이하인가?
- [ ] **중첩 깊이**: 3단계 이하인가?
- [ ] **순환 복잡도**: 10 이하인가?

### 📝 명명 및 가독성
- [ ] **명명 규칙**: camelCase(변수/함수), PascalCase(클래스/타입)
- [ ] **의미있는 이름**: 변수/함수명이 목적을 명확히 표현하는가?
- [ ] **축약어 지양**: 이해하기 어려운 축약어 사용하지 않는가?
- [ ] **주석**: 복잡한 로직에 필요한 주석이 있는가?

### 🔄 코드 중복
- [ ] **DRY 원칙**: 3회 이상 반복되는 코드가 없는가?
- [ ] **공통 유틸**: 재사용 가능한 코드가 적절히 추출되었는가?
- [ ] **패턴 일관성**: 유사한 기능이 일관된 패턴으로 구현되었는가?

### 🧪 테스트 가능성
- [ ] **의존성 주입**: 모킹이 가능한 구조인가?
- [ ] **순수 함수**: 사이드 이펙트가 최소화되었는가?
- [ ] **테스트 커버리지**: 핵심 로직이 테스트되는가?

### 📦 의존성 관리
- [ ] **Import 정리**: 사용하지 않는 import가 없는가?
- [ ] **순환 의존성**: 순환 참조가 없는가?
- [ ] **버전 호환성**: 의존성 버전이 호환되는가?

## 보안 검토 항목

### 🔐 인증/인가
- [ ] **토큰 검증**: JWT/세션 토큰이 적절히 검증되는가?
- [ ] **권한 확인**: 리소스 접근 전 권한 체크가 있는가?
- [ ] **인증 우회**: 인증 로직을 우회할 수 있는 경로가 없는가?

### 💉 인젝션 방지
- [ ] **SQL Injection**: 파라미터화된 쿼리를 사용하는가?
- [ ] **XSS**: 사용자 입력이 escape 처리되는가?
- [ ] **Command Injection**: 쉘 명령에 사용자 입력이 직접 전달되지 않는가?

### 🔑 시크릿 관리
- [ ] **하드코딩 금지**: API 키, 비밀번호가 코드에 없는가?
- [ ] **환경 변수**: 시크릿이 환경 변수로 관리되는가?
- [ ] **로그 노출**: 민감 정보가 로그에 출력되지 않는가?

### 📊 데이터 보호
- [ ] **암호화**: 민감 데이터가 암호화되어 저장되는가?
- [ ] **전송 보안**: HTTPS가 강제되는가?
- [ ] **개인정보**: PII 데이터가 적절히 보호되는가?

### 🛡️ 입력 검증
- [ ] **타입 검증**: 입력 타입이 검증되는가?
- [ ] **범위 검증**: 숫자/길이 범위가 제한되는가?
- [ ] **형식 검증**: 이메일/URL 등 형식이 검증되는가?

## 리뷰 프로세스

### 1️⃣ 준비 단계
```
- 변경된 파일 목록 확인
- 관련 스펙/요구사항 참조
- 이전 리뷰 피드백 확인
```

### 2️⃣ 1차 검토 (자동화)
```bash
npm run lint          # ESLint 검사
npm run test          # 테스트 실행
npm run type-check    # TypeScript 타입 검사
```

### 3️⃣ 2차 검토 (수동)
```
- 코드 품질 체크리스트 적용
- 보안 검토 항목 확인
- 비즈니스 로직 검증
```

### 4️⃣ 피드백 작성
```markdown
## 리뷰 결과

### ✅ 승인 조건
- [ ] 모든 품질 체크리스트 통과
- [ ] 보안 이슈 없음
- [ ] 테스트 통과

### 📝 코멘트
- **필수 수정**: [blocking 이슈]
- **권장 수정**: [개선 제안]
- **참고**: [정보 공유]
```

## 리뷰 우선순위

| 우선순위 | 카테고리 | 예시 |
|---------|---------|------|
| 🔴 Critical | 보안 취약점, 데이터 손실 | SQL Injection, 비밀번호 노출 |
| 🟠 High | 로직 오류, 성능 문제 | 무한 루프, N+1 쿼리 |
| 🟡 Medium | 코드 품질, 유지보수성 | 중복 코드, 복잡한 함수 |
| 🟢 Low | 스타일, 컨벤션 | 명명 규칙, 포맷팅 |

## 피드백 템플릿

### 버그 발견
```markdown
🐛 **버그**: [파일:라인]
**문제**: [설명]
**영향**: [예상 영향]
**제안**: [수정 방법]
```

### 개선 제안
```markdown
💡 **제안**: [파일:라인]
**현재**: [현재 코드]
**제안**: [개선 코드]
**이유**: [왜 더 나은지]
```

### 보안 이슈
```markdown
🔒 **보안**: [파일:라인]
**취약점**: [취약점 유형]
**심각도**: Critical/High/Medium/Low
**수정**: [필수 조치]
```
