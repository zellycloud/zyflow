# Python-specific Quality Rules

id: use-fstring
language: python
severity: info
message: "Consider using f-strings for string formatting"
rule:
  any:
    - pattern: "$$$STR".format($$$ARGS)
    - pattern: "$$$STR" % $ARGS

---
id: use-pathlib
language: python
severity: info
message: "Consider using pathlib for file path operations"
rule:
  any:
    - pattern: os.path.join($$$ARGS)
    - pattern: os.path.exists($PATH)
    - pattern: os.path.isfile($PATH)
    - pattern: os.path.isdir($PATH)

---
id: use-context-manager
language: python
severity: warning
message: "Use context manager (with statement) for file operations"
rule:
  pattern: |
    $FILE = open($PATH)
    $$$BODY
    $FILE.close()
fix: |
  with open($PATH) as $FILE:
      $$$BODY

---
id: bare-except
language: python
severity: warning
message: "Avoid bare except clauses. Catch specific exceptions."
rule:
  pattern: |
    except:
        $$$BODY

---
id: mutable-default-argument
language: python
severity: warning
message: "Mutable default argument. Use None and initialize inside function."
rule:
  any:
    - pattern: def $FUNC($$$ARGS, $PARAM=[], $$$REST):
    - pattern: def $FUNC($$$ARGS, $PARAM={}, $$$REST):

---
id: type-comparison
language: python
severity: warning
message: "Use isinstance() instead of type comparison"
rule:
  pattern: type($OBJ) == $TYPE
fix: isinstance($OBJ, $TYPE)

---
id: dict-get-default
language: python
severity: info
message: "Use dict.get() with default instead of conditional"
rule:
  pattern: |
    if $KEY in $DICT:
        $VAR = $DICT[$KEY]
    else:
        $VAR = $DEFAULT
fix: $VAR = $DICT.get($KEY, $DEFAULT)

---
id: list-comprehension-opportunity
language: python
severity: info
message: "Consider using list comprehension"
rule:
  pattern: |
    $RESULT = []
    for $ITEM in $ITER:
        $RESULT.append($EXPR)

---
id: use-enumerate
language: python
severity: info
message: "Use enumerate() instead of manual index tracking"
rule:
  pattern: |
    $IDX = 0
    for $ITEM in $ITER:
        $$$BODY
        $IDX += 1
