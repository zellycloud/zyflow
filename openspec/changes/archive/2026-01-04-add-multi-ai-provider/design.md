# ë©€í‹° AI Provider ì„¤ê³„ (Option 1: ì‹¤í–‰ ëª¨ë“œ ë¶„ë¦¬)

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ ì»´í¬ë„ŒíŠ¸ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Frontend (React)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    TaskExecutionDialog                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚    â”‚
â”‚  â”‚  â”‚  âš¡ ë‹¨ì¼ ì‹¤í–‰        â”‚    â”‚  ğŸ Swarm ì‹¤í–‰       â”‚             â”‚    â”‚
â”‚  â”‚  â”‚  (ë¹ ë¥´ê³  ì €ë ´)      â”‚    â”‚  (ë©€í‹°ì—ì´ì „íŠ¸)      â”‚             â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚    â”‚
â”‚  â”‚             â”‚                          â”‚                        â”‚    â”‚
â”‚  â”‚             â–¼                          â–¼                        â”‚    â”‚
â”‚  â”‚  Provider/Model ì„ íƒ         Strategy/MaxAgents ì„¤ì •            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                â”‚                            â”‚                           â”‚
â”‚                â–¼                            â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚     useAI        â”‚          â”‚    useSwarm      â”‚                    â”‚
â”‚  â”‚   (ìƒˆ í›…)        â”‚          â”‚  (ë¦¬ë„¤ì„)        â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚           â”‚                             â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚                              â”‚
â”‚  â”‚   useClaude      â”‚                   â”‚                              â”‚
â”‚  â”‚ (í•˜ìœ„ í˜¸í™˜ ë˜í¼) â”‚                   â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚                              â”‚
â”‚           â”‚                             â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                             â”‚
            â”‚ POST /api/ai/execute        â”‚ POST /api/claude-flow/*
            â”‚                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           â–¼                             â–¼            Backend (Express) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ /api/ai/*            â”‚      â”‚ /api/claude-flow/*   â”‚                â”‚
â”‚  â”‚                      â”‚      â”‚                      â”‚                â”‚
â”‚  â”‚ - execute            â”‚      â”‚ - execute            â”‚                â”‚
â”‚  â”‚ - stop/:runId        â”‚      â”‚ - status/:runId      â”‚                â”‚
â”‚  â”‚ - providers          â”‚      â”‚ - stop/:runId        â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚             â”‚                             â”‚                            â”‚
â”‚             â–¼                             â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ CLIProcessManager    â”‚      â”‚ ClaudeFlowExecutor   â”‚                â”‚
â”‚  â”‚ (ê¸°ì¡´ í™•ì¥)          â”‚      â”‚ (ê¸°ì¡´)               â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚             â”‚                             â”‚                            â”‚
â”‚             â–¼                             â–¼                            â”‚
â”‚  claude | gemini | codex         npx claude-flow@alpha swarm           â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë‹¨ì¼ ì‹¤í–‰ íë¦„ (useAI)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend (React)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ TaskExecution    â”‚     â”‚ useAI Hook       â”‚                  â”‚
â”‚  â”‚ Dialog           â”‚â”€â”€â”€â”€â–¶â”‚                  â”‚                  â”‚
â”‚  â”‚                  â”‚     â”‚ - provider       â”‚                  â”‚
â”‚  â”‚ - Provider ì„ íƒ  â”‚     â”‚ - model          â”‚                  â”‚
â”‚  â”‚ - Model ì„ íƒ     â”‚     â”‚ - execute()      â”‚                  â”‚
â”‚  â”‚ - ì‹¤í–‰ ë¡œê·¸      â”‚     â”‚ - stop()         â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                    â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚ POST /api/ai/execute       â”‚
â”‚  â”‚ useClaude        â”‚â—€â”€ wrapper â”€â”€â”€â”¤                             â”‚
â”‚  â”‚ (í•˜ìœ„ í˜¸í™˜)      â”‚              â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                             â”‚
â”‚                                    â–¼                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Backend (Express)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                    â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ /api/ai/execute                                   â”‚           â”‚
â”‚  â”‚                                                   â”‚           â”‚
â”‚  â”‚ 1. provider, model íŒŒë¼ë¯¸í„° ê²€ì¦                 â”‚           â”‚
â”‚  â”‚ 2. CLIProcessManager.start() í˜¸ì¶œ               â”‚           â”‚
â”‚  â”‚ 3. SSE ìŠ¤íŠ¸ë¦¬ë° ì„¤ì •                             â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                        â”‚                                         â”‚
â”‚                        â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ CLIProcessManager (ê¸°ì¡´)                         â”‚           â”‚
â”‚  â”‚                                                   â”‚           â”‚
â”‚  â”‚ - getProfile(provider)                           â”‚           â”‚
â”‚  â”‚ - buildArgs(profile, prompt, model)              â”‚           â”‚
â”‚  â”‚ - spawn(profile.command, args)                   â”‚           â”‚
â”‚  â”‚ - setupProcessHandlers()                         â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                        â”‚                                         â”‚
â”‚                        â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ CLI Profiles (types.ts)                          â”‚           â”‚
â”‚  â”‚                                                   â”‚           â”‚
â”‚  â”‚ claude  â†’ claude -p "prompt" --model opus        â”‚           â”‚
â”‚  â”‚ gemini  â†’ gemini --prompt "prompt"               â”‚           â”‚
â”‚  â”‚ codex   â†’ codex write --task "prompt"            â”‚           â”‚
â”‚  â”‚ qwen    â†’ qwen --prompt "prompt"                 â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Swarm ì‹¤í–‰ íë¦„ (useSwarm)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend (React)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ TaskExecution    â”‚     â”‚ useSwarm Hook    â”‚                  â”‚
â”‚  â”‚ Dialog           â”‚â”€â”€â”€â”€â–¶â”‚ (ë¦¬ë„¤ì„)         â”‚                  â”‚
â”‚  â”‚                  â”‚     â”‚                  â”‚                  â”‚
â”‚  â”‚ - Strategy ì„ íƒ  â”‚     â”‚ - strategy       â”‚                  â”‚
â”‚  â”‚ - MaxAgents ì„¤ì • â”‚     â”‚ - maxAgents      â”‚                  â”‚
â”‚  â”‚ - Swarm ë¡œê·¸     â”‚     â”‚ - execute()      â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ - stop()         â”‚                  â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                    â”‚                             â”‚
â”‚                                    â”‚ POST /api/claude-flow/*    â”‚
â”‚                                    â–¼                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Backend (Express)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                    â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ /api/claude-flow/execute                          â”‚           â”‚
â”‚  â”‚                                                   â”‚           â”‚
â”‚  â”‚ 1. strategy, maxAgents íŒŒë¼ë¯¸í„° ê²€ì¦            â”‚           â”‚
â”‚  â”‚ 2. ClaudeFlowExecutor í˜¸ì¶œ                       â”‚           â”‚
â”‚  â”‚ 3. SSE ìŠ¤íŠ¸ë¦¬ë° ì„¤ì •                             â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                        â”‚                                         â”‚
â”‚                        â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ npx claude-flow@alpha swarm "{prompt}"           â”‚           â”‚
â”‚  â”‚                                                   â”‚           â”‚
â”‚  â”‚ --strategy development                           â”‚           â”‚
â”‚  â”‚ --max-agents 5                                   â”‚           â”‚
â”‚  â”‚ --claude                                         â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ë°ì´í„° íë¦„

### ë‹¨ì¼ ì‹¤í–‰ ìš”ì²­ íë¦„

```
User clicks "ë‹¨ì¼ ì‹¤í–‰"
       â”‚
       â–¼
TaskExecutionDialog
       â”‚ { provider: 'gemini', model: 'gemini-2.5-pro', ... }
       â–¼
useAI.execute()
       â”‚ POST /api/ai/execute
       â–¼
Express Router
       â”‚ req.body ê²€ì¦
       â–¼
CLIProcessManager.start({
  profileId: 'gemini',
  model: 'gemini-2.5-pro',
  initialPrompt: buildPrompt(changeId, taskId)
})
       â”‚
       â–¼
spawn('gemini', ['--prompt', prompt])
       â”‚
       â”œâ”€â–¶ stdout â”€â”€â–¶ SSE 'output' â”€â”€â–¶ UI ë¡œê·¸ í‘œì‹œ
       â”‚
       â”œâ”€â–¶ stderr â”€â”€â–¶ SSE 'error' â”€â”€â–¶ UI ì—ëŸ¬ í‘œì‹œ
       â”‚
       â””â”€â–¶ close â”€â”€â–¶ SSE 'complete' â”€â”€â–¶ UI ì™„ë£Œ ìƒíƒœ
```

### Swarm ì‹¤í–‰ ìš”ì²­ íë¦„

```
User clicks "Swarm ì‹¤í–‰"
       â”‚
       â–¼
TaskExecutionDialog
       â”‚ { strategy: 'development', maxAgents: 5, ... }
       â–¼
useSwarm.execute()
       â”‚ POST /api/claude-flow/execute
       â–¼
Express Router
       â”‚ req.body ê²€ì¦
       â–¼
ClaudeFlowExecutor.start({
  changeId: 'add-auth',
  mode: 'full',
  strategy: 'development',
  maxAgents: 5
})
       â”‚
       â–¼
spawn('npx', ['claude-flow@alpha', 'swarm', prompt, ...args])
       â”‚
       â”œâ”€â–¶ stream-json â”€â”€â–¶ SSE 'progress' â”€â”€â–¶ UI ì§„í–‰ ìƒí™©
       â”‚
       â”œâ”€â–¶ agent logs â”€â”€â–¶ SSE 'agent' â”€â”€â–¶ UI ì—ì´ì „íŠ¸ ë¡œê·¸
       â”‚
       â””â”€â–¶ close â”€â”€â–¶ SSE 'complete' â”€â”€â–¶ UI ì™„ë£Œ ìƒíƒœ
```

### ì„¤ì • ë¡œë“œ íë¦„

```
App ì‹œì‘
    â”‚
    â–¼
loadCLISettings()
    â”‚ ì½ê¸°: .zyflow/cli-settings.json
    â–¼
ë³‘í•©: DEFAULT_CLI_PROFILES + user settings
    â”‚
    â–¼
checkAvailability()
    â”‚ ê° CLI: which claude, which gemini, ...
    â–¼
UIì— í™œì„±í™”ëœ Providerë§Œ í‘œì‹œ
```

## ìƒì„¸ ì„¤ê³„

### 1. API ì—”ë“œí¬ì¸íŠ¸

#### POST /api/ai/execute (ë‹¨ì¼ ì‹¤í–‰)

**Request:**
```typescript
interface AIExecuteRequest {
  provider: AIProvider      // 'claude' | 'gemini' | 'codex' | ...
  model?: string            // 'sonnet' | 'gemini-2.5-pro' | ...
  changeId: string
  taskId: string
  taskTitle: string
  context?: string          // ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸
}
```

**Response:** SSE Stream
```
data: {"type":"start","provider":"gemini","model":"gemini-2.5-pro"}

data: {"type":"output","content":"ë¶„ì„ì„ ì‹œì‘í•©ë‹ˆë‹¤..."}

data: {"type":"output","content":"íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤..."}

data: {"type":"complete","status":"completed","exitCode":0}
```

#### POST /api/claude-flow/execute (Swarm ì‹¤í–‰)

**Request:**
```typescript
interface SwarmExecuteRequest {
  changeId: string
  taskId?: string           // íŠ¹ì • íƒœìŠ¤í¬ë§Œ ì‹¤í–‰
  mode: 'full' | 'single' | 'analysis'
  strategy: 'development' | 'research' | 'testing'
  maxAgents: number         // 1-10
}
```

**Response:** SSE Stream
```
data: {"type":"start","strategy":"development","maxAgents":5}

data: {"type":"agent","name":"researcher","status":"working","message":"ë¬¸ì„œ ë¶„ì„ ì¤‘..."}

data: {"type":"progress","phase":"implementation","progress":45}

data: {"type":"complete","status":"completed","summary":"3ê°œ íŒŒì¼ ìˆ˜ì •ë¨"}
```

#### GET /api/ai/providers

**Response:**
```typescript
interface ProvidersResponse {
  providers: Array<{
    id: AIProvider
    name: string
    icon: string
    enabled: boolean
    available: boolean      // CLI ì„¤ì¹˜ ì—¬ë¶€
    selectedModel: string
    availableModels: string[]
  }>
}
```

### 2. CLI Adapter í™•ì¥

#### buildArgs ìˆ˜ì • (process-manager.ts)

```typescript
private buildArgs(
  profile: CLIProfile,
  changeId: string,
  initialPrompt?: string,
  model?: string,          // ì¶”ê°€
  extraArgs?: string[]
): string[] {
  const args = [...profile.args]

  // ëª¨ë¸ ì§€ì • (CLIë³„ë¡œ ë‹¤ë¦„)
  if (model) {
    switch (profile.type) {
      case 'claude':
        args.push('--model', model)  // claude --model opus
        break
      case 'gemini':
        args.push('--model', model)  // gemini --model gemini-2.5-pro
        break
      case 'codex':
        args.push('--model', model)  // codex --model gpt-5-codex
        break
    }
  }

  // í”„ë¡¬í”„íŠ¸ ì „ë‹¬
  if (initialPrompt) {
    switch (profile.type) {
      case 'claude':
        args.push('-p', initialPrompt)
        break
      case 'gemini':
        args.push('--prompt', initialPrompt)
        break
      case 'codex':
        args.push('write', '--task', initialPrompt)
        break
      case 'qwen':
        args.push('--prompt', initialPrompt)
        break
    }
  }

  return args
}
```

### 3. useAI í›…

```typescript
// src/hooks/useAI.ts

export type AIProvider = 'claude' | 'gemini' | 'codex' | 'qwen' | 'kilo' | 'opencode'

export interface AIExecution {
  runId: string | null
  provider: AIProvider | null
  model: string | null
  status: 'idle' | 'running' | 'completed' | 'error'
  messages: AIMessage[]
  error: string | null
}

export interface AIMessage {
  type: 'start' | 'output' | 'error' | 'complete'
  provider?: AIProvider
  model?: string
  content?: string
  status?: 'completed' | 'error'
  exitCode?: number
  timestamp: string
}

export function useAI() {
  const [execution, setExecution] = useState<AIExecution>({
    runId: null,
    provider: null,
    model: null,
    status: 'idle',
    messages: [],
    error: null,
  })

  const execute = useCallback(async (params: {
    provider: AIProvider
    model?: string
    changeId: string
    taskId: string
    taskTitle: string
    context?: string
  }) => {
    // ... SSE ìŠ¤íŠ¸ë¦¬ë° ë¡œì§
    const response = await fetch('/api/ai/execute', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(params),
    })
    // ... ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬
  }, [])

  const stop = useCallback(async () => {
    // POST /api/ai/stop/{runId}
  }, [execution.runId])

  return { execution, execute, stop, reset }
}
```

### 4. useSwarm í›…

```typescript
// src/hooks/useSwarm.ts (useClaudeFlowExecution ë¦¬ë„¤ì„)

export type SwarmStrategy = 'development' | 'research' | 'testing'

export interface SwarmExecution {
  runId: string | null
  strategy: SwarmStrategy | null
  maxAgents: number
  status: 'idle' | 'running' | 'completed' | 'error'
  agents: SwarmAgent[]
  progress: number
  logs: SwarmLog[]
  error: string | null
}

export interface SwarmAgent {
  name: string
  type: 'researcher' | 'coder' | 'tester' | 'reviewer'
  status: 'idle' | 'working' | 'done'
  currentTask?: string
}

export function useSwarm() {
  const [execution, setExecution] = useState<SwarmExecution>({
    runId: null,
    strategy: null,
    maxAgents: 5,
    status: 'idle',
    agents: [],
    progress: 0,
    logs: [],
    error: null,
  })

  const execute = useCallback(async (params: {
    changeId: string
    taskId?: string
    mode: 'full' | 'single' | 'analysis'
    strategy: SwarmStrategy
    maxAgents: number
  }) => {
    // POST /api/claude-flow/execute
    // SSE ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬
  }, [])

  return { execution, execute, stop, reset }
}
```

### 5. useClaude í•˜ìœ„ í˜¸í™˜

```typescript
// src/hooks/useClaude.ts (ìˆ˜ì •)

import { useAI, type AIProvider } from './useAI'

// ê¸°ì¡´ íƒ€ì… ìœ ì§€
export type ClaudeModel = 'haiku' | 'sonnet' | 'opus'

// useAI ë˜í¼ë¡œ ë³€ê²½
export function useClaude() {
  const ai = useAI()

  const execute = useCallback(async (params: {
    changeId: string
    taskId: string
    taskTitle: string
    context?: string
    model?: ClaudeModel
  }) => {
    return ai.execute({
      provider: 'claude',
      model: params.model || 'sonnet',
      ...params,
    })
  }, [ai])

  // ê¸°ì¡´ ì¸í„°í˜ì´ìŠ¤ ìœ ì§€
  return {
    execution: {
      ...ai.execution,
      // í•˜ìœ„ í˜¸í™˜ì„ ìœ„í•œ ë§¤í•‘
      runId: ai.execution.runId,
      status: ai.execution.status,
      messages: ai.execution.messages,
      error: ai.execution.error,
    },
    execute,
    stop: ai.stop,
    reset: ai.reset,
  }
}
```

### 6. TaskExecutionDialog ìˆ˜ì •

```typescript
// ì‹¤í–‰ ëª¨ë“œ ìƒíƒœ
const [executionMode, setExecutionMode] = useState<'single' | 'swarm'>('single')

// ë‹¨ì¼ ì‹¤í–‰ ìƒíƒœ
const [selectedProvider, setSelectedProvider] = useState<AIProvider>('claude')
const [selectedModel, setSelectedModel] = useState<string>('sonnet')

// Swarm ì‹¤í–‰ ìƒíƒœ
const [strategy, setStrategy] = useState<SwarmStrategy>('development')
const [maxAgents, setMaxAgents] = useState<number>(5)

// Provider ì˜µì…˜ (cli-settings.json ê¸°ë°˜)
const [providers, setProviders] = useState<AIProviderConfig[]>([])

// ì´ˆê¸° ë¡œë“œ
useEffect(() => {
  fetch('/api/ai/providers')
    .then(res => res.json())
    .then(data => {
      setProviders(data.providers.filter(p => p.enabled && p.available))
    })
}, [])

// ì‹¤í–‰ í•¸ë“¤ëŸ¬
const handleExecute = () => {
  if (executionMode === 'single') {
    executeAI({
      provider: selectedProvider,
      model: selectedModel,
      changeId,
      taskId,
      taskTitle,
    })
  } else {
    executeSwarm({
      changeId,
      taskId,
      mode: 'single',
      strategy,
      maxAgents,
    })
  }
}
```

## íŒŒì¼ êµ¬ì¡°

```
src/
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAI.ts              # ìƒˆë¡œ ìƒì„± (í•µì‹¬ í›…)
â”‚   â”œâ”€â”€ useSwarm.ts           # ìƒˆë¡œ ìƒì„± (useClaudeFlowExecution ë¦¬ë„¤ì„)
â”‚   â””â”€â”€ useClaude.ts          # ìˆ˜ì • (useAI ë˜í¼)
â”œâ”€â”€ types/
â”‚   â””â”€â”€ ai.ts                 # ìƒˆë¡œ ìƒì„± (AI íƒ€ì…)
â”œâ”€â”€ components/
â”‚   â””â”€â”€ flow/
â”‚       â””â”€â”€ TaskExecutionDialog.tsx  # ìˆ˜ì • (ì‹¤í–‰ ëª¨ë“œ íƒ­)

server/
â”œâ”€â”€ app.ts                    # ìˆ˜ì • (ë¼ìš°í„° ë“±ë¡)
â”œâ”€â”€ ai/                       # ìƒˆë¡œ ìƒì„±
â”‚   â”œâ”€â”€ index.ts              # API ë¼ìš°í„°
â”‚   â””â”€â”€ executor.ts           # ì‹¤í–‰ ë¡œì§
â””â”€â”€ cli-adapter/
    â”œâ”€â”€ types.ts              # ìˆ˜ì • (model íŒŒë¼ë¯¸í„°)
    â””â”€â”€ process-manager.ts    # ìˆ˜ì • (model ì²˜ë¦¬)
```

## ì„¤ì • íŒŒì¼

### .zyflow/cli-settings.json (ê¸°ì¡´ í˜•ì‹ ìœ ì§€)

```json
{
  "claude": {
    "enabled": true,
    "selectedModel": "sonnet",
    "order": 0
  },
  "gemini": {
    "enabled": true,
    "selectedModel": "gemini-2.5-pro",
    "order": 1
  },
  "codex": {
    "enabled": true,
    "selectedModel": "gpt-5.1-codex",
    "order": 2
  },
  "qwen": {
    "enabled": false,
    "selectedModel": "qwen-coder-plus",
    "order": 3
  }
}
```

## í…ŒìŠ¤íŠ¸ ê³„íš

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- [ ] useAI í›… - execute, stop, reset
- [ ] useSwarm í›… - execute, stop, reset
- [ ] useClaude í•˜ìœ„ í˜¸í™˜ì„±
- [ ] buildArgs - Providerë³„ ì¸ì ìƒì„±
- [ ] Provider ì„¤ì • ë¡œë“œ/ë³‘í•©

### í†µí•© í…ŒìŠ¤íŠ¸
- [ ] /api/ai/execute - Claude ì‹¤í–‰
- [ ] /api/ai/execute - Gemini ì‹¤í–‰
- [ ] /api/claude-flow/execute - Swarm ì‹¤í–‰
- [ ] /api/ai/providers - ëª©ë¡ ì¡°íšŒ
- [ ] SSE ìŠ¤íŠ¸ë¦¬ë° - ì‹¤ì‹œê°„ ë¡œê·¸

### E2E í…ŒìŠ¤íŠ¸
- [ ] UIì—ì„œ ì‹¤í–‰ ëª¨ë“œ íƒ­ ì „í™˜
- [ ] ë‹¨ì¼ ëª¨ë“œ: Provider ì„ íƒ â†’ ì‹¤í–‰ â†’ ì™„ë£Œ
- [ ] Swarm ëª¨ë“œ: Strategy ì„ íƒ â†’ ì‹¤í–‰ â†’ ì™„ë£Œ
- [ ] ë¯¸ì„¤ì¹˜ CLI ë¹„í™œì„±í™” í‘œì‹œ
