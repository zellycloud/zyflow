{"id": "0", "text": "# ZyFlow REST API Documentation\n\nBase URL: `http://localhost:3000/api`\n\n## Projects API\n\n### GET /projects\n프로젝트 목록 조회\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"projects\": [\n      {\n        \"id\": \"project-id\",\n        \"name\": \"project-name\",\n        \"path\": \"/path/to/project\",\n        \"addedAt\": \"2024-01-01T00:00:00.000Z\"\n      }\n    ],\n    \"activeProjectId\": \"project-id\"\n  }\n}\n```\n\n### POST /projects\n새 프로젝트 추가\n\n**Request Body:**\n```json\n{\n  \"path\": \"/path/to/project\"\n}\n```\n\n### DELETE /projects/:id\n프로젝트 제거\n\n### PUT /projects/:id/activate\n프로젝트 활성화\n\n### GET /projects/all-data\n모든 프로젝트와 해당 changes/specs 데이터 조회\n\n---\n\n## Flow Changes API", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "1", "text": "### POST /projects\n새 프로젝트 추가\n\n**Request Body:**\n```json\n{\n  \"path\": \"/path/to/project\"\n}\n```\n\n### DELETE /projects/:id\n프로젝트 제거\n\n### PUT /projects/:id/activate\n프로젝트 활성화\n\n### GET /projects/all-data\n모든 프로젝트와 해당 changes/specs 데이터 조회\n\n---\n\n## Flow Changes API\n\n### GET /flow/changes\n활성 프로젝트의 Flow Changes 목록 조회\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"changes\": [\n      {\n        \"id\": \"change-id\",\n        \"projectId\": \"project-id\",\n        \"title\": \"Change Title\",\n        \"specPath\": \"openspec/changes/change-id/proposal.md\",\n        \"status\": \"active\",\n        \"currentStage\": \"task\",\n        \"progress\": 75,\n        \"createdAt\": \"2024-01-01T00:00:00.000Z\",", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "2", "text": "**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"changes\": [\n      {\n        \"id\": \"change-id\",\n        \"projectId\": \"project-id\",\n        \"title\": \"Change Title\",\n        \"specPath\": \"openspec/changes/change-id/proposal.md\",\n        \"status\": \"active\",\n        \"currentStage\": \"task\",\n        \"progress\": 75,\n        \"createdAt\": \"2024-01-01T00:00:00.000Z\",\n        \"updatedAt\": \"2024-01-01T00:00:00.000Z\",\n        \"stages\": {\n          \"spec\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"changes\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"task\": { \"total\": 4, \"completed\": 3, \"tasks\": [...] },\n          \"code\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "3", "text": "000Z\",\n        \"updatedAt\": \"2024-01-01T00:00:00.000Z\",\n        \"stages\": {\n          \"spec\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"changes\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"task\": { \"total\": 4, \"completed\": 3, \"tasks\": [...] },\n          \"code\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"test\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"commit\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"docs\": { \"total\": 0, \"completed\": 0, \"tasks\": [] }\n        }\n      }\n    ]\n  }\n}\n```\n\n### GET /flow/changes/:id\n특정 Change 상세 조회 (stages 포함)\n\n### GET /flow/changes/counts\n프로젝트별 Change 수 조회", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "4", "text": "\"tasks\": [] },\n          \"test\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"commit\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"docs\": { \"total\": 0, \"completed\": 0, \"tasks\": [] }\n        }\n      }\n    ]\n  }\n}\n```\n\n### GET /flow/changes/:id\n특정 Change 상세 조회 (stages 포함)\n\n### GET /flow/changes/counts\n프로젝트별 Change 수 조회\n\n**Query Parameters:**\n- `status`: `active` | `completed` | `all` (기본값: `active`)\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"counts\": { \"project-id\": 5 },\n    \"detailed\": {\n      \"project-id\": { \"active\": 3, \"completed\": 2, \"total\": 5 }\n    }\n  }\n}\n```\n\n### POST /flow/sync\nOpenSpec 파일에서 Changes 동기화", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "5", "text": "**Query Parameters:**\n- `status`: `active` | `completed` | `all` (기본값: `active`)\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"counts\": { \"project-id\": 5 },\n    \"detailed\": {\n      \"project-id\": { \"active\": 3, \"completed\": 2, \"total\": 5 }\n    }\n  }\n}\n```\n\n### POST /flow/sync\nOpenSpec 파일에서 Changes 동기화\n\n### GET /flow/changes/:id/proposal\nChange의 proposal.md 내용 조회\n\n### GET /flow/changes/:id/design\nChange의 design.md 내용 조회\n\n### GET /flow/changes/:id/spec\nChange의 첫 번째 spec.md 내용 조회\n\n### GET /flow/changes/:changeId/specs/:specId\n특정 spec.md 내용 조회\n\n---\n\n## Flow Tasks API\n\n### GET /flow/tasks\nFlow Tasks 목록 조회", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "6", "text": "### POST /flow/sync\nOpenSpec 파일에서 Changes 동기화\n\n### GET /flow/changes/:id/proposal\nChange의 proposal.md 내용 조회\n\n### GET /flow/changes/:id/design\nChange의 design.md 내용 조회\n\n### GET /flow/changes/:id/spec\nChange의 첫 번째 spec.md 내용 조회\n\n### GET /flow/changes/:changeId/specs/:specId\n특정 spec.md 내용 조회\n\n---\n\n## Flow Tasks API\n\n### GET /flow/tasks\nFlow Tasks 목록 조회\n\n**Query Parameters:**\n- `changeId`: Change ID로 필터링\n- `stage`: Stage로 필터링 (`spec`, `changes`, `task`, `code`, `test`, `commit`, `docs`)\n- `status`: 상태로 필터링 (`todo`, `in-progress`, `review`, `done`)\n- `standalone`: `true`면 독립 태스크만 조회 (change_id = null)\n- `includeArchived`: `true`면 아카이브된 태스크 포함", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "7", "text": "**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"tasks\": [\n      {\n        \"id\": 1,\n        \"changeId\": \"change-id\",\n        \"stage\": \"task\",\n        \"title\": \"Task Title\",\n        \"description\": \"Task Description\",\n        \"status\": \"todo\",\n        \"priority\": \"medium\",\n        \"tags\": [\"tag1\", \"tag2\"],\n        \"assignee\": null,\n        \"order\": 1,\n        \"groupTitle\": \"Group Title\",\n        \"groupOrder\": 1,\n        \"taskOrder\": 1,\n        \"majorTitle\": \"Major Section Title\",\n        \"subOrder\": 1,\n        \"createdAt\": \"2024-01-01T00:00:00.000Z\",\n        \"updatedAt\": \"2024-01-01T00:00:00.000Z\",\n        \"archivedAt\": null\n      }\n    ]\n  }\n}\n```\n\n### POST /flow/tasks\n새 Flow Task 생성", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "8", "text": "### POST /flow/tasks\n새 Flow Task 생성\n\n**Request Body:**\n```json\n{\n  \"changeId\": \"change-id\",\n  \"stage\": \"task\",\n  \"title\": \"Task Title\",\n  \"description\": \"Task Description\",\n  \"priority\": \"medium\"\n}\n```\n\n### PATCH /flow/tasks/:id\nFlow Task 수정\n\n**Request Body:**\n```json\n{\n  \"title\": \"Updated Title\",\n  \"status\": \"done\",\n  \"priority\": \"high\"\n}\n```\n\n---\n\n## Independent Tasks API\n\n### GET /tasks\n태스크 목록 조회\n\n**Query Parameters:**\n- `status`: 상태로 필터링 (`todo`, `in-progress`, `review`, `done`, `archived`)\n- `priority`: 우선순위로 필터링 (`low`, `medium`, `high`)\n- `tags`: 태그로 필터링 (쉼표 구분)\n- `kanban`: `true`면 상태별 그룹화된 형식으로 반환\n\n### POST /tasks\n새 태스크 생성", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "9", "text": "**Query Parameters:**\n- `status`: 상태로 필터링 (`todo`, `in-progress`, `review`, `done`, `archived`)\n- `priority`: 우선순위로 필터링 (`low`, `medium`, `high`)\n- `tags`: 태그로 필터링 (쉼표 구분)\n- `kanban`: `true`면 상태별 그룹화된 형식으로 반환\n\n### POST /tasks\n새 태스크 생성\n\n**Request Body:**\n```json\n{\n  \"title\": \"Task Title\",\n  \"description\": \"Task Description\",\n  \"status\": \"todo\",\n  \"priority\": \"medium\",\n  \"tags\": [\"tag1\", \"tag2\"],\n  \"assignee\": \"user@example.com\"\n}\n```\n\n### GET /tasks/:id\n태스크 상세 조회\n\n### PATCH /tasks/:id\n태스크 수정\n\n### DELETE /tasks/:id\n태스크 삭제\n\n### GET /tasks/search\n태스크 검색 (FTS5 전문 검색)", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "10", "text": "**Request Body:**\n```json\n{\n  \"title\": \"Task Title\",\n  \"description\": \"Task Description\",\n  \"status\": \"todo\",\n  \"priority\": \"medium\",\n  \"tags\": [\"tag1\", \"tag2\"],\n  \"assignee\": \"user@example.com\"\n}\n```\n\n### GET /tasks/:id\n태스크 상세 조회\n\n### PATCH /tasks/:id\n태스크 수정\n\n### DELETE /tasks/:id\n태스크 삭제\n\n### GET /tasks/search\n태스크 검색 (FTS5 전문 검색)\n\n**Query Parameters:**\n- `q`: 검색 쿼리 (필수)\n- `status`: 상태로 필터링\n- `priority`: 우선순위로 필터링\n- `limit`: 최대 결과 수\n\n### POST /tasks/:id/archive\n태스크 아카이브\n\n### POST /tasks/:id/unarchive\n아카이브된 태스크 복원", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "11", "text": "### GET /tasks/search\n태스크 검색 (FTS5 전문 검색)\n\n**Query Parameters:**\n- `q`: 검색 쿼리 (필수)\n- `status`: 상태로 필터링\n- `priority`: 우선순위로 필터링\n- `limit`: 최대 결과 수\n\n### POST /tasks/:id/archive\n태스크 아카이브\n\n### POST /tasks/:id/unarchive\n아카이브된 태스크 복원\n\n### GET /tasks/archived\n아카이브된 태스크 목록 (페이지네이션)\n\n**Query Parameters:**\n- `page`: 페이지 번호 (기본값: 1)\n- `limit`: 페이지당 항목 수 (기본값: 20)\n- `search`: 검색 쿼리\n\n---\n\n## Git API\n\n### GET /git/status\n현재 Git 상태 조회\n\n### GET /git/branch\n현재 브랜치 정보 조회", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "12", "text": "### GET /tasks/archived\n아카이브된 태스크 목록 (페이지네이션)\n\n**Query Parameters:**\n- `page`: 페이지 번호 (기본값: 1)\n- `limit`: 페이지당 항목 수 (기본값: 20)\n- `search`: 검색 쿼리\n\n---\n\n## Git API\n\n### GET /git/status\n현재 Git 상태 조회\n\n### GET /git/branch\n현재 브랜치 정보 조회\n\n### POST /git/checkout\n브랜치 체크아웃\n\n**Request Body:**\n```json\n{\n  \"branch\": \"branch-name\",\n  \"create\": true\n}\n```\n\n### POST /git/commit\n커밋 생성\n\n**Request Body:**\n```json\n{\n  \"message\": \"Commit message\",\n  \"files\": [\"file1.ts\", \"file2.ts\"]\n}\n```\n\n### POST /git/push\n원격 저장소에 푸시\n\n### POST /git/pull\n원격 저장소에서 풀\n\n---", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "13", "text": "**Request Body:**\n```json\n{\n  \"branch\": \"branch-name\",\n  \"create\": true\n}\n```\n\n### POST /git/commit\n커밋 생성\n\n**Request Body:**\n```json\n{\n  \"message\": \"Commit message\",\n  \"files\": [\"file1.ts\", \"file2.ts\"]\n}\n```\n\n### POST /git/push\n원격 저장소에 푸시\n\n### POST /git/pull\n원격 저장소에서 풀\n\n---\n\n## OpenSpec Changes API (Legacy)\n\n### GET /changes\nChanges 목록 조회 (파일 기반)\n\n### GET /changes/:id/tasks\nChange의 tasks.md 파일 파싱 결과 조회\n\n### PATCH /tasks/:changeId/:taskId\ntasks.md 파일에서 태스크 체크박스 토글\n\n### PATCH /tasks/reorder\ntasks.md 파일에서 태스크 순서 재정렬\n\n---\n\n## Specs API\n\n### GET /specs\nSpecs 목록 조회\n\n### GET /specs/:id\nSpec 내용 조회\n\n---\n\n## Claude Code Execution API", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "14", "text": "### GET /changes/:id/tasks\nChange의 tasks.md 파일 파싱 결과 조회\n\n### PATCH /tasks/:changeId/:taskId\ntasks.md 파일에서 태스크 체크박스 토글\n\n### PATCH /tasks/reorder\ntasks.md 파일에서 태스크 순서 재정렬\n\n---\n\n## Specs API\n\n### GET /specs\nSpecs 목록 조회\n\n### GET /specs/:id\nSpec 내용 조회\n\n---\n\n## Claude Code Execution API\n\nClaude Code CLI와 통합하여 OpenSpec 태스크를 자동으로 실행합니다.\n\n### POST /claude/execute\nClaude Code로 태스크 실행 시작 (SSE 스트리밍)\n\n**Request Body:**\n```json\n{\n  \"changeId\": \"change-id\",\n  \"taskId\": \"task-id\",\n  \"taskTitle\": \"Task Title\",\n  \"mode\": \"single\"\n}\n```", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "15", "text": "### GET /specs/:id\nSpec 내용 조회\n\n---\n\n## Claude Code Execution API\n\nClaude Code CLI와 통합하여 OpenSpec 태스크를 자동으로 실행합니다.\n\n### POST /claude/execute\nClaude Code로 태스크 실행 시작 (SSE 스트리밍)\n\n**Request Body:**\n```json\n{\n  \"changeId\": \"change-id\",\n  \"taskId\": \"task-id\",\n  \"taskTitle\": \"Task Title\",\n  \"mode\": \"single\"\n}\n```\n\n**Parameters:**\n| 필드 | 타입 | 필수 | 설명 |\n|------|------|------|------|\n| `changeId` | string | ✅ | OpenSpec Change ID |\n| `taskId` | string | - | 태스크 ID (single 모드에서 사용) |\n| `taskTitle` | string | - | 태스크 제목 (taskId보다 우선 검색) |\n| `mode` | string | - | 실행 모드: `single`, `full`, `analysis` (기본: `full`) |", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "16", "text": "**Parameters:**\n| 필드 | 타입 | 필수 | 설명 |\n|------|------|------|------|\n| `changeId` | string | ✅ | OpenSpec Change ID |\n| `taskId` | string | - | 태스크 ID (single 모드에서 사용) |\n| `taskTitle` | string | - | 태스크 제목 (taskId보다 우선 검색) |\n| `mode` | string | - | 실행 모드: `single`, `full`, `analysis` (기본: `full`) |\n\n**Response:** SSE (Server-Sent Events) 스트림\n\n```\nevent: start\ndata: {\"runId\": \"run-id\", \"status\": \"running\"}\n\nevent: output\ndata: {\"type\": \"assistant\", \"message\": {...}}\n\nevent: output\ndata: {\"type\": \"tool_use\", \"name\": \"Read\", \"input\": {...}}\n\nevent: output\ndata: {\"type\": \"tool_result\", ...}\n\nevent: complete\ndata: {\"status\": \"completed\", \"exitCode\": 0}\n```", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "17", "text": "**Response:** SSE (Server-Sent Events) 스트림\n\n```\nevent: start\ndata: {\"runId\": \"run-id\", \"status\": \"running\"}\n\nevent: output\ndata: {\"type\": \"assistant\", \"message\": {...}}\n\nevent: output\ndata: {\"type\": \"tool_use\", \"name\": \"Read\", \"input\": {...}}\n\nevent: output\ndata: {\"type\": \"tool_result\", ...}\n\nevent: complete\ndata: {\"status\": \"completed\", \"exitCode\": 0}\n```\n\n**SSE 이벤트 타입:**\n| 이벤트 | 설명 |\n|--------|------|\n| `start` | 실행 시작 |\n| `output` | Claude Code 출력 (assistant, tool_use, tool_result) |\n| `error` | 에러 발생 |\n| `complete` | 실행 완료 |\n\n### GET /claude/status/:runId\n실행 상태 조회", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "18", "text": "event: output\ndata: {\"type\": \"tool_result\", ...}\n\nevent: complete\ndata: {\"status\": \"completed\", \"exitCode\": 0}\n```\n\n**SSE 이벤트 타입:**\n| 이벤트 | 설명 |\n|--------|------|\n| `start` | 실행 시작 |\n| `output` | Claude Code 출력 (assistant, tool_use, tool_result) |\n| `error` | 에러 발생 |\n| `complete` | 실행 완료 |\n\n### GET /claude/status/:runId\n실행 상태 조회\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"runId\": \"run-id\",\n    \"status\": \"running\",\n    \"startedAt\": \"2024-01-01T00:00:00.000Z\",\n    \"messages\": [...]\n  }\n}\n```", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "19", "text": "### GET /claude/status/:runId\n실행 상태 조회\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"runId\": \"run-id\",\n    \"status\": \"running\",\n    \"startedAt\": \"2024-01-01T00:00:00.000Z\",\n    \"messages\": [...]\n  }\n}\n```\n\n**Status 값:**\n| 상태 | 설명 |\n|------|------|\n| `idle` | 대기 중 |\n| `running` | 실행 중 |\n| `completed` | 완료 |\n| `error` | 에러 발생 |\n| `stopped` | 사용자에 의해 중지됨 |\n\n### POST /claude/stop/:runId\n실행 중지\n\n실행 중인 Claude Code 프로세스를 강제 종료합니다.\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Execution stopped\"\n}\n```\n\n### GET /claude/logs/:changeId\n실행 로그 조회\n\n특정 Change의 모든 실행 로그를 조회합니다.", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "20", "text": "### POST /claude/stop/:runId\n실행 중지\n\n실행 중인 Claude Code 프로세스를 강제 종료합니다.\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Execution stopped\"\n}\n```\n\n### GET /claude/logs/:changeId\n실행 로그 조회\n\n특정 Change의 모든 실행 로그를 조회합니다.\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"logs\": [\n      {\n        \"runId\": \"run-id\",\n        \"taskId\": \"task-id\",\n        \"status\": \"completed\",\n        \"startedAt\": \"2024-01-01T00:00:00.000Z\",\n        \"completedAt\": \"2024-01-01T00:05:00.000Z\",\n        \"exitCode\": 0\n      }\n    ]\n  }\n}\n```\n\n### 프롬프트 빌더 (OpenSpecPromptBuilder)", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "21", "text": "### 프롬프트 빌더 (OpenSpecPromptBuilder)\n\n`POST /claude/execute` 호출 시 다음 문서가 자동으로 로드되어 프롬프트에 포함됩니다:\n\n| 문서 | 경로 | 설명 |\n|------|------|------|\n| 프로젝트 맥락 | `CLAUDE.md` | 핵심 섹션만 요약 (최대 2000자) |\n| 변경 제안 | `openspec/changes/{id}/proposal.md` | Summary, Motivation 섹션 추출 |\n| 설계 문서 | `openspec/changes/{id}/design.md` | 전체 내용 (최대 3000자) |\n| 태스크 목록 | `openspec/changes/{id}/tasks.md` | 미완료 태스크 또는 특정 태스크 |\n| 관련 스펙 | `openspec/changes/{id}/specs/*.md` | 파일 목록 |", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "22", "text": "**실행 모드별 지시사항:**\n- `full`: 미완료 태스크를 순서대로 구현\n- `single`: 지정된 태스크만 처리\n- `analysis`: 코드 변경 없이 분석만 수행\n\n---\n\n## Health Check\n\n### GET /health\n서버 상태 확인\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"status\": \"ok\",\n    \"timestamp\": \"2024-01-01T00:00:00.000Z\",\n    \"uptime\": 3600\n  }\n}\n```\n\n---\n\n## Error Response\n\n모든 에러 응답은 다음 형식을 따릅니다:\n\n```json\n{\n  \"success\": false,\n  \"error\": \"Error message\"\n}\n```\n\n## Types\n\n### Stage\n```typescript\ntype Stage = 'spec' | 'changes' | 'task' | 'code' | 'test' | 'commit' | 'docs'\n```", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "23", "text": "---\n\n## Error Response\n\n모든 에러 응답은 다음 형식을 따릅니다:\n\n```json\n{\n  \"success\": false,\n  \"error\": \"Error message\"\n}\n```\n\n## Types\n\n### Stage\n```typescript\ntype Stage = 'spec' | 'changes' | 'task' | 'code' | 'test' | 'commit' | 'docs'\n```\n\n### ChangeStatus\n```typescript\ntype ChangeStatus = 'active' | 'completed' | 'archived'\n```\n\n### TaskStatus\n```typescript\ntype TaskStatus = 'todo' | 'in-progress' | 'review' | 'done' | 'archived'\n```\n\n### TaskPriority\n```typescript\ntype TaskPriority = 'low' | 'medium' | 'high'\n```", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "24", "text": "# Claude SDK Skills & Hooks 가이드\n\n## Skills 사용 가이드\n\n### 개요\n\nZyFlow 프로젝트는 4개의 핵심 스킬을 제공하여 일관된 개발 워크플로우를 지원합니다.\n\n### 사용 가능한 Skills\n\n| 스킬 | 위치 | 목적 |\n|------|------|------|\n| OpenSpec | `.claude/skills/openspec/SKILL.md` | 스펙 주도 개발 |\n| Code Review | `.claude/skills/code-review/SKILL.md` | 코드 품질 보증 |\n| Testing | `.claude/skills/testing/SKILL.md` | 테스트 작성 |\n| Git Workflow | `.claude/skills/git-workflow/SKILL.md` | Git 협업 |\n\n### 스킬 참조 방법\n\n스킬은 필요 시 직접 파일을 참조하여 사용합니다:", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "25", "text": "### 스킬 참조 방법\n\n스킬은 필요 시 직접 파일을 참조하여 사용합니다:\n\n```\n# OpenSpec 워크플로우 참조\n.claude/skills/openspec/SKILL.md\n\n# 코드 리뷰 체크리스트 참조\n.claude/skills/code-review/SKILL.md\n```\n\n### 스킬별 주요 용도\n\n#### OpenSpec Skill\n- 변경 제안서(proposal) 작성\n- tasks.md 관리 및 진행 추적\n- 7단계 파이프라인 워크플로우 적용\n- Spec delta 작성 규칙\n\n#### Code Review Skill\n- 코드 품질 체크리스트 적용\n- 보안 검토 항목 확인\n- 리뷰 피드백 템플릿 사용\n- 우선순위별 이슈 분류", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "26", "text": "#### Code Review Skill\n- 코드 품질 체크리스트 적용\n- 보안 검토 항목 확인\n- 리뷰 피드백 템플릿 사용\n- 우선순위별 이슈 분류\n\n#### Testing Skill\n- AAA 패턴 테스트 작성\n- 커버리지 기준 확인\n- 모킹 전략 적용\n- 테스트 안티패턴 회피\n\n#### Git Workflow Skill\n- 브랜치 명명 규칙 준수\n- 한국어 커밋 메시지 작성\n- PR 템플릿 활용\n- 릴리스 프로세스 진행\n\n---\n\n## Hooks 설정 가이드\n\n### 개요\n\nZyFlow는 Claude Code SDK hooks를 활용하여 도구 사용 전후에 자동화된 작업을 수행합니다.\n\n### 설정 파일", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "27", "text": "#### Git Workflow Skill\n- 브랜치 명명 규칙 준수\n- 한국어 커밋 메시지 작성\n- PR 템플릿 활용\n- 릴리스 프로세스 진행\n\n---\n\n## Hooks 설정 가이드\n\n### 개요\n\nZyFlow는 Claude Code SDK hooks를 활용하여 도구 사용 전후에 자동화된 작업을 수행합니다.\n\n### 설정 파일\n\nHooks는 `.claude/settings.json`에 정의되어 있습니다.\n\n### 구성된 Hooks\n\n#### 1. PreToolUse Hooks\n\n**Bash 명령어 실행 전:**\n```json\n{\n  \"matcher\": \"Bash\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks pre-command --validate-safety true --prepare-resources true\"\n  }]\n}\n```\n- 명령어 안전성 검증\n- 필요한 리소스 준비", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "28", "text": "### 설정 파일\n\nHooks는 `.claude/settings.json`에 정의되어 있습니다.\n\n### 구성된 Hooks\n\n#### 1. PreToolUse Hooks\n\n**Bash 명령어 실행 전:**\n```json\n{\n  \"matcher\": \"Bash\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks pre-command --validate-safety true --prepare-resources true\"\n  }]\n}\n```\n- 명령어 안전성 검증\n- 필요한 리소스 준비\n\n**파일 편집 전:**\n```json\n{\n  \"matcher\": \"Write|Edit|MultiEdit\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks pre-edit --auto-assign-agents true --load-context true\"\n  }]\n}\n```\n- 에이전트 자동 할당\n- 컨텍스트 로드\n\n#### 2. PostToolUse Hooks", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "29", "text": "**파일 편집 전:**\n```json\n{\n  \"matcher\": \"Write|Edit|MultiEdit\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks pre-edit --auto-assign-agents true --load-context true\"\n  }]\n}\n```\n- 에이전트 자동 할당\n- 컨텍스트 로드\n\n#### 2. PostToolUse Hooks\n\n**Bash 명령어 실행 후:**\n```json\n{\n  \"matcher\": \"Bash\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks post-command --track-metrics true --store-results true\"\n  }]\n}\n```\n- 메트릭 추적\n- 결과 저장", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "30", "text": "#### 2. PostToolUse Hooks\n\n**Bash 명령어 실행 후:**\n```json\n{\n  \"matcher\": \"Bash\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks post-command --track-metrics true --store-results true\"\n  }]\n}\n```\n- 메트릭 추적\n- 결과 저장\n\n**파일 편집 후:**\n```json\n{\n  \"matcher\": \"Write|Edit|MultiEdit\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks post-edit --format true --update-memory true\"\n  }]\n}\n```\n- 코드 포맷팅\n- 메모리 업데이트\n\n#### 3. PreCompact Hooks\n\n컨텍스트 압축 전 가이드 제공:\n- 사용 가능한 에이전트 알림\n- 동시 실행 패턴 안내\n- SPARC 방법론 참조\n\n#### 4. Stop Hooks", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "31", "text": "#### 3. PreCompact Hooks\n\n컨텍스트 압축 전 가이드 제공:\n- 사용 가능한 에이전트 알림\n- 동시 실행 패턴 안내\n- SPARC 방법론 참조\n\n#### 4. Stop Hooks\n\n세션 종료 시:\n```json\n{\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks session-end --generate-summary true --persist-state true --export-metrics true\"\n  }]\n}\n```\n- 세션 요약 생성\n- 상태 영속화\n- 메트릭 내보내기\n\n### Hook 비활성화\n\n특정 hook을 비활성화하려면 환경 변수를 설정합니다:\n\n```json\n{\n  \"env\": {\n    \"CLAUDE_FLOW_HOOKS_ENABLED\": \"false\"\n  }\n}\n```\n\n### 커스텀 Hook 추가\n\n새 hook을 추가하려면 `.claude/settings.json`의 해당 섹션에 추가:", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "32", "text": "### Hook 비활성화\n\n특정 hook을 비활성화하려면 환경 변수를 설정합니다:\n\n```json\n{\n  \"env\": {\n    \"CLAUDE_FLOW_HOOKS_ENABLED\": \"false\"\n  }\n}\n```\n\n### 커스텀 Hook 추가\n\n새 hook을 추가하려면 `.claude/settings.json`의 해당 섹션에 추가:\n\n```json\n{\n  \"matcher\": \"YourMatcher\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"your-custom-command\"\n  }]\n}\n```\n\n---\n\n## Core Agents\n\n### 개요\n\n5개의 핵심 에이전트가 `.claude/agents/core/`에 정의되어 있습니다.", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "33", "text": "### 커스텀 Hook 추가\n\n새 hook을 추가하려면 `.claude/settings.json`의 해당 섹션에 추가:\n\n```json\n{\n  \"matcher\": \"YourMatcher\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"your-custom-command\"\n  }]\n}\n```\n\n---\n\n## Core Agents\n\n### 개요\n\n5개의 핵심 에이전트가 `.claude/agents/core/`에 정의되어 있습니다.\n\n| 에이전트 | 파일 | 역할 |\n|----------|------|------|\n| Coder | `coder.md` | 코드 작성 전문 |\n| Reviewer | `reviewer.md` | 코드 리뷰 전문 |\n| Tester | `tester.md` | 테스트 작성 전문 |\n| Planner | `planner.md` | 계획 수립 전문 |\n| Researcher | `researcher.md` | 조사/분석 전문 |\n\n---\n\n## 환경 변수\n\n`.claude/settings.json`에 정의된 환경 변수:", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "34", "text": "---\n\n## 환경 변수\n\n`.claude/settings.json`에 정의된 환경 변수:\n\n| 변수 | 기본값 | 설명 |\n|------|--------|------|\n| `CLAUDE_FLOW_AUTO_COMMIT` | false | 자동 커밋 |\n| `CLAUDE_FLOW_AUTO_PUSH` | false | 자동 푸시 |\n| `CLAUDE_FLOW_HOOKS_ENABLED` | true | hooks 활성화 |\n| `CLAUDE_FLOW_TELEMETRY_ENABLED` | true | 텔레메트리 |\n| `CLAUDE_FLOW_CHECKPOINTS_ENABLED` | true | 체크포인트 |", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "35", "text": "# 프로젝트 로컬 설정 (.zyflow)\n\n프로젝트별 독립적인 설정 관리를 위한 로컬 저장소 구조입니다.\n\n## 개요\n\nZyFlow는 두 가지 설정 저장소를 지원합니다:\n\n| 저장소 | 위치 | 용도 |\n|--------|------|------|\n| **전역** | `~/.zyflow/integrations.db` | 서비스 계정 (토큰, API 키) |\n| **로컬** | `프로젝트/.zyflow/` | 프로젝트별 설정 |\n\n로컬 설정이 있으면 **로컬 우선**으로 조회하고, 없으면 전역 DB로 fallback합니다.\n\n## 디렉토리 구조", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "36", "text": "로컬 설정이 있으면 **로컬 우선**으로 조회하고, 없으면 전역 DB로 fallback합니다.\n\n## 디렉토리 구조\n\n```\n프로젝트/\n├── .zyflow/                    # 로컬 설정 디렉토리\n│   ├── settings.json           # 계정 매핑 및 기본 설정\n│   ├── environments/           # 환경별 변수 파일\n│   │   ├── local.env           # 로컬 개발 환경\n│   │   ├── staging.env         # 스테이징 환경\n│   │   └── production.env      # 프로덕션 환경\n│   └── test-accounts.json      # 테스트 계정 (암호화)\n└── ...\n```\n\n## 파일 형식\n\n### settings.json\n\n계정 매핑과 기본 설정을 저장합니다.", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "37", "text": "## 파일 형식\n\n### settings.json\n\n계정 매핑과 기본 설정을 저장합니다.\n\n```json\n{\n  \"version\": 1,\n  \"integrations\": {\n    \"github\": \"uuid-of-github-account\",\n    \"supabase\": \"uuid-of-supabase-account\",\n    \"vercel\": \"uuid-of-vercel-account\",\n    \"sentry\": \"uuid-of-sentry-account\",\n    \"custom\": {\n      \"stripe\": \"uuid-of-stripe-account\"\n    }\n  },\n  \"defaultEnvironment\": \"local\",\n  \"createdAt\": \"2024-01-01T00:00:00.000Z\",\n  \"updatedAt\": \"2024-01-01T00:00:00.000Z\"\n}\n```\n\n**주요 필드:**\n- `integrations`: 서비스별 계정 UUID (전역 DB의 계정 참조)\n- `defaultEnvironment`: 기본 환경 이름\n- `version`: 스키마 버전 (마이그레이션용)\n\n### environments/*.env", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "38", "text": "**주요 필드:**\n- `integrations`: 서비스별 계정 UUID (전역 DB의 계정 참조)\n- `defaultEnvironment`: 기본 환경 이름\n- `version`: 스키마 버전 (마이그레이션용)\n\n### environments/*.env\n\n표준 `.env` 형식의 환경 변수 파일입니다.\n\n```env\n# local.env\nDATABASE_URL=postgres://localhost:5432/myapp_dev\nAPI_KEY=dev-api-key-12345\nREDIS_URL=redis://localhost:6379\n\n# 멀티라인 값은 따옴표로 감싸기\nPRIVATE_KEY=\"-----BEGIN RSA PRIVATE KEY-----\\nMIIE...\"\n```\n\n### test-accounts.json\n\n테스트용 계정 정보를 암호화하여 저장합니다.", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "39", "text": "### environments/*.env\n\n표준 `.env` 형식의 환경 변수 파일입니다.\n\n```env\n# local.env\nDATABASE_URL=postgres://localhost:5432/myapp_dev\nAPI_KEY=dev-api-key-12345\nREDIS_URL=redis://localhost:6379\n\n# 멀티라인 값은 따옴표로 감싸기\nPRIVATE_KEY=\"-----BEGIN RSA PRIVATE KEY-----\\nMIIE...\"\n```\n\n### test-accounts.json\n\n테스트용 계정 정보를 암호화하여 저장합니다.\n\n```json\n{\n  \"version\": 1,\n  \"accounts\": [\n    {\n      \"id\": \"acc-1\",\n      \"role\": \"admin\",\n      \"email\": \"admin@test.com\",\n      \"password\": \"iv:encrypted-password\",\n      \"description\": \"관리자 테스트 계정\"\n    },\n    {\n      \"id\": \"acc-2\",\n      \"role\": \"user\",\n      \"email\": \"user@test.com\",\n      \"password\": \"iv:encrypted-password\"\n    }\n  ]\n}\n```", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "40", "text": "```json\n{\n  \"version\": 1,\n  \"accounts\": [\n    {\n      \"id\": \"acc-1\",\n      \"role\": \"admin\",\n      \"email\": \"admin@test.com\",\n      \"password\": \"iv:encrypted-password\",\n      \"description\": \"관리자 테스트 계정\"\n    },\n    {\n      \"id\": \"acc-2\",\n      \"role\": \"user\",\n      \"email\": \"user@test.com\",\n      \"password\": \"iv:encrypted-password\"\n    }\n  ]\n}\n```\n\n**보안:**\n- 비밀번호는 전역 마스터 키로 암호화됨\n- IV(초기화 벡터)가 비밀번호 앞에 포함됨\n\n## .gitignore 권장 패턴\n\n`.zyflow/` 디렉토리 중 민감한 정보는 버전 관리에서 제외해야 합니다.", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "41", "text": "**보안:**\n- 비밀번호는 전역 마스터 키로 암호화됨\n- IV(초기화 벡터)가 비밀번호 앞에 포함됨\n\n## .gitignore 권장 패턴\n\n`.zyflow/` 디렉토리 중 민감한 정보는 버전 관리에서 제외해야 합니다.\n\n```gitignore\n# .zyflow 로컬 설정\n# 환경 변수 파일 (민감 정보 포함)\n.zyflow/environments/*.env\n\n# 테스트 계정 (암호화되어 있지만 제외 권장)\n.zyflow/test-accounts.json\n\n# settings.json은 커밋 가능 (UUID만 포함)\n# !.zyflow/settings.json\n```\n\n### 권장 설정", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "42", "text": "```gitignore\n# .zyflow 로컬 설정\n# 환경 변수 파일 (민감 정보 포함)\n.zyflow/environments/*.env\n\n# 테스트 계정 (암호화되어 있지만 제외 권장)\n.zyflow/test-accounts.json\n\n# settings.json은 커밋 가능 (UUID만 포함)\n# !.zyflow/settings.json\n```\n\n### 권장 설정\n\n| 파일 | Git 포함 | 이유 |\n|------|----------|------|\n| `settings.json` | O | UUID만 포함, 실제 토큰 없음 |\n| `environments/*.env` | X | API 키, DB 비밀번호 등 포함 |\n| `test-accounts.json` | X | 암호화되어 있지만 보안상 제외 |\n\n## 사용 방법\n\n### 1. 로컬 설정 초기화\n\n```bash\n# MCP 도구 사용\nintegration_init_local(projectPath: \"/path/to/project\")\n```", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "43", "text": "## 사용 방법\n\n### 1. 로컬 설정 초기화\n\n```bash\n# MCP 도구 사용\nintegration_init_local(projectPath: \"/path/to/project\")\n```\n\n또는 UI에서:\n1. 설정 > 프로젝트 관리\n2. 프로젝트 옆 다운로드 버튼 클릭\n3. \"내보내기\" 확인\n\n### 2. 전역 설정을 로컬로 내보내기\n\n```bash\n# MCP 도구 사용\nintegration_export_to_local(\n  projectPath: \"/path/to/project\",\n  projectId: \"project-uuid\"\n)\n```\n\n### 3. 설정 조회 (자동 fallback)\n\n```bash\n# projectPath가 있으면 로컬 우선 조회\nintegration_context(\n  projectId: \"project-uuid\",\n  projectPath: \"/path/to/project\"  # 선택\n)\n```\n\n## API 응답의 source 필드\n\nAPI 응답에는 설정 소스가 표시됩니다:", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "44", "text": "```bash\n# MCP 도구 사용\nintegration_export_to_local(\n  projectPath: \"/path/to/project\",\n  projectId: \"project-uuid\"\n)\n```\n\n### 3. 설정 조회 (자동 fallback)\n\n```bash\n# projectPath가 있으면 로컬 우선 조회\nintegration_context(\n  projectId: \"project-uuid\",\n  projectPath: \"/path/to/project\"  # 선택\n)\n```\n\n## API 응답의 source 필드\n\nAPI 응답에는 설정 소스가 표시됩니다:\n\n```json\n{\n  \"context\": { ... },\n  \"source\": \"local\",      // \"local\" | \"global\"\n  \"sources\": {            // 세부 소스 (하이브리드 시)\n    \"integrations\": \"local\",\n    \"environments\": \"local\",\n    \"testAccounts\": \"global\"\n  }\n}\n```\n\n## 마이그레이션\n\n### 전역에서 로컬로 전환", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "45", "text": "API 응답에는 설정 소스가 표시됩니다:\n\n```json\n{\n  \"context\": { ... },\n  \"source\": \"local\",      // \"local\" | \"global\"\n  \"sources\": {            // 세부 소스 (하이브리드 시)\n    \"integrations\": \"local\",\n    \"environments\": \"local\",\n    \"testAccounts\": \"global\"\n  }\n}\n```\n\n## 마이그레이션\n\n### 전역에서 로컬로 전환\n\n1. UI에서 \"Export to Project\" 클릭\n2. `.zyflow/` 디렉토리가 생성됨\n3. 이후 로컬 설정이 우선 적용됨\n\n### 로컬에서 전역으로 복귀\n\n1. `.zyflow/` 디렉토리 삭제\n2. 자동으로 전역 DB로 fallback\n\n## 관련 MCP 도구", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "46", "text": "1. UI에서 \"Export to Project\" 클릭\n2. `.zyflow/` 디렉토리가 생성됨\n3. 이후 로컬 설정이 우선 적용됨\n\n### 로컬에서 전역으로 복귀\n\n1. `.zyflow/` 디렉토리 삭제\n2. 자동으로 전역 DB로 fallback\n\n## 관련 MCP 도구\n\n| 도구 | 설명 |\n|------|------|\n| `integration_init_local` | .zyflow 디렉토리 초기화 |\n| `integration_export_to_local` | 전역 → 로컬 내보내기 |\n| `integration_context` | 프로젝트 컨텍스트 조회 (로컬 우선) |\n| `integration_get_env` | 환경 변수 조회 (로컬 우선) |\n| `integration_get_test_account` | 테스트 계정 조회 (로컬 우선) |\n\n## 주의사항", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "47", "text": "## 주의사항\n\n1. **계정 토큰은 여전히 전역 DB에 저장됨**\n   - 로컬 `settings.json`에는 UUID만 저장\n   - 실제 토큰은 `~/.zyflow/integrations.db`에서 조회\n\n2. **암호화 키는 전역 마스터 키 사용**\n   - 테스트 계정 비밀번호 복호화에 필요\n   - `~/.zyflow/.master-key` 파일 필요\n\n3. **프로젝트 이동 시**\n   - `.zyflow/` 폴더는 함께 이동\n   - 새 머신에서는 전역 계정 재설정 필요", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "48", "text": "# ZyFlow MCP 도구 사용 가이드\n\nZyFlow MCP 서버는 Claude Code에서 직접 사용할 수 있는 다양한 도구를 제공합니다.\n\n## 설정\n\n### 전역 설정 (~/.claude.json)\n\n```json\n{\n  \"mcpServers\": {\n    \"zyflow\": {\n      \"type\": \"stdio\",\n      \"command\": \"node\",\n      \"args\": [\"/path/to/zyflow/dist/mcp-server/index.js\"],\n      \"env\": {}\n    }\n  }\n}\n```\n\n### 프로젝트별 설정 (.mcp.json)\n\n```json\n{\n  \"mcpServers\": {\n    \"zyflow\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/zyflow/dist/mcp-server/index.js\"],\n      \"env\": {\n        \"ZYFLOW_PROJECT\": \"/path/to/your/project\"\n      }\n    }\n  }\n}\n```\n\n## OpenSpec 도구\n\n### zyflow_list_changes\n\n현재 프로젝트의 OpenSpec 변경 제안 목록을 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "49", "text": "### 프로젝트별 설정 (.mcp.json)\n\n```json\n{\n  \"mcpServers\": {\n    \"zyflow\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/zyflow/dist/mcp-server/index.js\"],\n      \"env\": {\n        \"ZYFLOW_PROJECT\": \"/path/to/your/project\"\n      }\n    }\n  }\n}\n```\n\n## OpenSpec 도구\n\n### zyflow_list_changes\n\n현재 프로젝트의 OpenSpec 변경 제안 목록을 조회합니다.\n\n```\n사용자: \"현재 프로젝트의 변경 제안 목록을 보여줘\"\nClaude: [zyflow_list_changes 호출]\n```\n\n**반환값:**\n- changes: 변경 제안 목록 (id, title, progress, totalTasks, completedTasks)\n- projectPath: 프로젝트 경로\n\n### zyflow_get_tasks\n\n특정 변경 제안의 전체 태스크 목록을 그룹별로 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "50", "text": "```\n사용자: \"현재 프로젝트의 변경 제안 목록을 보여줘\"\nClaude: [zyflow_list_changes 호출]\n```\n\n**반환값:**\n- changes: 변경 제안 목록 (id, title, progress, totalTasks, completedTasks)\n- projectPath: 프로젝트 경로\n\n### zyflow_get_tasks\n\n특정 변경 제안의 전체 태스크 목록을 그룹별로 조회합니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n\n```\n사용자: \"add-user-auth 변경 제안의 태스크 목록을 보여줘\"\nClaude: [zyflow_get_tasks(changeId: \"add-user-auth\") 호출]\n```\n\n### zyflow_get_next_task\n\n다음 미완료 태스크와 실행에 필요한 컨텍스트를 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "51", "text": "**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n\n```\n사용자: \"add-user-auth 변경 제안의 태스크 목록을 보여줘\"\nClaude: [zyflow_get_tasks(changeId: \"add-user-auth\") 호출]\n```\n\n### zyflow_get_next_task\n\n다음 미완료 태스크와 실행에 필요한 컨텍스트를 조회합니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n\n```\n사용자: \"add-user-auth의 다음 태스크가 뭐야?\"\nClaude: [zyflow_get_next_task(changeId: \"add-user-auth\") 호출]\n```\n\n**반환값:**\n- task: 다음 미완료 태스크\n- context: proposal, spec, 관련 파일 정보\n- group: 태스크가 속한 그룹 제목\n\n### zyflow_get_task_context", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "52", "text": "**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n\n```\n사용자: \"add-user-auth의 다음 태스크가 뭐야?\"\nClaude: [zyflow_get_next_task(changeId: \"add-user-auth\") 호출]\n```\n\n**반환값:**\n- task: 다음 미완료 태스크\n- context: proposal, spec, 관련 파일 정보\n- group: 태스크가 속한 그룹 제목\n\n### zyflow_get_task_context\n\n특정 태스크의 상세 컨텍스트를 조회합니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n- `taskId` (필수): 태스크 ID (예: task-1-1)", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "53", "text": "### zyflow_get_task_context\n\n특정 태스크의 상세 컨텍스트를 조회합니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n- `taskId` (필수): 태스크 ID (예: task-1-1)\n\n```\n사용자: \"task-1-1 태스크의 상세 컨텍스트를 보여줘\"\nClaude: [zyflow_get_task_context(changeId: \"add-user-auth\", taskId: \"task-1-1\") 호출]\n```\n\n### zyflow_mark_complete\n\n태스크를 완료로 표시합니다. tasks.md 파일이 자동으로 업데이트됩니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n- `taskId` (필수): 태스크 ID", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "54", "text": "### zyflow_mark_complete\n\n태스크를 완료로 표시합니다. tasks.md 파일이 자동으로 업데이트됩니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n- `taskId` (필수): 태스크 ID\n\n```\n사용자: \"task-1-1 완료로 표시해줘\"\nClaude: [zyflow_mark_complete(changeId: \"add-user-auth\", taskId: \"task-1-1\") 호출]\n```\n\n### zyflow_mark_incomplete\n\n태스크를 미완료로 되돌립니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n- `taskId` (필수): 태스크 ID\n\n---\n\n## 태스크 관리 도구\n\n### task_create\n\n새 태스크를 생성합니다. ID는 순차 번호로 자동 생성됩니다 (TASK-1, TASK-2, ...).", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "55", "text": "### zyflow_mark_incomplete\n\n태스크를 미완료로 되돌립니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n- `taskId` (필수): 태스크 ID\n\n---\n\n## 태스크 관리 도구\n\n### task_create\n\n새 태스크를 생성합니다. ID는 순차 번호로 자동 생성됩니다 (TASK-1, TASK-2, ...).\n\n**파라미터:**\n- `title` (필수): 태스크 제목\n- `description` (선택): 태스크 설명\n- `priority` (선택): 우선순위 (`low`, `medium`, `high`)\n- `tags` (선택): 태그 배열\n- `assignee` (선택): 담당자", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "56", "text": "새 태스크를 생성합니다. ID는 순차 번호로 자동 생성됩니다 (TASK-1, TASK-2, ...).\n\n**파라미터:**\n- `title` (필수): 태스크 제목\n- `description` (선택): 태스크 설명\n- `priority` (선택): 우선순위 (`low`, `medium`, `high`)\n- `tags` (선택): 태그 배열\n- `assignee` (선택): 담당자\n\n```\n사용자: \"API 응답 시간 개선하는 태스크 만들어줘\"\nClaude: [task_create(title: \"API 응답 시간 개선\", priority: \"high\", tags: [\"performance\"]) 호출]\n```\n\n### task_list\n\n태스크 목록을 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "57", "text": "```\n사용자: \"API 응답 시간 개선하는 태스크 만들어줘\"\nClaude: [task_create(title: \"API 응답 시간 개선\", priority: \"high\", tags: [\"performance\"]) 호출]\n```\n\n### task_list\n\n태스크 목록을 조회합니다.\n\n**파라미터:**\n- `status` (선택): 상태 필터 (`todo`, `in-progress`, `review`, `done`, `archived`)\n- `priority` (선택): 우선순위 필터\n- `tags` (선택): 태그 필터 (쉼표 구분)\n- `kanban` (선택): `true`면 상태별로 그룹화\n\n```\n사용자: \"진행 중인 태스크 목록 보여줘\"\nClaude: [task_list(status: \"in-progress\") 호출]\n```\n\n### task_view\n\n태스크 상세 정보를 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "58", "text": "```\n사용자: \"진행 중인 태스크 목록 보여줘\"\nClaude: [task_list(status: \"in-progress\") 호출]\n```\n\n### task_view\n\n태스크 상세 정보를 조회합니다.\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n\n### task_update\n\n태스크를 수정합니다.\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n- `title` (선택): 새 제목\n- `description` (선택): 새 설명\n- `status` (선택): 새 상태\n- `priority` (선택): 새 우선순위\n- `tags` (선택): 새 태그\n- `assignee` (선택): 새 담당자", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "59", "text": "태스크를 수정합니다.\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n- `title` (선택): 새 제목\n- `description` (선택): 새 설명\n- `status` (선택): 새 상태\n- `priority` (선택): 새 우선순위\n- `tags` (선택): 새 태그\n- `assignee` (선택): 새 담당자\n\n```\n사용자: \"TASK-1 상태를 진행 중으로 바꿔줘\"\nClaude: [task_update(id: \"TASK-1\", status: \"in-progress\") 호출]\n```\n\n### task_search\n\n태스크를 검색합니다 (FTS5 전문 검색).", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "60", "text": "```\n사용자: \"TASK-1 상태를 진행 중으로 바꿔줘\"\nClaude: [task_update(id: \"TASK-1\", status: \"in-progress\") 호출]\n```\n\n### task_search\n\n태스크를 검색합니다 (FTS5 전문 검색).\n\n**파라미터:**\n- `query` (필수): 검색 쿼리\n- `status` (선택): 상태 필터\n- `priority` (선택): 우선순위 필터\n- `limit` (선택): 최대 결과 수\n- `includeArchived` (선택): 아카이브 포함 여부\n\n```\n사용자: \"API 관련 태스크 검색해줘\"\nClaude: [task_search(query: \"API\") 호출]\n```\n\n### task_delete\n\n태스크를 삭제합니다.\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n\n### task_archive", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "61", "text": "```\n사용자: \"API 관련 태스크 검색해줘\"\nClaude: [task_search(query: \"API\") 호출]\n```\n\n### task_delete\n\n태스크를 삭제합니다.\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n\n### task_archive\n\n완료된 태스크를 아카이브로 이동합니다.\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n\n### task_unarchive\n\n아카이브된 태스크를 복원합니다 (상태: done).\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n\n---\n\n## Change Log & Replay 도구\n\n### get_events\n\n변경 이벤트를 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "62", "text": "아카이브된 태스크를 복원합니다 (상태: done).\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n\n---\n\n## Change Log & Replay 도구\n\n### get_events\n\n변경 이벤트를 조회합니다.\n\n**파라미터:**\n- `event_types` (선택): 이벤트 타입 필터 배열\n- `severities` (선택): 심각도 필터 배열\n- `sources` (선택): 소스 필터 배열\n- `project_ids` (선택): 프로젝트 ID 필터 배열\n- `change_ids` (선택): Change ID 필터 배열\n- `time_range` (선택): 시간 범위 (`{ start: ISO, end: ISO }`)\n- `limit` (선택): 최대 결과 수\n- `offset` (선택): 건너뛸 결과 수\n- `sort_by` (선택): 정렬 옵션 (`{ field, direction }`)", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "63", "text": "### get_event_statistics\n\n이벤트 통계를 조회합니다.\n\n**파라미터:**\n- `event_types` (선택): 이벤트 타입 필터 배열\n- `time_range` (선택): 시간 범위\n\n### search_events\n\n텍스트로 이벤트를 검색합니다.\n\n**파라미터:**\n- `query` (필수): 검색 쿼리\n- `event_types` (선택): 이벤트 타입 필터 배열\n- `time_range` (선택): 시간 범위\n\n### export_events\n\n이벤트를 내보냅니다.\n\n**파라미터:**\n- `filter` (선택): 이벤트 필터 (get_events와 동일)\n- `format` (선택): 내보내기 형식 (`JSON`, `CSV`, `SQL`)\n\n### create_replay_session\n\n리플레이 세션을 생성합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "64", "text": "**파라미터:**\n- `name` (필수): 세션 이름\n- `description` (선택): 세션 설명\n- `filter` (선택): 이벤트 필터\n- `mode` (선택): 리플레이 모드 (`SAFE`, `FAST`, `VERBOSE`, `DRY_RUN`)\n- `strategy` (선택): 리플레이 전략 (`SEQUENTIAL`, `PARALLEL`, `DEPENDENCY_AWARE`, `SELECTIVE`)\n- `stop_on_error` (선택): 에러 시 중지 여부\n- `enable_validation` (선택): 검증 활성화 여부\n- `enable_rollback` (선택): 롤백 활성화 여부\n- `max_concurrency` (선택): 병렬 실행 시 최대 동시성\n- `skip_events` (선택): 건너뛸 이벤트 ID 배열\n- `include_events` (선택): 포함할 이벤트 ID 배열\n\n### start_replay", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "65", "text": "### start_replay\n\n리플레이 세션을 시작합니다.\n\n**파라미터:**\n- `session_id` (필수): 세션 ID\n\n### get_replay_progress\n\n리플레이 진행 상황을 조회합니다.\n\n**파라미터:**\n- `session_id` (필수): 세션 ID\n\n---\n\n## 사용 예시\n\n### 연속 태스크 실행 워크플로우\n\n```\n사용자: \"add-user-auth 변경 제안의 다음 태스크를 실행해줘\"\n\nClaude: [zyflow_get_next_task(changeId: \"add-user-auth\") 호출]\n        다음 태스크: \"사용자 인증 API 엔드포인트 구현\"\n\n        [작업 수행...]\n\n        완료했습니다. 태스크를 완료로 표시할까요?\n\n사용자: \"응\"", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "66", "text": "```\n사용자: \"add-user-auth 변경 제안의 다음 태스크를 실행해줘\"\n\nClaude: [zyflow_get_next_task(changeId: \"add-user-auth\") 호출]\n        다음 태스크: \"사용자 인증 API 엔드포인트 구현\"\n\n        [작업 수행...]\n\n        완료했습니다. 태스크를 완료로 표시할까요?\n\n사용자: \"응\"\n\nClaude: [zyflow_mark_complete(changeId: \"add-user-auth\", taskId: \"task-2-1\") 호출]\n        태스크가 완료되었습니다. (8/10 완료)\n```\n\n### 독립 태스크 관리\n\n```\n사용자: \"버그 수정 태스크를 만들어줘: 로그인 시 세션 만료 문제\"", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "67", "text": "사용자: \"응\"\n\nClaude: [zyflow_mark_complete(changeId: \"add-user-auth\", taskId: \"task-2-1\") 호출]\n        태스크가 완료되었습니다. (8/10 완료)\n```\n\n### 독립 태스크 관리\n\n```\n사용자: \"버그 수정 태스크를 만들어줘: 로그인 시 세션 만료 문제\"\n\nClaude: [task_create(\n          title: \"버그 수정: 로그인 시 세션 만료 문제\",\n          priority: \"high\",\n          tags: [\"bug\", \"auth\"]\n        ) 호출]\n\n        태스크 TASK-15가 생성되었습니다.\n\n사용자: \"작업 시작할게\"\n\nClaude: [task_update(id: \"TASK-15\", status: \"in-progress\") 호출]\n        TASK-15 상태가 \"in-progress\"로 변경되었습니다.\n```\n\n### 칸반 보드 조회", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "68", "text": "Claude: [task_create(\n          title: \"버그 수정: 로그인 시 세션 만료 문제\",\n          priority: \"high\",\n          tags: [\"bug\", \"auth\"]\n        ) 호출]\n\n        태스크 TASK-15가 생성되었습니다.\n\n사용자: \"작업 시작할게\"\n\nClaude: [task_update(id: \"TASK-15\", status: \"in-progress\") 호출]\n        TASK-15 상태가 \"in-progress\"로 변경되었습니다.\n```\n\n### 칸반 보드 조회\n\n```\n사용자: \"현재 태스크 현황을 칸반 형식으로 보여줘\"\n\nClaude: [task_list(kanban: true) 호출]\n\n        ## Todo (3개)\n        - TASK-10: API 문서 작성\n        - TASK-11: 테스트 케이스 추가\n        - TASK-12: 성능 최적화", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "69", "text": "### 칸반 보드 조회\n\n```\n사용자: \"현재 태스크 현황을 칸반 형식으로 보여줘\"\n\nClaude: [task_list(kanban: true) 호출]\n\n        ## Todo (3개)\n        - TASK-10: API 문서 작성\n        - TASK-11: 테스트 케이스 추가\n        - TASK-12: 성능 최적화\n\n        ## In Progress (2개)\n        - TASK-13: 인증 버그 수정\n        - TASK-14: UI 개선\n\n        ## Done (5개)\n        - TASK-1 ~ TASK-9\n```\n\n---\n\n## Integration Hub 도구\n\n프로젝트별 서비스 계정, 환경 설정, 테스트 계정을 관리하는 도구입니다.\n\n### integration_context", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "70", "text": "## In Progress (2개)\n        - TASK-13: 인증 버그 수정\n        - TASK-14: UI 개선\n\n        ## Done (5개)\n        - TASK-1 ~ TASK-9\n```\n\n---\n\n## Integration Hub 도구\n\n프로젝트별 서비스 계정, 환경 설정, 테스트 계정을 관리하는 도구입니다.\n\n### integration_context\n\n프로젝트의 통합 컨텍스트를 조회합니다. 연결된 서비스 계정, 환경 목록, 테스트 계정 정보를 반환합니다.\n\n**파라미터:**\n- `projectId` (필수): 프로젝트 ID", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "71", "text": "---\n\n## Integration Hub 도구\n\n프로젝트별 서비스 계정, 환경 설정, 테스트 계정을 관리하는 도구입니다.\n\n### integration_context\n\n프로젝트의 통합 컨텍스트를 조회합니다. 연결된 서비스 계정, 환경 목록, 테스트 계정 정보를 반환합니다.\n\n**파라미터:**\n- `projectId` (필수): 프로젝트 ID\n\n**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"context\": {\n    \"github\": { \"username\": \"myuser\", \"email\": \"user@example.com\" },\n    \"supabase\": { \"projectUrl\": \"https://xxx.supabase.co\" },\n    \"environments\": [\n      { \"id\": \"env1\", \"name\": \"local\", \"isActive\": true }\n    ],\n    \"testAccounts\": [\n      { \"role\": \"admin\", \"email\": \"admin@test.com\" }\n    ]\n  }\n}\n```", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "72", "text": "**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"context\": {\n    \"github\": { \"username\": \"myuser\", \"email\": \"user@example.com\" },\n    \"supabase\": { \"projectUrl\": \"https://xxx.supabase.co\" },\n    \"environments\": [\n      { \"id\": \"env1\", \"name\": \"local\", \"isActive\": true }\n    ],\n    \"testAccounts\": [\n      { \"role\": \"admin\", \"email\": \"admin@test.com\" }\n    ]\n  }\n}\n```\n\n> **참고:** 민감한 정보(토큰, 비밀번호)는 포함되지 않습니다.\n\n### integration_list_accounts\n\n등록된 서비스 계정 목록을 조회합니다.\n\n**파라미터:**\n- `type` (선택): 서비스 타입 필터 (`github`, `supabase`, `vercel`, `sentry`, `custom`)", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "73", "text": "> **참고:** 민감한 정보(토큰, 비밀번호)는 포함되지 않습니다.\n\n### integration_list_accounts\n\n등록된 서비스 계정 목록을 조회합니다.\n\n**파라미터:**\n- `type` (선택): 서비스 타입 필터 (`github`, `supabase`, `vercel`, `sentry`, `custom`)\n\n**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"accounts\": [\n    {\n      \"id\": \"acc1\",\n      \"type\": \"github\",\n      \"name\": \"My GitHub\",\n      \"credentials\": { \"username\": \"myuser\", \"pat\": \"ghp_...xxxx\" }\n    }\n  ]\n}\n```\n\n> **참고:** 민감 정보는 마스킹되어 반환됩니다.\n\n### integration_get_env\n\n프로젝트의 환경 설정 및 환경 변수를 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "74", "text": "> **참고:** 민감 정보는 마스킹되어 반환됩니다.\n\n### integration_get_env\n\n프로젝트의 환경 설정 및 환경 변수를 조회합니다.\n\n**파라미터:**\n- `projectId` (필수): 프로젝트 ID\n- `envId` (선택): 환경 ID (미지정 시 활성 환경 반환)\n\n**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"environment\": {\n    \"id\": \"env1\",\n    \"name\": \"local\",\n    \"serverUrl\": \"http://localhost:3000\",\n    \"isActive\": true\n  },\n  \"variables\": {\n    \"DATABASE_URL\": \"postgresql://...\",\n    \"API_KEY\": \"sk-xxx\"\n  }\n}\n```\n\n> **참고:** 환경 변수는 복호화된 원본으로 반환됩니다.\n\n### integration_apply_git", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "75", "text": "**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"environment\": {\n    \"id\": \"env1\",\n    \"name\": \"local\",\n    \"serverUrl\": \"http://localhost:3000\",\n    \"isActive\": true\n  },\n  \"variables\": {\n    \"DATABASE_URL\": \"postgresql://...\",\n    \"API_KEY\": \"sk-xxx\"\n  }\n}\n```\n\n> **참고:** 환경 변수는 복호화된 원본으로 반환됩니다.\n\n### integration_apply_git\n\n프로젝트에 연결된 GitHub 계정의 git config를 현재 디렉토리에 적용합니다.\n\n**파라미터:**\n- `projectId` (필수): 프로젝트 ID\n- `scope` (선택): git config 범위 (`local`, `global`), 기본값: `local`", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "76", "text": "> **참고:** 환경 변수는 복호화된 원본으로 반환됩니다.\n\n### integration_apply_git\n\n프로젝트에 연결된 GitHub 계정의 git config를 현재 디렉토리에 적용합니다.\n\n**파라미터:**\n- `projectId` (필수): 프로젝트 ID\n- `scope` (선택): git config 범위 (`local`, `global`), 기본값: `local`\n\n**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"applied\": {\n    \"user.name\": \"myuser\",\n    \"user.email\": \"user@example.com\"\n  },\n  \"scope\": \"local\",\n  \"message\": \"Git config applied: user.name=\\\"myuser\\\", user.email=\\\"user@example.com\\\"\"\n}\n```\n\n### integration_get_test_account\n\n프로젝트의 테스트 계정 정보를 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "77", "text": "**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"applied\": {\n    \"user.name\": \"myuser\",\n    \"user.email\": \"user@example.com\"\n  },\n  \"scope\": \"local\",\n  \"message\": \"Git config applied: user.name=\\\"myuser\\\", user.email=\\\"user@example.com\\\"\"\n}\n```\n\n### integration_get_test_account\n\n프로젝트의 테스트 계정 정보를 조회합니다.\n\n**파라미터:**\n- `projectId` (필수): 프로젝트 ID\n- `role` (선택): 역할 필터 (예: `admin`, `user`)\n\n**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"accounts\": [\n    {\n      \"role\": \"admin\",\n      \"email\": \"admin@test.com\",\n      \"password\": \"actualPassword123\",\n      \"description\": \"관리자 테스트 계정\"\n    }\n  ]\n}\n```", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "78", "text": "**파라미터:**\n- `projectId` (필수): 프로젝트 ID\n- `role` (선택): 역할 필터 (예: `admin`, `user`)\n\n**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"accounts\": [\n    {\n      \"role\": \"admin\",\n      \"email\": \"admin@test.com\",\n      \"password\": \"actualPassword123\",\n      \"description\": \"관리자 테스트 계정\"\n    }\n  ]\n}\n```\n\n> **참고:** 비밀번호는 복호화된 원본으로 반환됩니다.\n\n### Integration Hub 사용 예시\n\n#### E2E 테스트 계정 사용\n\n```\n사용자: \"관리자 테스트 계정으로 로그인해서 테스트해줘\"\n\nClaude: [integration_get_test_account(projectId: \"my-project\", role: \"admin\") 호출]\n        테스트 계정: admin@test.com / password123", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "79", "text": "> **참고:** 비밀번호는 복호화된 원본으로 반환됩니다.\n\n### Integration Hub 사용 예시\n\n#### E2E 테스트 계정 사용\n\n```\n사용자: \"관리자 테스트 계정으로 로그인해서 테스트해줘\"\n\nClaude: [integration_get_test_account(projectId: \"my-project\", role: \"admin\") 호출]\n        테스트 계정: admin@test.com / password123\n\n        [해당 계정으로 E2E 테스트 수행...]\n```\n\n#### 멀티 계정 프로젝트에서 Git 설정\n\n```\n사용자: \"이 프로젝트에 맞는 git 설정 적용해줘\"\n\nClaude: [integration_apply_git(projectId: \"company-project\") 호출]\n        Git config가 적용되었습니다:\n        - user.name: \"company-user\"\n        - user.email: \"dev@company.com\"\n```\n\n#### 환경 변수 확인", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "80", "text": "[해당 계정으로 E2E 테스트 수행...]\n```\n\n#### 멀티 계정 프로젝트에서 Git 설정\n\n```\n사용자: \"이 프로젝트에 맞는 git 설정 적용해줘\"\n\nClaude: [integration_apply_git(projectId: \"company-project\") 호출]\n        Git config가 적용되었습니다:\n        - user.name: \"company-user\"\n        - user.email: \"dev@company.com\"\n```\n\n#### 환경 변수 확인\n\n```\n사용자: \"현재 프로젝트의 데이터베이스 URL이 뭐야?\"\n\nClaude: [integration_get_env(projectId: \"my-project\") 호출]\n        현재 환경: local\n        DATABASE_URL: postgresql://localhost:5432/mydb\n```", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "81", "text": "# Multi-Provider Support Implementation\n\n## 개요\nSwarm 실행 시 다중 AI Provider를 지원하도록 확장 완료\n\n## 수정된 파일\n- `/Users/hansoo./ZELLYY/zyflow/server/claude-flow/executor.ts`\n\n## 구현된 기능\n\n### 1. Provider별 CLI 명령어 생성 (`buildProviderCommand`)\n```typescript\nprivate buildProviderCommand(provider: string, model?: string): { command: string; args: string[] }\n```\n\n**지원 Provider:**\n- `claude`: Claude Code CLI (stream-json 형식)\n- `gemini`: Gemini CLI\n- `qwen`: Qwen Code CLI\n- `kilo`: Kilo Code CLI\n- `opencode`: OpenCode CLI\n- `codex`: Codex CLI", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "82", "text": "## 구현된 기능\n\n### 1. Provider별 CLI 명령어 생성 (`buildProviderCommand`)\n```typescript\nprivate buildProviderCommand(provider: string, model?: string): { command: string; args: string[] }\n```\n\n**지원 Provider:**\n- `claude`: Claude Code CLI (stream-json 형식)\n- `gemini`: Gemini CLI\n- `qwen`: Qwen Code CLI\n- `kilo`: Kilo Code CLI\n- `opencode`: OpenCode CLI\n- `codex`: Codex CLI\n\n**특징:**\n- Provider별 CLI 명령어 자동 매핑\n- 모델 파라미터 동적 처리\n- Claude의 경우 모델명 자동 변환 (opus → claude-opus-4-5-20251101)\n\n### 2. Provider별 출력 파싱 (`parseOutput`, `parseClaudeOutput`, `parseTextOutput`)", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "83", "text": "**특징:**\n- Provider별 CLI 명령어 자동 매핑\n- 모델 파라미터 동적 처리\n- Claude의 경우 모델명 자동 변환 (opus → claude-opus-4-5-20251101)\n\n### 2. Provider별 출력 파싱 (`parseOutput`, `parseClaudeOutput`, `parseTextOutput`)\n\n**출력 파싱 전략:**\n- **Claude**: JSON (stream-json 형식) 파싱 우선\n- **기타 Provider**: 텍스트 파싱 (JSON 시도 후 fallback)\n\n**구현된 메서드:**\n1. `parseOutput()`: Provider 감지 및 적절한 파서 호출\n2. `parseClaudeOutput()`: Claude JSON 형식 파싱\n3. `parseTextOutput()`: 일반 텍스트 파싱 (다른 Provider용)", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "84", "text": "**출력 파싱 전략:**\n- **Claude**: JSON (stream-json 형식) 파싱 우선\n- **기타 Provider**: 텍스트 파싱 (JSON 시도 후 fallback)\n\n**구현된 메서드:**\n1. `parseOutput()`: Provider 감지 및 적절한 파서 호출\n2. `parseClaudeOutput()`: Claude JSON 형식 파싱\n3. `parseTextOutput()`: 일반 텍스트 파싱 (다른 Provider용)\n\n### 3. 실행 로그 개선\nProvider 정보가 포함된 상세 로그:\n```\nGEMINI 실행 중... (Swarm 모드) - 모델: gemini-2.5-pro\n```\n\nSwarm 지시사항에도 Provider 정보 포함:\n```\n## Swarm 실행 모드\n- Provider: gemini\n- 전략: development\n- 최대 에이전트: 5\n```\n\n## 사용 예시", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "85", "text": "### 3. 실행 로그 개선\nProvider 정보가 포함된 상세 로그:\n```\nGEMINI 실행 중... (Swarm 모드) - 모델: gemini-2.5-pro\n```\n\nSwarm 지시사항에도 Provider 정보 포함:\n```\n## Swarm 실행 모드\n- Provider: gemini\n- 전략: development\n- 최대 에이전트: 5\n```\n\n## 사용 예시\n\n### useSwarm 훅에서 사용\n```typescript\nconst { execute } = useSwarm()\n\nawait execute({\n  projectPath: '/path/to/project',\n  changeId: 'add-feature',\n  strategy: 'development',\n  maxAgents: 5,\n  provider: 'gemini',  // 새로 추가된 파라미터\n  model: 'gemini-2.5-pro'  // 새로 추가된 파라미터\n})\n```", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "86", "text": "## 사용 예시\n\n### useSwarm 훅에서 사용\n```typescript\nconst { execute } = useSwarm()\n\nawait execute({\n  projectPath: '/path/to/project',\n  changeId: 'add-feature',\n  strategy: 'development',\n  maxAgents: 5,\n  provider: 'gemini',  // 새로 추가된 파라미터\n  model: 'gemini-2.5-pro'  // 새로 추가된 파라미터\n})\n```\n\n### API 요청\n```typescript\nPOST /api/claude-flow/execute\n{\n  \"projectPath\": \"/path/to/project\",\n  \"changeId\": \"add-feature\",\n  \"mode\": \"full\",\n  \"strategy\": \"development\",\n  \"maxAgents\": 5,\n  \"provider\": \"qwen\",\n  \"model\": \"qwen-coder-plus\"\n}\n```\n\n## 기술적 세부사항", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "87", "text": "### API 요청\n```typescript\nPOST /api/claude-flow/execute\n{\n  \"projectPath\": \"/path/to/project\",\n  \"changeId\": \"add-feature\",\n  \"mode\": \"full\",\n  \"strategy\": \"development\",\n  \"maxAgents\": 5,\n  \"provider\": \"qwen\",\n  \"model\": \"qwen-coder-plus\"\n}\n```\n\n## 기술적 세부사항\n\n### 1. Provider 감지 및 기본값\n```typescript\nconst provider = instance.status.request.provider || 'claude'\n```\n- Provider 미지정 시 'claude' 기본값 사용\n\n### 2. CLI 명령어 생성 프로세스\n1. `buildProviderCommand()`에서 Provider별 command + args 생성\n2. Bash 스크립트로 래핑하여 stdin 리다이렉션 처리\n3. 임시 파일에 프롬프트 저장 (쉘 이스케이프 방지)", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "88", "text": "### 2. CLI 명령어 생성 프로세스\n1. `buildProviderCommand()`에서 Provider별 command + args 생성\n2. Bash 스크립트로 래핑하여 stdin 리다이렉션 처리\n3. 임시 파일에 프롬프트 저장 (쉘 이스케이프 방지)\n\n### 3. 출력 파싱 확장성\n- Provider별 커스텀 파싱 로직 추가 가능\n- JSON 및 텍스트 모두 지원\n- 기존 Claude JSON 형식과 완벽 호환\n\n## 향후 확장 가능성\n\n### 1. Provider별 출력 형식 처리\n각 Provider의 고유한 출력 형식에 맞춘 파서 추가:\n```typescript\ncase 'gemini':\n  return this.parseGeminiOutput(executionId, line)\ncase 'qwen':\n  return this.parseQwenOutput(executionId, line)\n```", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "89", "text": "## 향후 확장 가능성\n\n### 1. Provider별 출력 형식 처리\n각 Provider의 고유한 출력 형식에 맞춘 파서 추가:\n```typescript\ncase 'gemini':\n  return this.parseGeminiOutput(executionId, line)\ncase 'qwen':\n  return this.parseQwenOutput(executionId, line)\n```\n\n### 2. Provider별 기능 지원\n- Stream 모드 지원 여부\n- Tool calling 방식 차이 처리\n- 비용 추적 형식 통일\n\n### 3. 동적 Provider 추가\nCLI Adapter의 `DEFAULT_CLI_PROFILES`를 활용한 동적 프로필 지원\n\n## 타입 정의", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "90", "text": "### 2. Provider별 기능 지원\n- Stream 모드 지원 여부\n- Tool calling 방식 차이 처리\n- 비용 추적 형식 통일\n\n### 3. 동적 Provider 추가\nCLI Adapter의 `DEFAULT_CLI_PROFILES`를 활용한 동적 프로필 지원\n\n## 타입 정의\n\n### ExecutionRequest (types.ts)\n```typescript\nexport interface ExecutionRequest {\n  projectPath: string\n  changeId: string\n  taskId?: string\n  mode: ExecutionMode\n  strategy?: SwarmStrategy\n  maxAgents?: number\n  timeout?: number\n  provider?: AIProvider  // 추가됨\n  model?: string  // 추가됨\n}\n```\n\n### AIProvider (types.ts)\n```typescript\nexport type AIProvider = 'claude' | 'gemini' | 'codex' | 'qwen' | 'kilo' | 'opencode' | 'custom'\n```\n\n## 테스트 시나리오", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "91", "text": "### AIProvider (types.ts)\n```typescript\nexport type AIProvider = 'claude' | 'gemini' | 'codex' | 'qwen' | 'kilo' | 'opencode' | 'custom'\n```\n\n## 테스트 시나리오\n\n### 1. Claude Provider (기본)\n- 모델: opus, sonnet, haiku\n- 출력: stream-json\n- 검증: 기존 기능 정상 작동 확인\n\n### 2. Gemini Provider\n- 모델: gemini-2.5-flash, gemini-2.5-pro\n- 출력: 텍스트 (JSON fallback)\n- 검증: CLI 정상 호출, 로그 출력 확인\n\n### 3. 기타 Provider (qwen, kilo, opencode, codex)\n- 모델: Provider별 기본값\n- 출력: 텍스트\n- 검증: 명령어 생성 및 실행 확인", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "92", "text": "### 2. Gemini Provider\n- 모델: gemini-2.5-flash, gemini-2.5-pro\n- 출력: 텍스트 (JSON fallback)\n- 검증: CLI 정상 호출, 로그 출력 확인\n\n### 3. 기타 Provider (qwen, kilo, opencode, codex)\n- 모델: Provider별 기본값\n- 출력: 텍스트\n- 검증: 명령어 생성 및 실행 확인\n\n## 호환성\n- 기존 코드와 100% 하위 호환\n- Provider 미지정 시 Claude 기본 동작\n- useSwarm 훅 인터페이스 확장 (기존 파라미터 유지)\n\n## 마이그레이션 가이드\n기존 코드 수정 불필요. 필요시 provider/model 파라미터만 추가:", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "93", "text": "## 호환성\n- 기존 코드와 100% 하위 호환\n- Provider 미지정 시 Claude 기본 동작\n- useSwarm 훅 인터페이스 확장 (기존 파라미터 유지)\n\n## 마이그레이션 가이드\n기존 코드 수정 불필요. 필요시 provider/model 파라미터만 추가:\n\n```diff\nawait execute({\n  projectPath: '/path',\n  changeId: 'id',\n+ provider: 'gemini',\n+ model: 'gemini-2.5-pro'\n})\n```", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "94", "text": "# claude-flow 외부 의존성 제거 완료\n\n## 변경 요약\n\n**작업일**: 2026-01-08  \n**목적**: 외부 `claude-flow@alpha` 패키지 의존성을 제거하고, 내부 구현으로 전환\n\n## 제거된 항목\n\n### 1. 서버 코드\n- ✅ `server/claude-flow/executor.ts` - 이전에 제거됨\n- ✅ `server/claude-flow/consensus.ts` - 이전에 제거됨\n- ✅ 라우트 `server/routes/claude-flow.ts` - 이전에 제거됨\n- ✅ `server/claude-flow/types.ts` - prompt-builder 의존성만 유지", "metadata": {"file_path": "docs/phase4-claude-flow-removal.md", "file_name": "phase4-claude-flow-removal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "95", "text": "## 제거된 항목\n\n### 1. 서버 코드\n- ✅ `server/claude-flow/executor.ts` - 이전에 제거됨\n- ✅ `server/claude-flow/consensus.ts` - 이전에 제거됨\n- ✅ 라우트 `server/routes/claude-flow.ts` - 이전에 제거됨\n- ✅ `server/claude-flow/types.ts` - prompt-builder 의존성만 유지\n\n### 2. 프론트엔드 코드\n- ✅ `src/hooks/useClaudeFlowExecution.ts` - **제거됨**\n  - `useSwarm.ts`의 하위 호환 래퍼로 대체\n- ✅ `src/config/api.ts` - `claudeFlow` 엔드포인트 제거됨\n- ✅ `src/components/claude-flow/ExecutionPanel.tsx` - import 경로 수정됨", "metadata": {"file_path": "docs/phase4-claude-flow-removal.md", "file_name": "phase4-claude-flow-removal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "96", "text": "### 3. Claude SDK 설정\n- ✅ `.claude/settings.json` - claude-flow@alpha 관련 항목 제거됨\n  - `env.CLAUDE_FLOW_*` 환경변수 제거\n  - `permissions.allow` 에서 `npx claude-flow:*` 제거\n  - `hooks.PreToolUse` - claude-flow@alpha hooks 제거\n  - `hooks.PostToolUse` - claude-flow@alpha hooks 제거\n  - `hooks.Stop` - claude-flow@alpha session-end 제거\n  - `enabledMcpjsonServers` - claude-flow 제거\n\n### 4. 스펙 정리\n- ✅ `openspec/specs/claude-flow-execution/` → `openspec/archive/claude-flow-execution/` 로 이동\n\n## 유지된 항목", "metadata": {"file_path": "docs/phase4-claude-flow-removal.md", "file_name": "phase4-claude-flow-removal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "97", "text": "### 4. 스펙 정리\n- ✅ `openspec/specs/claude-flow-execution/` → `openspec/archive/claude-flow-execution/` 로 이동\n\n## 유지된 항목\n\n### 내부 구현 (prompt-builder)\n`server/claude-flow/prompt-builder.ts`는 유지됩니다:\n- OpenSpec 문서를 AI 프롬프트로 변환하는 핵심 기능\n- `server/ai/index.ts`에서 사용 중\n- 외부 의존성 없이 독립적으로 동작\n\n### 타입 정의\n`src/types/index.ts`의 claude-flow 관련 타입들:\n- `ClaudeFlowExecutionMode`, `ClaudeFlowStrategy` 등\n- UI 컴포넌트와 API 호환성을 위해 유지\n- 추후 리네이밍 가능 (예: `ExecutionMode`, `Strategy`)", "metadata": {"file_path": "docs/phase4-claude-flow-removal.md", "file_name": "phase4-claude-flow-removal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "98", "text": "### 타입 정의\n`src/types/index.ts`의 claude-flow 관련 타입들:\n- `ClaudeFlowExecutionMode`, `ClaudeFlowStrategy` 등\n- UI 컴포넌트와 API 호환성을 위해 유지\n- 추후 리네이밍 가능 (예: `ExecutionMode`, `Strategy`)\n\n### 프론트엔드 컴포넌트\n`src/components/claude-flow/` 디렉토리:\n- `ExecutionPanel.tsx` - 실행 패널 UI\n- `LogViewer.tsx` - 로그 뷰어\n- `ProgressIndicator.tsx` - 진행 상태 표시\n\n## 테스트 결과\n\n- ✅ `npm run lint` - 통과 (기존 경고만 존재)\n- ✅ `npm run build` - 성공\n\n## 다음 단계 (선택사항)", "metadata": {"file_path": "docs/phase4-claude-flow-removal.md", "file_name": "phase4-claude-flow-removal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "99", "text": "## 테스트 결과\n\n- ✅ `npm run lint` - 통과 (기존 경고만 존재)\n- ✅ `npm run build` - 성공\n\n## 다음 단계 (선택사항)\n\n1. **타입 리네이밍**: `ClaudeFlow*` 타입들을 `AI*` 또는 `Execution*`으로 변경\n2. **컴포넌트 디렉토리 이동**: `src/components/claude-flow/` → `src/components/ai-execution/`\n3. **내부 모듈 리팩토링**: `server/claude-flow/` → `server/prompt-builder/`\n\n---\n\n작성자: AI Assistant  \nPhase 4 SDK 리팩토링 작업의 일부로 진행됨", "metadata": {"file_path": "docs/phase4-claude-flow-removal.md", "file_name": "phase4-claude-flow-removal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "100", "text": "# Phase 4 마이그레이션 완료 보고서\n\n**완료일**: 2026-01-08  \n**변경 ID**: `refactor-phase4-sdk`\n\n---\n\n## 📋 개요\n\nPhase 4는 Claude SDK 정렬을 목표로, 불필요한 에이전트 제거, 핵심 Skills 생성, Hooks 설정 확인, MCP 설정 정리, 그리고 CLAUDE.md 최종 정리를 수행했습니다.\n\n## ✅ 완료된 작업\n\n### 1. .claude/agents 정리", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "101", "text": "**완료일**: 2026-01-08  \n**변경 ID**: `refactor-phase4-sdk`\n\n---\n\n## 📋 개요\n\nPhase 4는 Claude SDK 정렬을 목표로, 불필요한 에이전트 제거, 핵심 Skills 생성, Hooks 설정 확인, MCP 설정 정리, 그리고 CLAUDE.md 최종 정리를 수행했습니다.\n\n## ✅ 완료된 작업\n\n### 1. .claude/agents 정리\n\n| 작업 | 상태 | 비고 |\n|------|------|------|\n| consensus/ 제거 | ✅ | 이미 없음 |\n| hive-mind/ 제거 | ✅ | 이미 없음 |\n| neural/ 제거 | ✅ | 이미 없음 |\n| swarm/ 제거 | ✅ | 이미 없음 |\n| flow-nexus/ 제거 | ✅ | 이미 없음 |\n| optimization/ 제거 | ✅ | 이미 없음 |\n| training/ 제거 | ✅ | 이미 없음 |", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "102", "text": "### 1. .claude/agents 정리\n\n| 작업 | 상태 | 비고 |\n|------|------|------|\n| consensus/ 제거 | ✅ | 이미 없음 |\n| hive-mind/ 제거 | ✅ | 이미 없음 |\n| neural/ 제거 | ✅ | 이미 없음 |\n| swarm/ 제거 | ✅ | 이미 없음 |\n| flow-nexus/ 제거 | ✅ | 이미 없음 |\n| optimization/ 제거 | ✅ | 이미 없음 |\n| training/ 제거 | ✅ | 이미 없음 |\n\n**유지된 핵심 에이전트** (`.claude/agents/core/`):\n- `coder.md`\n- `reviewer.md`\n- `tester.md`\n- `planner.md`\n- `researcher.md`\n\n### 2. Skills 생성\n\n4개의 핵심 Skills 생성 완료:", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "103", "text": "**유지된 핵심 에이전트** (`.claude/agents/core/`):\n- `coder.md`\n- `reviewer.md`\n- `tester.md`\n- `planner.md`\n- `researcher.md`\n\n### 2. Skills 생성\n\n4개의 핵심 Skills 생성 완료:\n\n| Skill | 위치 | 주요 내용 |\n|-------|------|----------|\n| OpenSpec | `.claude/skills/openspec/SKILL.md` | 7단계 파이프라인, proposal/tasks 관리 지침 |\n| Code Review | `.claude/skills/code-review/SKILL.md` | 품질 체크리스트, 보안 검토 항목 |\n| Testing | `.claude/skills/testing/SKILL.md` | AAA 패턴, 커버리지 기준 |\n| Git Workflow | `.claude/skills/git-workflow/SKILL.md` | 브랜치 전략, 한국어 커밋 규칙 |", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "104", "text": "### 3. SDK Hooks 설정\n\n`.claude/settings.json`에 이미 구성된 hooks 확인:\n\n| Hook 유형 | 매처 | 기능 |\n|----------|------|------|\n| PreToolUse | Bash | 명령어 안전성 검증, 리소스 준비 |\n| PreToolUse | Write\\|Edit\\|MultiEdit | 에이전트 할당, 컨텍스트 로드 |\n| PostToolUse | Bash | 메트릭 추적, 결과 저장 |\n| PostToolUse | Write\\|Edit\\|MultiEdit | 포맷팅, 메모리 업데이트 |\n| PreCompact | manual/auto | 압축 전 가이드 제공 |\n| Stop | - | 세션 요약, 상태 영속화 |\n\n### 4. MCP 설정 정리", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "105", "text": "### 4. MCP 설정 정리\n\n`.mcp.json` 확인 결과 - zyflow MCP 서버만 유지됨:\n```json\n{\n  \"mcpServers\": {\n    \"zyflow\": {\n      \"command\": \"node\",\n      \"args\": [\"/Users/hansoo./ZELLYY/zyflow/dist/mcp-server/index.js\"],\n      \"type\": \"stdio\"\n    }\n  }\n}\n```\n\n### 5. CLAUDE.md 최종 정리\n\n- ✅ Project Overview 간소화\n- ✅ Build Commands 유지\n- ✅ Code Style & Best Practices 유지\n- ✅ File Organization 정리\n- ✅ MCP 도구 목록 추가 (zyflow만)\n- ✅ Skills 사용법 추가\n- ✅ Core Agents 섹션 추가\n\n### 6. 문서화", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "106", "text": "### 5. CLAUDE.md 최종 정리\n\n- ✅ Project Overview 간소화\n- ✅ Build Commands 유지\n- ✅ Code Style & Best Practices 유지\n- ✅ File Organization 정리\n- ✅ MCP 도구 목록 추가 (zyflow만)\n- ✅ Skills 사용법 추가\n- ✅ Core Agents 섹션 추가\n\n### 6. 문서화\n\n| 문서 | 위치 | 내용 |\n|------|------|------|\n| Claude SDK 가이드 | `docs/claude-sdk-guide.md` | Skills 사용법, Hooks 설정 가이드 |\n| 마이그레이션 완료 | `docs/phase4-migration-complete.md` | 본 문서 |\n\n---\n\n## 📁 변경된 파일 목록", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "107", "text": "### 6. 문서화\n\n| 문서 | 위치 | 내용 |\n|------|------|------|\n| Claude SDK 가이드 | `docs/claude-sdk-guide.md` | Skills 사용법, Hooks 설정 가이드 |\n| 마이그레이션 완료 | `docs/phase4-migration-complete.md` | 본 문서 |\n\n---\n\n## 📁 변경된 파일 목록\n\n### 신규 생성\n```\n.claude/skills/openspec/SKILL.md\n.claude/skills/code-review/SKILL.md\n.claude/skills/testing/SKILL.md\n.claude/skills/git-workflow/SKILL.md\ndocs/claude-sdk-guide.md\ndocs/phase4-migration-complete.md\n```\n\n### 수정됨\n```\nCLAUDE.md                                           # 간소화 및 Skills/Agents 섹션 추가\n.gitignore                                          # .mcp.json 주석 처리\nopenspec/changes/refactor-phase4-sdk/tasks.md       # 진행 상황 업데이트\n```\n\n---", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "108", "text": "### 수정됨\n```\nCLAUDE.md                                           # 간소화 및 Skills/Agents 섹션 추가\n.gitignore                                          # .mcp.json 주석 처리\nopenspec/changes/refactor-phase4-sdk/tasks.md       # 진행 상황 업데이트\n```\n\n---\n\n## 🔧 최종 디렉토리 구조", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "109", "text": "```\n.claude/\n├── agents/\n│   ├── core/           # 핵심 에이전트 (5개)\n│   │   ├── coder.md\n│   │   ├── reviewer.md\n│   │   ├── tester.md\n│   │   ├── planner.md\n│   │   └── researcher.md\n│   └── github/         # GitHub 관련 에이전트\n├── skills/             # 핵심 스킬 (4개 신규 추가)\n│   ├── openspec/\n│   │   └── SKILL.md\n│   ├── code-review/\n│   │   └── SKILL.md\n│   ├── testing/\n│   │   └── SKILL.md\n│   ├── git-workflow/\n│   │   └── SKILL.md\n│   └── ...             # 기타 기존 스킬\n├── settings.json       # SDK 설정 (hooks 포함)\n└── settings.local.json # 로컬 설정\n```\n\n---\n\n## ⚠️ 알려진 이슈", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "110", "text": "---\n\n## ⚠️ 알려진 이슈\n\n없음\n\n---\n\n## 📝 후속 작업\n\n1. **검증 필요**: Claude Code에서 Skills 인식 및 /skill 명령어 테스트\n2. **MCP 서버 테스트**: zyflow MCP 도구 정상 동작 확인\n3. **기존 skills 정리**: `.claude/skills/`의 26개 기존 스킬 중 불필요한 것 정리 검토\n\n---\n\n## 🏁 결론\n\nPhase 4 Claude SDK 정렬 작업이 성공적으로 완료되었습니다. 핵심 에이전트 5개와 신규 Skills 4개가 정리되어 일관된 개발 워크플로우를 지원할 수 있는 기반이 마련되었습니다.", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "111", "text": "# ZyFlow 향후 개선 정리 (업데이트)\n\nSDD/TDD 기본 방향은 유지하되, 가벼운 규칙과 자동화를 우선한다. 각 섹션에 “바로 할 일”을 붙였다.\n\n## 1) 동기화 신뢰도\n- 단일 소스 선언: `tasks.md` ↔ DB 중 무엇을 진실로 둘지 결정하고 충돌 정책(우선순위/타임스탬프/섹션·오더 병합) 문서화.\n- 변경 로그/리플레이: watcher 이벤트를 큐에 기록하고 실패 시 재적용 가능하도록 설계.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "112", "text": "- 변경 로그/리플레이: watcher 이벤트를 큐에 기록하고 실패 시 재적용 가능하도록 설계.\n- 정합성 점검: `tasks.md` ↔ DB diff/헬스체크를 CLI/API로 제공, 주기 실행.\n- 동시 수정 보호: 태스크 단위 버전 필드(updated_at 등)로 잃어버린 업데이트 방지.\n**바로 할 일**: 진실원칙 결정 → 충돌 정책 초안 작성 → watcher 로그/리플레이 설계 메모 추가.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "113", "text": "## 2) 환경 추상화\n- 설정 분리: API 베이스 URL/포트, 프로젝트 루트, watcher 옵션을 env/설정 파일로 노출.\n- macOS 의존 제거: `osascript`는 선택 사항, 경로 직접 입력/CLI 인자로 대체 경로 제공.\n- Docker 여부: 팀 재현성 필요 시에만 도입. 필수는 bind-mount(`openspec` 루트)와 포트 노출. 단일 사용자면 버전 고정(.tool-versions/노드 버전)으로도 충분.\n**바로 할 일**: env/설정 스펙 정의 → macOS 의존 옵션화 → Docker 필요성 판단 노트 작성.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "114", "text": "## 3) 워크플로우/규칙 경량화\n- 미니 SPEC 기준: “3파일 이상” 또는 “아키텍처 영향 중간↑/1시간↑”일 때만 mini-spec, 그 외는 태스크 설명+AC.\n- Plan→Run→Sync는 선택형: 기본은 `start → test → done` 3단계, 필요 시 플래그로 확장.\n- TDD 게이트: 중요 태스크만 “테스트 통과 시 완료”, 일반 태스크는 경고+체크박스.\n**바로 할 일**: mini-spec 트리거 문구 확정 → CLI/API에 `start/test/done` 단축 플로우 명시.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "115", "text": "## 4) 자동화 우선순위\n- watcher/sync 신뢰도 개선(로그, 리트라이, 정합성 체크)이 최우선.\n- 테스트/헬스체크 훅: CLI/API 호출 시 테스트 명령 연결, 실패 요약을 태스크 히스토리에 기록.\n- 상태/로그 표준화: API 헬스체크, 동기화 실패율/드리프트 지표 노출.\n**바로 할 일**: 헬스 지표 목록 정의 → 실패 요약 저장 위치 결정 → 리트라이 정책 초안.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "116", "text": "## 5) 테스트 전략(준비)\n- 단위: parser(`tasks.md`), sync 머지 로직, Drizzle CRUD, MCP/CLI 핸들러, 핵심 hooks.\n- 통합: “`tasks.md` 수정 → sync → DB → UI” 왕복, “DB 수정 → `tasks.md` 재생성” 각 1~2 케이스.\n- 프런트: useChanges/useTasks + Flow UI 최소 상호작용 테스트.\n**바로 할 일**: 우선순위 높은 3~5개 단위 테스트 후보 선정 → 첫 통합 시나리오 1개 작성.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "117", "text": "## 6) 제품/UX 방향\n- 로컬/프라이빗 강점 유지, 규칙은 가볍게, 도구가 지켜주게(자동화·헬스체크 중심).\n- 멀티 프로젝트 지원은 경로·환경 설정만으로 가능하게 유지.\n- 모아이 ADK의 강제 절차는 참조하되, ZF에서는 선택적/경량 옵션만 채택.\n**바로 할 일**: “기본 가벼움 + 선택적 강화” 원칙을 README/설정 가이드에 반영.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "118", "text": "# ZyFlow REST API Documentation\n\nBase URL: `http://localhost:3000/api`\n\n## Projects API\n\n### GET /projects\n프로젝트 목록 조회\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"projects\": [\n      {\n        \"id\": \"project-id\",\n        \"name\": \"project-name\",\n        \"path\": \"/path/to/project\",\n        \"addedAt\": \"2024-01-01T00:00:00.000Z\"\n      }\n    ],\n    \"activeProjectId\": \"project-id\"\n  }\n}\n```\n\n### POST /projects\n새 프로젝트 추가\n\n**Request Body:**\n```json\n{\n  \"path\": \"/path/to/project\"\n}\n```\n\n### DELETE /projects/:id\n프로젝트 제거\n\n### PUT /projects/:id/activate\n프로젝트 활성화\n\n### GET /projects/all-data\n모든 프로젝트와 해당 changes/specs 데이터 조회\n\n---\n\n## Flow Changes API", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "119", "text": "### POST /projects\n새 프로젝트 추가\n\n**Request Body:**\n```json\n{\n  \"path\": \"/path/to/project\"\n}\n```\n\n### DELETE /projects/:id\n프로젝트 제거\n\n### PUT /projects/:id/activate\n프로젝트 활성화\n\n### GET /projects/all-data\n모든 프로젝트와 해당 changes/specs 데이터 조회\n\n---\n\n## Flow Changes API\n\n### GET /flow/changes\n활성 프로젝트의 Flow Changes 목록 조회\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"changes\": [\n      {\n        \"id\": \"change-id\",\n        \"projectId\": \"project-id\",\n        \"title\": \"Change Title\",\n        \"specPath\": \"openspec/changes/change-id/proposal.md\",\n        \"status\": \"active\",\n        \"currentStage\": \"task\",\n        \"progress\": 75,\n        \"createdAt\": \"2024-01-01T00:00:00.000Z\",", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "120", "text": "**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"changes\": [\n      {\n        \"id\": \"change-id\",\n        \"projectId\": \"project-id\",\n        \"title\": \"Change Title\",\n        \"specPath\": \"openspec/changes/change-id/proposal.md\",\n        \"status\": \"active\",\n        \"currentStage\": \"task\",\n        \"progress\": 75,\n        \"createdAt\": \"2024-01-01T00:00:00.000Z\",\n        \"updatedAt\": \"2024-01-01T00:00:00.000Z\",\n        \"stages\": {\n          \"spec\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"changes\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"task\": { \"total\": 4, \"completed\": 3, \"tasks\": [...] },\n          \"code\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "121", "text": "000Z\",\n        \"updatedAt\": \"2024-01-01T00:00:00.000Z\",\n        \"stages\": {\n          \"spec\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"changes\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"task\": { \"total\": 4, \"completed\": 3, \"tasks\": [...] },\n          \"code\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"test\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"commit\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"docs\": { \"total\": 0, \"completed\": 0, \"tasks\": [] }\n        }\n      }\n    ]\n  }\n}\n```\n\n### GET /flow/changes/:id\n특정 Change 상세 조회 (stages 포함)\n\n### GET /flow/changes/counts\n프로젝트별 Change 수 조회", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "122", "text": "\"tasks\": [] },\n          \"test\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"commit\": { \"total\": 0, \"completed\": 0, \"tasks\": [] },\n          \"docs\": { \"total\": 0, \"completed\": 0, \"tasks\": [] }\n        }\n      }\n    ]\n  }\n}\n```\n\n### GET /flow/changes/:id\n특정 Change 상세 조회 (stages 포함)\n\n### GET /flow/changes/counts\n프로젝트별 Change 수 조회\n\n**Query Parameters:**\n- `status`: `active` | `completed` | `all` (기본값: `active`)\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"counts\": { \"project-id\": 5 },\n    \"detailed\": {\n      \"project-id\": { \"active\": 3, \"completed\": 2, \"total\": 5 }\n    }\n  }\n}\n```\n\n### POST /flow/sync\nOpenSpec 파일에서 Changes 동기화", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "123", "text": "**Query Parameters:**\n- `status`: `active` | `completed` | `all` (기본값: `active`)\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"counts\": { \"project-id\": 5 },\n    \"detailed\": {\n      \"project-id\": { \"active\": 3, \"completed\": 2, \"total\": 5 }\n    }\n  }\n}\n```\n\n### POST /flow/sync\nOpenSpec 파일에서 Changes 동기화\n\n### GET /flow/changes/:id/proposal\nChange의 proposal.md 내용 조회\n\n### GET /flow/changes/:id/design\nChange의 design.md 내용 조회\n\n### GET /flow/changes/:id/spec\nChange의 첫 번째 spec.md 내용 조회\n\n### GET /flow/changes/:changeId/specs/:specId\n특정 spec.md 내용 조회\n\n---\n\n## Flow Tasks API\n\n### GET /flow/tasks\nFlow Tasks 목록 조회", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "124", "text": "### POST /flow/sync\nOpenSpec 파일에서 Changes 동기화\n\n### GET /flow/changes/:id/proposal\nChange의 proposal.md 내용 조회\n\n### GET /flow/changes/:id/design\nChange의 design.md 내용 조회\n\n### GET /flow/changes/:id/spec\nChange의 첫 번째 spec.md 내용 조회\n\n### GET /flow/changes/:changeId/specs/:specId\n특정 spec.md 내용 조회\n\n---\n\n## Flow Tasks API\n\n### GET /flow/tasks\nFlow Tasks 목록 조회\n\n**Query Parameters:**\n- `changeId`: Change ID로 필터링\n- `stage`: Stage로 필터링 (`spec`, `changes`, `task`, `code`, `test`, `commit`, `docs`)\n- `status`: 상태로 필터링 (`todo`, `in-progress`, `review`, `done`)\n- `standalone`: `true`면 독립 태스크만 조회 (change_id = null)\n- `includeArchived`: `true`면 아카이브된 태스크 포함", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "125", "text": "**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"tasks\": [\n      {\n        \"id\": 1,\n        \"changeId\": \"change-id\",\n        \"stage\": \"task\",\n        \"title\": \"Task Title\",\n        \"description\": \"Task Description\",\n        \"status\": \"todo\",\n        \"priority\": \"medium\",\n        \"tags\": [\"tag1\", \"tag2\"],\n        \"assignee\": null,\n        \"order\": 1,\n        \"groupTitle\": \"Group Title\",\n        \"groupOrder\": 1,\n        \"taskOrder\": 1,\n        \"majorTitle\": \"Major Section Title\",\n        \"subOrder\": 1,\n        \"createdAt\": \"2024-01-01T00:00:00.000Z\",\n        \"updatedAt\": \"2024-01-01T00:00:00.000Z\",\n        \"archivedAt\": null\n      }\n    ]\n  }\n}\n```\n\n### POST /flow/tasks\n새 Flow Task 생성", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "126", "text": "### POST /flow/tasks\n새 Flow Task 생성\n\n**Request Body:**\n```json\n{\n  \"changeId\": \"change-id\",\n  \"stage\": \"task\",\n  \"title\": \"Task Title\",\n  \"description\": \"Task Description\",\n  \"priority\": \"medium\"\n}\n```\n\n### PATCH /flow/tasks/:id\nFlow Task 수정\n\n**Request Body:**\n```json\n{\n  \"title\": \"Updated Title\",\n  \"status\": \"done\",\n  \"priority\": \"high\"\n}\n```\n\n---\n\n## Independent Tasks API\n\n### GET /tasks\n태스크 목록 조회\n\n**Query Parameters:**\n- `status`: 상태로 필터링 (`todo`, `in-progress`, `review`, `done`, `archived`)\n- `priority`: 우선순위로 필터링 (`low`, `medium`, `high`)\n- `tags`: 태그로 필터링 (쉼표 구분)\n- `kanban`: `true`면 상태별 그룹화된 형식으로 반환\n\n### POST /tasks\n새 태스크 생성", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "127", "text": "**Query Parameters:**\n- `status`: 상태로 필터링 (`todo`, `in-progress`, `review`, `done`, `archived`)\n- `priority`: 우선순위로 필터링 (`low`, `medium`, `high`)\n- `tags`: 태그로 필터링 (쉼표 구분)\n- `kanban`: `true`면 상태별 그룹화된 형식으로 반환\n\n### POST /tasks\n새 태스크 생성\n\n**Request Body:**\n```json\n{\n  \"title\": \"Task Title\",\n  \"description\": \"Task Description\",\n  \"status\": \"todo\",\n  \"priority\": \"medium\",\n  \"tags\": [\"tag1\", \"tag2\"],\n  \"assignee\": \"user@example.com\"\n}\n```\n\n### GET /tasks/:id\n태스크 상세 조회\n\n### PATCH /tasks/:id\n태스크 수정\n\n### DELETE /tasks/:id\n태스크 삭제\n\n### GET /tasks/search\n태스크 검색 (FTS5 전문 검색)", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "128", "text": "**Request Body:**\n```json\n{\n  \"title\": \"Task Title\",\n  \"description\": \"Task Description\",\n  \"status\": \"todo\",\n  \"priority\": \"medium\",\n  \"tags\": [\"tag1\", \"tag2\"],\n  \"assignee\": \"user@example.com\"\n}\n```\n\n### GET /tasks/:id\n태스크 상세 조회\n\n### PATCH /tasks/:id\n태스크 수정\n\n### DELETE /tasks/:id\n태스크 삭제\n\n### GET /tasks/search\n태스크 검색 (FTS5 전문 검색)\n\n**Query Parameters:**\n- `q`: 검색 쿼리 (필수)\n- `status`: 상태로 필터링\n- `priority`: 우선순위로 필터링\n- `limit`: 최대 결과 수\n\n### POST /tasks/:id/archive\n태스크 아카이브\n\n### POST /tasks/:id/unarchive\n아카이브된 태스크 복원", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "129", "text": "### GET /tasks/search\n태스크 검색 (FTS5 전문 검색)\n\n**Query Parameters:**\n- `q`: 검색 쿼리 (필수)\n- `status`: 상태로 필터링\n- `priority`: 우선순위로 필터링\n- `limit`: 최대 결과 수\n\n### POST /tasks/:id/archive\n태스크 아카이브\n\n### POST /tasks/:id/unarchive\n아카이브된 태스크 복원\n\n### GET /tasks/archived\n아카이브된 태스크 목록 (페이지네이션)\n\n**Query Parameters:**\n- `page`: 페이지 번호 (기본값: 1)\n- `limit`: 페이지당 항목 수 (기본값: 20)\n- `search`: 검색 쿼리\n\n---\n\n## Git API\n\n### GET /git/status\n현재 Git 상태 조회\n\n### GET /git/branch\n현재 브랜치 정보 조회", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "130", "text": "### GET /tasks/archived\n아카이브된 태스크 목록 (페이지네이션)\n\n**Query Parameters:**\n- `page`: 페이지 번호 (기본값: 1)\n- `limit`: 페이지당 항목 수 (기본값: 20)\n- `search`: 검색 쿼리\n\n---\n\n## Git API\n\n### GET /git/status\n현재 Git 상태 조회\n\n### GET /git/branch\n현재 브랜치 정보 조회\n\n### POST /git/checkout\n브랜치 체크아웃\n\n**Request Body:**\n```json\n{\n  \"branch\": \"branch-name\",\n  \"create\": true\n}\n```\n\n### POST /git/commit\n커밋 생성\n\n**Request Body:**\n```json\n{\n  \"message\": \"Commit message\",\n  \"files\": [\"file1.ts\", \"file2.ts\"]\n}\n```\n\n### POST /git/push\n원격 저장소에 푸시\n\n### POST /git/pull\n원격 저장소에서 풀\n\n---", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "131", "text": "**Request Body:**\n```json\n{\n  \"branch\": \"branch-name\",\n  \"create\": true\n}\n```\n\n### POST /git/commit\n커밋 생성\n\n**Request Body:**\n```json\n{\n  \"message\": \"Commit message\",\n  \"files\": [\"file1.ts\", \"file2.ts\"]\n}\n```\n\n### POST /git/push\n원격 저장소에 푸시\n\n### POST /git/pull\n원격 저장소에서 풀\n\n---\n\n## OpenSpec Changes API (Legacy)\n\n### GET /changes\nChanges 목록 조회 (파일 기반)\n\n### GET /changes/:id/tasks\nChange의 tasks.md 파일 파싱 결과 조회\n\n### PATCH /tasks/:changeId/:taskId\ntasks.md 파일에서 태스크 체크박스 토글\n\n### PATCH /tasks/reorder\ntasks.md 파일에서 태스크 순서 재정렬\n\n---\n\n## Specs API\n\n### GET /specs\nSpecs 목록 조회\n\n### GET /specs/:id\nSpec 내용 조회\n\n---\n\n## Claude Code Execution API", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "132", "text": "### GET /changes/:id/tasks\nChange의 tasks.md 파일 파싱 결과 조회\n\n### PATCH /tasks/:changeId/:taskId\ntasks.md 파일에서 태스크 체크박스 토글\n\n### PATCH /tasks/reorder\ntasks.md 파일에서 태스크 순서 재정렬\n\n---\n\n## Specs API\n\n### GET /specs\nSpecs 목록 조회\n\n### GET /specs/:id\nSpec 내용 조회\n\n---\n\n## Claude Code Execution API\n\nClaude Code CLI와 통합하여 OpenSpec 태스크를 자동으로 실행합니다.\n\n### POST /claude/execute\nClaude Code로 태스크 실행 시작 (SSE 스트리밍)\n\n**Request Body:**\n```json\n{\n  \"changeId\": \"change-id\",\n  \"taskId\": \"task-id\",\n  \"taskTitle\": \"Task Title\",\n  \"mode\": \"single\"\n}\n```", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "133", "text": "### GET /specs/:id\nSpec 내용 조회\n\n---\n\n## Claude Code Execution API\n\nClaude Code CLI와 통합하여 OpenSpec 태스크를 자동으로 실행합니다.\n\n### POST /claude/execute\nClaude Code로 태스크 실행 시작 (SSE 스트리밍)\n\n**Request Body:**\n```json\n{\n  \"changeId\": \"change-id\",\n  \"taskId\": \"task-id\",\n  \"taskTitle\": \"Task Title\",\n  \"mode\": \"single\"\n}\n```\n\n**Parameters:**\n| 필드 | 타입 | 필수 | 설명 |\n|------|------|------|------|\n| `changeId` | string | ✅ | OpenSpec Change ID |\n| `taskId` | string | - | 태스크 ID (single 모드에서 사용) |\n| `taskTitle` | string | - | 태스크 제목 (taskId보다 우선 검색) |\n| `mode` | string | - | 실행 모드: `single`, `full`, `analysis` (기본: `full`) |", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "134", "text": "**Parameters:**\n| 필드 | 타입 | 필수 | 설명 |\n|------|------|------|------|\n| `changeId` | string | ✅ | OpenSpec Change ID |\n| `taskId` | string | - | 태스크 ID (single 모드에서 사용) |\n| `taskTitle` | string | - | 태스크 제목 (taskId보다 우선 검색) |\n| `mode` | string | - | 실행 모드: `single`, `full`, `analysis` (기본: `full`) |\n\n**Response:** SSE (Server-Sent Events) 스트림\n\n```\nevent: start\ndata: {\"runId\": \"run-id\", \"status\": \"running\"}\n\nevent: output\ndata: {\"type\": \"assistant\", \"message\": {...}}\n\nevent: output\ndata: {\"type\": \"tool_use\", \"name\": \"Read\", \"input\": {...}}\n\nevent: output\ndata: {\"type\": \"tool_result\", ...}\n\nevent: complete\ndata: {\"status\": \"completed\", \"exitCode\": 0}\n```", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "135", "text": "**Response:** SSE (Server-Sent Events) 스트림\n\n```\nevent: start\ndata: {\"runId\": \"run-id\", \"status\": \"running\"}\n\nevent: output\ndata: {\"type\": \"assistant\", \"message\": {...}}\n\nevent: output\ndata: {\"type\": \"tool_use\", \"name\": \"Read\", \"input\": {...}}\n\nevent: output\ndata: {\"type\": \"tool_result\", ...}\n\nevent: complete\ndata: {\"status\": \"completed\", \"exitCode\": 0}\n```\n\n**SSE 이벤트 타입:**\n| 이벤트 | 설명 |\n|--------|------|\n| `start` | 실행 시작 |\n| `output` | Claude Code 출력 (assistant, tool_use, tool_result) |\n| `error` | 에러 발생 |\n| `complete` | 실행 완료 |\n\n### GET /claude/status/:runId\n실행 상태 조회", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "136", "text": "event: output\ndata: {\"type\": \"tool_result\", ...}\n\nevent: complete\ndata: {\"status\": \"completed\", \"exitCode\": 0}\n```\n\n**SSE 이벤트 타입:**\n| 이벤트 | 설명 |\n|--------|------|\n| `start` | 실행 시작 |\n| `output` | Claude Code 출력 (assistant, tool_use, tool_result) |\n| `error` | 에러 발생 |\n| `complete` | 실행 완료 |\n\n### GET /claude/status/:runId\n실행 상태 조회\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"runId\": \"run-id\",\n    \"status\": \"running\",\n    \"startedAt\": \"2024-01-01T00:00:00.000Z\",\n    \"messages\": [...]\n  }\n}\n```", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "137", "text": "### GET /claude/status/:runId\n실행 상태 조회\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"runId\": \"run-id\",\n    \"status\": \"running\",\n    \"startedAt\": \"2024-01-01T00:00:00.000Z\",\n    \"messages\": [...]\n  }\n}\n```\n\n**Status 값:**\n| 상태 | 설명 |\n|------|------|\n| `idle` | 대기 중 |\n| `running` | 실행 중 |\n| `completed` | 완료 |\n| `error` | 에러 발생 |\n| `stopped` | 사용자에 의해 중지됨 |\n\n### POST /claude/stop/:runId\n실행 중지\n\n실행 중인 Claude Code 프로세스를 강제 종료합니다.\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Execution stopped\"\n}\n```\n\n### GET /claude/logs/:changeId\n실행 로그 조회\n\n특정 Change의 모든 실행 로그를 조회합니다.", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "138", "text": "### POST /claude/stop/:runId\n실행 중지\n\n실행 중인 Claude Code 프로세스를 강제 종료합니다.\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"message\": \"Execution stopped\"\n}\n```\n\n### GET /claude/logs/:changeId\n실행 로그 조회\n\n특정 Change의 모든 실행 로그를 조회합니다.\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"logs\": [\n      {\n        \"runId\": \"run-id\",\n        \"taskId\": \"task-id\",\n        \"status\": \"completed\",\n        \"startedAt\": \"2024-01-01T00:00:00.000Z\",\n        \"completedAt\": \"2024-01-01T00:05:00.000Z\",\n        \"exitCode\": 0\n      }\n    ]\n  }\n}\n```\n\n### 프롬프트 빌더 (OpenSpecPromptBuilder)", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "139", "text": "### 프롬프트 빌더 (OpenSpecPromptBuilder)\n\n`POST /claude/execute` 호출 시 다음 문서가 자동으로 로드되어 프롬프트에 포함됩니다:\n\n| 문서 | 경로 | 설명 |\n|------|------|------|\n| 프로젝트 맥락 | `CLAUDE.md` | 핵심 섹션만 요약 (최대 2000자) |\n| 변경 제안 | `openspec/changes/{id}/proposal.md` | Summary, Motivation 섹션 추출 |\n| 설계 문서 | `openspec/changes/{id}/design.md` | 전체 내용 (최대 3000자) |\n| 태스크 목록 | `openspec/changes/{id}/tasks.md` | 미완료 태스크 또는 특정 태스크 |\n| 관련 스펙 | `openspec/changes/{id}/specs/*.md` | 파일 목록 |", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "140", "text": "**실행 모드별 지시사항:**\n- `full`: 미완료 태스크를 순서대로 구현\n- `single`: 지정된 태스크만 처리\n- `analysis`: 코드 변경 없이 분석만 수행\n\n---\n\n## Health Check\n\n### GET /health\n서버 상태 확인\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"data\": {\n    \"status\": \"ok\",\n    \"timestamp\": \"2024-01-01T00:00:00.000Z\",\n    \"uptime\": 3600\n  }\n}\n```\n\n---\n\n## Error Response\n\n모든 에러 응답은 다음 형식을 따릅니다:\n\n```json\n{\n  \"success\": false,\n  \"error\": \"Error message\"\n}\n```\n\n## Types\n\n### Stage\n```typescript\ntype Stage = 'spec' | 'changes' | 'task' | 'code' | 'test' | 'commit' | 'docs'\n```", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "141", "text": "---\n\n## Error Response\n\n모든 에러 응답은 다음 형식을 따릅니다:\n\n```json\n{\n  \"success\": false,\n  \"error\": \"Error message\"\n}\n```\n\n## Types\n\n### Stage\n```typescript\ntype Stage = 'spec' | 'changes' | 'task' | 'code' | 'test' | 'commit' | 'docs'\n```\n\n### ChangeStatus\n```typescript\ntype ChangeStatus = 'active' | 'completed' | 'archived'\n```\n\n### TaskStatus\n```typescript\ntype TaskStatus = 'todo' | 'in-progress' | 'review' | 'done' | 'archived'\n```\n\n### TaskPriority\n```typescript\ntype TaskPriority = 'low' | 'medium' | 'high'\n```", "metadata": {"file_path": "docs/api.md", "file_name": "api.md", "creation_date": "2026-01-03", "last_modified_date": "2026-01-03"}}
{"id": "142", "text": "# Claude SDK Skills & Hooks 가이드\n\n## Skills 사용 가이드\n\n### 개요\n\nZyFlow 프로젝트는 4개의 핵심 스킬을 제공하여 일관된 개발 워크플로우를 지원합니다.\n\n### 사용 가능한 Skills\n\n| 스킬 | 위치 | 목적 |\n|------|------|------|\n| OpenSpec | `.claude/skills/openspec/SKILL.md` | 스펙 주도 개발 |\n| Code Review | `.claude/skills/code-review/SKILL.md` | 코드 품질 보증 |\n| Testing | `.claude/skills/testing/SKILL.md` | 테스트 작성 |\n| Git Workflow | `.claude/skills/git-workflow/SKILL.md` | Git 협업 |\n\n### 스킬 참조 방법\n\n스킬은 필요 시 직접 파일을 참조하여 사용합니다:", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "143", "text": "### 스킬 참조 방법\n\n스킬은 필요 시 직접 파일을 참조하여 사용합니다:\n\n```\n# OpenSpec 워크플로우 참조\n.claude/skills/openspec/SKILL.md\n\n# 코드 리뷰 체크리스트 참조\n.claude/skills/code-review/SKILL.md\n```\n\n### 스킬별 주요 용도\n\n#### OpenSpec Skill\n- 변경 제안서(proposal) 작성\n- tasks.md 관리 및 진행 추적\n- 7단계 파이프라인 워크플로우 적용\n- Spec delta 작성 규칙\n\n#### Code Review Skill\n- 코드 품질 체크리스트 적용\n- 보안 검토 항목 확인\n- 리뷰 피드백 템플릿 사용\n- 우선순위별 이슈 분류", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "144", "text": "#### Code Review Skill\n- 코드 품질 체크리스트 적용\n- 보안 검토 항목 확인\n- 리뷰 피드백 템플릿 사용\n- 우선순위별 이슈 분류\n\n#### Testing Skill\n- AAA 패턴 테스트 작성\n- 커버리지 기준 확인\n- 모킹 전략 적용\n- 테스트 안티패턴 회피\n\n#### Git Workflow Skill\n- 브랜치 명명 규칙 준수\n- 한국어 커밋 메시지 작성\n- PR 템플릿 활용\n- 릴리스 프로세스 진행\n\n---\n\n## Hooks 설정 가이드\n\n### 개요\n\nZyFlow는 Claude Code SDK hooks를 활용하여 도구 사용 전후에 자동화된 작업을 수행합니다.\n\n### 설정 파일", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "145", "text": "#### Git Workflow Skill\n- 브랜치 명명 규칙 준수\n- 한국어 커밋 메시지 작성\n- PR 템플릿 활용\n- 릴리스 프로세스 진행\n\n---\n\n## Hooks 설정 가이드\n\n### 개요\n\nZyFlow는 Claude Code SDK hooks를 활용하여 도구 사용 전후에 자동화된 작업을 수행합니다.\n\n### 설정 파일\n\nHooks는 `.claude/settings.json`에 정의되어 있습니다.\n\n### 구성된 Hooks\n\n#### 1. PreToolUse Hooks\n\n**Bash 명령어 실행 전:**\n```json\n{\n  \"matcher\": \"Bash\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks pre-command --validate-safety true --prepare-resources true\"\n  }]\n}\n```\n- 명령어 안전성 검증\n- 필요한 리소스 준비", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "146", "text": "### 설정 파일\n\nHooks는 `.claude/settings.json`에 정의되어 있습니다.\n\n### 구성된 Hooks\n\n#### 1. PreToolUse Hooks\n\n**Bash 명령어 실행 전:**\n```json\n{\n  \"matcher\": \"Bash\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks pre-command --validate-safety true --prepare-resources true\"\n  }]\n}\n```\n- 명령어 안전성 검증\n- 필요한 리소스 준비\n\n**파일 편집 전:**\n```json\n{\n  \"matcher\": \"Write|Edit|MultiEdit\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks pre-edit --auto-assign-agents true --load-context true\"\n  }]\n}\n```\n- 에이전트 자동 할당\n- 컨텍스트 로드\n\n#### 2. PostToolUse Hooks", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "147", "text": "**파일 편집 전:**\n```json\n{\n  \"matcher\": \"Write|Edit|MultiEdit\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks pre-edit --auto-assign-agents true --load-context true\"\n  }]\n}\n```\n- 에이전트 자동 할당\n- 컨텍스트 로드\n\n#### 2. PostToolUse Hooks\n\n**Bash 명령어 실행 후:**\n```json\n{\n  \"matcher\": \"Bash\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks post-command --track-metrics true --store-results true\"\n  }]\n}\n```\n- 메트릭 추적\n- 결과 저장", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "148", "text": "#### 2. PostToolUse Hooks\n\n**Bash 명령어 실행 후:**\n```json\n{\n  \"matcher\": \"Bash\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks post-command --track-metrics true --store-results true\"\n  }]\n}\n```\n- 메트릭 추적\n- 결과 저장\n\n**파일 편집 후:**\n```json\n{\n  \"matcher\": \"Write|Edit|MultiEdit\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks post-edit --format true --update-memory true\"\n  }]\n}\n```\n- 코드 포맷팅\n- 메모리 업데이트\n\n#### 3. PreCompact Hooks\n\n컨텍스트 압축 전 가이드 제공:\n- 사용 가능한 에이전트 알림\n- 동시 실행 패턴 안내\n- SPARC 방법론 참조\n\n#### 4. Stop Hooks", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "149", "text": "#### 3. PreCompact Hooks\n\n컨텍스트 압축 전 가이드 제공:\n- 사용 가능한 에이전트 알림\n- 동시 실행 패턴 안내\n- SPARC 방법론 참조\n\n#### 4. Stop Hooks\n\n세션 종료 시:\n```json\n{\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"npx claude-flow@alpha hooks session-end --generate-summary true --persist-state true --export-metrics true\"\n  }]\n}\n```\n- 세션 요약 생성\n- 상태 영속화\n- 메트릭 내보내기\n\n### Hook 비활성화\n\n특정 hook을 비활성화하려면 환경 변수를 설정합니다:\n\n```json\n{\n  \"env\": {\n    \"CLAUDE_FLOW_HOOKS_ENABLED\": \"false\"\n  }\n}\n```\n\n### 커스텀 Hook 추가\n\n새 hook을 추가하려면 `.claude/settings.json`의 해당 섹션에 추가:", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "150", "text": "### Hook 비활성화\n\n특정 hook을 비활성화하려면 환경 변수를 설정합니다:\n\n```json\n{\n  \"env\": {\n    \"CLAUDE_FLOW_HOOKS_ENABLED\": \"false\"\n  }\n}\n```\n\n### 커스텀 Hook 추가\n\n새 hook을 추가하려면 `.claude/settings.json`의 해당 섹션에 추가:\n\n```json\n{\n  \"matcher\": \"YourMatcher\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"your-custom-command\"\n  }]\n}\n```\n\n---\n\n## Core Agents\n\n### 개요\n\n5개의 핵심 에이전트가 `.claude/agents/core/`에 정의되어 있습니다.", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "151", "text": "### 커스텀 Hook 추가\n\n새 hook을 추가하려면 `.claude/settings.json`의 해당 섹션에 추가:\n\n```json\n{\n  \"matcher\": \"YourMatcher\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"your-custom-command\"\n  }]\n}\n```\n\n---\n\n## Core Agents\n\n### 개요\n\n5개의 핵심 에이전트가 `.claude/agents/core/`에 정의되어 있습니다.\n\n| 에이전트 | 파일 | 역할 |\n|----------|------|------|\n| Coder | `coder.md` | 코드 작성 전문 |\n| Reviewer | `reviewer.md` | 코드 리뷰 전문 |\n| Tester | `tester.md` | 테스트 작성 전문 |\n| Planner | `planner.md` | 계획 수립 전문 |\n| Researcher | `researcher.md` | 조사/분석 전문 |\n\n---\n\n## 환경 변수\n\n`.claude/settings.json`에 정의된 환경 변수:", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "152", "text": "---\n\n## 환경 변수\n\n`.claude/settings.json`에 정의된 환경 변수:\n\n| 변수 | 기본값 | 설명 |\n|------|--------|------|\n| `CLAUDE_FLOW_AUTO_COMMIT` | false | 자동 커밋 |\n| `CLAUDE_FLOW_AUTO_PUSH` | false | 자동 푸시 |\n| `CLAUDE_FLOW_HOOKS_ENABLED` | true | hooks 활성화 |\n| `CLAUDE_FLOW_TELEMETRY_ENABLED` | true | 텔레메트리 |\n| `CLAUDE_FLOW_CHECKPOINTS_ENABLED` | true | 체크포인트 |", "metadata": {"file_path": "docs/claude-sdk-guide.md", "file_name": "claude-sdk-guide.md", "creation_date": "2026-01-07", "last_modified_date": "2026-01-07"}}
{"id": "153", "text": "# 프로젝트 로컬 설정 (.zyflow)\n\n프로젝트별 독립적인 설정 관리를 위한 로컬 저장소 구조입니다.\n\n## 개요\n\nZyFlow는 두 가지 설정 저장소를 지원합니다:\n\n| 저장소 | 위치 | 용도 |\n|--------|------|------|\n| **전역** | `~/.zyflow/integrations.db` | 서비스 계정 (토큰, API 키) |\n| **로컬** | `프로젝트/.zyflow/` | 프로젝트별 설정 |\n\n로컬 설정이 있으면 **로컬 우선**으로 조회하고, 없으면 전역 DB로 fallback합니다.\n\n## 디렉토리 구조", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "154", "text": "로컬 설정이 있으면 **로컬 우선**으로 조회하고, 없으면 전역 DB로 fallback합니다.\n\n## 디렉토리 구조\n\n```\n프로젝트/\n├── .zyflow/                    # 로컬 설정 디렉토리\n│   ├── settings.json           # 계정 매핑 및 기본 설정\n│   ├── environments/           # 환경별 변수 파일\n│   │   ├── local.env           # 로컬 개발 환경\n│   │   ├── staging.env         # 스테이징 환경\n│   │   └── production.env      # 프로덕션 환경\n│   └── test-accounts.json      # 테스트 계정 (암호화)\n└── ...\n```\n\n## 파일 형식\n\n### settings.json\n\n계정 매핑과 기본 설정을 저장합니다.", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "155", "text": "## 파일 형식\n\n### settings.json\n\n계정 매핑과 기본 설정을 저장합니다.\n\n```json\n{\n  \"version\": 1,\n  \"integrations\": {\n    \"github\": \"uuid-of-github-account\",\n    \"supabase\": \"uuid-of-supabase-account\",\n    \"vercel\": \"uuid-of-vercel-account\",\n    \"sentry\": \"uuid-of-sentry-account\",\n    \"custom\": {\n      \"stripe\": \"uuid-of-stripe-account\"\n    }\n  },\n  \"defaultEnvironment\": \"local\",\n  \"createdAt\": \"2024-01-01T00:00:00.000Z\",\n  \"updatedAt\": \"2024-01-01T00:00:00.000Z\"\n}\n```\n\n**주요 필드:**\n- `integrations`: 서비스별 계정 UUID (전역 DB의 계정 참조)\n- `defaultEnvironment`: 기본 환경 이름\n- `version`: 스키마 버전 (마이그레이션용)\n\n### environments/*.env", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "156", "text": "**주요 필드:**\n- `integrations`: 서비스별 계정 UUID (전역 DB의 계정 참조)\n- `defaultEnvironment`: 기본 환경 이름\n- `version`: 스키마 버전 (마이그레이션용)\n\n### environments/*.env\n\n표준 `.env` 형식의 환경 변수 파일입니다.\n\n```env\n# local.env\nDATABASE_URL=postgres://localhost:5432/myapp_dev\nAPI_KEY=dev-api-key-12345\nREDIS_URL=redis://localhost:6379\n\n# 멀티라인 값은 따옴표로 감싸기\nPRIVATE_KEY=\"-----BEGIN RSA PRIVATE KEY-----\\nMIIE...\"\n```\n\n### test-accounts.json\n\n테스트용 계정 정보를 암호화하여 저장합니다.", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "157", "text": "### environments/*.env\n\n표준 `.env` 형식의 환경 변수 파일입니다.\n\n```env\n# local.env\nDATABASE_URL=postgres://localhost:5432/myapp_dev\nAPI_KEY=dev-api-key-12345\nREDIS_URL=redis://localhost:6379\n\n# 멀티라인 값은 따옴표로 감싸기\nPRIVATE_KEY=\"-----BEGIN RSA PRIVATE KEY-----\\nMIIE...\"\n```\n\n### test-accounts.json\n\n테스트용 계정 정보를 암호화하여 저장합니다.\n\n```json\n{\n  \"version\": 1,\n  \"accounts\": [\n    {\n      \"id\": \"acc-1\",\n      \"role\": \"admin\",\n      \"email\": \"admin@test.com\",\n      \"password\": \"iv:encrypted-password\",\n      \"description\": \"관리자 테스트 계정\"\n    },\n    {\n      \"id\": \"acc-2\",\n      \"role\": \"user\",\n      \"email\": \"user@test.com\",\n      \"password\": \"iv:encrypted-password\"\n    }\n  ]\n}\n```", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "158", "text": "```json\n{\n  \"version\": 1,\n  \"accounts\": [\n    {\n      \"id\": \"acc-1\",\n      \"role\": \"admin\",\n      \"email\": \"admin@test.com\",\n      \"password\": \"iv:encrypted-password\",\n      \"description\": \"관리자 테스트 계정\"\n    },\n    {\n      \"id\": \"acc-2\",\n      \"role\": \"user\",\n      \"email\": \"user@test.com\",\n      \"password\": \"iv:encrypted-password\"\n    }\n  ]\n}\n```\n\n**보안:**\n- 비밀번호는 전역 마스터 키로 암호화됨\n- IV(초기화 벡터)가 비밀번호 앞에 포함됨\n\n## .gitignore 권장 패턴\n\n`.zyflow/` 디렉토리 중 민감한 정보는 버전 관리에서 제외해야 합니다.", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "159", "text": "**보안:**\n- 비밀번호는 전역 마스터 키로 암호화됨\n- IV(초기화 벡터)가 비밀번호 앞에 포함됨\n\n## .gitignore 권장 패턴\n\n`.zyflow/` 디렉토리 중 민감한 정보는 버전 관리에서 제외해야 합니다.\n\n```gitignore\n# .zyflow 로컬 설정\n# 환경 변수 파일 (민감 정보 포함)\n.zyflow/environments/*.env\n\n# 테스트 계정 (암호화되어 있지만 제외 권장)\n.zyflow/test-accounts.json\n\n# settings.json은 커밋 가능 (UUID만 포함)\n# !.zyflow/settings.json\n```\n\n### 권장 설정", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "160", "text": "```gitignore\n# .zyflow 로컬 설정\n# 환경 변수 파일 (민감 정보 포함)\n.zyflow/environments/*.env\n\n# 테스트 계정 (암호화되어 있지만 제외 권장)\n.zyflow/test-accounts.json\n\n# settings.json은 커밋 가능 (UUID만 포함)\n# !.zyflow/settings.json\n```\n\n### 권장 설정\n\n| 파일 | Git 포함 | 이유 |\n|------|----------|------|\n| `settings.json` | O | UUID만 포함, 실제 토큰 없음 |\n| `environments/*.env` | X | API 키, DB 비밀번호 등 포함 |\n| `test-accounts.json` | X | 암호화되어 있지만 보안상 제외 |\n\n## 사용 방법\n\n### 1. 로컬 설정 초기화\n\n```bash\n# MCP 도구 사용\nintegration_init_local(projectPath: \"/path/to/project\")\n```", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "161", "text": "## 사용 방법\n\n### 1. 로컬 설정 초기화\n\n```bash\n# MCP 도구 사용\nintegration_init_local(projectPath: \"/path/to/project\")\n```\n\n또는 UI에서:\n1. 설정 > 프로젝트 관리\n2. 프로젝트 옆 다운로드 버튼 클릭\n3. \"내보내기\" 확인\n\n### 2. 전역 설정을 로컬로 내보내기\n\n```bash\n# MCP 도구 사용\nintegration_export_to_local(\n  projectPath: \"/path/to/project\",\n  projectId: \"project-uuid\"\n)\n```\n\n### 3. 설정 조회 (자동 fallback)\n\n```bash\n# projectPath가 있으면 로컬 우선 조회\nintegration_context(\n  projectId: \"project-uuid\",\n  projectPath: \"/path/to/project\"  # 선택\n)\n```\n\n## API 응답의 source 필드\n\nAPI 응답에는 설정 소스가 표시됩니다:", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "162", "text": "```bash\n# MCP 도구 사용\nintegration_export_to_local(\n  projectPath: \"/path/to/project\",\n  projectId: \"project-uuid\"\n)\n```\n\n### 3. 설정 조회 (자동 fallback)\n\n```bash\n# projectPath가 있으면 로컬 우선 조회\nintegration_context(\n  projectId: \"project-uuid\",\n  projectPath: \"/path/to/project\"  # 선택\n)\n```\n\n## API 응답의 source 필드\n\nAPI 응답에는 설정 소스가 표시됩니다:\n\n```json\n{\n  \"context\": { ... },\n  \"source\": \"local\",      // \"local\" | \"global\"\n  \"sources\": {            // 세부 소스 (하이브리드 시)\n    \"integrations\": \"local\",\n    \"environments\": \"local\",\n    \"testAccounts\": \"global\"\n  }\n}\n```\n\n## 마이그레이션\n\n### 전역에서 로컬로 전환", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "163", "text": "API 응답에는 설정 소스가 표시됩니다:\n\n```json\n{\n  \"context\": { ... },\n  \"source\": \"local\",      // \"local\" | \"global\"\n  \"sources\": {            // 세부 소스 (하이브리드 시)\n    \"integrations\": \"local\",\n    \"environments\": \"local\",\n    \"testAccounts\": \"global\"\n  }\n}\n```\n\n## 마이그레이션\n\n### 전역에서 로컬로 전환\n\n1. UI에서 \"Export to Project\" 클릭\n2. `.zyflow/` 디렉토리가 생성됨\n3. 이후 로컬 설정이 우선 적용됨\n\n### 로컬에서 전역으로 복귀\n\n1. `.zyflow/` 디렉토리 삭제\n2. 자동으로 전역 DB로 fallback\n\n## 관련 MCP 도구", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "164", "text": "1. UI에서 \"Export to Project\" 클릭\n2. `.zyflow/` 디렉토리가 생성됨\n3. 이후 로컬 설정이 우선 적용됨\n\n### 로컬에서 전역으로 복귀\n\n1. `.zyflow/` 디렉토리 삭제\n2. 자동으로 전역 DB로 fallback\n\n## 관련 MCP 도구\n\n| 도구 | 설명 |\n|------|------|\n| `integration_init_local` | .zyflow 디렉토리 초기화 |\n| `integration_export_to_local` | 전역 → 로컬 내보내기 |\n| `integration_context` | 프로젝트 컨텍스트 조회 (로컬 우선) |\n| `integration_get_env` | 환경 변수 조회 (로컬 우선) |\n| `integration_get_test_account` | 테스트 계정 조회 (로컬 우선) |\n\n## 주의사항", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "165", "text": "## 주의사항\n\n1. **계정 토큰은 여전히 전역 DB에 저장됨**\n   - 로컬 `settings.json`에는 UUID만 저장\n   - 실제 토큰은 `~/.zyflow/integrations.db`에서 조회\n\n2. **암호화 키는 전역 마스터 키 사용**\n   - 테스트 계정 비밀번호 복호화에 필요\n   - `~/.zyflow/.master-key` 파일 필요\n\n3. **프로젝트 이동 시**\n   - `.zyflow/` 폴더는 함께 이동\n   - 새 머신에서는 전역 계정 재설정 필요", "metadata": {"file_path": "docs/local-settings.md", "file_name": "local-settings.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "166", "text": "# ZyFlow MCP 도구 사용 가이드\n\nZyFlow MCP 서버는 Claude Code에서 직접 사용할 수 있는 다양한 도구를 제공합니다.\n\n## 설정\n\n### 전역 설정 (~/.claude.json)\n\n```json\n{\n  \"mcpServers\": {\n    \"zyflow\": {\n      \"type\": \"stdio\",\n      \"command\": \"node\",\n      \"args\": [\"/path/to/zyflow/dist/mcp-server/index.js\"],\n      \"env\": {}\n    }\n  }\n}\n```\n\n### 프로젝트별 설정 (.mcp.json)\n\n```json\n{\n  \"mcpServers\": {\n    \"zyflow\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/zyflow/dist/mcp-server/index.js\"],\n      \"env\": {\n        \"ZYFLOW_PROJECT\": \"/path/to/your/project\"\n      }\n    }\n  }\n}\n```\n\n## OpenSpec 도구\n\n### zyflow_list_changes\n\n현재 프로젝트의 OpenSpec 변경 제안 목록을 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "167", "text": "### 프로젝트별 설정 (.mcp.json)\n\n```json\n{\n  \"mcpServers\": {\n    \"zyflow\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/zyflow/dist/mcp-server/index.js\"],\n      \"env\": {\n        \"ZYFLOW_PROJECT\": \"/path/to/your/project\"\n      }\n    }\n  }\n}\n```\n\n## OpenSpec 도구\n\n### zyflow_list_changes\n\n현재 프로젝트의 OpenSpec 변경 제안 목록을 조회합니다.\n\n```\n사용자: \"현재 프로젝트의 변경 제안 목록을 보여줘\"\nClaude: [zyflow_list_changes 호출]\n```\n\n**반환값:**\n- changes: 변경 제안 목록 (id, title, progress, totalTasks, completedTasks)\n- projectPath: 프로젝트 경로\n\n### zyflow_get_tasks\n\n특정 변경 제안의 전체 태스크 목록을 그룹별로 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "168", "text": "```\n사용자: \"현재 프로젝트의 변경 제안 목록을 보여줘\"\nClaude: [zyflow_list_changes 호출]\n```\n\n**반환값:**\n- changes: 변경 제안 목록 (id, title, progress, totalTasks, completedTasks)\n- projectPath: 프로젝트 경로\n\n### zyflow_get_tasks\n\n특정 변경 제안의 전체 태스크 목록을 그룹별로 조회합니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n\n```\n사용자: \"add-user-auth 변경 제안의 태스크 목록을 보여줘\"\nClaude: [zyflow_get_tasks(changeId: \"add-user-auth\") 호출]\n```\n\n### zyflow_get_next_task\n\n다음 미완료 태스크와 실행에 필요한 컨텍스트를 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "169", "text": "**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n\n```\n사용자: \"add-user-auth 변경 제안의 태스크 목록을 보여줘\"\nClaude: [zyflow_get_tasks(changeId: \"add-user-auth\") 호출]\n```\n\n### zyflow_get_next_task\n\n다음 미완료 태스크와 실행에 필요한 컨텍스트를 조회합니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n\n```\n사용자: \"add-user-auth의 다음 태스크가 뭐야?\"\nClaude: [zyflow_get_next_task(changeId: \"add-user-auth\") 호출]\n```\n\n**반환값:**\n- task: 다음 미완료 태스크\n- context: proposal, spec, 관련 파일 정보\n- group: 태스크가 속한 그룹 제목\n\n### zyflow_get_task_context", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "170", "text": "**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n\n```\n사용자: \"add-user-auth의 다음 태스크가 뭐야?\"\nClaude: [zyflow_get_next_task(changeId: \"add-user-auth\") 호출]\n```\n\n**반환값:**\n- task: 다음 미완료 태스크\n- context: proposal, spec, 관련 파일 정보\n- group: 태스크가 속한 그룹 제목\n\n### zyflow_get_task_context\n\n특정 태스크의 상세 컨텍스트를 조회합니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n- `taskId` (필수): 태스크 ID (예: task-1-1)", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "171", "text": "### zyflow_get_task_context\n\n특정 태스크의 상세 컨텍스트를 조회합니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n- `taskId` (필수): 태스크 ID (예: task-1-1)\n\n```\n사용자: \"task-1-1 태스크의 상세 컨텍스트를 보여줘\"\nClaude: [zyflow_get_task_context(changeId: \"add-user-auth\", taskId: \"task-1-1\") 호출]\n```\n\n### zyflow_mark_complete\n\n태스크를 완료로 표시합니다. tasks.md 파일이 자동으로 업데이트됩니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n- `taskId` (필수): 태스크 ID", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "172", "text": "### zyflow_mark_complete\n\n태스크를 완료로 표시합니다. tasks.md 파일이 자동으로 업데이트됩니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n- `taskId` (필수): 태스크 ID\n\n```\n사용자: \"task-1-1 완료로 표시해줘\"\nClaude: [zyflow_mark_complete(changeId: \"add-user-auth\", taskId: \"task-1-1\") 호출]\n```\n\n### zyflow_mark_incomplete\n\n태스크를 미완료로 되돌립니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n- `taskId` (필수): 태스크 ID\n\n---\n\n## 태스크 관리 도구\n\n### task_create\n\n새 태스크를 생성합니다. ID는 순차 번호로 자동 생성됩니다 (TASK-1, TASK-2, ...).", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "173", "text": "### zyflow_mark_incomplete\n\n태스크를 미완료로 되돌립니다.\n\n**파라미터:**\n- `changeId` (필수): 변경 제안 ID\n- `taskId` (필수): 태스크 ID\n\n---\n\n## 태스크 관리 도구\n\n### task_create\n\n새 태스크를 생성합니다. ID는 순차 번호로 자동 생성됩니다 (TASK-1, TASK-2, ...).\n\n**파라미터:**\n- `title` (필수): 태스크 제목\n- `description` (선택): 태스크 설명\n- `priority` (선택): 우선순위 (`low`, `medium`, `high`)\n- `tags` (선택): 태그 배열\n- `assignee` (선택): 담당자", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "174", "text": "새 태스크를 생성합니다. ID는 순차 번호로 자동 생성됩니다 (TASK-1, TASK-2, ...).\n\n**파라미터:**\n- `title` (필수): 태스크 제목\n- `description` (선택): 태스크 설명\n- `priority` (선택): 우선순위 (`low`, `medium`, `high`)\n- `tags` (선택): 태그 배열\n- `assignee` (선택): 담당자\n\n```\n사용자: \"API 응답 시간 개선하는 태스크 만들어줘\"\nClaude: [task_create(title: \"API 응답 시간 개선\", priority: \"high\", tags: [\"performance\"]) 호출]\n```\n\n### task_list\n\n태스크 목록을 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "175", "text": "```\n사용자: \"API 응답 시간 개선하는 태스크 만들어줘\"\nClaude: [task_create(title: \"API 응답 시간 개선\", priority: \"high\", tags: [\"performance\"]) 호출]\n```\n\n### task_list\n\n태스크 목록을 조회합니다.\n\n**파라미터:**\n- `status` (선택): 상태 필터 (`todo`, `in-progress`, `review`, `done`, `archived`)\n- `priority` (선택): 우선순위 필터\n- `tags` (선택): 태그 필터 (쉼표 구분)\n- `kanban` (선택): `true`면 상태별로 그룹화\n\n```\n사용자: \"진행 중인 태스크 목록 보여줘\"\nClaude: [task_list(status: \"in-progress\") 호출]\n```\n\n### task_view\n\n태스크 상세 정보를 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "176", "text": "```\n사용자: \"진행 중인 태스크 목록 보여줘\"\nClaude: [task_list(status: \"in-progress\") 호출]\n```\n\n### task_view\n\n태스크 상세 정보를 조회합니다.\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n\n### task_update\n\n태스크를 수정합니다.\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n- `title` (선택): 새 제목\n- `description` (선택): 새 설명\n- `status` (선택): 새 상태\n- `priority` (선택): 새 우선순위\n- `tags` (선택): 새 태그\n- `assignee` (선택): 새 담당자", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "177", "text": "태스크를 수정합니다.\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n- `title` (선택): 새 제목\n- `description` (선택): 새 설명\n- `status` (선택): 새 상태\n- `priority` (선택): 새 우선순위\n- `tags` (선택): 새 태그\n- `assignee` (선택): 새 담당자\n\n```\n사용자: \"TASK-1 상태를 진행 중으로 바꿔줘\"\nClaude: [task_update(id: \"TASK-1\", status: \"in-progress\") 호출]\n```\n\n### task_search\n\n태스크를 검색합니다 (FTS5 전문 검색).", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "178", "text": "```\n사용자: \"TASK-1 상태를 진행 중으로 바꿔줘\"\nClaude: [task_update(id: \"TASK-1\", status: \"in-progress\") 호출]\n```\n\n### task_search\n\n태스크를 검색합니다 (FTS5 전문 검색).\n\n**파라미터:**\n- `query` (필수): 검색 쿼리\n- `status` (선택): 상태 필터\n- `priority` (선택): 우선순위 필터\n- `limit` (선택): 최대 결과 수\n- `includeArchived` (선택): 아카이브 포함 여부\n\n```\n사용자: \"API 관련 태스크 검색해줘\"\nClaude: [task_search(query: \"API\") 호출]\n```\n\n### task_delete\n\n태스크를 삭제합니다.\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n\n### task_archive", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "179", "text": "```\n사용자: \"API 관련 태스크 검색해줘\"\nClaude: [task_search(query: \"API\") 호출]\n```\n\n### task_delete\n\n태스크를 삭제합니다.\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n\n### task_archive\n\n완료된 태스크를 아카이브로 이동합니다.\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n\n### task_unarchive\n\n아카이브된 태스크를 복원합니다 (상태: done).\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n\n---\n\n## Change Log & Replay 도구\n\n### get_events\n\n변경 이벤트를 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "180", "text": "아카이브된 태스크를 복원합니다 (상태: done).\n\n**파라미터:**\n- `id` (필수): 태스크 ID\n\n---\n\n## Change Log & Replay 도구\n\n### get_events\n\n변경 이벤트를 조회합니다.\n\n**파라미터:**\n- `event_types` (선택): 이벤트 타입 필터 배열\n- `severities` (선택): 심각도 필터 배열\n- `sources` (선택): 소스 필터 배열\n- `project_ids` (선택): 프로젝트 ID 필터 배열\n- `change_ids` (선택): Change ID 필터 배열\n- `time_range` (선택): 시간 범위 (`{ start: ISO, end: ISO }`)\n- `limit` (선택): 최대 결과 수\n- `offset` (선택): 건너뛸 결과 수\n- `sort_by` (선택): 정렬 옵션 (`{ field, direction }`)", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "181", "text": "### get_event_statistics\n\n이벤트 통계를 조회합니다.\n\n**파라미터:**\n- `event_types` (선택): 이벤트 타입 필터 배열\n- `time_range` (선택): 시간 범위\n\n### search_events\n\n텍스트로 이벤트를 검색합니다.\n\n**파라미터:**\n- `query` (필수): 검색 쿼리\n- `event_types` (선택): 이벤트 타입 필터 배열\n- `time_range` (선택): 시간 범위\n\n### export_events\n\n이벤트를 내보냅니다.\n\n**파라미터:**\n- `filter` (선택): 이벤트 필터 (get_events와 동일)\n- `format` (선택): 내보내기 형식 (`JSON`, `CSV`, `SQL`)\n\n### create_replay_session\n\n리플레이 세션을 생성합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "182", "text": "**파라미터:**\n- `name` (필수): 세션 이름\n- `description` (선택): 세션 설명\n- `filter` (선택): 이벤트 필터\n- `mode` (선택): 리플레이 모드 (`SAFE`, `FAST`, `VERBOSE`, `DRY_RUN`)\n- `strategy` (선택): 리플레이 전략 (`SEQUENTIAL`, `PARALLEL`, `DEPENDENCY_AWARE`, `SELECTIVE`)\n- `stop_on_error` (선택): 에러 시 중지 여부\n- `enable_validation` (선택): 검증 활성화 여부\n- `enable_rollback` (선택): 롤백 활성화 여부\n- `max_concurrency` (선택): 병렬 실행 시 최대 동시성\n- `skip_events` (선택): 건너뛸 이벤트 ID 배열\n- `include_events` (선택): 포함할 이벤트 ID 배열\n\n### start_replay", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "183", "text": "### start_replay\n\n리플레이 세션을 시작합니다.\n\n**파라미터:**\n- `session_id` (필수): 세션 ID\n\n### get_replay_progress\n\n리플레이 진행 상황을 조회합니다.\n\n**파라미터:**\n- `session_id` (필수): 세션 ID\n\n---\n\n## 사용 예시\n\n### 연속 태스크 실행 워크플로우\n\n```\n사용자: \"add-user-auth 변경 제안의 다음 태스크를 실행해줘\"\n\nClaude: [zyflow_get_next_task(changeId: \"add-user-auth\") 호출]\n        다음 태스크: \"사용자 인증 API 엔드포인트 구현\"\n\n        [작업 수행...]\n\n        완료했습니다. 태스크를 완료로 표시할까요?\n\n사용자: \"응\"", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "184", "text": "```\n사용자: \"add-user-auth 변경 제안의 다음 태스크를 실행해줘\"\n\nClaude: [zyflow_get_next_task(changeId: \"add-user-auth\") 호출]\n        다음 태스크: \"사용자 인증 API 엔드포인트 구현\"\n\n        [작업 수행...]\n\n        완료했습니다. 태스크를 완료로 표시할까요?\n\n사용자: \"응\"\n\nClaude: [zyflow_mark_complete(changeId: \"add-user-auth\", taskId: \"task-2-1\") 호출]\n        태스크가 완료되었습니다. (8/10 완료)\n```\n\n### 독립 태스크 관리\n\n```\n사용자: \"버그 수정 태스크를 만들어줘: 로그인 시 세션 만료 문제\"", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "185", "text": "사용자: \"응\"\n\nClaude: [zyflow_mark_complete(changeId: \"add-user-auth\", taskId: \"task-2-1\") 호출]\n        태스크가 완료되었습니다. (8/10 완료)\n```\n\n### 독립 태스크 관리\n\n```\n사용자: \"버그 수정 태스크를 만들어줘: 로그인 시 세션 만료 문제\"\n\nClaude: [task_create(\n          title: \"버그 수정: 로그인 시 세션 만료 문제\",\n          priority: \"high\",\n          tags: [\"bug\", \"auth\"]\n        ) 호출]\n\n        태스크 TASK-15가 생성되었습니다.\n\n사용자: \"작업 시작할게\"\n\nClaude: [task_update(id: \"TASK-15\", status: \"in-progress\") 호출]\n        TASK-15 상태가 \"in-progress\"로 변경되었습니다.\n```\n\n### 칸반 보드 조회", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "186", "text": "Claude: [task_create(\n          title: \"버그 수정: 로그인 시 세션 만료 문제\",\n          priority: \"high\",\n          tags: [\"bug\", \"auth\"]\n        ) 호출]\n\n        태스크 TASK-15가 생성되었습니다.\n\n사용자: \"작업 시작할게\"\n\nClaude: [task_update(id: \"TASK-15\", status: \"in-progress\") 호출]\n        TASK-15 상태가 \"in-progress\"로 변경되었습니다.\n```\n\n### 칸반 보드 조회\n\n```\n사용자: \"현재 태스크 현황을 칸반 형식으로 보여줘\"\n\nClaude: [task_list(kanban: true) 호출]\n\n        ## Todo (3개)\n        - TASK-10: API 문서 작성\n        - TASK-11: 테스트 케이스 추가\n        - TASK-12: 성능 최적화", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "187", "text": "### 칸반 보드 조회\n\n```\n사용자: \"현재 태스크 현황을 칸반 형식으로 보여줘\"\n\nClaude: [task_list(kanban: true) 호출]\n\n        ## Todo (3개)\n        - TASK-10: API 문서 작성\n        - TASK-11: 테스트 케이스 추가\n        - TASK-12: 성능 최적화\n\n        ## In Progress (2개)\n        - TASK-13: 인증 버그 수정\n        - TASK-14: UI 개선\n\n        ## Done (5개)\n        - TASK-1 ~ TASK-9\n```\n\n---\n\n## Integration Hub 도구\n\n프로젝트별 서비스 계정, 환경 설정, 테스트 계정을 관리하는 도구입니다.\n\n### integration_context", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "188", "text": "## In Progress (2개)\n        - TASK-13: 인증 버그 수정\n        - TASK-14: UI 개선\n\n        ## Done (5개)\n        - TASK-1 ~ TASK-9\n```\n\n---\n\n## Integration Hub 도구\n\n프로젝트별 서비스 계정, 환경 설정, 테스트 계정을 관리하는 도구입니다.\n\n### integration_context\n\n프로젝트의 통합 컨텍스트를 조회합니다. 연결된 서비스 계정, 환경 목록, 테스트 계정 정보를 반환합니다.\n\n**파라미터:**\n- `projectId` (필수): 프로젝트 ID", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "189", "text": "---\n\n## Integration Hub 도구\n\n프로젝트별 서비스 계정, 환경 설정, 테스트 계정을 관리하는 도구입니다.\n\n### integration_context\n\n프로젝트의 통합 컨텍스트를 조회합니다. 연결된 서비스 계정, 환경 목록, 테스트 계정 정보를 반환합니다.\n\n**파라미터:**\n- `projectId` (필수): 프로젝트 ID\n\n**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"context\": {\n    \"github\": { \"username\": \"myuser\", \"email\": \"user@example.com\" },\n    \"supabase\": { \"projectUrl\": \"https://xxx.supabase.co\" },\n    \"environments\": [\n      { \"id\": \"env1\", \"name\": \"local\", \"isActive\": true }\n    ],\n    \"testAccounts\": [\n      { \"role\": \"admin\", \"email\": \"admin@test.com\" }\n    ]\n  }\n}\n```", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "190", "text": "**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"context\": {\n    \"github\": { \"username\": \"myuser\", \"email\": \"user@example.com\" },\n    \"supabase\": { \"projectUrl\": \"https://xxx.supabase.co\" },\n    \"environments\": [\n      { \"id\": \"env1\", \"name\": \"local\", \"isActive\": true }\n    ],\n    \"testAccounts\": [\n      { \"role\": \"admin\", \"email\": \"admin@test.com\" }\n    ]\n  }\n}\n```\n\n> **참고:** 민감한 정보(토큰, 비밀번호)는 포함되지 않습니다.\n\n### integration_list_accounts\n\n등록된 서비스 계정 목록을 조회합니다.\n\n**파라미터:**\n- `type` (선택): 서비스 타입 필터 (`github`, `supabase`, `vercel`, `sentry`, `custom`)", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "191", "text": "> **참고:** 민감한 정보(토큰, 비밀번호)는 포함되지 않습니다.\n\n### integration_list_accounts\n\n등록된 서비스 계정 목록을 조회합니다.\n\n**파라미터:**\n- `type` (선택): 서비스 타입 필터 (`github`, `supabase`, `vercel`, `sentry`, `custom`)\n\n**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"accounts\": [\n    {\n      \"id\": \"acc1\",\n      \"type\": \"github\",\n      \"name\": \"My GitHub\",\n      \"credentials\": { \"username\": \"myuser\", \"pat\": \"ghp_...xxxx\" }\n    }\n  ]\n}\n```\n\n> **참고:** 민감 정보는 마스킹되어 반환됩니다.\n\n### integration_get_env\n\n프로젝트의 환경 설정 및 환경 변수를 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "192", "text": "> **참고:** 민감 정보는 마스킹되어 반환됩니다.\n\n### integration_get_env\n\n프로젝트의 환경 설정 및 환경 변수를 조회합니다.\n\n**파라미터:**\n- `projectId` (필수): 프로젝트 ID\n- `envId` (선택): 환경 ID (미지정 시 활성 환경 반환)\n\n**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"environment\": {\n    \"id\": \"env1\",\n    \"name\": \"local\",\n    \"serverUrl\": \"http://localhost:3000\",\n    \"isActive\": true\n  },\n  \"variables\": {\n    \"DATABASE_URL\": \"postgresql://...\",\n    \"API_KEY\": \"sk-xxx\"\n  }\n}\n```\n\n> **참고:** 환경 변수는 복호화된 원본으로 반환됩니다.\n\n### integration_apply_git", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "193", "text": "**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"environment\": {\n    \"id\": \"env1\",\n    \"name\": \"local\",\n    \"serverUrl\": \"http://localhost:3000\",\n    \"isActive\": true\n  },\n  \"variables\": {\n    \"DATABASE_URL\": \"postgresql://...\",\n    \"API_KEY\": \"sk-xxx\"\n  }\n}\n```\n\n> **참고:** 환경 변수는 복호화된 원본으로 반환됩니다.\n\n### integration_apply_git\n\n프로젝트에 연결된 GitHub 계정의 git config를 현재 디렉토리에 적용합니다.\n\n**파라미터:**\n- `projectId` (필수): 프로젝트 ID\n- `scope` (선택): git config 범위 (`local`, `global`), 기본값: `local`", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "194", "text": "> **참고:** 환경 변수는 복호화된 원본으로 반환됩니다.\n\n### integration_apply_git\n\n프로젝트에 연결된 GitHub 계정의 git config를 현재 디렉토리에 적용합니다.\n\n**파라미터:**\n- `projectId` (필수): 프로젝트 ID\n- `scope` (선택): git config 범위 (`local`, `global`), 기본값: `local`\n\n**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"applied\": {\n    \"user.name\": \"myuser\",\n    \"user.email\": \"user@example.com\"\n  },\n  \"scope\": \"local\",\n  \"message\": \"Git config applied: user.name=\\\"myuser\\\", user.email=\\\"user@example.com\\\"\"\n}\n```\n\n### integration_get_test_account\n\n프로젝트의 테스트 계정 정보를 조회합니다.", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "195", "text": "**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"applied\": {\n    \"user.name\": \"myuser\",\n    \"user.email\": \"user@example.com\"\n  },\n  \"scope\": \"local\",\n  \"message\": \"Git config applied: user.name=\\\"myuser\\\", user.email=\\\"user@example.com\\\"\"\n}\n```\n\n### integration_get_test_account\n\n프로젝트의 테스트 계정 정보를 조회합니다.\n\n**파라미터:**\n- `projectId` (필수): 프로젝트 ID\n- `role` (선택): 역할 필터 (예: `admin`, `user`)\n\n**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"accounts\": [\n    {\n      \"role\": \"admin\",\n      \"email\": \"admin@test.com\",\n      \"password\": \"actualPassword123\",\n      \"description\": \"관리자 테스트 계정\"\n    }\n  ]\n}\n```", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "196", "text": "**파라미터:**\n- `projectId` (필수): 프로젝트 ID\n- `role` (선택): 역할 필터 (예: `admin`, `user`)\n\n**반환값 예시:**\n```json\n{\n  \"success\": true,\n  \"accounts\": [\n    {\n      \"role\": \"admin\",\n      \"email\": \"admin@test.com\",\n      \"password\": \"actualPassword123\",\n      \"description\": \"관리자 테스트 계정\"\n    }\n  ]\n}\n```\n\n> **참고:** 비밀번호는 복호화된 원본으로 반환됩니다.\n\n### Integration Hub 사용 예시\n\n#### E2E 테스트 계정 사용\n\n```\n사용자: \"관리자 테스트 계정으로 로그인해서 테스트해줘\"\n\nClaude: [integration_get_test_account(projectId: \"my-project\", role: \"admin\") 호출]\n        테스트 계정: admin@test.com / password123", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "197", "text": "> **참고:** 비밀번호는 복호화된 원본으로 반환됩니다.\n\n### Integration Hub 사용 예시\n\n#### E2E 테스트 계정 사용\n\n```\n사용자: \"관리자 테스트 계정으로 로그인해서 테스트해줘\"\n\nClaude: [integration_get_test_account(projectId: \"my-project\", role: \"admin\") 호출]\n        테스트 계정: admin@test.com / password123\n\n        [해당 계정으로 E2E 테스트 수행...]\n```\n\n#### 멀티 계정 프로젝트에서 Git 설정\n\n```\n사용자: \"이 프로젝트에 맞는 git 설정 적용해줘\"\n\nClaude: [integration_apply_git(projectId: \"company-project\") 호출]\n        Git config가 적용되었습니다:\n        - user.name: \"company-user\"\n        - user.email: \"dev@company.com\"\n```\n\n#### 환경 변수 확인", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "198", "text": "[해당 계정으로 E2E 테스트 수행...]\n```\n\n#### 멀티 계정 프로젝트에서 Git 설정\n\n```\n사용자: \"이 프로젝트에 맞는 git 설정 적용해줘\"\n\nClaude: [integration_apply_git(projectId: \"company-project\") 호출]\n        Git config가 적용되었습니다:\n        - user.name: \"company-user\"\n        - user.email: \"dev@company.com\"\n```\n\n#### 환경 변수 확인\n\n```\n사용자: \"현재 프로젝트의 데이터베이스 URL이 뭐야?\"\n\nClaude: [integration_get_env(projectId: \"my-project\") 호출]\n        현재 환경: local\n        DATABASE_URL: postgresql://localhost:5432/mydb\n```", "metadata": {"file_path": "docs/mcp-tools.md", "file_name": "mcp-tools.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "199", "text": "# Multi-Provider Support Implementation\n\n## 개요\nSwarm 실행 시 다중 AI Provider를 지원하도록 확장 완료\n\n## 수정된 파일\n- `/Users/hansoo./ZELLYY/zyflow/server/claude-flow/executor.ts`\n\n## 구현된 기능\n\n### 1. Provider별 CLI 명령어 생성 (`buildProviderCommand`)\n```typescript\nprivate buildProviderCommand(provider: string, model?: string): { command: string; args: string[] }\n```\n\n**지원 Provider:**\n- `claude`: Claude Code CLI (stream-json 형식)\n- `gemini`: Gemini CLI\n- `qwen`: Qwen Code CLI\n- `kilo`: Kilo Code CLI\n- `opencode`: OpenCode CLI\n- `codex`: Codex CLI", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "200", "text": "## 구현된 기능\n\n### 1. Provider별 CLI 명령어 생성 (`buildProviderCommand`)\n```typescript\nprivate buildProviderCommand(provider: string, model?: string): { command: string; args: string[] }\n```\n\n**지원 Provider:**\n- `claude`: Claude Code CLI (stream-json 형식)\n- `gemini`: Gemini CLI\n- `qwen`: Qwen Code CLI\n- `kilo`: Kilo Code CLI\n- `opencode`: OpenCode CLI\n- `codex`: Codex CLI\n\n**특징:**\n- Provider별 CLI 명령어 자동 매핑\n- 모델 파라미터 동적 처리\n- Claude의 경우 모델명 자동 변환 (opus → claude-opus-4-5-20251101)\n\n### 2. Provider별 출력 파싱 (`parseOutput`, `parseClaudeOutput`, `parseTextOutput`)", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "201", "text": "**특징:**\n- Provider별 CLI 명령어 자동 매핑\n- 모델 파라미터 동적 처리\n- Claude의 경우 모델명 자동 변환 (opus → claude-opus-4-5-20251101)\n\n### 2. Provider별 출력 파싱 (`parseOutput`, `parseClaudeOutput`, `parseTextOutput`)\n\n**출력 파싱 전략:**\n- **Claude**: JSON (stream-json 형식) 파싱 우선\n- **기타 Provider**: 텍스트 파싱 (JSON 시도 후 fallback)\n\n**구현된 메서드:**\n1. `parseOutput()`: Provider 감지 및 적절한 파서 호출\n2. `parseClaudeOutput()`: Claude JSON 형식 파싱\n3. `parseTextOutput()`: 일반 텍스트 파싱 (다른 Provider용)", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "202", "text": "**출력 파싱 전략:**\n- **Claude**: JSON (stream-json 형식) 파싱 우선\n- **기타 Provider**: 텍스트 파싱 (JSON 시도 후 fallback)\n\n**구현된 메서드:**\n1. `parseOutput()`: Provider 감지 및 적절한 파서 호출\n2. `parseClaudeOutput()`: Claude JSON 형식 파싱\n3. `parseTextOutput()`: 일반 텍스트 파싱 (다른 Provider용)\n\n### 3. 실행 로그 개선\nProvider 정보가 포함된 상세 로그:\n```\nGEMINI 실행 중... (Swarm 모드) - 모델: gemini-2.5-pro\n```\n\nSwarm 지시사항에도 Provider 정보 포함:\n```\n## Swarm 실행 모드\n- Provider: gemini\n- 전략: development\n- 최대 에이전트: 5\n```\n\n## 사용 예시", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "203", "text": "### 3. 실행 로그 개선\nProvider 정보가 포함된 상세 로그:\n```\nGEMINI 실행 중... (Swarm 모드) - 모델: gemini-2.5-pro\n```\n\nSwarm 지시사항에도 Provider 정보 포함:\n```\n## Swarm 실행 모드\n- Provider: gemini\n- 전략: development\n- 최대 에이전트: 5\n```\n\n## 사용 예시\n\n### useSwarm 훅에서 사용\n```typescript\nconst { execute } = useSwarm()\n\nawait execute({\n  projectPath: '/path/to/project',\n  changeId: 'add-feature',\n  strategy: 'development',\n  maxAgents: 5,\n  provider: 'gemini',  // 새로 추가된 파라미터\n  model: 'gemini-2.5-pro'  // 새로 추가된 파라미터\n})\n```", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "204", "text": "## 사용 예시\n\n### useSwarm 훅에서 사용\n```typescript\nconst { execute } = useSwarm()\n\nawait execute({\n  projectPath: '/path/to/project',\n  changeId: 'add-feature',\n  strategy: 'development',\n  maxAgents: 5,\n  provider: 'gemini',  // 새로 추가된 파라미터\n  model: 'gemini-2.5-pro'  // 새로 추가된 파라미터\n})\n```\n\n### API 요청\n```typescript\nPOST /api/claude-flow/execute\n{\n  \"projectPath\": \"/path/to/project\",\n  \"changeId\": \"add-feature\",\n  \"mode\": \"full\",\n  \"strategy\": \"development\",\n  \"maxAgents\": 5,\n  \"provider\": \"qwen\",\n  \"model\": \"qwen-coder-plus\"\n}\n```\n\n## 기술적 세부사항", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "205", "text": "### API 요청\n```typescript\nPOST /api/claude-flow/execute\n{\n  \"projectPath\": \"/path/to/project\",\n  \"changeId\": \"add-feature\",\n  \"mode\": \"full\",\n  \"strategy\": \"development\",\n  \"maxAgents\": 5,\n  \"provider\": \"qwen\",\n  \"model\": \"qwen-coder-plus\"\n}\n```\n\n## 기술적 세부사항\n\n### 1. Provider 감지 및 기본값\n```typescript\nconst provider = instance.status.request.provider || 'claude'\n```\n- Provider 미지정 시 'claude' 기본값 사용\n\n### 2. CLI 명령어 생성 프로세스\n1. `buildProviderCommand()`에서 Provider별 command + args 생성\n2. Bash 스크립트로 래핑하여 stdin 리다이렉션 처리\n3. 임시 파일에 프롬프트 저장 (쉘 이스케이프 방지)", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "206", "text": "### 2. CLI 명령어 생성 프로세스\n1. `buildProviderCommand()`에서 Provider별 command + args 생성\n2. Bash 스크립트로 래핑하여 stdin 리다이렉션 처리\n3. 임시 파일에 프롬프트 저장 (쉘 이스케이프 방지)\n\n### 3. 출력 파싱 확장성\n- Provider별 커스텀 파싱 로직 추가 가능\n- JSON 및 텍스트 모두 지원\n- 기존 Claude JSON 형식과 완벽 호환\n\n## 향후 확장 가능성\n\n### 1. Provider별 출력 형식 처리\n각 Provider의 고유한 출력 형식에 맞춘 파서 추가:\n```typescript\ncase 'gemini':\n  return this.parseGeminiOutput(executionId, line)\ncase 'qwen':\n  return this.parseQwenOutput(executionId, line)\n```", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "207", "text": "## 향후 확장 가능성\n\n### 1. Provider별 출력 형식 처리\n각 Provider의 고유한 출력 형식에 맞춘 파서 추가:\n```typescript\ncase 'gemini':\n  return this.parseGeminiOutput(executionId, line)\ncase 'qwen':\n  return this.parseQwenOutput(executionId, line)\n```\n\n### 2. Provider별 기능 지원\n- Stream 모드 지원 여부\n- Tool calling 방식 차이 처리\n- 비용 추적 형식 통일\n\n### 3. 동적 Provider 추가\nCLI Adapter의 `DEFAULT_CLI_PROFILES`를 활용한 동적 프로필 지원\n\n## 타입 정의", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "208", "text": "### 2. Provider별 기능 지원\n- Stream 모드 지원 여부\n- Tool calling 방식 차이 처리\n- 비용 추적 형식 통일\n\n### 3. 동적 Provider 추가\nCLI Adapter의 `DEFAULT_CLI_PROFILES`를 활용한 동적 프로필 지원\n\n## 타입 정의\n\n### ExecutionRequest (types.ts)\n```typescript\nexport interface ExecutionRequest {\n  projectPath: string\n  changeId: string\n  taskId?: string\n  mode: ExecutionMode\n  strategy?: SwarmStrategy\n  maxAgents?: number\n  timeout?: number\n  provider?: AIProvider  // 추가됨\n  model?: string  // 추가됨\n}\n```\n\n### AIProvider (types.ts)\n```typescript\nexport type AIProvider = 'claude' | 'gemini' | 'codex' | 'qwen' | 'kilo' | 'opencode' | 'custom'\n```\n\n## 테스트 시나리오", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "209", "text": "### AIProvider (types.ts)\n```typescript\nexport type AIProvider = 'claude' | 'gemini' | 'codex' | 'qwen' | 'kilo' | 'opencode' | 'custom'\n```\n\n## 테스트 시나리오\n\n### 1. Claude Provider (기본)\n- 모델: opus, sonnet, haiku\n- 출력: stream-json\n- 검증: 기존 기능 정상 작동 확인\n\n### 2. Gemini Provider\n- 모델: gemini-2.5-flash, gemini-2.5-pro\n- 출력: 텍스트 (JSON fallback)\n- 검증: CLI 정상 호출, 로그 출력 확인\n\n### 3. 기타 Provider (qwen, kilo, opencode, codex)\n- 모델: Provider별 기본값\n- 출력: 텍스트\n- 검증: 명령어 생성 및 실행 확인", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "210", "text": "### 2. Gemini Provider\n- 모델: gemini-2.5-flash, gemini-2.5-pro\n- 출력: 텍스트 (JSON fallback)\n- 검증: CLI 정상 호출, 로그 출력 확인\n\n### 3. 기타 Provider (qwen, kilo, opencode, codex)\n- 모델: Provider별 기본값\n- 출력: 텍스트\n- 검증: 명령어 생성 및 실행 확인\n\n## 호환성\n- 기존 코드와 100% 하위 호환\n- Provider 미지정 시 Claude 기본 동작\n- useSwarm 훅 인터페이스 확장 (기존 파라미터 유지)\n\n## 마이그레이션 가이드\n기존 코드 수정 불필요. 필요시 provider/model 파라미터만 추가:", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "211", "text": "## 호환성\n- 기존 코드와 100% 하위 호환\n- Provider 미지정 시 Claude 기본 동작\n- useSwarm 훅 인터페이스 확장 (기존 파라미터 유지)\n\n## 마이그레이션 가이드\n기존 코드 수정 불필요. 필요시 provider/model 파라미터만 추가:\n\n```diff\nawait execute({\n  projectPath: '/path',\n  changeId: 'id',\n+ provider: 'gemini',\n+ model: 'gemini-2.5-pro'\n})\n```", "metadata": {"file_path": "docs/multi-provider-implementation.md", "file_name": "multi-provider-implementation.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "212", "text": "# claude-flow 외부 의존성 제거 완료\n\n## 변경 요약\n\n**작업일**: 2026-01-08  \n**목적**: 외부 `claude-flow@alpha` 패키지 의존성을 제거하고, 내부 구현으로 전환\n\n## 제거된 항목\n\n### 1. 서버 코드\n- ✅ `server/claude-flow/executor.ts` - 이전에 제거됨\n- ✅ `server/claude-flow/consensus.ts` - 이전에 제거됨\n- ✅ 라우트 `server/routes/claude-flow.ts` - 이전에 제거됨\n- ✅ `server/claude-flow/types.ts` - prompt-builder 의존성만 유지", "metadata": {"file_path": "docs/phase4-claude-flow-removal.md", "file_name": "phase4-claude-flow-removal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "213", "text": "## 제거된 항목\n\n### 1. 서버 코드\n- ✅ `server/claude-flow/executor.ts` - 이전에 제거됨\n- ✅ `server/claude-flow/consensus.ts` - 이전에 제거됨\n- ✅ 라우트 `server/routes/claude-flow.ts` - 이전에 제거됨\n- ✅ `server/claude-flow/types.ts` - prompt-builder 의존성만 유지\n\n### 2. 프론트엔드 코드\n- ✅ `src/hooks/useClaudeFlowExecution.ts` - **제거됨**\n  - `useSwarm.ts`의 하위 호환 래퍼로 대체\n- ✅ `src/config/api.ts` - `claudeFlow` 엔드포인트 제거됨\n- ✅ `src/components/claude-flow/ExecutionPanel.tsx` - import 경로 수정됨", "metadata": {"file_path": "docs/phase4-claude-flow-removal.md", "file_name": "phase4-claude-flow-removal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "214", "text": "### 3. Claude SDK 설정\n- ✅ `.claude/settings.json` - claude-flow@alpha 관련 항목 제거됨\n  - `env.CLAUDE_FLOW_*` 환경변수 제거\n  - `permissions.allow` 에서 `npx claude-flow:*` 제거\n  - `hooks.PreToolUse` - claude-flow@alpha hooks 제거\n  - `hooks.PostToolUse` - claude-flow@alpha hooks 제거\n  - `hooks.Stop` - claude-flow@alpha session-end 제거\n  - `enabledMcpjsonServers` - claude-flow 제거\n\n### 4. 스펙 정리\n- ✅ `openspec/specs/claude-flow-execution/` → `openspec/archive/claude-flow-execution/` 로 이동\n\n## 유지된 항목", "metadata": {"file_path": "docs/phase4-claude-flow-removal.md", "file_name": "phase4-claude-flow-removal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "215", "text": "### 4. 스펙 정리\n- ✅ `openspec/specs/claude-flow-execution/` → `openspec/archive/claude-flow-execution/` 로 이동\n\n## 유지된 항목\n\n### 내부 구현 (prompt-builder)\n`server/claude-flow/prompt-builder.ts`는 유지됩니다:\n- OpenSpec 문서를 AI 프롬프트로 변환하는 핵심 기능\n- `server/ai/index.ts`에서 사용 중\n- 외부 의존성 없이 독립적으로 동작\n\n### 타입 정의\n`src/types/index.ts`의 claude-flow 관련 타입들:\n- `ClaudeFlowExecutionMode`, `ClaudeFlowStrategy` 등\n- UI 컴포넌트와 API 호환성을 위해 유지\n- 추후 리네이밍 가능 (예: `ExecutionMode`, `Strategy`)", "metadata": {"file_path": "docs/phase4-claude-flow-removal.md", "file_name": "phase4-claude-flow-removal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "216", "text": "### 타입 정의\n`src/types/index.ts`의 claude-flow 관련 타입들:\n- `ClaudeFlowExecutionMode`, `ClaudeFlowStrategy` 등\n- UI 컴포넌트와 API 호환성을 위해 유지\n- 추후 리네이밍 가능 (예: `ExecutionMode`, `Strategy`)\n\n### 프론트엔드 컴포넌트\n`src/components/claude-flow/` 디렉토리:\n- `ExecutionPanel.tsx` - 실행 패널 UI\n- `LogViewer.tsx` - 로그 뷰어\n- `ProgressIndicator.tsx` - 진행 상태 표시\n\n## 테스트 결과\n\n- ✅ `npm run lint` - 통과 (기존 경고만 존재)\n- ✅ `npm run build` - 성공\n\n## 다음 단계 (선택사항)", "metadata": {"file_path": "docs/phase4-claude-flow-removal.md", "file_name": "phase4-claude-flow-removal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "217", "text": "## 테스트 결과\n\n- ✅ `npm run lint` - 통과 (기존 경고만 존재)\n- ✅ `npm run build` - 성공\n\n## 다음 단계 (선택사항)\n\n1. **타입 리네이밍**: `ClaudeFlow*` 타입들을 `AI*` 또는 `Execution*`으로 변경\n2. **컴포넌트 디렉토리 이동**: `src/components/claude-flow/` → `src/components/ai-execution/`\n3. **내부 모듈 리팩토링**: `server/claude-flow/` → `server/prompt-builder/`\n\n---\n\n작성자: AI Assistant  \nPhase 4 SDK 리팩토링 작업의 일부로 진행됨", "metadata": {"file_path": "docs/phase4-claude-flow-removal.md", "file_name": "phase4-claude-flow-removal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "218", "text": "# Phase 4 마이그레이션 완료 보고서\n\n**완료일**: 2026-01-08  \n**변경 ID**: `refactor-phase4-sdk`\n\n---\n\n## 📋 개요\n\nPhase 4는 Claude SDK 정렬을 목표로, 불필요한 에이전트 제거, 핵심 Skills 생성, Hooks 설정 확인, MCP 설정 정리, 그리고 CLAUDE.md 최종 정리를 수행했습니다.\n\n## ✅ 완료된 작업\n\n### 1. .claude/agents 정리", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "219", "text": "**완료일**: 2026-01-08  \n**변경 ID**: `refactor-phase4-sdk`\n\n---\n\n## 📋 개요\n\nPhase 4는 Claude SDK 정렬을 목표로, 불필요한 에이전트 제거, 핵심 Skills 생성, Hooks 설정 확인, MCP 설정 정리, 그리고 CLAUDE.md 최종 정리를 수행했습니다.\n\n## ✅ 완료된 작업\n\n### 1. .claude/agents 정리\n\n| 작업 | 상태 | 비고 |\n|------|------|------|\n| consensus/ 제거 | ✅ | 이미 없음 |\n| hive-mind/ 제거 | ✅ | 이미 없음 |\n| neural/ 제거 | ✅ | 이미 없음 |\n| swarm/ 제거 | ✅ | 이미 없음 |\n| flow-nexus/ 제거 | ✅ | 이미 없음 |\n| optimization/ 제거 | ✅ | 이미 없음 |\n| training/ 제거 | ✅ | 이미 없음 |", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "220", "text": "### 1. .claude/agents 정리\n\n| 작업 | 상태 | 비고 |\n|------|------|------|\n| consensus/ 제거 | ✅ | 이미 없음 |\n| hive-mind/ 제거 | ✅ | 이미 없음 |\n| neural/ 제거 | ✅ | 이미 없음 |\n| swarm/ 제거 | ✅ | 이미 없음 |\n| flow-nexus/ 제거 | ✅ | 이미 없음 |\n| optimization/ 제거 | ✅ | 이미 없음 |\n| training/ 제거 | ✅ | 이미 없음 |\n\n**유지된 핵심 에이전트** (`.claude/agents/core/`):\n- `coder.md`\n- `reviewer.md`\n- `tester.md`\n- `planner.md`\n- `researcher.md`\n\n### 2. Skills 생성\n\n4개의 핵심 Skills 생성 완료:", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "221", "text": "**유지된 핵심 에이전트** (`.claude/agents/core/`):\n- `coder.md`\n- `reviewer.md`\n- `tester.md`\n- `planner.md`\n- `researcher.md`\n\n### 2. Skills 생성\n\n4개의 핵심 Skills 생성 완료:\n\n| Skill | 위치 | 주요 내용 |\n|-------|------|----------|\n| OpenSpec | `.claude/skills/openspec/SKILL.md` | 7단계 파이프라인, proposal/tasks 관리 지침 |\n| Code Review | `.claude/skills/code-review/SKILL.md` | 품질 체크리스트, 보안 검토 항목 |\n| Testing | `.claude/skills/testing/SKILL.md` | AAA 패턴, 커버리지 기준 |\n| Git Workflow | `.claude/skills/git-workflow/SKILL.md` | 브랜치 전략, 한국어 커밋 규칙 |", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "222", "text": "### 3. SDK Hooks 설정\n\n`.claude/settings.json`에 이미 구성된 hooks 확인:\n\n| Hook 유형 | 매처 | 기능 |\n|----------|------|------|\n| PreToolUse | Bash | 명령어 안전성 검증, 리소스 준비 |\n| PreToolUse | Write\\|Edit\\|MultiEdit | 에이전트 할당, 컨텍스트 로드 |\n| PostToolUse | Bash | 메트릭 추적, 결과 저장 |\n| PostToolUse | Write\\|Edit\\|MultiEdit | 포맷팅, 메모리 업데이트 |\n| PreCompact | manual/auto | 압축 전 가이드 제공 |\n| Stop | - | 세션 요약, 상태 영속화 |\n\n### 4. MCP 설정 정리", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "223", "text": "### 4. MCP 설정 정리\n\n`.mcp.json` 확인 결과 - zyflow MCP 서버만 유지됨:\n```json\n{\n  \"mcpServers\": {\n    \"zyflow\": {\n      \"command\": \"node\",\n      \"args\": [\"/Users/hansoo./ZELLYY/zyflow/dist/mcp-server/index.js\"],\n      \"type\": \"stdio\"\n    }\n  }\n}\n```\n\n### 5. CLAUDE.md 최종 정리\n\n- ✅ Project Overview 간소화\n- ✅ Build Commands 유지\n- ✅ Code Style & Best Practices 유지\n- ✅ File Organization 정리\n- ✅ MCP 도구 목록 추가 (zyflow만)\n- ✅ Skills 사용법 추가\n- ✅ Core Agents 섹션 추가\n\n### 6. 문서화", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "224", "text": "### 5. CLAUDE.md 최종 정리\n\n- ✅ Project Overview 간소화\n- ✅ Build Commands 유지\n- ✅ Code Style & Best Practices 유지\n- ✅ File Organization 정리\n- ✅ MCP 도구 목록 추가 (zyflow만)\n- ✅ Skills 사용법 추가\n- ✅ Core Agents 섹션 추가\n\n### 6. 문서화\n\n| 문서 | 위치 | 내용 |\n|------|------|------|\n| Claude SDK 가이드 | `docs/claude-sdk-guide.md` | Skills 사용법, Hooks 설정 가이드 |\n| 마이그레이션 완료 | `docs/phase4-migration-complete.md` | 본 문서 |\n\n---\n\n## 📁 변경된 파일 목록", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "225", "text": "### 6. 문서화\n\n| 문서 | 위치 | 내용 |\n|------|------|------|\n| Claude SDK 가이드 | `docs/claude-sdk-guide.md` | Skills 사용법, Hooks 설정 가이드 |\n| 마이그레이션 완료 | `docs/phase4-migration-complete.md` | 본 문서 |\n\n---\n\n## 📁 변경된 파일 목록\n\n### 신규 생성\n```\n.claude/skills/openspec/SKILL.md\n.claude/skills/code-review/SKILL.md\n.claude/skills/testing/SKILL.md\n.claude/skills/git-workflow/SKILL.md\ndocs/claude-sdk-guide.md\ndocs/phase4-migration-complete.md\n```\n\n### 수정됨\n```\nCLAUDE.md                                           # 간소화 및 Skills/Agents 섹션 추가\n.gitignore                                          # .mcp.json 주석 처리\nopenspec/changes/refactor-phase4-sdk/tasks.md       # 진행 상황 업데이트\n```\n\n---", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "226", "text": "### 수정됨\n```\nCLAUDE.md                                           # 간소화 및 Skills/Agents 섹션 추가\n.gitignore                                          # .mcp.json 주석 처리\nopenspec/changes/refactor-phase4-sdk/tasks.md       # 진행 상황 업데이트\n```\n\n---\n\n## 🔧 최종 디렉토리 구조", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "227", "text": "```\n.claude/\n├── agents/\n│   ├── core/           # 핵심 에이전트 (5개)\n│   │   ├── coder.md\n│   │   ├── reviewer.md\n│   │   ├── tester.md\n│   │   ├── planner.md\n│   │   └── researcher.md\n│   └── github/         # GitHub 관련 에이전트\n├── skills/             # 핵심 스킬 (4개 신규 추가)\n│   ├── openspec/\n│   │   └── SKILL.md\n│   ├── code-review/\n│   │   └── SKILL.md\n│   ├── testing/\n│   │   └── SKILL.md\n│   ├── git-workflow/\n│   │   └── SKILL.md\n│   └── ...             # 기타 기존 스킬\n├── settings.json       # SDK 설정 (hooks 포함)\n└── settings.local.json # 로컬 설정\n```\n\n---\n\n## ⚠️ 알려진 이슈", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "228", "text": "---\n\n## ⚠️ 알려진 이슈\n\n없음\n\n---\n\n## 📝 후속 작업\n\n1. **검증 필요**: Claude Code에서 Skills 인식 및 /skill 명령어 테스트\n2. **MCP 서버 테스트**: zyflow MCP 도구 정상 동작 확인\n3. **기존 skills 정리**: `.claude/skills/`의 26개 기존 스킬 중 불필요한 것 정리 검토\n\n---\n\n## 🏁 결론\n\nPhase 4 Claude SDK 정렬 작업이 성공적으로 완료되었습니다. 핵심 에이전트 5개와 신규 Skills 4개가 정리되어 일관된 개발 워크플로우를 지원할 수 있는 기반이 마련되었습니다.", "metadata": {"file_path": "docs/phase4-migration-complete.md", "file_name": "phase4-migration-complete.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "229", "text": "# ZyFlow 향후 개선 정리 (업데이트)\n\nSDD/TDD 기본 방향은 유지하되, 가벼운 규칙과 자동화를 우선한다. 각 섹션에 “바로 할 일”을 붙였다.\n\n## 1) 동기화 신뢰도\n- 단일 소스 선언: `tasks.md` ↔ DB 중 무엇을 진실로 둘지 결정하고 충돌 정책(우선순위/타임스탬프/섹션·오더 병합) 문서화.\n- 변경 로그/리플레이: watcher 이벤트를 큐에 기록하고 실패 시 재적용 가능하도록 설계.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "230", "text": "- 변경 로그/리플레이: watcher 이벤트를 큐에 기록하고 실패 시 재적용 가능하도록 설계.\n- 정합성 점검: `tasks.md` ↔ DB diff/헬스체크를 CLI/API로 제공, 주기 실행.\n- 동시 수정 보호: 태스크 단위 버전 필드(updated_at 등)로 잃어버린 업데이트 방지.\n**바로 할 일**: 진실원칙 결정 → 충돌 정책 초안 작성 → watcher 로그/리플레이 설계 메모 추가.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "231", "text": "## 2) 환경 추상화\n- 설정 분리: API 베이스 URL/포트, 프로젝트 루트, watcher 옵션을 env/설정 파일로 노출.\n- macOS 의존 제거: `osascript`는 선택 사항, 경로 직접 입력/CLI 인자로 대체 경로 제공.\n- Docker 여부: 팀 재현성 필요 시에만 도입. 필수는 bind-mount(`openspec` 루트)와 포트 노출. 단일 사용자면 버전 고정(.tool-versions/노드 버전)으로도 충분.\n**바로 할 일**: env/설정 스펙 정의 → macOS 의존 옵션화 → Docker 필요성 판단 노트 작성.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "232", "text": "## 3) 워크플로우/규칙 경량화\n- 미니 SPEC 기준: “3파일 이상” 또는 “아키텍처 영향 중간↑/1시간↑”일 때만 mini-spec, 그 외는 태스크 설명+AC.\n- Plan→Run→Sync는 선택형: 기본은 `start → test → done` 3단계, 필요 시 플래그로 확장.\n- TDD 게이트: 중요 태스크만 “테스트 통과 시 완료”, 일반 태스크는 경고+체크박스.\n**바로 할 일**: mini-spec 트리거 문구 확정 → CLI/API에 `start/test/done` 단축 플로우 명시.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "233", "text": "## 4) 자동화 우선순위\n- watcher/sync 신뢰도 개선(로그, 리트라이, 정합성 체크)이 최우선.\n- 테스트/헬스체크 훅: CLI/API 호출 시 테스트 명령 연결, 실패 요약을 태스크 히스토리에 기록.\n- 상태/로그 표준화: API 헬스체크, 동기화 실패율/드리프트 지표 노출.\n**바로 할 일**: 헬스 지표 목록 정의 → 실패 요약 저장 위치 결정 → 리트라이 정책 초안.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "234", "text": "## 5) 테스트 전략(준비)\n- 단위: parser(`tasks.md`), sync 머지 로직, Drizzle CRUD, MCP/CLI 핸들러, 핵심 hooks.\n- 통합: “`tasks.md` 수정 → sync → DB → UI” 왕복, “DB 수정 → `tasks.md` 재생성” 각 1~2 케이스.\n- 프런트: useChanges/useTasks + Flow UI 최소 상호작용 테스트.\n**바로 할 일**: 우선순위 높은 3~5개 단위 테스트 후보 선정 → 첫 통합 시나리오 1개 작성.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "235", "text": "## 6) 제품/UX 방향\n- 로컬/프라이빗 강점 유지, 규칙은 가볍게, 도구가 지켜주게(자동화·헬스체크 중심).\n- 멀티 프로젝트 지원은 경로·환경 설정만으로 가능하게 유지.\n- 모아이 ADK의 강제 절차는 참조하되, ZF에서는 선택적/경량 옵션만 채택.\n**바로 할 일**: “기본 가벼움 + 선택적 강화” 원칙을 README/설정 가이드에 반영.", "metadata": {"file_path": "docs/roadmap.md", "file_name": "roadmap.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "236", "text": "# ZyFlow 단일 진실 원천 아키텍처 설계 문서\n\n## 개요\n\n이 문서는 ZyFlow 프로젝트의 단일 진실 원천(Single Source of Truth) 아키텍처 설계에 대한 포괄적인 가이드입니다. 복잡한 동기화 문제를 해결하고, 안정적이며 확장 가능한 시스템을 구축하기 위한 완전한 아키텍처 솔루션을 제시합니다.\n\n## 아키텍처 목표", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "237", "text": "## 아키텍처 목표\n\n### 1. 핵심 목표\n- **단일 진실 원천 확보**: tasks.md 파일과 SQLite DB 간의 일관성 보장\n- **데이터 무결성**: 모든 상태 변경의 추적 가능성 및 원자성 보장\n- **고가용성**: 99.9% 이상의 시스템 가용성 및 장애 복구 능력\n- **확장성**: 수평적 확장이 가능한 마이크로서비스 아키텍처\n- **성능**: 동기화 지연 100ms 이하의 고성능 처리", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "238", "text": "### 2. 기술적 목표\n- **TypeScript 완전 지원**: 타입 안전성 보장\n- **이벤트 기반 아키텍처**: CQRS 패턴 적용\n- **동시성 제어**: MVCC 기반의 낙관적 동시성 제어\n- **자동 복구**: 셀프 힐링 메커니즘\n- **오프라인 지원**: 네트워크 불안정성 대응\n\n## 아키텍처 구성 요소\n\n### 1. 하이브리드 단일 진실 원천\n\nZyFlow는 하이브리드 방식의 단일 진실 원천을 채택합니다:", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "239", "text": "## 아키텍처 구성 요소\n\n### 1. 하이브리드 단일 진실 원천\n\nZyFlow는 하이브리드 방식의 단일 진실 원천을 채택합니다:\n\n- **tasks.md 파일**: 사용자 명세서(Source of Specification)\n  - 사용자가 직접 편집하는 명세서 역할\n  - 버전 관리 및 협업 기능 제공\n  - Git을 통한 변경 이력 추적\n\n- **SQLite DB**: 실행 상태(Source of Runtime State)\n  - 시스템의 실제 실행 상태 저장\n  - 빠른 조회 및 복잡한 쿼리 지원\n  - 트랜잭션 및 동시성 제어\n\n### 2. 핵심 컴포넌트", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "240", "text": "- **SQLite DB**: 실행 상태(Source of Runtime State)\n  - 시스템의 실제 실행 상태 저장\n  - 빠른 조회 및 복잡한 쿼리 지원\n  - 트랜잭션 및 동시성 제어\n\n### 2. 핵심 컴포넌트\n\n#### 중앙 동기화 코디네이터 (SyncCoordinator)\n```typescript\n// 모든 동기화 작업을 조율하는 핵심 컴포넌트\nclass SyncCoordinator {\n  // 3계층 충돌 감지\n  detectConflicts(local, remote, base): Conflict[]\n  \n  // 지능형 충돌 해결\n  resolveConflicts(conflicts): Resolution[]\n  \n  // 원자적 동기화 실행\n  executeSync(syncRequest): SyncResult\n}\n```", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "241", "text": "#### 이벤트 기반 아키텍처\n```typescript\n// CQRS 패턴 적용\ninterface DomainEvent {\n  id: string\n  type: string\n  aggregateId: string\n  timestamp: Date\n  data: any\n  metadata: any\n}\n\n// 모든 상태 변경을 이벤트로 기록\nclass EventStore {\n  append(event: DomainEvent): Promise<void>\n  getEvents(aggregateId: string): Promise<DomainEvent[]>\n  replay(aggregateId: string, version?: number): Promise<any>\n}\n```", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "242", "text": "// 모든 상태 변경을 이벤트로 기록\nclass EventStore {\n  append(event: DomainEvent): Promise<void>\n  getEvents(aggregateId: string): Promise<DomainEvent[]>\n  replay(aggregateId: string, version?: number): Promise<any>\n}\n```\n\n#### 상태 관리 시스템\n```typescript\n// MVCC 기반 동시성 제어\nclass StateManager {\n  // 낙관적 동시성 제어\n  updateStateWithVersion(aggregateId, state, expectedVersion): Promise<void>\n  \n  // 다중 버전 상태 관리\n  readVersion(aggregateId, version?): Promise<VersionedState>\n  \n  // 충돌 감지 및 해결\n  detectAndResolveConflicts(local, remote): Promise<Resolution>\n}\n```\n\n### 3. 지원 시스템", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "243", "text": "### 3. 지원 시스템\n\n#### 성능 최적화\n- **다단계 캐싱**: L1(메모리) → L2(Redis) → L3(DB)\n- **배치 처리**: 대량 동기화 작업의 효율적 처리\n- **병렬 처리**: 동시성 제어와 성능의 균형\n\n#### 장애 격리 및 복구\n- **서킷 브레이커**: 연쇄적 장애 방지\n- **자동 복구**: 장애 감지 및 자동 해결\n- **롤백 시스템**: 안전한 상태 복원\n\n## 아키텍처 다이어그램\n\n### 전체 시스템 구조", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "244", "text": "```mermaid\ngraph TB\n    subgraph \"사용자 인터페이스 계층\"\n        UI[Web UI]\n        CLI[CLI 도구]\n        MCP[MCP 서버]\n    end\n    \n    subgraph \"애플리케이션 계층\"\n        SC[Sync Coordinator]\n        SM[State Manager]\n        EB[Event Bus]\n    end\n    \n    subgraph \"단일 진실 원천\"\n        SPEC[tasks.md 파일<br/>명세서]\n        DB[SQLite DB<br/>실행 상태]\n    end\n    \n    subgraph \"지원 시스템\"\n        CACHE[다단계 캐시]\n        RECOVERY[복구 시스템]\n        MONITOR[모니터링]\n    end\n    \n    UI --> SC\n    CLI --> SC\n    MCP --> SC\n    \n    SC --> SM\n    SC --> EB\n    \n    SM --> SPEC\n    SM --> DB\n    \n    SM --> CACHE\n    SC --> RECOVERY\n    EB --> MONITOR\n```\n\n### 데이터 흐름", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "245", "text": "### 데이터 흐름\n\n```mermaid\nsequenceDiagram\n    participant U as 사용자\n    participant SC as Sync Coordinator\n    participant SM as State Manager\n    participant SPEC as tasks.md\n    participant DB as SQLite DB\n    participant EB as Event Bus\n    \n    Note over U, EB: 사용자가 tasks.md 수정\n    U->>SPEC: 파일 수정\n    SPEC->>SC: 변경 감지\n    SC->>SM: 상태 분석 요청\n    SM->>DB: 현재 상태 조회\n    DB-->>SM: 상태 데이터 반환\n    \n    SC->>SC: 충돌 감지 및 해결\n    SC->>DB: 해결된 상태 적용\n    SC->>EB: 동기화 이벤트 발행\n    \n    EB->>EB: 이벤트 핸들러 처리\n```\n\n## 기술 스택", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "246", "text": "## 기술 스택\n\n### 핵심 기술\n- **언어**: TypeScript 5.0+\n- **데이터베이스**: SQLite (주요), PostgreSQL (이벤트 저장소)\n- **캐시**: Redis\n- **이벤트 버스**: 내부 구현 또는 Redis Streams\n- **파일 시스템**: Node.js fs 모듈 + chokidar\n\n### 개발 도구\n- **테스트**: Jest + Supertest + K6\n- **모니터링**: Prometheus + Grafana\n- **CI/CD**: GitHub Actions\n- **문서**: Mermaid 다이어그램\n\n## 설계 문서 구조\n\n이 아키텍처 설계는 다음 문서들로 구성됩니다:", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "247", "text": "### 개발 도구\n- **테스트**: Jest + Supertest + K6\n- **모니터링**: Prometheus + Grafana\n- **CI/CD**: GitHub Actions\n- **문서**: Mermaid 다이어그램\n\n## 설계 문서 구조\n\n이 아키텍처 설계는 다음 문서들로 구성됩니다:\n\n### 1. 핵심 아키텍처 문서\n- [`single-source-of-truth.md`](./single-source-of-truth.md): 하이브리드 단일 진실 원천 전략\n- [`sync-coordinator-design.md`](./sync-coordinator-design.md): 중앙 동기화 코디네이터 설계\n- [`event-driven-cqrs-design.md`](./event-driven-cqrs-design.md): 이벤트 기반 아키텍처 및 CQRS 패턴", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "248", "text": "### 2. 시스템 설계 문서\n- [`state-management-concurrency.md`](./state-management-concurrency.md): 상태 관리 및 동시성 제어\n- [`performance-scalability.md`](./performance-scalability.md): 성능 및 확장성 최적화\n- [`fault-isolation-recovery.md`](./fault-isolation-recovery.md): 장애 격리 및 자동 복구\n\n### 3. 구현 가이드\n- [`core-interfaces-types.md`](./core-interfaces-types.md): 핵심 인터페이스 및 타입 정의\n- [`architecture-diagrams.md`](./architecture-diagrams.md): 아키텍처 다이어그램 및 시각화\n- [`migration-strategy.md`](./migration-strategy.md): 마이그레이션 전략 및 로드맵\n- [`integration-testing-strategy.md`](./integration-testing-strategy.md): 통합 테스트 전략\n\n## 구현 로드맵", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "249", "text": "## 구현 로드맵\n\n### 1단계: 기반 인프라 구축 (2주)\n- 이벤트 저장소 구축\n- 상태 관리자 기본 구현\n- 모니터링 시스템 연동\n\n### 2단계: 이벤트 시스템 도입 (3주)\n- 도메인 이벤트 정의\n- 이벤트 핸들러 구현\n- File Watcher 확장\n\n### 3단계: 상태 관리 및 동시성 제어 (4주)\n- MVCC 구현\n- 충돌 감지기 통합\n- 자동 충돌 해결기 구현", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "250", "text": "### 2단계: 이벤트 시스템 도입 (3주)\n- 도메인 이벤트 정의\n- 이벤트 핸들러 구현\n- File Watcher 확장\n\n### 3단계: 상태 관리 및 동시성 제어 (4주)\n- MVCC 구현\n- 충돌 감지기 통합\n- 자동 충돌 해결기 구현\n\n### 4단계: 고급 기능 통합 (3주)\n- 다단계 캐싱 시스템\n- 서킷 브레이커 패턴\n- 자동 복구 시스템\n\n### 5단계: 전면 전환 및 레거시 제거 (2주)\n- 트래픽 점진적 전환\n- 데이터 최종 동기화\n- 레거시 코드 제거", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "251", "text": "### 5단계: 전면 전환 및 레거시 제거 (2주)\n- 트래픽 점진적 전환\n- 데이터 최종 동기화\n- 레거시 코드 제거\n\n## 성공 지표\n\n### 기술적 지표\n- **동기화 지연 시간**: 100ms 이하\n- **시스템 가용성**: 99.9% 이상\n- **충돌 해결률**: 90% 이상\n- **오류율**: 0.1% 이하\n\n### 운영적 지표\n- **롤백 횟수**: 2회 이하\n- **장애 복구 시간**: 5분 이하\n- **팀 생산성**: 90% 이상 유지", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "252", "text": "### 운영적 지표\n- **롤백 횟수**: 2회 이하\n- **장애 복구 시간**: 5분 이하\n- **팀 생산성**: 90% 이상 유지\n\n### 비즈니스 지표\n- **사용자 만족도**: 4.5/5 이상\n- **기능 완성도**: 100%\n- **비용 효율성**: 20% 개선\n\n## 위험 관리\n\n### 기술적 위험 완화\n- **데이터 손실**: 정기 백업, 롤백 계획\n- **성능 저하**: 성능 테스트, 점진적 전환\n- **호환성 문제**: 이중 운영, 호환성 테스트", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "253", "text": "## 위험 관리\n\n### 기술적 위험 완화\n- **데이터 손실**: 정기 백업, 롤백 계획\n- **성능 저하**: 성능 테스트, 점진적 전환\n- **호환성 문제**: 이중 운영, 호환성 테스트\n\n### 운영적 위험 완화\n- **다운타임**: 카나리 배포, 블루-그린 배포\n- **팀 피로도**: 단계적 마이그레이션, 충분한 휴식\n- **일정 지연**: 여유 시간 확보, 우선순위 조정\n\n## 결론", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "254", "text": "## 결론\n\nZyFlow 단일 진실 원천 아키텍처는 복잡한 동기화 문제를 해결하기 위한 포괄적인 솔루션을 제공합니다. 하이브리드 방식의 단일 진실 원천, 이벤트 기반 아키텍처, 그리고 강력한 동시성 제어 메커니즘을 통해 안정적이고 확장 가능한 시스템을 구축할 수 있습니다.\n\n이 아키텍처의 핵심 강점:", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "255", "text": "이 아키텍처의 핵심 강점:\n\n1. **안정성**: 다중 계층의 장애 격리 및 자동 복구\n2. **확장성**: 마이크로서비스 기반의 수평적 확장\n3. **성능**: 다단계 캐싱과 최적화된 동기화\n4. **유지보수성**: 명확한 인터페이스와 포괄적인 테스트\n5. **미래 대비**: 유연한 아키텍처로 기술 변화에 대응\n\n이 설계 문서를 통해 개발팀은 명확한 방향성을 가지고 ZyFlow의 차세대 아키텍처를 성공적으로 구축할 수 있을 것입니다.\n\n---\n\n## 시작 가이드", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "256", "text": "이 설계 문서를 통해 개발팀은 명확한 방향성을 가지고 ZyFlow의 차세대 아키텍처를 성공적으로 구축할 수 있을 것입니다.\n\n---\n\n## 시작 가이드\n\n### 개발 환경 설정\n```bash\n# 의존성 설치\nnpm install\n\n# 테스트 환경 설정\nnpm run test:setup\n\n# 개발 서버 시작\nnpm run dev\n```", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "257", "text": "---\n\n## 시작 가이드\n\n### 개발 환경 설정\n```bash\n# 의존성 설치\nnpm install\n\n# 테스트 환경 설정\nnpm run test:setup\n\n# 개발 서버 시작\nnpm run dev\n```\n\n### 아키텍처 학습 순서\n1. [`single-source-of-truth.md`](./single-source-of-truth.md) - 아키텍처 전체 이해\n2. [`sync-coordinator-design.md`](./sync-coordinator-design.md) - 핵심 동기화 메커니즘\n3. [`event-driven-cqrs-design.md`](./event-driven-cqrs-design.md) - 이벤트 기반 설계\n4. [`migration-strategy.md`](./migration-strategy.md) - 구현 계획\n5. [`integration-testing-strategy.md`](./integration-testing-strategy.md) - 테스트 전략", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "258", "text": "### 기여 가이드\n- 모든 코드 변경은 해당 테스트를 포함해야 합니다\n- 새로운 기능은 먼저 설계 문서에 논의되어야 합니다\n- 성능 영향은 반드시 측정하고 문서화해야 합니다\n- 아키텍처 변경은 팀 리뷰를 거쳐야 합니다", "metadata": {"file_path": "docs/architecture/README.md", "file_name": "README.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "259", "text": "# 아키텍처 다이어그램 및 데이터 흐름 시각화\n\n## 개요\n\nZyFlow 단일 진실 원천 아키텍처의 복잡한 컴포넌트 간의 관계와 데이터 흐름을 시각화하여 시스템의 동작 방식을 명확하게 이해할 수 있도록 합니다. 이 다이어그램들은 개발자, 시스템 관리자, 및 이해관계자들이 아키텍처를 쉽게 파악할 수 있도록 돕습니다.\n\n## 전체 아키텍처 다이어그램\n\n### 1. 시스템 전체 구조도\n\n```mermaid\ngraph TB\n    subgraph \"사용자 인터페이스 계층\"\n        UI[Web UI]", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "260", "text": "## 전체 아키텍처 다이어그램\n\n### 1. 시스템 전체 구조도\n\n```mermaid\ngraph TB\n    subgraph \"사용자 인터페이스 계층\"\n        UI[Web UI]\n        CLI[CLI 도구]\n        MCP[MCP 서버]\n    end\n    \n    subgraph \"API 게이트웨이 계층\"\n        GW[API Gateway]\n        AUTH[인증 미들웨어]\n    end\n    \n    subgraph \"애플리케이션 계층\"\n        APP[ZyFlow 애플리케이션]\n        \n        subgraph \"커맨드 핸들러\"", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "261", "text": "계층\"\n        GW[API Gateway]\n        AUTH[인증 미들웨어]\n    end\n    \n    subgraph \"애플리케이션 계층\"\n        APP[ZyFlow 애플리케이션]\n        \n        subgraph \"커맨드 핸들러\"\n            CH[Command Handlers]\n            QH[Query Handlers]\n        end\n        \n        subgraph \"서비스 계층\"\n            SC[Sync Coordinator]\n            CM[Change Manager]\n            TM[Task Manager]\n        end", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "262", "text": "CH[Command Handlers]\n            QH[Query Handlers]\n        end\n        \n        subgraph \"서비스 계층\"\n            SC[Sync Coordinator]\n            CM[Change Manager]\n            TM[Task Manager]\n        end\n    end\n    \n    subgraph \"이벤트 시스템\"\n        EB[Event Bus]\n        ES[Event Store]\n        \n        subgraph \"이벤트 프로세서\"\n            EP[Event Processors]\n            ER[Event Replay Engine]\n        end", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "263", "text": "end\n    end\n    \n    subgraph \"이벤트 시스템\"\n        EB[Event Bus]\n        ES[Event Store]\n        \n        subgraph \"이벤트 프로세서\"\n            EP[Event Processors]\n            ER[Event Replay Engine]\n        end\n    end\n    \n    subgraph \"상태 관리\"\n        SM[State Manager]\n        MVCC[MVCC Controller]\n        LOCK[Lock Manager]\n    end\n    \n    subgraph \"데이터 저장소\"\n        subgraph \"진실 원천\"\n            SPEC[Spec Store<br/>tasks.md 파일]", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "264", "text": "end\n    end\n    \n    subgraph \"상태 관리\"\n        SM[State Manager]\n        MVCC[MVCC Controller]\n        LOCK[Lock Manager]\n    end\n    \n    subgraph \"데이터 저장소\"\n        subgraph \"진실 원천\"\n            SPEC[Spec Store<br/>tasks.md 파일]\n            DB[Runtime DB<br/>SQLite]\n        end\n        \n        subgraph \"이벤트 저장\"\n            EVENT_DB[Event Database]\n            SNAP[Snapshot Store]\n        end\n        \n        subgraph \"캐시\"", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "265", "text": "Store<br/>tasks.md 파일]\n            DB[Runtime DB<br/>SQLite]\n        end\n        \n        subgraph \"이벤트 저장\"\n            EVENT_DB[Event Database]\n            SNAP[Snapshot Store]\n        end\n        \n        subgraph \"캐시\"\n            L1[L1 Cache<br/>Memory]\n            L2[L2 Cache<br/>Redis]\n        end\n    end\n    \n    subgraph \"복구 시스템\"\n        RM[Recovery Manager]\n        CB[Circuit Breakers]\n        HC[Health Checker]\n        BK[Backup", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "266", "text": "subgraph \"캐시\"\n            L1[L1 Cache<br/>Memory]\n            L2[L2 Cache<br/>Redis]\n        end\n    end\n    \n    subgraph \"복구 시스템\"\n        RM[Recovery Manager]\n        CB[Circuit Breakers]\n        HC[Health Checker]\n        BK[Backup Manager]\n    end\n    \n    subgraph \"모니터링\"\n        MON[Monitoring System]\n        MET[Metrics Collector]\n        ALERT[Alert Manager]\n    end\n    \n    %% 데이터 흐름\n    UI --> GW\n    CLI --> GW\n    MCP --> GW\n    \n    GW --> AUTH\n    GW -->", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "267", "text": "Checker]\n        BK[Backup Manager]\n    end\n    \n    subgraph \"모니터링\"\n        MON[Monitoring System]\n        MET[Metrics Collector]\n        ALERT[Alert Manager]\n    end\n    \n    %% 데이터 흐름\n    UI --> GW\n    CLI --> GW\n    MCP --> GW\n    \n    GW --> AUTH\n    GW --> APP\n    \n    APP --> CH\n    APP --> QH\n    CH --> SC\n    CH --> CM\n    CH --> TM\n    \n    SC --> EB\n    CM --> EB\n    TM --> EB\n    \n    EB --> ES\n    EB --> EP\n    EB --> ER\n    \n    EP --> SM\n    ER --> SM", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "268", "text": "GW --> AUTH\n    GW --> APP\n    \n    APP --> CH\n    APP --> QH\n    CH --> SC\n    CH --> CM\n    CH --> TM\n    \n    SC --> EB\n    CM --> EB\n    TM --> EB\n    \n    EB --> ES\n    EB --> EP\n    EB --> ER\n    \n    EP --> SM\n    ER --> SM\n    \n    SM --> MVCC\n    SM --> LOCK\n    \n    SM --> SPEC\n    SM --> DB\n    \n    ES --> EVENT_DB\n    ES --> SNAP\n    \n    MVCC --> L1\n    MVCC --> L2\n    \n    RM --> CB\n    RM --> HC\n    RM --> BK\n    \n    MON --> MET\n    MON --> ALERT", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "269", "text": "ER --> SM\n    \n    SM --> MVCC\n    SM --> LOCK\n    \n    SM --> SPEC\n    SM --> DB\n    \n    ES --> EVENT_DB\n    ES --> SNAP\n    \n    MVCC --> L1\n    MVCC --> L2\n    \n    RM --> CB\n    RM --> HC\n    RM --> BK\n    \n    MON --> MET\n    MON --> ALERT\n    \n    %% 모니터링 연결\n    APP --> MON\n    EB --> MON\n    SM --> MON\n    RM --> MON\n```\n\n### 2. 데이터 흐름 다이어그램\n\n```mermaid\ngraph LR\n    subgraph \"명세서 (Spec) 영역\"\n        A1[tasks.md 파일]\n        A2[File Watcher]\n        A3[Parser]", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "270", "text": "MON --> ALERT\n    \n    %% 모니터링 연결\n    APP --> MON\n    EB --> MON\n    SM --> MON\n    RM --> MON\n```\n\n### 2. 데이터 흐름 다이어그램\n\n```mermaid\ngraph LR\n    subgraph \"명세서 (Spec) 영역\"\n        A1[tasks.md 파일]\n        A2[File Watcher]\n        A3[Parser]\n    end\n    \n    subgraph \"실행 상태 (Runtime) 영역\"\n        B1[SQLite DB]\n        B2[State Manager]\n        B3[Query Handlers]\n    end\n    \n    subgraph \"이벤트 시스템\"\n        C1[Event Bus]\n        C2[Event Store]", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "271", "text": "A3[Parser]\n    end\n    \n    subgraph \"실행 상태 (Runtime) 영역\"\n        B1[SQLite DB]\n        B2[State Manager]\n        B3[Query Handlers]\n    end\n    \n    subgraph \"이벤트 시스템\"\n        C1[Event Bus]\n        C2[Event Store]\n        C3[Event Processors]\n    end\n    \n    subgraph \"동기화 코디네이터\"\n        D1[Conflict Detector]\n        D2[Conflict Resolver]\n        D3[Sync Engine]\n    end\n    \n    %% 정상 동기화 흐름\n    A1 --> A2\n    A2 -->", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "272", "text": "C2[Event Store]\n        C3[Event Processors]\n    end\n    \n    subgraph \"동기화 코디네이터\"\n        D1[Conflict Detector]\n        D2[Conflict Resolver]\n        D3[Sync Engine]\n    end\n    \n    %% 정상 동기화 흐름\n    A1 --> A2\n    A2 --> A3\n    A3 --> D1\n    D1 --> D2\n    D2 --> D3\n    D3 --> B1\n    D3 --> B2\n    \n    %% 이벤트 기반 흐름\n    B1 --> C1\n    B2 --> C1\n    C1 --> C2\n    C2 --> C3\n    C3 --> B1", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "273", "text": "A1 --> A2\n    A2 --> A3\n    A3 --> D1\n    D1 --> D2\n    D2 --> D3\n    D3 --> B1\n    D3 --> B2\n    \n    %% 이벤트 기반 흐름\n    B1 --> C1\n    B2 --> C1\n    C1 --> C2\n    C2 --> C3\n    C3 --> B1\n    C3 --> B2\n    \n    %% 역방향 동기화 흐름\n    B1 --> D1\n    B2 --> D1\n    D1 --> D2\n    D2 --> D3\n    D3 --> A1\n    \n    %% 사용자 인터랙션 흐름\n    UI --> B3\n    UI --> A1\n    CLI -->", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "274", "text": "C3 --> B1\n    C3 --> B2\n    \n    %% 역방향 동기화 흐름\n    B1 --> D1\n    B2 --> D1\n    D1 --> D2\n    D2 --> D3\n    D3 --> A1\n    \n    %% 사용자 인터랙션 흐름\n    UI --> B3\n    UI --> A1\n    CLI --> B3\n    CLI --> A1\n```\n\n## 컴포넌트 상세 다이어그램\n\n### 1. 동기화 코디네이터 상세 흐름", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "275", "text": "B2 --> D1\n    D1 --> D2\n    D2 --> D3\n    D3 --> A1\n    \n    %% 사용자 인터랙션 흐름\n    UI --> B3\n    UI --> A1\n    CLI --> B3\n    CLI --> A1\n```\n\n## 컴포넌트 상세 다이어그램\n\n### 1. 동기화 코디네이터 상세 흐름\n\n```mermaid\nsequenceDiagram\n    participant U as 사용자\n    participant FW as File Watcher\n    participant SC as Sync Coordinator\n    participant CD as Conflict Detector\n    participant CR as Conflict Resolver\n    participant DB as Runtime DB\n    participant FS as File System\n    participant EB as Event Bus\n    \n    Note over U, FS: 사용자가 tasks.md 수정\n    U->>FS: 파일 수정\n    \n    Note over FW,", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "276", "text": "### 1. 동기화 코디네이터 상세 흐름\n\n```mermaid\nsequenceDiagram\n    participant U as 사용자\n    participant FW as File Watcher\n    participant SC as Sync Coordinator\n    participant CD as Conflict Detector\n    participant CR as Conflict Resolver\n    participant DB as Runtime DB\n    participant FS as File System\n    participant EB as Event Bus\n    \n    Note over U, FS: 사용자가 tasks.md 수정\n    U->>FS: 파일 수정\n    \n    Note over FW, SC: 파일 변경 감지\n    FS->>FW: 변경 이벤트\n    FW->>SC: 동기화 요청\n    \n    Note over SC, DB: 현재 상태 조회\n    SC->>DB: 현재 태스크 상태 조회\n    DB-->>SC: 상태 데이터 반환\n    \n    Note over SC,", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "277", "text": "FS: 사용자가 tasks.md 수정\n    U->>FS: 파일 수정\n    \n    Note over FW, SC: 파일 변경 감지\n    FS->>FW: 변경 이벤트\n    FW->>SC: 동기화 요청\n    \n    Note over SC, DB: 현재 상태 조회\n    SC->>DB: 현재 태스크 상태 조회\n    DB-->>SC: 상태 데이터 반환\n    \n    Note over SC, CD: 충돌 감지\n    SC->>CD: 충돌 분석 요청\n    CD-->>SC: 충돌 목록 반환\n    \n    alt 충돌 발생\n        Note over SC, CR: 충돌 해결\n        SC->>CR: 자동 해결 시도\n        CR-->>SC: 해결 결과\n        \n        alt 자동 해결 성공\n            Note over SC,", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "278", "text": "CD: 충돌 감지\n    SC->>CD: 충돌 분석 요청\n    CD-->>SC: 충돌 목록 반환\n    \n    alt 충돌 발생\n        Note over SC, CR: 충돌 해결\n        SC->>CR: 자동 해결 시도\n        CR-->>SC: 해결 결과\n        \n        alt 자동 해결 성공\n            Note over SC, DB: 해결된 상태 적용\n            SC->>DB: 충돌 해결된 데이터 적용\n            SC->>EB: 충돌 해결 이벤트 발행\n        else 자동 해결 실패\n            Note over SC,", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "279", "text": "CR: 충돌 해결\n        SC->>CR: 자동 해결 시도\n        CR-->>SC: 해결 결과\n        \n        alt 자동 해결 성공\n            Note over SC, DB: 해결된 상태 적용\n            SC->>DB: 충돌 해결된 데이터 적용\n            SC->>EB: 충돌 해결 이벤트 발행\n        else 자동 해결 실패\n            Note over SC, U: 수동 개입 요청\n            SC->>U: 충돌 해결 UI 표시\n            U->>SC: 사용자 선택\n            SC->>CR: 사용자 선택 적용\n            CR-->>SC: 최종 해결 결과\n            SC->>DB: 최종 데이터 적용\n            SC->>FS: tasks.md 파일 업데이트\n            SC->>EB: 충돌 해결 이벤트 발행\n        end\n    else 충돌 없음\n        Note over SC,", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "280", "text": "md 파일 업데이트\n            SC->>EB: 충돌 해결 이벤트 발행\n        end\n    else 충돌 없음\n        Note over SC, DB: 정상 동기화\n        SC->>DB: 새로운 상태 적용\n        SC->>EB: 동기화 완료 이벤트 발행\n    end\n    \n    Note over EB: 이벤트 처리\n    EB->>EB: 이벤트 핸들러에게 전달\n```\n\n### 2. 이벤트 기반 CQRS 흐름", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "281", "text": "```mermaid\ngraph TD\n    subgraph \"Command Side (쓰기)\"\n        C1[Command Handler]\n        C2[Aggregate Root]\n        C3[Event Store]\n        C4[State Manager]\n    end\n    \n    subgraph \"Query Side (읽기)\"\n        Q1[Query Handler]\n        Q2[Read Model]\n        Q3[Cache]\n        Q4[Event Store]\n    end\n    \n    subgraph \"Event Processing\"\n        E1[Event Bus]\n        E2[Event Processor]\n        E3[Event Replay]\n        E4[Projection Builder]\n    end\n    \n    %% Command 흐름\n    C1 --> C2\n    C2 --> C3\n    C2 --> C4\n    C3 --> E1\n    \n    %% Query 흐름\n    Q1 --> Q2\n    Q2 --> Q3\n    Q2 --> Q4\n    Q4 --> E1\n    \n    %% Event 처리 흐름\n    E1 --> E2\n    E2 --> E3\n    E3 --> E4\n    E4 --> Q2\n```", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "282", "text": "### 3. 상태 관리 및 동시성 제어 흐름", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "283", "text": "```mermaid\ngraph TD\n    subgraph \"상태 관리 계층\"\n        SM1[State Manager]\n        SM2[MVCC Controller]\n        SM3[Lock Manager]\n        SM4[Conflict Resolver]\n    end\n    \n    subgraph \"동시성 제어\"\n        CC1[Optimistic Lock]\n        CC2[Version Check]\n        CC3[Transaction Manager]\n        CC4[Deadlock Detector]\n    end\n    \n    subgraph \"저장소 계층\"\n        ST1[Memory Store]\n        ST2[Persistent Store]\n        ST3[Event Store]\n        ST4[Cache Layer]\n    end\n    \n    %% 상태 수정 흐름\n    SM1 --> CC2\n    CC2 --> CC1\n    CC1 --> CC3\n    CC3 --> ST1\n    CC3 --> ST2\n    CC3 --> ST3\n    \n    %% 충돌 해결 흐름\n    SM2 --> SM4\n    SM4 --> CC1\n    \n    %% 롤백 흐름\n    SM1 --> ST4\n    ST4 --> SM1\n```", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "284", "text": "### 4. 장애 격리 및 복구 흐름\n\n```mermaid\ngraph TD\n    subgraph \"장애 감지\"\n        FD1[Failure Detector]\n        FD2[Health Checker]\n        FD3[Anomaly Detector]\n        FD4[Circuit Breaker]\n    end\n    \n    subgraph \"격리 경계\"\n        IB1[Process Boundary]\n        IB2[Service Boundary]\n        IB3[Database Boundary]\n        IB4[Network Boundary]\n    end\n    \n    subgraph \"복구 시스템\"\n        RS1[Recovery Manager]\n        RS2[Auto Recovery Engine]\n        RS3[Manual Recovery UI]", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "285", "text": "경계\"\n        IB1[Process Boundary]\n        IB2[Service Boundary]\n        IB3[Database Boundary]\n        IB4[Network Boundary]\n    end\n    \n    subgraph \"복구 시스템\"\n        RS1[Recovery Manager]\n        RS2[Auto Recovery Engine]\n        RS3[Manual Recovery UI]\n        RS4[Backup Manager]\n    end\n    \n    subgraph \"롤백 시스템\"\n        RB1[Rollback Points]\n        RB2[State Snapshots]\n        RB3[Transaction Log]\n    end\n    \n    %% 장애 감지 흐름\n    FD1 --> IB1\n    FD2 --> IB2", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "286", "text": "Recovery UI]\n        RS4[Backup Manager]\n    end\n    \n    subgraph \"롤백 시스템\"\n        RB1[Rollback Points]\n        RB2[State Snapshots]\n        RB3[Transaction Log]\n    end\n    \n    %% 장애 감지 흐름\n    FD1 --> IB1\n    FD2 --> IB2\n    FD3 --> IB3\n    FD4 --> IB4\n    \n    %% 격리 실행 흐름\n    IB1 --> RS1\n    IB2 --> RS1\n    IB3 --> RS1\n    IB4 --> RS1\n    \n    %% 복구 실행 흐름\n    RS1 --> RS2\n    RS2 --> RB1\n    RS2 --> RB2\n    RS2", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "287", "text": "FD2 --> IB2\n    FD3 --> IB3\n    FD4 --> IB4\n    \n    %% 격리 실행 흐름\n    IB1 --> RS1\n    IB2 --> RS1\n    IB3 --> RS1\n    IB4 --> RS1\n    \n    %% 복구 실행 흐름\n    RS1 --> RS2\n    RS2 --> RB1\n    RS2 --> RB2\n    RS2 --> RB3\n    \n    %% 수동 개입 흐름\n    RS1 --> RS3\n    RS3 --> RS2\n    RS3 --> RS4\n```\n\n## 데이터 모델 관계도\n\n### 1. 태스크 데이터 모델", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "288", "text": "RS3 --> RS4\n```\n\n## 데이터 모델 관계도\n\n### 1. 태스크 데이터 모델\n\n```mermaid\nerDiagram\n    Task ||--o{ TaskGroup : belongs_to\n    Task ||--o{ Change : part_of\n    Task ||--o{ User : assigned_to\n    Task ||--o{ Tag : tagged_with\n    \n    Task {\n        string id\n        string title\n        string description\n        enum status\n        enum priority\n        enum origin\n        datetime created_at\n        datetime updated_at\n        datetime completed_at\n        int version\n        string checksum\n    }\n    \n    TaskGroup {\n        string id\n        string title\n        int order\n        string major_title\n        int sub_order\n    }\n    \n    Change {\n        string id\n        string title\n        string description\n        enum status\n        enum current_stage\n        int progress\n        datetime created_at\n        datetime updated_at\n    }\n    \n    User {\n        string id\n        string name\n        string email\n    }\n    \n    Tag {\n        string id\n        string name\n        string color\n    }\n```", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "289", "text": "### 2. 이벤트 데이터 모델\n\n```mermaid\nerDiagram\n    DomainEvent ||--o{ Aggregate : generated_by\n    DomainEvent ||--o{ User : caused_by\n    DomainEvent ||--o{ EventSnapshot : creates\n    \n    DomainEvent {\n        string id\n        string type\n        string aggregate_id\n        string aggregate_type\n        int version\n        datetime timestamp\n        json data\n        json metadata\n    }\n    \n    Aggregate {\n        string id\n        string type\n        int version\n        json state\n        datetime last_updated\n    }\n    \n    EventSnapshot {\n        string aggregate_id\n        string aggregate_type\n        int version\n        json state_data\n        datetime created_at\n        string checksum\n    }\n    \n    User {\n        string id\n        string name\n        string email\n    }\n```\n\n## 배포 아키텍처\n\n### 1. 마이크로서비스 아키텍처\n\n```mermaid\ngraph TB\n    subgraph \"로드 밸런서\"\n        LB[Load Balancer]", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "290", "text": "## 배포 아키텍처\n\n### 1. 마이크로서비스 아키텍처\n\n```mermaid\ngraph TB\n    subgraph \"로드 밸런서\"\n        LB[Load Balancer]\n    end\n    \n    subgraph \"API 서비스 클러스터\"\n        API1[API Server 1]\n        API2[API Server 2]\n        API3[API Server N]\n    end\n    \n    subgraph \"Sync 서비스 클러스터\"\n        SYNC1[Sync Service 1]\n        SYNC2[Sync Service 2]\n        SYNC3[Sync Service N]\n    end\n    \n    subgraph \"공유 저장소\"\n        REDIS[Redis Cache]", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "291", "text": "Server 2]\n        API3[API Server N]\n    end\n    \n    subgraph \"Sync 서비스 클러스터\"\n        SYNC1[Sync Service 1]\n        SYNC2[Sync Service 2]\n        SYNC3[Sync Service N]\n    end\n    \n    subgraph \"공유 저장소\"\n        REDIS[Redis Cache]\n        DB[(PostgreSQL/MySQL)]\n        EVENT[Event Store Cluster]\n    end\n    \n    subgraph \"파일 저장소\"\n        FS1[Shared File System 1]\n        FS2[Shared File System 2]\n        FS3[Shared File System N]\n    end\n    \n    %% 로드 밸런싱\n    LB --> API1", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "292", "text": "Cache]\n        DB[(PostgreSQL/MySQL)]\n        EVENT[Event Store Cluster]\n    end\n    \n    subgraph \"파일 저장소\"\n        FS1[Shared File System 1]\n        FS2[Shared File System 2]\n        FS3[Shared File System N]\n    end\n    \n    %% 로드 밸런싱\n    LB --> API1\n    LB --> API2\n    LB --> API3\n    \n    %% 서비스 간 통신\n    API1 --> REDIS\n    API2 --> REDIS\n    API3 --> REDIS\n    \n    API1 --> DB\n    API2 --> DB\n    API3 --> DB\n    \n    SYNC1 --> EVENT\n    SYNC2 --> EVENT\n    SYNC3 --> EVENT", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "293", "text": "LB --> API1\n    LB --> API2\n    LB --> API3\n    \n    %% 서비스 간 통신\n    API1 --> REDIS\n    API2 --> REDIS\n    API3 --> REDIS\n    \n    API1 --> DB\n    API2 --> DB\n    API3 --> DB\n    \n    SYNC1 --> EVENT\n    SYNC2 --> EVENT\n    SYNC3 --> EVENT\n    \n    %% 파일 시스템 접근\n    API1 --> FS1\n    API2 --> FS2\n    SYNC1 --> FS1\n    SYNC2 --> FS2\n```\n\n### 2. 하이브리드 클라우드 아키텍처\n\n```mermaid\ngraph TB\n    subgraph \"프론트엔드 (클라이언트)\"\n        WEB[Web Application]", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "294", "text": "SYNC3 --> EVENT\n    \n    %% 파일 시스템 접근\n    API1 --> FS1\n    API2 --> FS2\n    SYNC1 --> FS1\n    SYNC2 --> FS2\n```\n\n### 2. 하이브리드 클라우드 아키텍처\n\n```mermaid\ngraph TB\n    subgraph \"프론트엔드 (클라이언트)\"\n        WEB[Web Application]\n        MOBILE[Mobile App]\n        DESKTOP[Desktop App]\n    end\n    \n    subgraph \"API 게이트웨이\"\n        GW[API Gateway]\n        CDN[CDN]\n    end\n    \n    subgraph \"클라우드 서비스\"\n        CLOUD_API[Cloud API Services]", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "295", "text": "WEB[Web Application]\n        MOBILE[Mobile App]\n        DESKTOP[Desktop App]\n    end\n    \n    subgraph \"API 게이트웨이\"\n        GW[API Gateway]\n        CDN[CDN]\n    end\n    \n    subgraph \"클라우드 서비스\"\n        CLOUD_API[Cloud API Services]\n        CLOUD_SYNC[Cloud Sync Services]\n        CLOUD_EVENT[Cloud Event Processing]\n    end\n    \n    subgraph \"클라우드 저장소\"\n        CLOUD_DB[Cloud Database]\n        CLOUD_CACHE[Cloud Cache]\n        CLOUD_FILES[Cloud File Storage]\n    end\n    \n    subgraph \"온프레미스", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "296", "text": "CLOUD_API[Cloud API Services]\n        CLOUD_SYNC[Cloud Sync Services]\n        CLOUD_EVENT[Cloud Event Processing]\n    end\n    \n    subgraph \"클라우드 저장소\"\n        CLOUD_DB[Cloud Database]\n        CLOUD_CACHE[Cloud Cache]\n        CLOUD_FILES[Cloud File Storage]\n    end\n    \n    subgraph \"온프레미스 저장소\"\n        ONPREM_DB[On-premise Database]\n        ONPREM_FILES[Local File System]\n    end\n    \n    %% 클라이언트 통신\n    WEB --> GW\n    MOBILE --> GW\n    DESKTOP --> GW\n    \n    GW --> CDN\n    GW --> CLOUD_API\n    \n    %% 서비스 간", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "297", "text": "subgraph \"온프레미스 저장소\"\n        ONPREM_DB[On-premise Database]\n        ONPREM_FILES[Local File System]\n    end\n    \n    %% 클라이언트 통신\n    WEB --> GW\n    MOBILE --> GW\n    DESKTOP --> GW\n    \n    GW --> CDN\n    GW --> CLOUD_API\n    \n    %% 서비스 간 통신\n    CLOUD_API --> CLOUD_DB\n    CLOUD_API --> CLOUD_CACHE\n    CLOUD_SYNC --> CLOUD_FILES\n    CLOUD_EVENT --> CLOUD_DB\n    \n    %% 하이브리드 동기화\n    CLOUD_SYNC --> ONPREM_FILES\n    CLOUD_EVENT --> ONPREM_DB\n```\n\n## 성능 최적화 다이어그램", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "298", "text": "GW --> CLOUD_API\n    \n    %% 서비스 간 통신\n    CLOUD_API --> CLOUD_DB\n    CLOUD_API --> CLOUD_CACHE\n    CLOUD_SYNC --> CLOUD_FILES\n    CLOUD_EVENT --> CLOUD_DB\n    \n    %% 하이브리드 동기화\n    CLOUD_SYNC --> ONPREM_FILES\n    CLOUD_EVENT --> ONPREM_DB\n```\n\n## 성능 최적화 다이어그램\n\n### 1. 캐싱 전략", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "299", "text": "## 성능 최적화 다이어그램\n\n### 1. 캐싱 전략\n\n```mermaid\ngraph TD\n    subgraph \"다단계 캐시 아키텍처\"\n        L1[L1 Cache<br/>In-Memory<br/>1-10ms]\n        L2[L2 Cache<br/>Redis<br/>10-50ms]\n        L3[L3 Cache<br/>Database<br/>50-200ms]\n    end\n    \n    subgraph \"캐시 전략\"\n        WRITE_THROUGH[Write-Through]\n        WRITE_BEHIND[Write-Behind]\n        REFRESH_AHEAD[Refresh-Ahead]\n        CACHE_ASIDE[Cache-Aside]\n    end\n    \n    subgraph \"캐시 무효화\"\n        TTL[TTL 기반 무효화]\n        LRU[LRU eviction]\n        WRITE_INVALIDATE[쓰기 시 무효화]\n        MANUAL[수동 무효화]\n    end\n    \n    %% 데이터 흐름\n    L1 -.", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "300", "text": "-> L2\n    L2 -.-> L3\n    \n    WRITE_THROUGH --> L1\n    WRITE_BEHIND --> L1\n    REFRESH_AHEAD --> L1\n    CACHE_ASIDE --> L2\n```\n\n### 2. 데이터베이스 최적화\n\n```mermaid\ngraph TD\n    subgraph \"읽기 최적화\"\n        IDX1[Primary Indexes]\n        IDX2[Secondary Indexes]\n        IDX3[Composite Indexes]\n        IDX4[Partial Indexes]\n    end\n    \n    subgraph \"쿼리 최적화\"\n        QRY1[Query Optimization]\n        QRY2[Connection Pooling]\n        QRY3[Prepared Statements]\n        QRY4[Batch Processing]\n    end\n    \n    subgraph \"파티셔닝\"", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "301", "text": "Indexes]\n        IDX4[Partial Indexes]\n    end\n    \n    subgraph \"쿼리 최적화\"\n        QRY1[Query Optimization]\n        QRY2[Connection Pooling]\n        QRY3[Prepared Statements]\n        QRY4[Batch Processing]\n    end\n    \n    subgraph \"파티셔닝\"\n        PART1[Horizontal Partitioning]\n        PART2[Vertical Partitioning]\n        PART3[Range Partitioning]\n        PART4[Hash Partitioning]\n    end\n    \n    %% 인덱스 관계\n    IDX1 --> QRY1\n    IDX2 --> QRY1\n    IDX3 --> QRY1\n    IDX4 --> QRY1", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "302", "text": "PART1[Horizontal Partitioning]\n        PART2[Vertical Partitioning]\n        PART3[Range Partitioning]\n        PART4[Hash Partitioning]\n    end\n    \n    %% 인덱스 관계\n    IDX1 --> QRY1\n    IDX2 --> QRY1\n    IDX3 --> QRY1\n    IDX4 --> QRY1\n    \n    %% 최적화 적용\n    QRY1 --> QRY2\n    QRY2 --> QRY3\n    QRY3 --> QRY4\n    \n    %% 파티셔닝 적용\n    PART1 --> QRY1\n    PART2 --> QRY1\n    PART3 --> QRY1\n    PART4 --> QRY1\n```\n\n## 모니터링 및 관찰 가능성", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "303", "text": "--> QRY1\n    \n    %% 최적화 적용\n    QRY1 --> QRY2\n    QRY2 --> QRY3\n    QRY3 --> QRY4\n    \n    %% 파티셔닝 적용\n    PART1 --> QRY1\n    PART2 --> QRY1\n    PART3 --> QRY1\n    PART4 --> QRY1\n```\n\n## 모니터링 및 관찰 가능성\n\n### 1. 모니터링 아키텍처\n\n```mermaid\ngraph TD\n    subgraph \"메트릭 수집\"\n        APP_METRICS[Application Metrics]\n        SYS_METRICS[System Metrics]\n        DB_METRICS[Database Metrics]\n        NET_METRICS[Network Metrics]\n    end\n    \n    subgraph \"로그 수집\"", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "304", "text": "### 1. 모니터링 아키텍처\n\n```mermaid\ngraph TD\n    subgraph \"메트릭 수집\"\n        APP_METRICS[Application Metrics]\n        SYS_METRICS[System Metrics]\n        DB_METRICS[Database Metrics]\n        NET_METRICS[Network Metrics]\n    end\n    \n    subgraph \"로그 수집\"\n        APP_LOGS[Application Logs]\n        ACCESS_LOGS[Access Logs]\n        ERROR_LOGS[Error Logs]\n        AUDIT_LOGS[Audit Logs]\n    end\n    \n    subgraph \"추적 시스템\"\n        TRACE[Distributed Tracing]\n        SPAN[Span Collection]\n        PROFILE[Performance Profiling]\n    end", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "305", "text": "APP_LOGS[Application Logs]\n        ACCESS_LOGS[Access Logs]\n        ERROR_LOGS[Error Logs]\n        AUDIT_LOGS[Audit Logs]\n    end\n    \n    subgraph \"추적 시스템\"\n        TRACE[Distributed Tracing]\n        SPAN[Span Collection]\n        PROFILE[Performance Profiling]\n    end\n    \n    subgraph \"관찰 가능성\"\n        PROMETHEUS[Prometheus]\n        GRAFANA[Grafana]\n        JAEGER[Jaeger]\n        ELK[ELK Stack]\n    end\n    \n    %% 데이터 흐름\n    APP_METRICS --> PROMETHEUS\n    SYS_METRICS --> PROMETHEUS\n    DB_METRICS", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "306", "text": "end\n    \n    subgraph \"관찰 가능성\"\n        PROMETHEUS[Prometheus]\n        GRAFANA[Grafana]\n        JAEGER[Jaeger]\n        ELK[ELK Stack]\n    end\n    \n    %% 데이터 흐름\n    APP_METRICS --> PROMETHEUS\n    SYS_METRICS --> PROMETHEUS\n    DB_METRICS --> PROMETHEUS\n    NET_METRICS --> PROMETHEUS\n    \n    APP_LOGS --> ELK\n    ACCESS_LOGS --> ELK\n    ERROR_LOGS --> ELK\n    AUDIT_LOGS --> ELK\n    \n    TRACE --> JAEGER\n    SPAN --> JAEGER\n    PROFILE --> JAEGER\n    \n    PROMETHEUS --> GRAFANA\n    ELK -->", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "307", "text": "PROMETHEUS\n    DB_METRICS --> PROMETHEUS\n    NET_METRICS --> PROMETHEUS\n    \n    APP_LOGS --> ELK\n    ACCESS_LOGS --> ELK\n    ERROR_LOGS --> ELK\n    AUDIT_LOGS --> ELK\n    \n    TRACE --> JAEGER\n    SPAN --> JAEGER\n    PROFILE --> JAEGER\n    \n    PROMETHEUS --> GRAFANA\n    ELK --> GRAFANA\n    JAEGER --> GRAFANA\n```\n\n### 2. 알림 시스템\n\n```mermaid\ngraph TD\n    subgraph \"알림 소스\"\n        HEALTH[Health Checks]\n        METRICS[Metrics Thresholds]\n        MANUAL[Manual Triggers]\n        EVENTS[Event Triggers]\n    end", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "308", "text": "--> GRAFANA\n    ELK --> GRAFANA\n    JAEGER --> GRAFANA\n```\n\n### 2. 알림 시스템\n\n```mermaid\ngraph TD\n    subgraph \"알림 소스\"\n        HEALTH[Health Checks]\n        METRICS[Metrics Thresholds]\n        MANUAL[Manual Triggers]\n        EVENTS[Event Triggers]\n    end\n    \n    subgraph \"알림 채널\"\n        EMAIL[Email Notifications]\n        SMS[SMS Notifications]\n        SLACK[Slack Integration]\n        WEBHOOK[Webhook Notifications]\n        PUSH[Push Notifications]\n    end\n    \n    subgraph \"알림 관리\"\n        ROUTING[Alert Routing]", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "309", "text": "end\n    \n    subgraph \"알림 채널\"\n        EMAIL[Email Notifications]\n        SMS[SMS Notifications]\n        SLACK[Slack Integration]\n        WEBHOOK[Webhook Notifications]\n        PUSH[Push Notifications]\n    end\n    \n    subgraph \"알림 관리\"\n        ROUTING[Alert Routing]\n        ESCALATION[Escalation Policies]\n        SUPPRESSION[Alert Suppression]\n        SCHEDULED[Scheduled Alerts]\n    end\n    \n    %% 알림 흐름\n    HEALTH --> ROUTING\n    METRICS --> ROUTING\n    MANUAL --> ROUTING\n    EVENTS --> ROUTING\n    \n    ROUTING --> EMAIL\n    ROUTING --> SMS", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "310", "text": "ROUTING[Alert Routing]\n        ESCALATION[Escalation Policies]\n        SUPPRESSION[Alert Suppression]\n        SCHEDULED[Scheduled Alerts]\n    end\n    \n    %% 알림 흐름\n    HEALTH --> ROUTING\n    METRICS --> ROUTING\n    MANUAL --> ROUTING\n    EVENTS --> ROUTING\n    \n    ROUTING --> EMAIL\n    ROUTING --> SMS\n    ROUTING --> SLACK\n    ROUTING --> WEBHOOK\n    ROUTING --> PUSH\n    \n    ROUTING --> ESCALATION\n    ESCALATION --> EMAIL\n    ESCALATION --> SMS\n    ESCALATION --> SLACK\n    \n    ROUTING --> SUPPRESSION\n    ROUTING --> SCHEDULED\n```\n\n## 결론", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "311", "text": "ROUTING\n    EVENTS --> ROUTING\n    \n    ROUTING --> EMAIL\n    ROUTING --> SMS\n    ROUTING --> SLACK\n    ROUTING --> WEBHOOK\n    ROUTING --> PUSH\n    \n    ROUTING --> ESCALATION\n    ESCALATION --> EMAIL\n    ESCALATION --> SMS\n    ESCALATION --> SLACK\n    \n    ROUTING --> SUPPRESSION\n    ROUTING --> SCHEDULED\n```\n\n## 결론\n\n이 아키텍처 다이어그램들은 ZyFlow 단일 진실 원천 시스템의 복잡성을 시각적으로 표현하여 다음과 같은 이점들을 제공합니다:", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "312", "text": "1. **전체 시스템 구조**: 모든 컴포넌트 간의 관계와 의존성 명확화\n2. **데이터 흐름**: 명세서와 실행 상태 간의 동기화 과정 상세화\n3. **컴포넌트 상호작용**: 각 컴포넌트의 내부 동작 방식 시각화\n4. **배포 전략**: 다양한 배포 환경에서의 아키텍처 적용 방안\n5. **최적화 전략**: 성능 향상을 위한 다양한 최적화 기법 시각화\n6. **모니터링 아키텍처**: 시스템 상태 모니터링과 알림 구조", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "313", "text": "이 다이어그램들은 개발팀이 시스템을 이해하고, 문제를 진단하며, 새로운 기능을 추가할 때 중요한 참고 자료로 활용될 것입니다.", "metadata": {"file_path": "docs/architecture/architecture-diagrams.md", "file_name": "architecture-diagrams.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "314", "text": "# 핵심 인터페이스 및 타입 정의\n\n## 개요\n\nZyFlow 단일 진실 원천 아키텍처의 핵심 인터페이스와 타입 정의를 통합하여 시스템의 일관성과 타입 안전성을 보장합니다. 이 정의들은 모든 컴포넌트 간의 상호작용을 위한 표준 계약서 역할을 합니다.\n\n## 기본 타입 정의\n\n### 1. 공통 타입\n\n```typescript\n// 기본 식별자\ntype Identifier = string\n\n// 타임스탬프\ntype Timestamp = number\n\n// 버전 번호\ntype Version = number\n\n// 체크섬\ntype Checksum = string\n\n// JSON 직렬화 가능 데이터\ntype JSONValue = string | number | boolean | null | undefined | JSONObject | JSONArray", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "315", "text": "## 기본 타입 정의\n\n### 1. 공통 타입\n\n```typescript\n// 기본 식별자\ntype Identifier = string\n\n// 타임스탬프\ntype Timestamp = number\n\n// 버전 번호\ntype Version = number\n\n// 체크섬\ntype Checksum = string\n\n// JSON 직렬화 가능 데이터\ntype JSONValue = string | number | boolean | null | undefined | JSONObject | JSONArray\n\ninterface JSONObject {\n  [key: string]: JSONValue\n}\n\ninterface JSONArray extends Array<JSONValue> {}\n\n// 결과 래퍼\ntype Result<T, E = Error> = {\n  success: boolean\n  data?: T\n  error?: E\n  metadata?: Record<string, unknown>\n}\n\n// 비동기 결과\ntype AsyncResult<T> = Promise<Result<T>>\n\n// 페이지네이션\ninterface Pagination {\n  offset: number\n  limit: number\n  total?: number\n}\n\n// 정렬\ninterface Sort {\n  field: string\n  direction: 'ASC' | 'DESC'\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "316", "text": "interface JSONArray extends Array<JSONValue> {}\n\n// 결과 래퍼\ntype Result<T, E = Error> = {\n  success: boolean\n  data?: T\n  error?: E\n  metadata?: Record<string, unknown>\n}\n\n// 비동기 결과\ntype AsyncResult<T> = Promise<Result<T>>\n\n// 페이지네이션\ninterface Pagination {\n  offset: number\n  limit: number\n  total?: number\n}\n\n// 정렬\ninterface Sort {\n  field: string\n  direction: 'ASC' | 'DESC'\n}\n\n// 필터\ninterface Filter {\n  [key: string]: unknown\n}\n\n// 검색 쿼리\ninterface SearchQuery {\n  query?: string\n  filters?: Filter[]\n  sort?: Sort[]\n  pagination?: Pagination\n}\n```\n\n### 2. 도메인 타입\n\n```typescript\n// 집합 루트 ID\ntype AggregateId = Identifier", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "317", "text": "// 정렬\ninterface Sort {\n  field: string\n  direction: 'ASC' | 'DESC'\n}\n\n// 필터\ninterface Filter {\n  [key: string]: unknown\n}\n\n// 검색 쿼리\ninterface SearchQuery {\n  query?: string\n  filters?: Filter[]\n  sort?: Sort[]\n  pagination?: Pagination\n}\n```\n\n### 2. 도메인 타입\n\n```typescript\n// 집합 루트 ID\ntype AggregateId = Identifier\n\n// 집합 루트 타입\nenum AggregateType {\n  TASK = 'TASK',\n  CHANGE = 'CHANGE',\n  PROJECT = 'PROJECT',\n  USER = 'USER',\n  SYNC_OPERATION = 'SYNC_OPERATION'\n}\n\n// 태스크 상태\nenum TaskStatus {\n  TODO = 'todo',\n  IN_PROGRESS = 'in-progress',\n  REVIEW = 'review',\n  DONE = 'done',\n  ARCHIVED = 'archived'\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "318", "text": "```typescript\n// 집합 루트 ID\ntype AggregateId = Identifier\n\n// 집합 루트 타입\nenum AggregateType {\n  TASK = 'TASK',\n  CHANGE = 'CHANGE',\n  PROJECT = 'PROJECT',\n  USER = 'USER',\n  SYNC_OPERATION = 'SYNC_OPERATION'\n}\n\n// 태스크 상태\nenum TaskStatus {\n  TODO = 'todo',\n  IN_PROGRESS = 'in-progress',\n  REVIEW = 'review',\n  DONE = 'done',\n  ARCHIVED = 'archived'\n}\n\n// 태스크 우선순위\nenum TaskPriority {\n  LOW = 'low',\n  MEDIUM = 'medium',\n  HIGH = 'high'\n}\n\n// 변경 상태\nenum ChangeStatus {\n  ACTIVE = 'active',\n  COMPLETED = 'completed',\n  ARCHIVED = 'archived'\n}\n\n// 변경 스테이지\nenum ChangeStage {\n  SPEC = 'spec',\n  TASK = 'task',\n  CODE = 'code',\n  TEST = 'test',\n  COMMIT = 'commit',\n  DOCS = 'docs'\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "319", "text": "// 태스크 우선순위\nenum TaskPriority {\n  LOW = 'low',\n  MEDIUM = 'medium',\n  HIGH = 'high'\n}\n\n// 변경 상태\nenum ChangeStatus {\n  ACTIVE = 'active',\n  COMPLETED = 'completed',\n  ARCHIVED = 'archived'\n}\n\n// 변경 스테이지\nenum ChangeStage {\n  SPEC = 'spec',\n  TASK = 'task',\n  CODE = 'code',\n  TEST = 'test',\n  COMMIT = 'commit',\n  DOCS = 'docs'\n}\n\n// 태스크 출처\nenum TaskOrigin {\n  OPENSPEC = 'openspec',\n  INBOX = 'inbox',\n  IMPORTED = 'imported'\n}\n\n// 동기화 방향\nenum SyncDirection {\n  SPEC_TO_RUNTIME = 'spec_to_runtime',\n  RUNTIME_TO_SPEC = 'runtime_to_spec',\n  BIDIRECTIONAL = 'bidirectional'\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "320", "text": "// 태스크 출처\nenum TaskOrigin {\n  OPENSPEC = 'openspec',\n  INBOX = 'inbox',\n  IMPORTED = 'imported'\n}\n\n// 동기화 방향\nenum SyncDirection {\n  SPEC_TO_RUNTIME = 'spec_to_runtime',\n  RUNTIME_TO_SPEC = 'runtime_to_spec',\n  BIDIRECTIONAL = 'bidirectional'\n}\n\n// 동기화 상태\nenum SyncStatus {\n  PENDING = 'pending',\n  IN_PROGRESS = 'in_progress',\n  COMPLETED = 'completed',\n  FAILED = 'failed',\n  CANCELLED = 'cancelled'\n}\n```\n\n## 도메인 모델\n\n### 1. 태스크 모델", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "321", "text": "## 도메인 모델\n\n### 1. 태스크 모델\n\n```typescript\ninterface Task {\n  // 기본 정보\n  id: Identifier\n  changeId?: Identifier\n  title: string\n  description?: string\n  \n  // 상태 정보\n  status: TaskStatus\n  priority: TaskPriority\n  origin: TaskOrigin\n  \n  // 계층 정보\n  stage: ChangeStage\n  groupTitle?: string\n  majorTitle?: string\n  subOrder?: number\n  taskOrder?: number\n  \n  // 할당 정보\n  assignee?: string\n  \n  // 메타데이터\n  tags: string[]\n  metadata: Record<string, unknown>\n  \n  // 타임스탬프\n  createdAt: Timestamp\n  updatedAt: Timestamp\n  completedAt?: Timestamp\n  archivedAt?: Timestamp\n  \n  // 버전 정보\n  version: Version\n  checksum: Checksum\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "322", "text": "interface CreateTaskRequest {\n  changeId?: Identifier\n  title: string\n  description?: string\n  priority?: TaskPriority\n  assignee?: string\n  tags?: string[]\n  metadata?: Record<string, unknown>\n}\n\ninterface UpdateTaskRequest {\n  id: Identifier\n  changes: Partial<Omit<Task, 'id' | 'createdAt' | 'version' | 'checksum'>>\n  expectedVersion?: Version\n}\n\ninterface TaskSearchParams {\n  changeId?: Identifier\n  status?: TaskStatus\n  priority?: TaskPriority\n  assignee?: string\n  tags?: string[]\n  stage?: ChangeStage\n  origin?: TaskOrigin\n  createdAfter?: Timestamp\n  createdBefore?: Timestamp\n  updatedAfter?: Timestamp\n  updatedBefore?: Timestamp\n}\n```\n\n### 2. 변경(Change) 모델", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "323", "text": "interface TaskSearchParams {\n  changeId?: Identifier\n  status?: TaskStatus\n  priority?: TaskPriority\n  assignee?: string\n  tags?: string[]\n  stage?: ChangeStage\n  origin?: TaskOrigin\n  createdAfter?: Timestamp\n  createdBefore?: Timestamp\n  updatedAfter?: Timestamp\n  updatedBefore?: Timestamp\n}\n```\n\n### 2. 변경(Change) 모델\n\n```typescript\ninterface Change {\n  // 기본 정보\n  id: Identifier\n  title: string\n  description?: string\n  \n  // 상태 정보\n  status: ChangeStatus\n  currentStage: ChangeStage\n  progress: number // 0-100\n  \n  // 경로 정보\n  specPath?: string\n  \n  // 메타데이터\n  metadata: Record<string, unknown>\n  \n  // 타임스탬프\n  createdAt: Timestamp\n  updatedAt: Timestamp\n  completedAt?: Timestamp\n  \n  // 버전 정보\n  version: Version\n  checksum: Checksum\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "324", "text": "interface CreateChangeRequest {\n  title: string\n  description?: string\n  specPath?: string\n  metadata?: Record<string, unknown>\n}\n\ninterface UpdateChangeRequest {\n  id: Identifier\n  changes: Partial<Omit<Change, 'id' | 'createdAt' | 'version' | 'checksum'>>\n  expectedVersion?: Version\n}\n\ninterface ChangeSearchParams {\n  status?: ChangeStatus\n  stage?: ChangeStage\n  createdAfter?: Timestamp\n  createdBefore?: Timestamp\n  updatedAfter?: Timestamp\n  updatedBefore?: Timestamp\n}\n```\n\n### 3. 동기화 모델", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "325", "text": "interface UpdateChangeRequest {\n  id: Identifier\n  changes: Partial<Omit<Change, 'id' | 'createdAt' | 'version' | 'checksum'>>\n  expectedVersion?: Version\n}\n\ninterface ChangeSearchParams {\n  status?: ChangeStatus\n  stage?: ChangeStage\n  createdAfter?: Timestamp\n  createdBefore?: Timestamp\n  updatedAfter?: Timestamp\n  updatedBefore?: Timestamp\n}\n```\n\n### 3. 동기화 모델\n\n```typescript\ninterface SyncOperation {\n  // 기본 정보\n  id: Identifier\n  type: SyncDirection\n  status: SyncStatus\n  \n  // 대상 정보\n  changeId: Identifier\n  resourceIds: Identifier[]\n  \n  // 옵션\n  options: SyncOptions\n  \n  // 결과 정보\n  result?: SyncResult\n  error?: SyncError\n  \n  // 타임스탬프\n  createdAt: Timestamp\n  startedAt?: Timestamp\n  completedAt?: Timestamp\n  \n  // 메타데이터\n  metadata: Record<string, unknown>\n  \n  // 버전 정보\n  version: Version\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "326", "text": "interface SyncOptions {\n  // 동기화 범위\n  resourceTypes?: string[]\n  includeIds?: Identifier[]\n  excludeIds?: Identifier[]\n  \n  // 전략\n  strategy?: SyncStrategy\n  conflictResolution?: ConflictResolutionStrategy\n  \n  // 성능 옵션\n  batchSize?: number\n  maxConcurrency?: number\n  timeout?: number\n  \n  // 안전 옵션\n  dryRun?: boolean\n  createRollbackPoint?: boolean\n  stopOnConflict?: boolean\n  \n  // 필터링\n  modifiedSince?: Timestamp\n  filter?: (resource: any) => boolean\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "327", "text": "interface SyncResult {\n  // 처리 통계\n  totalProcessed: number\n  successfulProcessed: number\n  failedProcessed: number\n  skippedProcessed: number\n  \n  // 충돌 정보\n  conflictsDetected: Conflict[]\n  conflictsResolved: Conflict[]\n  conflictsRemaining: Conflict[]\n  \n  // 성능 메트릭\n  duration: number\n  throughput: number\n  \n  // 롤백 정보\n  rollbackPointId?: Identifier\n  \n  // 상세 결과\n  details?: Record<string, unknown>\n}\n\nenum SyncStrategy {\n  INCREMENTAL = 'incremental',\n  FULL = 'full',\n  SMART = 'smart'\n}\n\nenum ConflictResolutionStrategy {\n  SPEC_WINS = 'spec_wins',\n  RUNTIME_WINS = 'runtime_wins',\n  LAST_WRITE_WINS = 'last_write_wins',\n  MERGE = 'merge',\n  MANUAL = 'manual'\n}\n```\n\n### 4. 충돌 모델", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "328", "text": "enum SyncStrategy {\n  INCREMENTAL = 'incremental',\n  FULL = 'full',\n  SMART = 'smart'\n}\n\nenum ConflictResolutionStrategy {\n  SPEC_WINS = 'spec_wins',\n  RUNTIME_WINS = 'runtime_wins',\n  LAST_WRITE_WINS = 'last_write_wins',\n  MERGE = 'merge',\n  MANUAL = 'manual'\n}\n```\n\n### 4. 충돌 모델\n\n```typescript\ninterface Conflict {\n  // 기본 정보\n  id: Identifier\n  type: ConflictType\n  severity: ConflictSeverity\n  \n  // 대상 정보\n  resourceType: ResourceType\n  resourceId: Identifier\n  changeId: Identifier\n  \n  // 충돌 내용\n  specValue: unknown\n  runtimeValue: unknown\n  baseValue: unknown\n  \n  // 해결 정보\n  resolution?: ConflictResolution\n  resolvedAt?: Timestamp\n  resolvedBy?: Identifier\n  \n  // 메타데이터\n  metadata: Record<string, unknown>\n  \n  // 타임스탬프\n  detectedAt: Timestamp\n  createdAt: Timestamp\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "329", "text": "interface ConflictResolution {\n  strategy: ConflictResolutionStrategy\n  resolvedValue: unknown\n  applied: boolean\n  requiresManualIntervention: boolean\n}\n\nenum ConflictType {\n  DATA_CONFLICT = 'data_conflict',\n  STRUCTURE_CONFLICT = 'structure_conflict',\n  VERSION_CONFLICT = 'version_conflict',\n  DEPENDENCY_CONFLICT = 'dependency_conflict',\n  PERMISSION_CONFLICT = 'permission_conflict'\n}\n\nenum ConflictSeverity {\n  LOW = 'low',\n  MEDIUM = 'medium',\n  HIGH = 'high',\n  CRITICAL = 'critical'\n}\n\nenum ResourceType {\n  TASK = 'task',\n  CHANGE = 'change',\n  METADATA = 'metadata'\n}\n```\n\n## 이벤트 시스템\n\n### 1. 도메인 이벤트", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "330", "text": "enum ResourceType {\n  TASK = 'task',\n  CHANGE = 'change',\n  METADATA = 'metadata'\n}\n```\n\n## 이벤트 시스템\n\n### 1. 도메인 이벤트\n\n```typescript\ninterface DomainEvent {\n  // 기본 정보\n  id: Identifier\n  type: EventType\n  aggregateId: AggregateId\n  aggregateType: AggregateType\n  version: Version\n  timestamp: Timestamp\n  \n  // 이벤트 데이터\n  data: Record<string, unknown>\n  \n  // 메타데이터\n  metadata: {\n    userId?: Identifier\n    correlationId?: Identifier\n    causationId?: Identifier\n    sessionId?: Identifier\n    source?: EventSource\n    tags?: string[]\n    [key: string]: unknown\n  }\n  \n  // 처리 정보\n  processing: {\n    status: EventProcessingStatus\n    processedAt?: Timestamp\n    error?: string\n    retryCount: number\n    maxRetries: number\n  }\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "331", "text": "enum EventType {\n  // 태스크 이벤트\n  TASK_CREATED = 'TaskCreated',\n  TASK_UPDATED = 'TaskUpdated',\n  TASK_COMPLETED = 'TaskCompleted',\n  TASK_DELETED = 'TaskDeleted',\n  \n  // 변경 이벤트\n  CHANGE_CREATED = 'ChangeCreated',\n  CHANGE_UPDATED = 'ChangeUpdated',\n  CHANGE_STATUS_UPDATED = 'ChangeStatusUpdated',\n  CHANGE_DELETED = 'ChangeDeleted',\n  \n  // 동기화 이벤트\n  SYNC_STARTED = 'SyncStarted',\n  SYNC_COMPLETED = 'SyncCompleted',\n  SYNC_FAILED = 'SyncFailed',\n  \n  // 충돌 이벤트\n  CONFLICT_DETECTED = 'ConflictDetected',\n  CONFLICT_RESOLVED = 'ConflictResolved',\n  \n  // 시스템 이벤트\n  SYSTEM_ERROR = 'SystemError',\n  SYSTEM_WARNING = 'SystemWarning',\n  SYSTEM_INFO = 'SystemInfo'\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "332", "text": "enum EventSource {\n  USER_ACTION = 'user_action',\n  SYSTEM = 'system',\n  SYNC_MANAGER = 'sync_manager',\n  FILE_WATCHER = 'file_watcher',\n  RECOVERY_MANAGER = 'recovery_manager'\n}\n\nenum EventProcessingStatus {\n  PENDING = 'pending',\n  PROCESSING = 'processing',\n  COMPLETED = 'completed',\n  FAILED = 'failed'\n}\n```\n\n### 2. 이벤트 저장소\n\n```typescript\ninterface EventStore {\n  // 초기화\n  initialize(config: EventStoreConfig): AsyncResult<void>\n  \n  // 이벤트 저장\n  saveEvent(event: DomainEvent): AsyncResult<void>\n  saveEvents(events: DomainEvent[]): AsyncResult<void>\n  \n  // 이벤트 조회\n  getEvent(id: Identifier): AsyncResult<DomainEvent | null>\n  getEvents(filter: EventFilter): AsyncResult<DomainEvent[]>\n  getEventStream(filter?: EventFilter): AsyncIterable<DomainEvent>\n  \n  // 이벤트 재생\n  replayEvents(aggregateId: AggregateId, fromVersion?", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "333", "text": ": EventFilter): AsyncIterable<DomainEvent>\n  \n  // 이벤트 재생\n  replayEvents(aggregateId: AggregateId, fromVersion?: Version): AsyncIterable<DomainEvent>\n  \n  // 스냅샷 관리\n  createSnapshot(aggregateId: AggregateId, version: Version): AsyncResult<void>\n  getSnapshot(aggregateId: AggregateId, version?: Version): AsyncResult<EventSnapshot | null>\n  \n  // 유지보수\n  compact(options?: CompactOptions): AsyncResult<void>\n  cleanup(retention?: RetentionPolicy): AsyncResult<number>\n  \n  // 상태 정보\n  getSize(): AsyncResult<number>\n  getHealth(): AsyncResult<EventStoreHealth>\n  close(): AsyncResult<void>\n}\n\ninterface EventFilter {\n  eventTypes?: EventType[]\n  aggregateIds?: AggregateId[]\n  aggregateTypes?: AggregateType[]\n  timeRange?: {\n    start: Timestamp\n    end: Timestamp\n  }\n  userIds?: Identifier[]\n  sessionIds?: Identifier[]\n  metadata?: Record<string, unknown>\n  pagination?: Pagination\n  sort?: Sort[]\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "334", "text": "interface EventStoreConfig {\n  storageType: 'MEMORY' | 'FILE' | 'DATABASE' | 'HYBRID'\n  \n  // 파일 저장소 설정\n  file?: {\n    path: string\n    maxFileSize: number\n    compressionEnabled: boolean\n    encryptionEnabled: boolean\n  }\n  \n  // 데이터베이스 저장소 설정\n  database?: {\n    connectionString: string\n    tableName: string\n    maxConnections: number\n  }\n  \n  // 하이브리드 저장소 설정\n  hybrid?: {\n    memory: {\n      maxSize: number\n      ttl: number\n    }\n    persistent: {\n      path: string\n      syncInterval: number\n    }\n  }\n  \n  // 보관 정책\n  retention: RetentionPolicy\n  \n  // 성능 설정\n  performance: {\n    batchSize: number\n    maxConcurrency: number\n    cacheEnabled: boolean\n  }\n}\n\ninterface RetentionPolicy {\n  defaultRetentionDays: number\n  byEventType: Record<EventType, number>\n  bySeverity: Record<string, number>\n  maxTotalEvents: number\n  cleanupIntervalHours: number\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "335", "text": "interface RetentionPolicy {\n  defaultRetentionDays: number\n  byEventType: Record<EventType, number>\n  bySeverity: Record<string, number>\n  maxTotalEvents: number\n  cleanupIntervalHours: number\n}\n\ninterface CompactOptions {\n  force?: boolean\n  targetSize?: number\n  preserveRecentDays?: number\n}\n\ninterface EventSnapshot {\n  aggregateId: AggregateId\n  aggregateType: AggregateType\n  version: Version\n  data: Record<string, unknown>\n  timestamp: Timestamp\n  checksum: Checksum\n}\n\ninterface EventStoreHealth {\n  status: 'HEALTHY' | 'DEGRADED' | 'FAILED'\n  issues: string[]\n  metrics: {\n    totalEvents: number\n    storageSize: number\n    averageEventSize: number\n    oldestEvent: Timestamp\n    newestEvent: Timestamp\n  }\n}\n```\n\n## 커맨드 및 쿼리 시스템\n\n### 1. 커맨드", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "336", "text": "interface EventStoreHealth {\n  status: 'HEALTHY' | 'DEGRADED' | 'FAILED'\n  issues: string[]\n  metrics: {\n    totalEvents: number\n    storageSize: number\n    averageEventSize: number\n    oldestEvent: Timestamp\n    newestEvent: Timestamp\n  }\n}\n```\n\n## 커맨드 및 쿼리 시스템\n\n### 1. 커맨드\n\n```typescript\ninterface Command<T = unknown> {\n  // 기본 정보\n  id: Identifier\n  type: CommandType\n  aggregateId: AggregateId\n  userId: Identifier\n  timestamp: Timestamp\n  \n  // 커맨드 데이터\n  data: T\n  \n  // 메타데이터\n  metadata?: {\n    correlationId?: Identifier\n    expectedVersion?: Version\n    timeout?: number\n    retryPolicy?: RetryPolicy\n    [key: string]: unknown\n  }\n}\n\ninterface CommandHandler<T extends Command, R = void> {\n  canHandle(command: Command): command is T\n  handle(command: T): AsyncResult<R>\n  getCommandType(): CommandType\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "337", "text": "interface CommandHandler<T extends Command, R = void> {\n  canHandle(command: Command): command is T\n  handle(command: T): AsyncResult<R>\n  getCommandType(): CommandType\n}\n\nenum CommandType {\n  // 태스크 커맨드\n  CREATE_TASK = 'CreateTask',\n  UPDATE_TASK = 'UpdateTask',\n  COMPLETE_TASK = 'CompleteTask',\n  DELETE_TASK = 'DeleteTask',\n  \n  // 변경 커맨드\n  CREATE_CHANGE = 'CreateChange',\n  UPDATE_CHANGE = 'UpdateChange',\n  DELETE_CHANGE = 'DeleteChange',\n  \n  // 동기화 커맨드\n  START_SYNC = 'StartSync',\n  CANCEL_SYNC = 'CancelSync',\n  RESOLVE_CONFLICT = 'ResolveConflict',\n  \n  // 시스템 커맨드\n  TRIGGER_BACKUP = 'TriggerBackup',\n  RESTORE_FROM_BACKUP = 'RestoreFromBackup',\n  SYSTEM_MAINTENANCE = 'SystemMaintenance'\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "338", "text": "interface RetryPolicy {\n  maxRetries: number\n  initialDelay: number\n  maxDelay: number\n  backoffMultiplier: number\n  retryableErrors: string[]\n}\n```\n\n### 2. 쿼리\n\n```typescript\ninterface Query<T = unknown> {\n  // 기본 정보\n  id: Identifier\n  type: QueryType\n  userId?: Identifier\n  timestamp: Timestamp\n  \n  // 쿼리 파라미터\n  parameters: Record<string, unknown>\n  \n  // 옵션\n  options?: {\n    include?: string[]\n    exclude?: string[]\n    sort?: Sort[]\n    pagination?: Pagination\n    cache?: CacheOptions\n  }\n}\n\ninterface QueryHandler<T extends Query, R = unknown> {\n  canHandle(query: Query): query is T\n  handle(query: T): AsyncResult<R>\n  getQueryType(): QueryType\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "339", "text": "interface QueryHandler<T extends Query, R = unknown> {\n  canHandle(query: Query): query is T\n  handle(query: T): AsyncResult<R>\n  getQueryType(): QueryType\n}\n\nenum QueryType {\n  // 태스크 쿼리\n  GET_TASK = 'GetTask',\n  LIST_TASKS = 'ListTasks',\n  SEARCH_TASKS = 'SearchTasks',\n  \n  // 변경 쿼리\n  GET_CHANGE = 'GetChange',\n  LIST_CHANGES = 'ListChanges',\n  SEARCH_CHANGES = 'SearchChanges',\n  \n  // 동기화 쿼리\n  GET_SYNC_STATUS = 'GetSyncStatus',\n  LIST_SYNC_HISTORY = 'ListSyncHistory',\n  \n  // 통계 쿼리\n  GET_TASK_STATISTICS = 'GetTaskStatistics',\n  GET_SYNC_STATISTICS = 'GetSyncStatistics',\n  GET_SYSTEM_HEALTH = 'GetSystemHealth'\n}\n\ninterface CacheOptions {\n  ttl?: number\n  key?: string\n  invalidateOn?: string[]\n}\n```\n\n## 상태 관리\n\n### 1. 상태 관리자", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "340", "text": "## 상태 관리\n\n### 1. 상태 관리자\n\n```typescript\ninterface StateManager<T = Record<string, unknown>> {\n  // 상태 조회\n  getState(id: Identifier, version?: Version): AsyncResult<VersionedState<T> | null>\n  getCurrentState(id: Identifier): AsyncResult<VersionedState<T> | null>\n  getStateHistory(id: Identifier, options?: HistoryOptions): AsyncResult<StateTransition<T>[]>\n  \n  // 상태 수정\n  updateState(id: Identifier, updates: Partial<T>, options?: UpdateOptions): AsyncResult<StateUpdateResult<T>>\n  \n  // 동시성 제어\n  acquireLock(id: Identifier, options?: LockOptions): AsyncResult<LockToken | null>\n  releaseLock(token: LockToken): AsyncResult<boolean>\n  validateLock(token: LockToken): AsyncResult<boolean>\n  \n  // 상태 검증\n  validateState(id: Identifier): AsyncResult<StateValidationResult>\n  compareStates(id1: Identifier, id2: Identifier): AsyncResult<StateComparison>\n  \n  // 모니터링\n  getMetrics(): StateMetrics\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "341", "text": "interface VersionedState<T> {\n  id: Identifier\n  version: Version\n  timestamp: Timestamp\n  checksum: Checksum\n  data: T\n  metadata: {\n    createdBy: Identifier\n    updatedBy?: Identifier\n    parentId?: Identifier\n    branch?: string\n    [key: string]: unknown\n  }\n}\n\ninterface StateTransition<T> {\n  fromVersion: Version\n  toVersion: Version\n  operation: string\n  timestamp: Timestamp\n  userId: Identifier\n  changes: Record<string, { old: unknown; new: unknown }>\n  metadata?: Record<string, unknown>\n}\n\ninterface UpdateOptions {\n  expectedVersion?: Version\n  lockToken?: LockToken\n  reason?: string\n  metadata?: Record<string, unknown>\n  autoRetry?: boolean\n  maxRetries?: number\n}\n\ninterface StateUpdateResult<T> {\n  success: boolean\n  state?: VersionedState<T>\n  conflict?: StateConflict\n  error?: Error\n  transition?: StateTransition<T>\n  newVersion?: Version\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "342", "text": "interface UpdateOptions {\n  expectedVersion?: Version\n  lockToken?: LockToken\n  reason?: string\n  metadata?: Record<string, unknown>\n  autoRetry?: boolean\n  maxRetries?: number\n}\n\ninterface StateUpdateResult<T> {\n  success: boolean\n  state?: VersionedState<T>\n  conflict?: StateConflict\n  error?: Error\n  transition?: StateTransition<T>\n  newVersion?: Version\n}\n\ninterface StateConflict {\n  type: ConflictType\n  expectedVersion: Version\n  actualVersion: Version\n  conflictingUpdates: Record<string, unknown>\n  resolution?: ConflictResolution\n}\n\ninterface StateValidationResult {\n  valid: boolean\n  issues: StateIssue[]\n}\n\ninterface StateIssue {\n  type: string\n  description: string\n  expected?: unknown\n  actual?: unknown\n}\n\ninterface StateComparison {\n  identical: boolean\n  differences: Record<string, { old: unknown; new: unknown }>\n  mergeRequired: boolean\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "343", "text": "interface StateConflict {\n  type: ConflictType\n  expectedVersion: Version\n  actualVersion: Version\n  conflictingUpdates: Record<string, unknown>\n  resolution?: ConflictResolution\n}\n\ninterface StateValidationResult {\n  valid: boolean\n  issues: StateIssue[]\n}\n\ninterface StateIssue {\n  type: string\n  description: string\n  expected?: unknown\n  actual?: unknown\n}\n\ninterface StateComparison {\n  identical: boolean\n  differences: Record<string, { old: unknown; new: unknown }>\n  mergeRequired: boolean\n}\n\ninterface LockToken {\n  id: Identifier\n  resourceId: Identifier\n  expectedVersion: Version\n  acquiredAt: Timestamp\n  expiresAt: Timestamp\n  exclusive: boolean\n  userId?: Identifier\n  metadata?: Record<string, unknown>\n}\n\ninterface LockOptions {\n  duration?: number\n  timeout?: number\n  exclusive?: boolean\n  metadata?: Record<string, unknown>\n}\n\ninterface HistoryOptions {\n  fromVersion?: Version\n  toVersion?: Version\n  timeRange?: { start: Timestamp; end: Timestamp }\n  limit?: number\n  includeMetadata?: boolean\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "344", "text": "interface LockToken {\n  id: Identifier\n  resourceId: Identifier\n  expectedVersion: Version\n  acquiredAt: Timestamp\n  expiresAt: Timestamp\n  exclusive: boolean\n  userId?: Identifier\n  metadata?: Record<string, unknown>\n}\n\ninterface LockOptions {\n  duration?: number\n  timeout?: number\n  exclusive?: boolean\n  metadata?: Record<string, unknown>\n}\n\ninterface HistoryOptions {\n  fromVersion?: Version\n  toVersion?: Version\n  timeRange?: { start: Timestamp; end: Timestamp }\n  limit?: number\n  includeMetadata?: boolean\n}\n\ninterface StateMetrics {\n  totalStates: number\n  activeLocks: number\n  averageUpdateDuration: number\n  conflictRate: number\n  cacheHitRate: number\n}\n```\n\n## 동기화 코디네이터\n\n### 1. 동기화 코디네이터\n\n```typescript\ninterface SyncCoordinator {\n  // 초기화\n  initialize(config: SyncCoordinatorConfig): AsyncResult<void>\n  \n  // 동기화 작업\n  syncSpecToRuntime(changeId: Identifier, options?", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "345", "text": "interface StateMetrics {\n  totalStates: number\n  activeLocks: number\n  averageUpdateDuration: number\n  conflictRate: number\n  cacheHitRate: number\n}\n```\n\n## 동기화 코디네이터\n\n### 1. 동기화 코디네이터\n\n```typescript\ninterface SyncCoordinator {\n  // 초기화\n  initialize(config: SyncCoordinatorConfig): AsyncResult<void>\n  \n  // 동기화 작업\n  syncSpecToRuntime(changeId: Identifier, options?: SyncOptions): AsyncResult<SyncResult>\n  syncRuntimeToSpec(changeId: Identifier, options?: SyncOptions): AsyncResult<SyncResult>\n  bidirectionalSync(changeId: Identifier, options?", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "346", "text": "## 동기화 코디네이터\n\n### 1. 동기화 코디네이터\n\n```typescript\ninterface SyncCoordinator {\n  // 초기화\n  initialize(config: SyncCoordinatorConfig): AsyncResult<void>\n  \n  // 동기화 작업\n  syncSpecToRuntime(changeId: Identifier, options?: SyncOptions): AsyncResult<SyncResult>\n  syncRuntimeToSpec(changeId: Identifier, options?: SyncOptions): AsyncResult<SyncResult>\n  bidirectionalSync(changeId: Identifier, options?: SyncOptions): AsyncResult<SyncResult>\n  \n  // 충돌 관리\n  detectConflicts(changeId: Identifier): AsyncResult<Conflict[]>\n  resolveConflicts(conflicts: Conflict[], strategy: ConflictResolutionStrategy): AsyncResult<ConflictResolution[]>\n  \n  // 상태 관리\n  validateConsistency(changeId: Identifier): AsyncResult<ConsistencyReport>\n  createRollbackPoint(changeId: Identifier, description?", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "347", "text": ": SyncOptions): AsyncResult<SyncResult>\n  bidirectionalSync(changeId: Identifier, options?: SyncOptions): AsyncResult<SyncResult>\n  \n  // 충돌 관리\n  detectConflicts(changeId: Identifier): AsyncResult<Conflict[]>\n  resolveConflicts(conflicts: Conflict[], strategy: ConflictResolutionStrategy): AsyncResult<ConflictResolution[]>\n  \n  // 상태 관리\n  validateConsistency(changeId: Identifier): AsyncResult<ConsistencyReport>\n  createRollbackPoint(changeId: Identifier, description?: string): AsyncResult<RollbackPoint>\n  rollbackToPoint(changeId: Identifier, rollbackPointId: Identifier): AsyncResult<void>\n  \n  // 모니터링\n  getSyncStatus(changeId: Identifier): AsyncResult<SyncStatus>\n  getSyncHistory(changeId: Identifier, filter?: HistoryFilter): AsyncResult<SyncHistory[]>\n  getMetrics(): SyncMetrics\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "348", "text": ": string): AsyncResult<RollbackPoint>\n  rollbackToPoint(changeId: Identifier, rollbackPointId: Identifier): AsyncResult<void>\n  \n  // 모니터링\n  getSyncStatus(changeId: Identifier): AsyncResult<SyncStatus>\n  getSyncHistory(changeId: Identifier, filter?: HistoryFilter): AsyncResult<SyncHistory[]>\n  getMetrics(): SyncMetrics\n}\n\ninterface SyncCoordinatorConfig {\n  // 동기화 설정\n  syncInterval: number\n  maxRetries: number\n  retryDelay: number\n  \n  // 충돌 해결 설정\n  defaultResolutionStrategy: ConflictResolutionStrategy\n  autoResolveThreshold: number\n  \n  // 성능 설정\n  batchSize: number\n  maxConcurrency: number\n  timeout: number\n  \n  // 의존성 주입\n  eventBus: EventBus\n  stateManager: StateManager\n  conflictResolver: ConflictResolver\n  changeLogManager: ChangeLogManager\n  recoveryManager: RecoveryManager\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "349", "text": "interface ConsistencyReport {\n  changeId: Identifier\n  isConsistent: boolean\n  checkedAt: Timestamp\n  inconsistencies: Inconsistency[]\n  specState: StateSnapshot\n  runtimeState: StateSnapshot\n  recommendations: string[]\n}\n\ninterface Inconsistency {\n  id: Identifier\n  type: InconsistencyType\n  severity: 'LOW' | 'MEDIUM' | 'HIGH'\n  resourcePath: string\n  expectedValue: unknown\n  actualValue: unknown\n  suggestedAction: string\n  autoFixable: boolean\n}\n\nenum InconsistencyType {\n  MISSING_RESOURCE = 'missing_resource',\n  EXTRA_RESOURCE = 'extra_resource',\n  VALUE_MISMATCH = 'value_mismatch',\n  TYPE_MISMATCH = 'type_mismatch',\n  VERSION_MISMATCH = 'version_mismatch',\n  DEPENDENCY_BROKEN = 'dependency_broken'\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "350", "text": "enum InconsistencyType {\n  MISSING_RESOURCE = 'missing_resource',\n  EXTRA_RESOURCE = 'extra_resource',\n  VALUE_MISMATCH = 'value_mismatch',\n  TYPE_MISMATCH = 'type_mismatch',\n  VERSION_MISMATCH = 'version_mismatch',\n  DEPENDENCY_BROKEN = 'dependency_broken'\n}\n\ninterface RollbackPoint {\n  id: Identifier\n  changeId: Identifier\n  timestamp: Timestamp\n  description: string\n  snapshot: string // JSON 직렬화된 상태 스냅샷\n  metadata?: Record<string, unknown>\n  isActive: boolean\n  isExpired: boolean\n  expiresAt?: Timestamp\n  createdAt: Timestamp\n  updatedAt: Timestamp\n}\n\ninterface SyncHistory {\n  id: Identifier\n  changeId: Identifier\n  syncType: SyncDirection\n  status: SyncStatus\n  startTime: Timestamp\n  endTime?: Timestamp\n  duration?: number\n  result?: SyncResult\n  error?: string\n  metadata?: Record<string, unknown>\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "351", "text": "interface SyncHistory {\n  id: Identifier\n  changeId: Identifier\n  syncType: SyncDirection\n  status: SyncStatus\n  startTime: Timestamp\n  endTime?: Timestamp\n  duration?: number\n  result?: SyncResult\n  error?: string\n  metadata?: Record<string, unknown>\n}\n\ninterface SyncMetrics {\n  totalSyncs: number\n  successfulSyncs: number\n  failedSyncs: number\n  averageSyncTime: number\n  conflictsDetected: number\n  conflictsResolved: number\n  averageResolutionTime: number\n}\n```\n\n## 복구 시스템\n\n### 1. 복구 관리자", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "352", "text": "interface SyncMetrics {\n  totalSyncs: number\n  successfulSyncs: number\n  failedSyncs: number\n  averageSyncTime: number\n  conflictsDetected: number\n  conflictsResolved: number\n  averageResolutionTime: number\n}\n```\n\n## 복구 시스템\n\n### 1. 복구 관리자\n\n```typescript\ninterface RecoveryManager {\n  // 초기화\n  initialize(config: RecoveryManagerConfig): AsyncResult<void>\n  \n  // 복구 작업\n  handleFailure(operation: SyncOperation, error: Error): AsyncResult<void>\n  attemptRecovery(operation: SyncOperation): AsyncResult<RecoveryResult>\n  \n  // 롤백 관리\n  createRollbackPoint(description?: string): AsyncResult<RollbackPoint>\n  rollbackToPoint(rollbackPointId: Identifier): AsyncResult<boolean>\n  \n  // 모니터링\n  getRecoveryStatus(operationId: Identifier): AsyncResult<RecoveryStatus>\n  getRecoveryHistory(filter?: RecoveryFilter): AsyncResult<RecoveryHistory[]>\n  getMetrics(): RecoveryMetrics\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "353", "text": "interface RecoveryManagerConfig {\n  // 재시도 설정\n  maxRetries: number\n  initialRetryDelay: number\n  maxRetryDelay: number\n  backoffMultiplier: number\n  \n  // 백업 설정\n  autoBackup: boolean\n  backupRetentionDays: number\n  maxBackupSize: number\n  backupInterval: number\n  \n  // 모니터링 설정\n  healthCheckInterval: number\n  failureThreshold: number\n  alertThreshold: number\n  \n  // 복구 설정\n  enableAutoRecovery: boolean\n  requireConfirmationForCritical: boolean\n  fallbackStrategies: string[]\n}\n\ninterface RecoveryResult {\n  success: boolean\n  action: RecoveryAction\n  duration: number\n  message?: string\n  nextAction?: RecoveryAction\n  error?: Error\n  metadata?: Record<string, unknown>\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "354", "text": "interface RecoveryResult {\n  success: boolean\n  action: RecoveryAction\n  duration: number\n  message?: string\n  nextAction?: RecoveryAction\n  error?: Error\n  metadata?: Record<string, unknown>\n}\n\nenum RecoveryAction {\n  RETRY = 'retry',\n  BACKOFF_RETRY = 'backoff_retry',\n  FALLBACK_STRATEGY = 'fallback_strategy',\n  RESTORE_FROM_BACKUP = 'restore_from_backup',\n  RESET_AND_RESYNC = 'reset_and_resync',\n  MANUAL_INTERVENTION = 'manual_intervention',\n  SKIP_AND_CONTINUE = 'skip_and_continue'\n}\n\ninterface RecoveryStatus {\n  operationId: Identifier\n  status: RecoveryStatus\n  currentAction?: RecoveryAction\n  retryCount: number\n  maxRetries: number\n  nextRetryAt?: Timestamp\n  estimatedCompletionAt?: Timestamp\n  error?: string\n}\n\nenum RecoveryStatus {\n  PENDING = 'pending',\n  IN_PROGRESS = 'in_progress',\n  COMPLETED = 'completed',\n  FAILED = 'failed',\n  CANCELLED = 'cancelled'\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "355", "text": "interface RecoveryStatus {\n  operationId: Identifier\n  status: RecoveryStatus\n  currentAction?: RecoveryAction\n  retryCount: number\n  maxRetries: number\n  nextRetryAt?: Timestamp\n  estimatedCompletionAt?: Timestamp\n  error?: string\n}\n\nenum RecoveryStatus {\n  PENDING = 'pending',\n  IN_PROGRESS = 'in_progress',\n  COMPLETED = 'completed',\n  FAILED = 'failed',\n  CANCELLED = 'cancelled'\n}\n\ninterface RecoveryHistory {\n  id: Identifier\n  operationId: Identifier\n  status: RecoveryStatus\n  action: RecoveryAction\n  startTime: Timestamp\n  endTime?: Timestamp\n  duration?: number\n  result?: RecoveryResult\n  error?: string\n  metadata?: Record<string, unknown>\n}\n\ninterface RecoveryFilter {\n  operationId?: Identifier\n  status?: RecoveryStatus\n  action?: RecoveryAction\n  timeRange?: { start: Timestamp; end: Timestamp }\n  limit?: number\n}", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "356", "text": "interface RecoveryHistory {\n  id: Identifier\n  operationId: Identifier\n  status: RecoveryStatus\n  action: RecoveryAction\n  startTime: Timestamp\n  endTime?: Timestamp\n  duration?: number\n  result?: RecoveryResult\n  error?: string\n  metadata?: Record<string, unknown>\n}\n\ninterface RecoveryFilter {\n  operationId?: Identifier\n  status?: RecoveryStatus\n  action?: RecoveryAction\n  timeRange?: { start: Timestamp; end: Timestamp }\n  limit?: number\n}\n\ninterface RecoveryMetrics {\n  totalOperations: number\n  failedOperations: number\n  recoveredOperations: number\n  manualInterventions: number\n  averageRecoveryTime: number\n  successRate: number\n  failureTypes: Record<string, number>\n  recoveryActions: Record<RecoveryAction, number>\n  lastUpdated: Timestamp\n}\n```\n\n## 이벤트 버스\n\n### 1. 이벤트 버스", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "357", "text": "## 이벤트 버스\n\n### 1. 이벤트 버스\n\n```typescript\ninterface EventBus {\n  // 초기화\n  initialize(config: EventBusConfig): AsyncResult<void>\n  \n  // 이벤트 발행\n  publish<T extends DomainEvent>(event: T): AsyncResult<void>\n  publishBatch<T extends DomainEvent>(events: T[]): AsyncResult<void>\n  \n  // 이벤트 구독\n  subscribe<T extends DomainEvent>(\n    eventType: EventType,\n    handler: EventHandler<T>\n  ): UnsubscribeFunction\n  \n  // 이벤트 스트림\n  getEventStream(filter?: EventFilter): AsyncIterable<DomainEvent>\n  replayEvents(fromTimestamp: Timestamp, filter?: EventFilter): AsyncIterable<DomainEvent>\n  \n  // 관리\n  getSubscriptions(): SubscriptionInfo[]\n  getMetrics(): EventBusMetrics\n  close(): AsyncResult<void>\n}\n\ntype EventHandler<T extends DomainEvent> = (event: T) => Promise<void> | void\n\ntype UnsubscribeFunction = () => void", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "358", "text": "type EventHandler<T extends DomainEvent> = (event: T) => Promise<void> | void\n\ntype UnsubscribeFunction = () => void\n\ninterface EventBusConfig {\n  // 저장소 설정\n  eventStore: EventStore\n  \n  // 성능 설정\n  maxConcurrency: number\n  batchSize: number\n  flushInterval: number\n  \n  // 신뢰성 설정\n  enablePersistence: boolean\n  enableOrdering: boolean\n  enableDeduplication: boolean\n  \n  // 모니터링\n  enableMetrics: boolean\n  metricsInterval: number\n}\n\ninterface SubscriptionInfo {\n  id: Identifier\n  eventType: EventType\n  handlerId: Identifier\n  createdAt: Timestamp\n  lastProcessed?: Timestamp\n  processedCount: number\n  errorCount: number\n}\n\ninterface EventBusMetrics {\n  totalEvents: number\n  totalSubscriptions: number\n  eventsPerSecond: number\n  averageProcessingTime: number\n  errorRate: number\n  queueSize: number\n}\n```\n\n## 결론", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "359", "text": "interface SubscriptionInfo {\n  id: Identifier\n  eventType: EventType\n  handlerId: Identifier\n  createdAt: Timestamp\n  lastProcessed?: Timestamp\n  processedCount: number\n  errorCount: number\n}\n\ninterface EventBusMetrics {\n  totalEvents: number\n  totalSubscriptions: number\n  eventsPerSecond: number\n  averageProcessingTime: number\n  errorRate: number\n  queueSize: number\n}\n```\n\n## 결론\n\n이 핵심 인터페이스 및 타입 정의는 ZyFlow 단일 진실 원천 아키텍처의 모든 컴포넌트가 일관된 방식으로 상호작용할 수 있는 기반을 제공합니다. 이 정의들을 통해:", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "360", "text": "## 결론\n\n이 핵심 인터페이스 및 타입 정의는 ZyFlow 단일 진실 원천 아키텍처의 모든 컴포넌트가 일관된 방식으로 상호작용할 수 있는 기반을 제공합니다. 이 정의들을 통해:\n\n1. **타입 안전성**: TypeScript의 완전한 타입 지원을 활용한 컴파일 타임 검사\n2. **인터페이스 일관성**: 모든 컴포넌트가 표준화된 인터페이스를 구현\n3. **확장성**: 잘 정의된 인터페이스를 통한 쉬운 기능 확장\n4. **테스트 용이성**: 명확한 계약을 통한 단위 테스트 작성 용이", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "361", "text": "이러한 인터페이스와 타입 정의는 ZyFlow 시스템의 안정성과 유지보수성을 크게 향상시킬 것입니다.", "metadata": {"file_path": "docs/architecture/core-interfaces-types.md", "file_name": "core-interfaces-types.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "362", "text": "# 이벤트 기반 아키텍처 및 CQRS 패턴 설계\n\n## 개요\n\nZyFlow의 단일 진실 원천 아키텍처는 이벤트 기반 아키텍처(Event-Driven Architecture)와 CQRS(Command Query Responsibility Segregation) 패턴을 적용하여 시스템의 확장성, 유연성, 및 유지보수성을 향상시킵니다. 이 설계는 모든 상태 변경을 불변 이벤트로 기록하고, 읽기와 쓰기 책임을 분리하여 시스템의 복잡성을 관리합니다.\n\n## 핵심 원칙", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "363", "text": "## 핵심 원칙\n\n### 1. 이벤트 소싱 (Event Sourcing)\n- 모든 상태 변경은 도메인 이벤트로 기록\n- 이벤트는 불변(Immutable)이며 순서가 보장됨\n- 현재 상태는 이벤트 스트림을 재생하여 재구성\n\n### 2. CQRS (Command Query Responsibility Segregation)\n- Command: 상태를 변경하는 작업 (쓰기)\n- Query: 상태를 조회하는 작업 (읽기)\n- 읽기 모델과 쓰기 모델의 완전한 분리\n\n### 3. 최종 일관성 (Eventual Consistency)\n- 시스템 구성 요소 간의 일관성은 비동기적으로 보장\n- 이벤트를 통한 느슨한 결합(Loose Coupling)", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "364", "text": "### 3. 최종 일관성 (Eventual Consistency)\n- 시스템 구성 요소 간의 일관성은 비동기적으로 보장\n- 이벤트를 통한 느슨한 결합(Loose Coupling)\n\n## 아키텍처 구성 요소\n\n### 1. 도메인 이벤트 (Domain Events)\n\n```typescript\n// 기본 이벤트 인터페이스\ninterface DomainEvent {\n  id: string\n  type: string\n  aggregateId: string\n  aggregateType: string\n  version: number\n  timestamp: number\n  \n  // 이벤트 데이터\n  data: Record<string, unknown>\n  \n  // 메타데이터\n  metadata: {\n    userId?: string\n    correlationId?: string\n    causationId?: string\n    [key: string]: unknown\n  }\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "365", "text": "```typescript\n// 기본 이벤트 인터페이스\ninterface DomainEvent {\n  id: string\n  type: string\n  aggregateId: string\n  aggregateType: string\n  version: number\n  timestamp: number\n  \n  // 이벤트 데이터\n  data: Record<string, unknown>\n  \n  // 메타데이터\n  metadata: {\n    userId?: string\n    correlationId?: string\n    causationId?: string\n    [key: string]: unknown\n  }\n}\n\n// 태스크 관련 이벤트\ninterface TaskCreatedEvent extends DomainEvent {\n  type: 'TaskCreated'\n  data: {\n    taskId: string\n    changeId: string\n    title: string\n    description?: string\n    status: TaskStatus\n    priority: TaskPriority\n    assignee?: string\n  }\n}\n\ninterface TaskUpdatedEvent extends DomainEvent {\n  type: 'TaskUpdated'\n  data: {\n    taskId: string\n    changes: Partial<Task>\n    previousValues: Partial<Task>\n  }\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "366", "text": "// 태스크 관련 이벤트\ninterface TaskCreatedEvent extends DomainEvent {\n  type: 'TaskCreated'\n  data: {\n    taskId: string\n    changeId: string\n    title: string\n    description?: string\n    status: TaskStatus\n    priority: TaskPriority\n    assignee?: string\n  }\n}\n\ninterface TaskUpdatedEvent extends DomainEvent {\n  type: 'TaskUpdated'\n  data: {\n    taskId: string\n    changes: Partial<Task>\n    previousValues: Partial<Task>\n  }\n}\n\ninterface TaskCompletedEvent extends DomainEvent {\n  type: 'TaskCompleted'\n  data: {\n    taskId: string\n    completedAt: number\n    completedBy: string\n  }\n}\n\n// 변경(Change) 관련 이벤트\ninterface ChangeCreatedEvent extends DomainEvent {\n  type: 'ChangeCreated'\n  data: {\n    changeId: string\n    title: string\n    description?: string\n    specPath?: string\n  }\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "367", "text": "interface TaskCompletedEvent extends DomainEvent {\n  type: 'TaskCompleted'\n  data: {\n    taskId: string\n    completedAt: number\n    completedBy: string\n  }\n}\n\n// 변경(Change) 관련 이벤트\ninterface ChangeCreatedEvent extends DomainEvent {\n  type: 'ChangeCreated'\n  data: {\n    changeId: string\n    title: string\n    description?: string\n    specPath?: string\n  }\n}\n\ninterface ChangeStatusUpdatedEvent extends DomainEvent {\n  type: 'ChangeStatusUpdated'\n  data: {\n    changeId: string\n    previousStatus: ChangeStatus\n    newStatus: ChangeStatus\n    updatedBy: string\n  }\n}\n\n// 동기화 관련 이벤트\ninterface SyncStartedEvent extends DomainEvent {\n  type: 'SyncStarted'\n  data: {\n    syncId: string\n    changeId: string\n    syncType: SyncType\n    direction: SyncDirection\n  }\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "368", "text": "interface ChangeStatusUpdatedEvent extends DomainEvent {\n  type: 'ChangeStatusUpdated'\n  data: {\n    changeId: string\n    previousStatus: ChangeStatus\n    newStatus: ChangeStatus\n    updatedBy: string\n  }\n}\n\n// 동기화 관련 이벤트\ninterface SyncStartedEvent extends DomainEvent {\n  type: 'SyncStarted'\n  data: {\n    syncId: string\n    changeId: string\n    syncType: SyncType\n    direction: SyncDirection\n  }\n}\n\ninterface SyncCompletedEvent extends DomainEvent {\n  type: 'SyncCompleted'\n  data: {\n    syncId: string\n    changeId: string\n    result: SyncResult\n  }\n}\n\ninterface ConflictDetectedEvent extends DomainEvent {\n  type: 'ConflictDetected'\n  data: {\n    conflictId: string\n    changeId: string\n    conflictType: ConflictType\n    description: string\n    specValue: unknown\n    runtimeValue: unknown\n  }\n}\n```\n\n### 2. 커맨드 (Commands)", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "369", "text": "interface SyncCompletedEvent extends DomainEvent {\n  type: 'SyncCompleted'\n  data: {\n    syncId: string\n    changeId: string\n    result: SyncResult\n  }\n}\n\ninterface ConflictDetectedEvent extends DomainEvent {\n  type: 'ConflictDetected'\n  data: {\n    conflictId: string\n    changeId: string\n    conflictType: ConflictType\n    description: string\n    specValue: unknown\n    runtimeValue: unknown\n  }\n}\n```\n\n### 2. 커맨드 (Commands)\n\n```typescript\n// 기본 커맨드 인터페이스\ninterface Command {\n  id: string\n  type: string\n  aggregateId: string\n  userId: string\n  timestamp: number\n  \n  // 커맨드 데이터\n  data: Record<string, unknown>\n  \n  // 메타데이터\n  metadata?: {\n    correlationId?: string\n    expectedVersion?: number\n    [key: string]: unknown\n  }\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "370", "text": "### 2. 커맨드 (Commands)\n\n```typescript\n// 기본 커맨드 인터페이스\ninterface Command {\n  id: string\n  type: string\n  aggregateId: string\n  userId: string\n  timestamp: number\n  \n  // 커맨드 데이터\n  data: Record<string, unknown>\n  \n  // 메타데이터\n  metadata?: {\n    correlationId?: string\n    expectedVersion?: number\n    [key: string]: unknown\n  }\n}\n\n// 태스크 커맨드\ninterface CreateTaskCommand extends Command {\n  type: 'CreateTask'\n  data: {\n    changeId: string\n    title: string\n    description?: string\n    priority?: TaskPriority\n    assignee?: string\n  }\n}\n\ninterface UpdateTaskCommand extends Command {\n  type: 'UpdateTask'\n  data: {\n    taskId: string\n    changes: Partial<Task>\n  }\n}\n\ninterface CompleteTaskCommand extends Command {\n  type: 'CompleteTask'\n  data: {\n    taskId: string\n    completedBy: string\n  }\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "371", "text": "// 태스크 커맨드\ninterface CreateTaskCommand extends Command {\n  type: 'CreateTask'\n  data: {\n    changeId: string\n    title: string\n    description?: string\n    priority?: TaskPriority\n    assignee?: string\n  }\n}\n\ninterface UpdateTaskCommand extends Command {\n  type: 'UpdateTask'\n  data: {\n    taskId: string\n    changes: Partial<Task>\n  }\n}\n\ninterface CompleteTaskCommand extends Command {\n  type: 'CompleteTask'\n  data: {\n    taskId: string\n    completedBy: string\n  }\n}\n\n// 동기화 커맨드\ninterface StartSyncCommand extends Command {\n  type: 'StartSync'\n  data: {\n    changeId: string\n    syncType: SyncType\n    direction: SyncDirection\n    options?: SyncOptions\n  }\n}\n\ninterface ResolveConflictCommand extends Command {\n  type: 'ResolveConflict'\n  data: {\n    conflictId: string\n    strategy: ResolutionStrategy\n    resolution: unknown\n  }\n}\n```\n\n### 3. 쿼리 (Queries)", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "372", "text": "// 동기화 커맨드\ninterface StartSyncCommand extends Command {\n  type: 'StartSync'\n  data: {\n    changeId: string\n    syncType: SyncType\n    direction: SyncDirection\n    options?: SyncOptions\n  }\n}\n\ninterface ResolveConflictCommand extends Command {\n  type: 'ResolveConflict'\n  data: {\n    conflictId: string\n    strategy: ResolutionStrategy\n    resolution: unknown\n  }\n}\n```\n\n### 3. 쿼리 (Queries)\n\n```typescript\n// 기본 쿼리 인터페이스\ninterface Query<T = unknown> {\n  id: string\n  type: string\n  parameters: Record<string, unknown>\n  \n  // 쿼리 옵션\n  options?: {\n    include?: string[]\n    exclude?: string[]\n    sort?: Record<string, 'ASC' | 'DESC'>\n    limit?: number\n    offset?: number\n  }\n}\n\n// 태스크 쿼리\ninterface GetTaskQuery extends Query<Task> {\n  type: 'GetTask'\n  parameters: {\n    taskId: string\n  }\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "373", "text": "// 태스크 쿼리\ninterface GetTaskQuery extends Query<Task> {\n  type: 'GetTask'\n  parameters: {\n    taskId: string\n  }\n}\n\ninterface ListTasksQuery extends Query<Task[]> {\n  type: 'ListTasks'\n  parameters: {\n    changeId?: string\n    status?: TaskStatus\n    assignee?: string\n    priority?: TaskPriority\n  }\n}\n\ninterface SearchTasksQuery extends Query<Task[]> {\n  type: 'SearchTasks'\n  parameters: {\n    query: string\n    filters?: {\n      status?: TaskStatus[]\n      priority?: TaskPriority[]\n      dateRange?: {\n        start: number\n        end: number\n      }\n    }\n  }\n}\n\n// 변경 쿼리\ninterface GetChangeQuery extends Query<Change> {\n  type: 'GetChange'\n  parameters: {\n    changeId: string\n  }\n}\n\ninterface ListChangesQuery extends Query<Change[]> {\n  type: 'ListChanges'\n  parameters: {\n    status?: ChangeStatus\n    stage?: Stage\n  }\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "374", "text": "// 변경 쿼리\ninterface GetChangeQuery extends Query<Change> {\n  type: 'GetChange'\n  parameters: {\n    changeId: string\n  }\n}\n\ninterface ListChangesQuery extends Query<Change[]> {\n  type: 'ListChanges'\n  parameters: {\n    status?: ChangeStatus\n    stage?: Stage\n  }\n}\n\n// 동기화 쿼리\ninterface GetSyncStatusQuery extends Query<SyncStatus> {\n  type: 'GetSyncStatus'\n  parameters: {\n    changeId: string\n  }\n}\n\ninterface GetSyncHistoryQuery extends Query<SyncHistory[]> {\n  type: 'GetSyncHistory'\n  parameters: {\n    changeId: string\n    timeRange?: {\n      start: number\n      end: number\n    }\n  }\n}\n```\n\n### 4. 이벤트 버스 (Event Bus)", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "375", "text": "interface GetSyncHistoryQuery extends Query<SyncHistory[]> {\n  type: 'GetSyncHistory'\n  parameters: {\n    changeId: string\n    timeRange?: {\n      start: number\n      end: number\n    }\n  }\n}\n```\n\n### 4. 이벤트 버스 (Event Bus)\n\n```typescript\ninterface EventBus {\n  // 이벤트 발행\n  publish<T extends DomainEvent>(event: T): Promise<void>\n  publishBatch<T extends DomainEvent>(events: T[]): Promise<void>\n  \n  // 이벤트 구독\n  subscribe<T extends DomainEvent>(\n    eventType: string,\n    handler: EventHandler<T>\n  ): UnsubscribeFunction\n  \n  // 이벤트 스트림\n  getEventStream(filter?: EventFilter): AsyncIterable<DomainEvent>\n  replayEvents(fromTimestamp: number, filter?: EventFilter): AsyncIterable<DomainEvent>\n  \n  // 이벤트 저장\n  saveEvents(events: DomainEvent[]): Promise<void>\n  getEvents(filter?: EventFilter): Promise<DomainEvent[]>\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "376", "text": "type EventHandler<T extends DomainEvent> = (event: T) => Promise<void> | void\ntype UnsubscribeFunction = () => void\n\ninterface EventFilter {\n  eventTypes?: string[]\n  aggregateIds?: string[]\n  aggregateTypes?: string[]\n  timeRange?: {\n    start: number\n    end: number\n  }\n  userIds?: string[]\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "377", "text": "// 구현체\nclass InMemoryEventBus implements EventBus {\n  private handlers = new Map<string, Set<EventHandler<DomainEvent>>>()\n  private events: DomainEvent[] = []\n  \n  async publish<T extends DomainEvent>(event: T): Promise<void> {\n    // 이벤트 저장\n    this.events.push(event)\n    \n    // 핸들러 실행\n    const handlers = this.handlers.get(event.type)\n    if (handlers) {\n      await Promise.allSettled(\n        Array.from(handlers).map(handler => \n          Promise.resolve(handler(event)).catch(error => \n            console.error(`Event handler error for ${event.type}:`, error)\n          )\n        )\n      )\n    }\n  }\n  \n  subscribe<T extends DomainEvent>(\n    eventType: string,\n    handler: EventHandler<T>\n  ): UnsubscribeFunction {\n    if (!this.handlers.has(eventType)) {\n      this.handlers.set(eventType, new Set())\n    }\n    \n    this.handlers.get(eventType)!.add(handler)\n    \n    return () => {\n      this.handlers.get(eventType)?.delete(handler)\n    }\n  }\n  \n  async *getEventStream(filter?", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "378", "text": ": EventFilter): AsyncIterable<DomainEvent> {\n    for (const event of this.events) {\n      if (this.matchesFilter(event, filter)) {\n        yield event\n      }\n    }\n  }\n  \n  private matchesFilter(event: DomainEvent, filter?: EventFilter): boolean {\n    if (!filter) return true\n    \n    if (filter.eventTypes && !filter.eventTypes.includes(event.type)) {\n      return false\n    }\n    \n    if (filter.aggregateIds && !filter.aggregateIds.includes(event.aggregateId)) {\n      return false\n    }\n    \n    if (filter.timeRange) {\n      const { start, end } = filter.timeRange\n      if (event.timestamp < start || event.timestamp > end) {\n        return false\n      }\n    }\n    \n    return true\n  }\n}\n```\n\n### 5. 커맨드 핸들러 (Command Handlers)\n\n```typescript\ninterface CommandHandler<T extends Command> {\n  handle(command: T): Promise<DomainEvent[]>\n  canHandle(command: Command): command is T\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "379", "text": "### 5. 커맨드 핸들러 (Command Handlers)\n\n```typescript\ninterface CommandHandler<T extends Command> {\n  handle(command: T): Promise<DomainEvent[]>\n  canHandle(command: Command): command is T\n}\n\n// 태스크 커맨드 핸들러\nclass TaskCommandHandler implements CommandHandler<CreateTaskCommand | UpdateTaskCommand | CompleteTaskCommand> {\n  constructor(\n    private taskRepository: TaskRepository,\n    private eventBus: EventBus\n  ) {}\n  \n  canHandle(command: Command): command is CreateTaskCommand | UpdateTaskCommand | CompleteTaskCommand {\n    return ['CreateTask', 'UpdateTask', 'CompleteTask'].includes(command.type)\n  }\n  \n  async handle(command: CreateTaskCommand | UpdateTaskCommand | CompleteTaskCommand): Promise<DomainEvent[]> {\n    switch (command.type) {\n      case 'CreateTask':\n        return await this.handleCreateTask(command as CreateTaskCommand)\n      case 'UpdateTask':\n        return await this.handleUpdateTask(command as UpdateTaskCommand)\n      case 'CompleteTask':\n        return await this.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "380", "text": "'UpdateTask', 'CompleteTask'].includes(command.type)\n  }\n  \n  async handle(command: CreateTaskCommand | UpdateTaskCommand | CompleteTaskCommand): Promise<DomainEvent[]> {\n    switch (command.type) {\n      case 'CreateTask':\n        return await this.handleCreateTask(command as CreateTaskCommand)\n      case 'UpdateTask':\n        return await this.handleUpdateTask(command as UpdateTaskCommand)\n      case 'CompleteTask':\n        return await this.handleCompleteTask(command as CompleteTaskCommand)\n      default:\n        throw new Error(`Unsupported command type: ${command.type}`)\n    }\n  }\n  \n  private async handleCreateTask(command: CreateTaskCommand): Promise<DomainEvent[]> {\n    const { data } = command\n    const taskId = generateTaskId()\n    \n    // 비즈니스 규칙 검증\n    await this.validateCreateTask(data)\n    \n    const event: TaskCreatedEvent = {\n      id: generateEventId(),\n      type: 'TaskCreated',\n      aggregateId: taskId,\n      aggregateType: 'Task',\n      version: 1,\n      timestamp: Date.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "381", "text": "type}`)\n    }\n  }\n  \n  private async handleCreateTask(command: CreateTaskCommand): Promise<DomainEvent[]> {\n    const { data } = command\n    const taskId = generateTaskId()\n    \n    // 비즈니스 규칙 검증\n    await this.validateCreateTask(data)\n    \n    const event: TaskCreatedEvent = {\n      id: generateEventId(),\n      type: 'TaskCreated',\n      aggregateId: taskId,\n      aggregateType: 'Task',\n      version: 1,\n      timestamp: Date.now(),\n      data: {\n        taskId,\n        changeId: data.changeId,\n        title: data.title,\n        description: data.description,\n        status: 'todo',\n        priority: data.priority || 'medium',\n        assignee: data.assignee\n      },\n      metadata: {\n        userId: command.userId,\n        correlationId: command.metadata?.correlationId\n      }\n    }\n    \n    // 이벤트 발행\n    await this.eventBus.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "382", "text": "version: 1,\n      timestamp: Date.now(),\n      data: {\n        taskId,\n        changeId: data.changeId,\n        title: data.title,\n        description: data.description,\n        status: 'todo',\n        priority: data.priority || 'medium',\n        assignee: data.assignee\n      },\n      metadata: {\n        userId: command.userId,\n        correlationId: command.metadata?.correlationId\n      }\n    }\n    \n    // 이벤트 발행\n    await this.eventBus.publish(event)\n    \n    return [event]\n  }\n  \n  private async handleUpdateTask(command: UpdateTaskCommand): Promise<DomainEvent[]> {\n    const { data } = command\n    \n    // 현재 태스크 상태 조회\n    const currentTask = await this.taskRepository.getById(data.taskId)\n    if (!currentTask) {\n      throw new Error(`Task not found: ${data.taskId}`)\n    }\n    \n    // 비즈니스 규칙 검증\n    await this.validateUpdateTask(currentTask,", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "383", "text": "eventBus.publish(event)\n    \n    return [event]\n  }\n  \n  private async handleUpdateTask(command: UpdateTaskCommand): Promise<DomainEvent[]> {\n    const { data } = command\n    \n    // 현재 태스크 상태 조회\n    const currentTask = await this.taskRepository.getById(data.taskId)\n    if (!currentTask) {\n      throw new Error(`Task not found: ${data.taskId}`)\n    }\n    \n    // 비즈니스 규칙 검증\n    await this.validateUpdateTask(currentTask, data.changes)\n    \n    const event: TaskUpdatedEvent = {\n      id: generateEventId(),\n      type: 'TaskUpdated',\n      aggregateId: data.taskId,\n      aggregateType: 'Task',\n      version: currentTask.version + 1,\n      timestamp: Date.now(),\n      data: {\n        taskId: data.taskId,\n        changes: data.changes,\n        previousValues: this.extractPreviousValues(currentTask, data.changes)\n      },\n      metadata: {\n        userId: command.userId,", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "384", "text": "validateUpdateTask(currentTask, data.changes)\n    \n    const event: TaskUpdatedEvent = {\n      id: generateEventId(),\n      type: 'TaskUpdated',\n      aggregateId: data.taskId,\n      aggregateType: 'Task',\n      version: currentTask.version + 1,\n      timestamp: Date.now(),\n      data: {\n        taskId: data.taskId,\n        changes: data.changes,\n        previousValues: this.extractPreviousValues(currentTask, data.changes)\n      },\n      metadata: {\n        userId: command.userId,\n        correlationId: command.metadata?.correlationId\n      }\n    }\n    \n    await this.eventBus.publish(event)\n    \n    return [event]\n  }\n  \n  private async handleCompleteTask(command: CompleteTaskCommand): Promise<DomainEvent[]> {\n    const { data } = command\n    \n    // 현재 태스크 상태 조회\n    const currentTask = await this.taskRepository.getById(data.taskId)\n    if (!currentTask) {\n      throw new Error(`Task not found: ${data.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "385", "text": "changes)\n      },\n      metadata: {\n        userId: command.userId,\n        correlationId: command.metadata?.correlationId\n      }\n    }\n    \n    await this.eventBus.publish(event)\n    \n    return [event]\n  }\n  \n  private async handleCompleteTask(command: CompleteTaskCommand): Promise<DomainEvent[]> {\n    const { data } = command\n    \n    // 현재 태스크 상태 조회\n    const currentTask = await this.taskRepository.getById(data.taskId)\n    if (!currentTask) {\n      throw new Error(`Task not found: ${data.taskId}`)\n    }\n    \n    if (currentTask.status === 'done') {\n      throw new Error(`Task already completed: ${data.taskId}`)\n    }\n    \n    const event: TaskCompletedEvent = {\n      id: generateEventId(),\n      type: 'TaskCompleted',\n      aggregateId: data.taskId,\n      aggregateType: 'Task',\n      version: currentTask.version + 1,\n      timestamp: Date.now(),\n      data: {\n        taskId: data.taskId,\n        completedAt: Date.now(),", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "386", "text": "taskId}`)\n    }\n    \n    if (currentTask.status === 'done') {\n      throw new Error(`Task already completed: ${data.taskId}`)\n    }\n    \n    const event: TaskCompletedEvent = {\n      id: generateEventId(),\n      type: 'TaskCompleted',\n      aggregateId: data.taskId,\n      aggregateType: 'Task',\n      version: currentTask.version + 1,\n      timestamp: Date.now(),\n      data: {\n        taskId: data.taskId,\n        completedAt: Date.now(),\n        completedBy: data.completedBy\n      },\n      metadata: {\n        userId: command.userId,\n        correlationId: command.metadata?.correlationId\n      }\n    }\n    \n    await this.eventBus.publish(event)\n    \n    return [event]\n  }\n}\n```\n\n### 6. 쿼리 핸들러 (Query Handlers)\n\n```typescript\ninterface QueryHandler<T extends Query, R> {\n  handle(query: T): Promise<R>\n  canHandle(query: Query): query is T\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "387", "text": "taskId,\n        completedAt: Date.now(),\n        completedBy: data.completedBy\n      },\n      metadata: {\n        userId: command.userId,\n        correlationId: command.metadata?.correlationId\n      }\n    }\n    \n    await this.eventBus.publish(event)\n    \n    return [event]\n  }\n}\n```\n\n### 6. 쿼리 핸들러 (Query Handlers)\n\n```typescript\ninterface QueryHandler<T extends Query, R> {\n  handle(query: T): Promise<R>\n  canHandle(query: Query): query is T\n}\n\n// 태스크 쿼리 핸들러\nclass TaskQueryHandler implements QueryHandler<GetTaskQuery, Task> | QueryHandler<ListTasksQuery, Task[]> | QueryHandler<SearchTasksQuery, Task[]> {\n  constructor(\n    private taskReadModel: TaskReadModel\n  ) {}\n  \n  canHandle(query: Query): query is GetTaskQuery | ListTasksQuery | SearchTasksQuery {\n    return ['GetTask', 'ListTasks', 'SearchTasks'].includes(query.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "388", "text": "// 태스크 쿼리 핸들러\nclass TaskQueryHandler implements QueryHandler<GetTaskQuery, Task> | QueryHandler<ListTasksQuery, Task[]> | QueryHandler<SearchTasksQuery, Task[]> {\n  constructor(\n    private taskReadModel: TaskReadModel\n  ) {}\n  \n  canHandle(query: Query): query is GetTaskQuery | ListTasksQuery | SearchTasksQuery {\n    return ['GetTask', 'ListTasks', 'SearchTasks'].includes(query.type)\n  }\n  \n  async handle(query: GetTaskQuery | ListTasksQuery | SearchTasksQuery): Promise<Task | Task[]> {\n    switch (query.type) {\n      case 'GetTask':\n        return await this.handleGetTask(query as GetTaskQuery)\n      case 'ListTasks':\n        return await this.handleListTasks(query as ListTasksQuery)\n      case 'SearchTasks':\n        return await this.handleSearchTasks(query as SearchTasksQuery)\n      default:\n        throw new Error(`Unsupported query type: ${query.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "389", "text": "'ListTasks', 'SearchTasks'].includes(query.type)\n  }\n  \n  async handle(query: GetTaskQuery | ListTasksQuery | SearchTasksQuery): Promise<Task | Task[]> {\n    switch (query.type) {\n      case 'GetTask':\n        return await this.handleGetTask(query as GetTaskQuery)\n      case 'ListTasks':\n        return await this.handleListTasks(query as ListTasksQuery)\n      case 'SearchTasks':\n        return await this.handleSearchTasks(query as SearchTasksQuery)\n      default:\n        throw new Error(`Unsupported query type: ${query.type}`)\n    }\n  }\n  \n  private async handleGetTask(query: GetTaskQuery): Promise<Task> {\n    const task = await this.taskReadModel.getById(query.parameters.taskId)\n    if (!task) {\n      throw new Error(`Task not found: ${query.parameters.taskId}`)\n    }\n    return task\n  }\n  \n  private async handleListTasks(query: ListTasksQuery): Promise<Task[]> {\n    return await this.taskReadModel.list(query.parameters, query.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "390", "text": "type}`)\n    }\n  }\n  \n  private async handleGetTask(query: GetTaskQuery): Promise<Task> {\n    const task = await this.taskReadModel.getById(query.parameters.taskId)\n    if (!task) {\n      throw new Error(`Task not found: ${query.parameters.taskId}`)\n    }\n    return task\n  }\n  \n  private async handleListTasks(query: ListTasksQuery): Promise<Task[]> {\n    return await this.taskReadModel.list(query.parameters, query.options)\n  }\n  \n  private async handleSearchTasks(query: SearchTasksQuery): Promise<Task[]> {\n    return await this.taskReadModel.search(query.parameters.query, query.parameters.filters, query.options)\n  }\n}\n```\n\n### 7. 읽기 모델 (Read Models)", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "391", "text": "parameters.taskId}`)\n    }\n    return task\n  }\n  \n  private async handleListTasks(query: ListTasksQuery): Promise<Task[]> {\n    return await this.taskReadModel.list(query.parameters, query.options)\n  }\n  \n  private async handleSearchTasks(query: SearchTasksQuery): Promise<Task[]> {\n    return await this.taskReadModel.search(query.parameters.query, query.parameters.filters, query.options)\n  }\n}\n```\n\n### 7. 읽기 모델 (Read Models)\n\n```typescript\n// 태스크 읽기 모델\ninterface TaskReadModel {\n  getById(taskId: string): Promise<Task | null>\n  list(filters: TaskFilters, options?: QueryOptions): Promise<Task[]>\n  search(query: string, filters?: TaskFilters, options?: QueryOptions): Promise<Task[]>\n  \n  // 이벤트 처리\n  applyTaskCreated(event: TaskCreatedEvent): Promise<void>\n  applyTaskUpdated(event: TaskUpdatedEvent): Promise<void>\n  applyTaskCompleted(event: TaskCompletedEvent): Promise<void>\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "392", "text": "```typescript\n// 태스크 읽기 모델\ninterface TaskReadModel {\n  getById(taskId: string): Promise<Task | null>\n  list(filters: TaskFilters, options?: QueryOptions): Promise<Task[]>\n  search(query: string, filters?: TaskFilters, options?: QueryOptions): Promise<Task[]>\n  \n  // 이벤트 처리\n  applyTaskCreated(event: TaskCreatedEvent): Promise<void>\n  applyTaskUpdated(event: TaskUpdatedEvent): Promise<void>\n  applyTaskCompleted(event: TaskCompletedEvent): Promise<void>\n}\n\ninterface TaskFilters {\n  changeId?: string\n  status?: TaskStatus\n  assignee?: string\n  priority?: TaskPriority\n}\n\ninterface QueryOptions {\n  sort?: Record<string, 'ASC' | 'DESC'>\n  limit?: number\n  offset?: number\n}\n\nclass SQLiteTaskReadModel implements TaskReadModel {\n  constructor(private db: Database) {}\n  \n  async getById(taskId: string): Promise<Task | null> {\n    const row = this.db.prepare(`\n      SELECT * FROM task_read_model WHERE id = ?\n    `).get(taskId)\n    \n    return row ?", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "393", "text": "interface TaskFilters {\n  changeId?: string\n  status?: TaskStatus\n  assignee?: string\n  priority?: TaskPriority\n}\n\ninterface QueryOptions {\n  sort?: Record<string, 'ASC' | 'DESC'>\n  limit?: number\n  offset?: number\n}\n\nclass SQLiteTaskReadModel implements TaskReadModel {\n  constructor(private db: Database) {}\n  \n  async getById(taskId: string): Promise<Task | null> {\n    const row = this.db.prepare(`\n      SELECT * FROM task_read_model WHERE id = ?\n    `).get(taskId)\n    \n    return row ? this.mapRowToTask(row) : null\n  }\n  \n  async list(filters: TaskFilters, options?: QueryOptions): Promise<Task[]> {\n    let query = 'SELECT * FROM task_read_model WHERE 1=1'\n    const params: unknown[] = []\n    \n    // 필터 적용\n    if (filters.changeId) {\n      query += ' AND change_id = ?'\n      params.push(filters.changeId)\n    }\n    \n    if (filters.status) {\n      query += ' AND status = ?'", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "394", "text": "`).get(taskId)\n    \n    return row ? this.mapRowToTask(row) : null\n  }\n  \n  async list(filters: TaskFilters, options?: QueryOptions): Promise<Task[]> {\n    let query = 'SELECT * FROM task_read_model WHERE 1=1'\n    const params: unknown[] = []\n    \n    // 필터 적용\n    if (filters.changeId) {\n      query += ' AND change_id = ?'\n      params.push(filters.changeId)\n    }\n    \n    if (filters.status) {\n      query += ' AND status = ?'\n      params.push(filters.status)\n    }\n    \n    if (filters.assignee) {\n      query += ' AND assignee = ?'\n      params.push(filters.assignee)\n    }\n    \n    if (filters.priority) {\n      query += ' AND priority = ?'", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "395", "text": "params.push(filters.changeId)\n    }\n    \n    if (filters.status) {\n      query += ' AND status = ?'\n      params.push(filters.status)\n    }\n    \n    if (filters.assignee) {\n      query += ' AND assignee = ?'\n      params.push(filters.assignee)\n    }\n    \n    if (filters.priority) {\n      query += ' AND priority = ?'\n      params.push(filters.priority)\n    }\n    \n    // 정렬 적용\n    if (options?.sort) {\n      const sortFields = Object.entries(options.sort)\n        .map(([field, direction]) => `${field} ${direction}`)\n        .join(', ')\n      query += ` ORDER BY ${sortFields}`\n    }\n    \n    // 페이징 적용\n    if (options?.limit) {\n      query += ' LIMIT ?'\n      params.push(options.limit)\n      \n      if (options.offset) {\n        query += ' OFFSET ?'\n        params.push(options.offset)\n      }\n    }\n    \n    const rows = this.db.prepare(query).all(...params)\n    return rows.map(row => this.mapRowToTask(row))\n  }\n  \n  async search(query: string, filters?", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "396", "text": "params.push(options.limit)\n      \n      if (options.offset) {\n        query += ' OFFSET ?'\n        params.push(options.offset)\n      }\n    }\n    \n    const rows = this.db.prepare(query).all(...params)\n    return rows.map(row => this.mapRowToTask(row))\n  }\n  \n  async search(query: string, filters?: TaskFilters, options?: QueryOptions): Promise<Task[]> {\n    // 전문 검색 구현\n    let sql = `\n      SELECT * FROM task_read_model \n      WHERE title LIKE ? OR description LIKE ?\n    `\n    const params = [`%${query}%`, `%${query}%`]\n    \n    // 추가 필터 적용\n    if (filters) {\n      if (filters.changeId) {\n        sql += ' AND change_id = ?'", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "397", "text": ": TaskFilters, options?: QueryOptions): Promise<Task[]> {\n    // 전문 검색 구현\n    let sql = `\n      SELECT * FROM task_read_model \n      WHERE title LIKE ? OR description LIKE ?\n    `\n    const params = [`%${query}%`, `%${query}%`]\n    \n    // 추가 필터 적용\n    if (filters) {\n      if (filters.changeId) {\n        sql += ' AND change_id = ?'\n        params.push(filters.changeId)\n      }\n      // ... 다른 필터들\n    }\n    \n    const rows = this.db.prepare(sql).all(...params)\n    return rows.map(row => this.mapRowToTask(row))\n  }\n  \n  // 이벤트 핸들러\n  async applyTaskCreated(event: TaskCreatedEvent): Promise<void> {\n    const { data } = event\n    \n    this.db.prepare(`\n      INSERT INTO task_read_model (\n        id, change_id, title, description, status, priority, \n        assignee, created_at, updated_at, version\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "398", "text": "`).run(\n      data.taskId,\n      data.changeId,\n      data.title,\n      data.description || null,\n      data.status,\n      data.priority,\n      data.assignee || null,\n      event.timestamp,\n      event.timestamp,\n      1\n    )\n  }\n  \n  async applyTaskUpdated(event: TaskUpdatedEvent): Promise<void> {\n    const { data } = event\n    \n    // 동적 UPDATE 문 생성\n    const setClauses: string[] = []\n    const params: unknown[] = []\n    \n    Object.entries(data.changes).forEach(([key, value]) => {\n      setClauses.push(`${key} = ?`)\n      params.push(value)\n    })\n    \n    params.push(event.timestamp) // updated_at\n    params.push(event.version) // version\n    params.push(data.taskId) // WHERE\n    \n    this.db.prepare(`\n      UPDATE task_read_model \n      SET ${setClauses.join(', ')}, updated_at = ?, version = ?\n      WHERE id = ?", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "399", "text": "WHERE id = ?\n    `).run(...params)\n  }\n  \n  async applyTaskCompleted(event: TaskCompletedEvent): Promise<void> {\n    const { data } = event\n    \n    this.db.prepare(`\n      UPDATE task_read_model \n      SET status = 'done', completed_at = ?, updated_at = ?, version = ?\n      WHERE id = ?\n    `).run(\n      data.completedAt,\n      event.timestamp,\n      event.version,\n      data.taskId\n    )\n  }\n  \n  private mapRowToTask(row: any): Task {\n    return {\n      id: row.id,\n      changeId: row.change_id,\n      title: row.title,\n      description: row.description,\n      status: row.status,\n      priority: row.priority,\n      assignee: row.assignee,\n      createdAt: row.created_at,\n      updatedAt: row.updated_at,\n      completedAt: row.completed_at,\n      version: row.version\n    }\n  }\n}\n```\n\n### 8. 집합 루트 (Aggregate Root)", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "400", "text": "### 8. 집합 루트 (Aggregate Root)\n\n```typescript\n// 태스크 집합 루트\nclass Task {\n  private id: string\n  private version: number = 0\n  private uncommittedEvents: DomainEvent[] = []\n  \n  // 상태\n  private changeId: string\n  private title: string\n  private description?: string\n  private status: TaskStatus\n  private priority: TaskPriority\n  private assignee?: string\n  private createdAt: number\n  private updatedAt: number\n  private completedAt?: number\n  \n  constructor(id: string) {\n    this.id = id\n  }\n  \n  // 비즈니스 메서드\n  static create(data: CreateTaskData): Task {\n    const task = new Task(data.taskId)\n    \n    task.apply(new TaskCreatedEvent({\n      id: generateEventId(),\n      aggregateId: data.taskId,\n      aggregateType: 'Task',\n      version: 1,\n      timestamp: Date.now(),\n      data: {\n        taskId: data.taskId,", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "401", "text": ": number\n  \n  constructor(id: string) {\n    this.id = id\n  }\n  \n  // 비즈니스 메서드\n  static create(data: CreateTaskData): Task {\n    const task = new Task(data.taskId)\n    \n    task.apply(new TaskCreatedEvent({\n      id: generateEventId(),\n      aggregateId: data.taskId,\n      aggregateType: 'Task',\n      version: 1,\n      timestamp: Date.now(),\n      data: {\n        taskId: data.taskId,\n        changeId: data.changeId,\n        title: data.title,\n        description: data.description,\n        status: 'todo',\n        priority: data.priority || 'medium',\n        assignee: data.assignee\n      }\n    }))\n    \n    return task\n  }\n  \n  update(changes: Partial<Task>): void {\n    this.validateUpdate(changes)\n    \n    this.apply(new TaskUpdatedEvent({\n      id: generateEventId(),\n      aggregateId: this.id,\n      aggregateType: 'Task',\n      version: this.version + 1,", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "402", "text": "changeId: data.changeId,\n        title: data.title,\n        description: data.description,\n        status: 'todo',\n        priority: data.priority || 'medium',\n        assignee: data.assignee\n      }\n    }))\n    \n    return task\n  }\n  \n  update(changes: Partial<Task>): void {\n    this.validateUpdate(changes)\n    \n    this.apply(new TaskUpdatedEvent({\n      id: generateEventId(),\n      aggregateId: this.id,\n      aggregateType: 'Task',\n      version: this.version + 1,\n      timestamp: Date.now(),\n      data: {\n        taskId: this.id,\n        changes,\n        previousValues: this.extractPreviousValues(changes)\n      }\n    }))\n  }\n  \n  complete(completedBy: string): void {\n    if (this.status === 'done') {\n      throw new Error('Task is already completed')\n    }\n    \n    this.apply(new TaskCompletedEvent({\n      id: generateEventId(),\n      aggregateId: this.id,\n      aggregateType: 'Task',\n      version: this.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "403", "text": "version: this.version + 1,\n      timestamp: Date.now(),\n      data: {\n        taskId: this.id,\n        changes,\n        previousValues: this.extractPreviousValues(changes)\n      }\n    }))\n  }\n  \n  complete(completedBy: string): void {\n    if (this.status === 'done') {\n      throw new Error('Task is already completed')\n    }\n    \n    this.apply(new TaskCompletedEvent({\n      id: generateEventId(),\n      aggregateId: this.id,\n      aggregateType: 'Task',\n      version: this.version + 1,\n      timestamp: Date.now(),\n      data: {\n        taskId: this.id,\n        completedAt: Date.now(),\n        completedBy\n      }\n    }))\n  }\n  \n  // 이벤트 적용\n  private apply(event: DomainEvent): void {\n    switch (event.type) {\n      case 'TaskCreated':\n        this.applyTaskCreated(event as TaskCreatedEvent)\n        break\n      case 'TaskUpdated':\n        this.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "404", "text": "aggregateId: this.id,\n      aggregateType: 'Task',\n      version: this.version + 1,\n      timestamp: Date.now(),\n      data: {\n        taskId: this.id,\n        completedAt: Date.now(),\n        completedBy\n      }\n    }))\n  }\n  \n  // 이벤트 적용\n  private apply(event: DomainEvent): void {\n    switch (event.type) {\n      case 'TaskCreated':\n        this.applyTaskCreated(event as TaskCreatedEvent)\n        break\n      case 'TaskUpdated':\n        this.applyTaskUpdated(event as TaskUpdatedEvent)\n        break\n      case 'TaskCompleted':\n        this.applyTaskCompleted(event as TaskCompletedEvent)\n        break\n    }\n    \n    this.version = event.version\n    this.uncommittedEvents.push(event)\n  }\n  \n  private applyTaskCreated(event: TaskCreatedEvent): void {\n    const { data } = event\n    this.changeId = data.changeId\n    this.title = data.title\n    this.description = data.description\n    this.status = data.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "405", "text": "applyTaskUpdated(event as TaskUpdatedEvent)\n        break\n      case 'TaskCompleted':\n        this.applyTaskCompleted(event as TaskCompletedEvent)\n        break\n    }\n    \n    this.version = event.version\n    this.uncommittedEvents.push(event)\n  }\n  \n  private applyTaskCreated(event: TaskCreatedEvent): void {\n    const { data } = event\n    this.changeId = data.changeId\n    this.title = data.title\n    this.description = data.description\n    this.status = data.status\n    this.priority = data.priority\n    this.assignee = data.assignee\n    this.createdAt = event.timestamp\n    this.updatedAt = event.timestamp\n  }\n  \n  private applyTaskUpdated(event: TaskUpdatedEvent): void {\n    const { data } = event\n    Object.assign(this, data.changes)\n    this.updatedAt = event.timestamp\n  }\n  \n  private applyTaskCompleted(event: TaskCompletedEvent): void {\n    const { data } = event\n    this.status = 'done'\n    this.completedAt = data.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "406", "text": "status = data.status\n    this.priority = data.priority\n    this.assignee = data.assignee\n    this.createdAt = event.timestamp\n    this.updatedAt = event.timestamp\n  }\n  \n  private applyTaskUpdated(event: TaskUpdatedEvent): void {\n    const { data } = event\n    Object.assign(this, data.changes)\n    this.updatedAt = event.timestamp\n  }\n  \n  private applyTaskCompleted(event: TaskCompletedEvent): void {\n    const { data } = event\n    this.status = 'done'\n    this.completedAt = data.completedAt\n    this.updatedAt = event.timestamp\n  }\n  \n  // 검증 메서드\n  private validateUpdate(changes: Partial<Task>): void {\n    if (changes.status && changes.status === 'done') {\n      throw new Error('Use complete() method to mark task as done')\n    }\n  }\n  \n  private extractPreviousValues(changes: Partial<Task>): Partial<Task> {\n    const previousValues: Partial<Task> = {}\n    \n    Object.keys(changes).", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "407", "text": "status = 'done'\n    this.completedAt = data.completedAt\n    this.updatedAt = event.timestamp\n  }\n  \n  // 검증 메서드\n  private validateUpdate(changes: Partial<Task>): void {\n    if (changes.status && changes.status === 'done') {\n      throw new Error('Use complete() method to mark task as done')\n    }\n  }\n  \n  private extractPreviousValues(changes: Partial<Task>): Partial<Task> {\n    const previousValues: Partial<Task> = {}\n    \n    Object.keys(changes).forEach(key => {\n      if (key in this) {\n        (previousValues as any)[key] = (this as any)[key]\n      }\n    })\n    \n    return previousValues\n  }\n  \n  // 공용 메서드\n  getId(): string { return this.id }\n  getVersion(): number { return this.version }\n  getUncommittedEvents(): DomainEvent[] { return [...this.uncommittedEvents] }\n  markEventsAsCommitted(): void { this.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "408", "text": "keys(changes).forEach(key => {\n      if (key in this) {\n        (previousValues as any)[key] = (this as any)[key]\n      }\n    })\n    \n    return previousValues\n  }\n  \n  // 공용 메서드\n  getId(): string { return this.id }\n  getVersion(): number { return this.version }\n  getUncommittedEvents(): DomainEvent[] { return [...this.uncommittedEvents] }\n  markEventsAsCommitted(): void { this.uncommittedEvents = [] }\n  \n  // 상태 접근자\n  getState(): Task {\n    return {\n      id: this.id,\n      changeId: this.changeId,\n      title: this.title,\n      description: this.description,\n      status: this.status,\n      priority: this.priority,\n      assignee: this.assignee,\n      createdAt: this.createdAt,\n      updatedAt: this.updatedAt,\n      completedAt: this.completedAt,\n      version: this.version\n    }\n  }\n}\n```\n\n## 데이터 흐름", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "409", "text": "id,\n      changeId: this.changeId,\n      title: this.title,\n      description: this.description,\n      status: this.status,\n      priority: this.priority,\n      assignee: this.assignee,\n      createdAt: this.createdAt,\n      updatedAt: this.updatedAt,\n      completedAt: this.completedAt,\n      version: this.version\n    }\n  }\n}\n```\n\n## 데이터 흐름\n\n### 1. 커맨드 처리 흐름", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "410", "text": "## 데이터 흐름\n\n### 1. 커맨드 처리 흐름\n\n```mermaid\ngraph TD\n    A[커맨드 요청] --> B[커맨드 유효성 검증]\n    B --> C{검증 통과?}\n    C -->|아니오| D[오류 반환]\n    C -->|예| E[집합 루트 로드]\n    \n    E --> F[비즈니스 로직 실행]\n    F --> G[도메인 이벤트 생성]\n    G --> H[이벤트 저장]\n    H --> I[이벤트 발행]\n    \n    I --> J[읽기 모델 업데이트]\n    J --> K[응답 반환]\n    \n    I --> L[이벤트 핸들러 실행]\n    L --> M[부수 효과 처리]\n    M --> N[외부 시스템 알림]\n```", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "411", "text": "### 2. 쿼리 처리 흐름\n\n```mermaid\ngraph TD\n    A[쿼리 요청] --> B[쿼리 유효성 검증]\n    B --> C{검증 통과?}\n    C -->|아니오| D[오류 반환]\n    C -->|예| E[쿼리 핸들러 선택]\n    \n    E --> F[읽기 모델 조회]\n    F --> G[데이터 변환]\n    G --> H[결과 반환]\n```\n\n### 3. 이벤트 흐름", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "412", "text": "### 3. 이벤트 흐름\n\n```mermaid\ngraph TD\n    A[도메인 이벤트 발생] --> B[이벤트 버스]\n    B --> C[이벤트 저장소]\n    B --> D[이벤트 핸들러들]\n    \n    D --> E[읽기 모델 업데이터]\n    D --> F[동기화 코디네이터]\n    D --> G[알림 시스템]\n    D --> H[외부 연동]\n    \n    C --> I[이벤트 리플레이]\n    I --> J[상태 재구성]\n```\n\n## 최적화 전략\n\n### 1. 이벤트 스냅샷\n\n```typescript\ninterface EventSnapshot {\n  aggregateId: string\n  aggregateType: string\n  version: number\n  data: Record<string, unknown>\n  timestamp: number\n}", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "413", "text": "### 1. 이벤트 스냅샷\n\n```typescript\ninterface EventSnapshot {\n  aggregateId: string\n  aggregateType: string\n  version: number\n  data: Record<string, unknown>\n  timestamp: number\n}\n\nclass SnapshotManager {\n  async createSnapshot(aggregate: Task): Promise<void> {\n    const snapshot: EventSnapshot = {\n      aggregateId: aggregate.getId(),\n      aggregateType: 'Task',\n      version: aggregate.getVersion(),\n      data: aggregate.getState(),\n      timestamp: Date.now()\n    }\n    \n    await this.saveSnapshot(snapshot)\n  }\n  \n  async getLatestSnapshot(aggregateId: string): Promise<EventSnapshot | null> {\n    return await this.loadSnapshot(aggregateId)\n  }\n  \n  async replayFromSnapshot(\n    aggregateId: string,\n    fromVersion: number\n  ): Promise<DomainEvent[]> {\n    const snapshot = await this.getLatestSnapshot(aggregateId)\n    if (!snapshot || snapshot.version < fromVersion) {\n      return await this.getAllEvents(aggregateId)\n    }\n    \n    return await this.getEventsSince(aggregateId, snapshot.version)\n  }\n}\n```", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "414", "text": "### 2. 이벤트 배치 처리\n\n```typescript\nclass EventBatchProcessor {\n  private batchSize = 100\n  private flushInterval = 1000 // 1초\n  private pendingEvents: DomainEvent[] = []\n  private flushTimer?: NodeJS.Timeout\n  \n  async addEvent(event: DomainEvent): Promise<void> {\n    this.pendingEvents.push(event)\n    \n    if (this.pendingEvents.length >= this.batchSize) {\n      await this.flush()\n    } else if (!this.flushTimer) {\n      this.flushTimer = setTimeout(() => this.flush(), this.flushInterval)\n    }\n  }\n  \n  private async flush(): Promise<void> {\n    if (this.pendingEvents.length === 0) return\n    \n    const events = [...this.pendingEvents]\n    this.pendingEvents = []\n    \n    if (this.flushTimer) {\n      clearTimeout(this.flushTimer)\n      this.flushTimer = undefined\n    }\n    \n    await this.saveEvents(events)\n    await this.publishEvents(events)\n  }\n}\n```\n\n## 결론", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "415", "text": "## 결론\n\n이벤트 기반 아키텍처와 CQRS 패턴의 적용은 ZyFlow 시스템에 다음과 같은 이점을 제공합니다:\n\n1. **확장성**: 읽기와 쓰기 모델의 분리로 독립적인 확장 가능\n2. **유연성**: 이벤트 기반 설계로 새로운 기능 추가 용이\n3. **감사 추적**: 모든 상태 변경이 이벤트로 기록되어 완전한 추적 가능\n4. **성능**: 읽기 모델 최적화로 조회 성능 향상\n5. **복원력**: 이벤트 리플레이를 통한 시스템 상태 복원 가능", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "416", "text": "이 아키텍처는 ZyFlow의 단일 진실 원천 구현에 강력한 기반이 됩니다.", "metadata": {"file_path": "docs/architecture/event-driven-cqrs-design.md", "file_name": "event-driven-cqrs-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "417", "text": "# 장애 격리 및 자동 복구 메커니즘 통합\n\n## 개요\n\nZyFlow의 단일 진실 원천 아키텍처에서 장애 격리 및 자동 복구는 시스템의 안정성과 가용성을 보장하는 핵심 요소입니다. 이 설계는 장애의 전파를 방지하고, 시스템이 자동으로 장애를 감지하고 복구할 수 있는 능력을 제공하는 것을 목표로 합니다.\n\n## 핵심 원칙", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "418", "text": "## 핵심 원칙\n\n### 1. 장애 격리 (Fault Isolation)\n- **격리 경계**: 명확한 격리 경계 설정으로 장애 전파 방지\n- **서킷 브레이커**: 연쇄적 장애 방지를 위한 서킷 브레이커 패턴 적용\n- **벌크헤드 패턴**: 장애 영향을 최소화하는 격리 패턴", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "419", "text": "### 2. 자동 복구 (Automatic Recovery)\n- **자가 치유(Self-healing)**: 시스템이 스스로 장애를 감지하고 복구\n- **그레이스풀 데그레이션**: 장애 시 점진적 기능 축소로 서비스 연속성 보장\n- **롤백 및 포워드 복구**: 안전한 상태로의 복원 및 진행\n\n### 3. 장애 감지 (Fault Detection)\n- **실시간 모니터링**: 지속적인 상태 모니터링을 통한 조기 장애 감지\n- **헬스체크**: 정기적인 시스템 건강 상태 검사\n- **이상 감지**: 통계적 및 머신러닝 기반 이상 행동 감지", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "420", "text": "### 3. 장애 감지 (Fault Detection)\n- **실시간 모니터링**: 지속적인 상태 모니터링을 통한 조기 장애 감지\n- **헬스체크**: 정기적인 시스템 건강 상태 검사\n- **이상 감지**: 통계적 및 머신러닝 기반 이상 행동 감지\n\n## 장애 격리 아키텍처\n\n### 1. 격리 경계 설계", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "421", "text": "## 장애 격리 아키텍처\n\n### 1. 격리 경계 설계\n\n```typescript\ninterface IsolationBoundary {\n  id: string\n  name: string\n  type: IsolationType\n  components: string[]\n  \n  // 격리 규칙\n  isolationRules: IsolationRule[]\n  \n  // 장애 전파 방지\n  failurePropagation: {\n    allowedRoutes: string[]\n    blockedRoutes: string[]\n    circuitBreakerThreshold: number\n  }\n  \n  // 복구 전략\n  recoveryStrategy: RecoveryStrategy\n}\n\ntype IsolationType = \n  | 'PROCESS'      // 프로세스 수준 격리\n  | 'SERVICE'      // 서비스 수준 격리\n  | 'DATABASE'     // 데이터베이스 수준 격리\n  | 'NETWORK'      // 네트워크 수준 격리\n  | 'RESOURCE'     // 리소스 수준 격리", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "422", "text": "type IsolationType = \n  | 'PROCESS'      // 프로세스 수준 격리\n  | 'SERVICE'      // 서비스 수준 격리\n  | 'DATABASE'     // 데이터베이스 수준 격리\n  | 'NETWORK'      // 네트워크 수준 격리\n  | 'RESOURCE'     // 리소스 수준 격리\n\ninterface IsolationRule {\n  condition: string // 격리 조건\n  action: IsolationAction\n  priority: number\n  timeout: number\n}", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "423", "text": "interface IsolationRule {\n  condition: string // 격리 조건\n  action: IsolationAction\n  priority: number\n  timeout: number\n}\n\ntype IsolationAction = \n  | 'ISOLATE_COMPONENT'     // 컴포넌트 격리\n  | 'REDIRECT_TRAFFIC'      // 트래픽 우회\n  | 'SCALE_UP'              // 스케일업\n  | 'SCALE_DOWN'            // 스케일다운\n  | 'RESTART_COMPONENT'     // 컴포넌트 재시작\n  | 'ENABLE_BACKUP'        // 백업 시스템 활성화\n\nclass IsolationManager {\n  private boundaries = new Map<string, IsolationBoundary>()\n  private circuitBreakers = new Map<string, CircuitBreaker>()\n  \n  createBoundary(config: IsolationBoundaryConfig): IsolationBoundary {\n    const boundary: IsolationBoundary = {\n      id: this.generateBoundaryId(),\n      name: config.name,", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "424", "text": "class IsolationManager {\n  private boundaries = new Map<string, IsolationBoundary>()\n  private circuitBreakers = new Map<string, CircuitBreaker>()\n  \n  createBoundary(config: IsolationBoundaryConfig): IsolationBoundary {\n    const boundary: IsolationBoundary = {\n      id: this.generateBoundaryId(),\n      name: config.name,\n      type: config.type,\n      components: config.components,\n      isolationRules: config.isolationRules || [],\n      failurePropagation: {\n        allowedRoutes: config.allowedRoutes || [],\n        blockedRoutes: config.blockedRoutes || [],\n        circuitBreakerThreshold: config.circuitBreakerThreshold || 5\n      },\n      recoveryStrategy: config.recoveryStrategy || this.getDefaultRecoveryStrategy()\n    }\n    \n    // 서킷 브레이커 생성\n    for (const component of boundary.components) {\n      const circuitBreaker = new CircuitBreaker({\n        threshold: boundary.failurePropagation.circuitBreakerThreshold,\n        timeout: 30000,", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "425", "text": "allowedRoutes || [],\n        blockedRoutes: config.blockedRoutes || [],\n        circuitBreakerThreshold: config.circuitBreakerThreshold || 5\n      },\n      recoveryStrategy: config.recoveryStrategy || this.getDefaultRecoveryStrategy()\n    }\n    \n    // 서킷 브레이커 생성\n    for (const component of boundary.components) {\n      const circuitBreaker = new CircuitBreaker({\n        threshold: boundary.failurePropagation.circuitBreakerThreshold,\n        timeout: 30000, // 30초\n        resetTimeout: 60000 // 60초\n      })\n      \n      this.circuitBreakers.set(component, circuitBreaker)\n    }\n    \n    this.boundaries.set(boundary.id, boundary)\n    return boundary\n  }\n  \n  async isolateComponent(componentId: string, reason: string): Promise<void> {\n    const boundary = this.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "426", "text": "components) {\n      const circuitBreaker = new CircuitBreaker({\n        threshold: boundary.failurePropagation.circuitBreakerThreshold,\n        timeout: 30000, // 30초\n        resetTimeout: 60000 // 60초\n      })\n      \n      this.circuitBreakers.set(component, circuitBreaker)\n    }\n    \n    this.boundaries.set(boundary.id, boundary)\n    return boundary\n  }\n  \n  async isolateComponent(componentId: string, reason: string): Promise<void> {\n    const boundary = this.findBoundaryForComponent(componentId)\n    if (!boundary) {\n      throw new Error(`No isolation boundary found for component: ${componentId}`)\n    }\n    \n    // 서킷 브레이커 트리거\n    const circuitBreaker = this.circuitBreakers.get(componentId)\n    if (circuitBreaker) {\n      circuitBreaker.trip(reason)\n    }\n    \n    // 격리 규칙 실행\n    await this.executeIsolationRules(boundary, componentId,", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "427", "text": "findBoundaryForComponent(componentId)\n    if (!boundary) {\n      throw new Error(`No isolation boundary found for component: ${componentId}`)\n    }\n    \n    // 서킷 브레이커 트리거\n    const circuitBreaker = this.circuitBreakers.get(componentId)\n    if (circuitBreaker) {\n      circuitBreaker.trip(reason)\n    }\n    \n    // 격리 규칙 실행\n    await this.executeIsolationRules(boundary, componentId, reason)\n    \n    // 이벤트 발행\n    await this.publishIsolationEvent({\n      type: 'COMPONENT_ISOLATED',\n      componentId,\n      boundaryId: boundary.id,\n      reason,\n      timestamp: Date.now()\n    })\n  }\n  \n  async executeIsolationRules(\n    boundary: IsolationBoundary, \n    componentId: string, \n    reason: string\n  ): Promise<void> {\n    const applicableRules = boundary.isolationRules\n      .filter(rule => this.evaluateCondition(rule.condition, componentId, reason))\n      .", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "428", "text": "reason)\n    \n    // 이벤트 발행\n    await this.publishIsolationEvent({\n      type: 'COMPONENT_ISOLATED',\n      componentId,\n      boundaryId: boundary.id,\n      reason,\n      timestamp: Date.now()\n    })\n  }\n  \n  async executeIsolationRules(\n    boundary: IsolationBoundary, \n    componentId: string, \n    reason: string\n  ): Promise<void> {\n    const applicableRules = boundary.isolationRules\n      .filter(rule => this.evaluateCondition(rule.condition, componentId, reason))\n      .sort((a, b) => b.priority - a.priority)\n    \n    for (const rule of applicableRules) {\n      try {\n        await this.executeIsolationAction(rule.action, componentId, boundary)\n        \n        // 타임아웃 적용\n        if (rule.timeout > 0) {\n          setTimeout(async () => {\n            await this.releaseIsolation(componentId, rule.id)\n          }, rule.timeout)\n        }\n      } catch (error) {\n        console.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "429", "text": "filter(rule => this.evaluateCondition(rule.condition, componentId, reason))\n      .sort((a, b) => b.priority - a.priority)\n    \n    for (const rule of applicableRules) {\n      try {\n        await this.executeIsolationAction(rule.action, componentId, boundary)\n        \n        // 타임아웃 적용\n        if (rule.timeout > 0) {\n          setTimeout(async () => {\n            await this.releaseIsolation(componentId, rule.id)\n          }, rule.timeout)\n        }\n      } catch (error) {\n        console.error(`Failed to execute isolation rule ${rule.id}:`, error)\n      }\n    }\n  }\n  \n  private async executeIsolationAction(\n    action: IsolationAction, \n    componentId: string, \n    boundary: IsolationBoundary\n  ): Promise<void> {\n    switch (action) {\n      case 'ISOLATE_COMPONENT':\n        await this.isolateComponentInternally(componentId)\n        break\n        \n      case 'REDIRECT_TRAFFIC':\n        await this.redirectTraffic(componentId,", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "430", "text": "rule.id)\n          }, rule.timeout)\n        }\n      } catch (error) {\n        console.error(`Failed to execute isolation rule ${rule.id}:`, error)\n      }\n    }\n  }\n  \n  private async executeIsolationAction(\n    action: IsolationAction, \n    componentId: string, \n    boundary: IsolationBoundary\n  ): Promise<void> {\n    switch (action) {\n      case 'ISOLATE_COMPONENT':\n        await this.isolateComponentInternally(componentId)\n        break\n        \n      case 'REDIRECT_TRAFFIC':\n        await this.redirectTraffic(componentId, boundary)\n        break\n        \n      case 'SCALE_UP':\n        await this.scaleComponent(componentId, 'up')\n        break\n        \n      case 'SCALE_DOWN':\n        await this.scaleComponent(componentId, 'down')\n        break\n        \n      case 'RESTART_COMPONENT':\n        await this.restartComponent(componentId)\n        break\n        \n      case 'ENABLE_BACKUP':\n        await this.enableBackupSystem(boundary)\n        break\n    }\n  }\n}\n```\n\n### 2. 서킷 브레이커 패턴", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "431", "text": "redirectTraffic(componentId, boundary)\n        break\n        \n      case 'SCALE_UP':\n        await this.scaleComponent(componentId, 'up')\n        break\n        \n      case 'SCALE_DOWN':\n        await this.scaleComponent(componentId, 'down')\n        break\n        \n      case 'RESTART_COMPONENT':\n        await this.restartComponent(componentId)\n        break\n        \n      case 'ENABLE_BACKUP':\n        await this.enableBackupSystem(boundary)\n        break\n    }\n  }\n}\n```\n\n### 2. 서킷 브레이커 패턴\n\n```typescript\ninterface CircuitBreakerConfig {\n  threshold: number      // 실패 임계값\n  timeout: number        // 타임아웃 (ms)\n  resetTimeout: number    // 리셋 타임아웃 (ms)\n  monitoringPeriod: number // 모니터링 기간 (ms)\n}", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "432", "text": "enableBackupSystem(boundary)\n        break\n    }\n  }\n}\n```\n\n### 2. 서킷 브레이커 패턴\n\n```typescript\ninterface CircuitBreakerConfig {\n  threshold: number      // 실패 임계값\n  timeout: number        // 타임아웃 (ms)\n  resetTimeout: number    // 리셋 타임아웃 (ms)\n  monitoringPeriod: number // 모니터링 기간 (ms)\n}\n\nenum CircuitBreakerState {\n  CLOSED = 'CLOSED',     // 정상 상태\n  OPEN = 'OPEN',         // 차단 상태\n  HALF_OPEN = 'HALF_OPEN'  // 반개방 상태\n}\n\nclass CircuitBreaker {\n  private state: CircuitBreakerState = CircuitBreakerState.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "433", "text": "enum CircuitBreakerState {\n  CLOSED = 'CLOSED',     // 정상 상태\n  OPEN = 'OPEN',         // 차단 상태\n  HALF_OPEN = 'HALF_OPEN'  // 반개방 상태\n}\n\nclass CircuitBreaker {\n  private state: CircuitBreakerState = CircuitBreakerState.CLOSED\n  private failureCount = 0\n  private lastFailureTime = 0\n  private successCount = 0\n  \n  constructor(private config: CircuitBreakerConfig) {}\n  \n  async execute<T>(operation: () => Promise<T>): Promise<T> {\n    if (this.state === CircuitBreakerState.OPEN) {\n      if (this.shouldAttemptReset()) {\n        this.state = CircuitBreakerState.HALF_OPEN\n      } else {\n        throw new Error('Circuit breaker is OPEN')\n      }\n    }\n    \n    try {\n      const result = await operation()\n      this.onSuccess()\n      return result\n    } catch (error) {\n      this.onFailure()\n      throw error\n    }\n  }\n  \n  private onSuccess(): void {\n    this.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "434", "text": "state === CircuitBreakerState.OPEN) {\n      if (this.shouldAttemptReset()) {\n        this.state = CircuitBreakerState.HALF_OPEN\n      } else {\n        throw new Error('Circuit breaker is OPEN')\n      }\n    }\n    \n    try {\n      const result = await operation()\n      this.onSuccess()\n      return result\n    } catch (error) {\n      this.onFailure()\n      throw error\n    }\n  }\n  \n  private onSuccess(): void {\n    this.failureCount = 0\n    \n    if (this.state === CircuitBreakerState.HALF_OPEN) {\n      this.successCount++\n      if (this.successCount >= this.config.threshold) {\n        this.reset()\n      }\n    }\n  }\n  \n  private onFailure(): void {\n    this.failureCount++\n    this.lastFailureTime = Date.now()\n    \n    if (this.state === CircuitBreakerState.CLOSED) {\n      if (this.failureCount >= this.config.threshold) {\n        this.trip('Failure threshold exceeded')\n      }\n    } else if (this.state === CircuitBreakerState.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "435", "text": "state === CircuitBreakerState.HALF_OPEN) {\n      this.successCount++\n      if (this.successCount >= this.config.threshold) {\n        this.reset()\n      }\n    }\n  }\n  \n  private onFailure(): void {\n    this.failureCount++\n    this.lastFailureTime = Date.now()\n    \n    if (this.state === CircuitBreakerState.CLOSED) {\n      if (this.failureCount >= this.config.threshold) {\n        this.trip('Failure threshold exceeded')\n      }\n    } else if (this.state === CircuitBreakerState.HALF_OPEN) {\n      this.trip('Failure in HALF_OPEN state')\n    }\n  }\n  \n  trip(reason: string): void {\n    this.state = CircuitBreakerState.OPEN\n    this.lastFailureTime = Date.now()\n    \n    console.warn(`Circuit breaker tripped: ${reason}`)\n    \n    // 이벤트 발행\n    this.publishCircuitBreakerEvent({\n      type: 'CIRCUIT_BREAKER_TRIPPED',\n      reason,\n      timestamp: Date.now(),", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "436", "text": "state === CircuitBreakerState.HALF_OPEN) {\n      this.trip('Failure in HALF_OPEN state')\n    }\n  }\n  \n  trip(reason: string): void {\n    this.state = CircuitBreakerState.OPEN\n    this.lastFailureTime = Date.now()\n    \n    console.warn(`Circuit breaker tripped: ${reason}`)\n    \n    // 이벤트 발행\n    this.publishCircuitBreakerEvent({\n      type: 'CIRCUIT_BREAKER_TRIPPED',\n      reason,\n      timestamp: Date.now(),\n      failureCount: this.failureCount\n    })\n  }\n  \n  reset(): void {\n    this.state = CircuitBreakerState.CLOSED\n    this.failureCount = 0\n    this.successCount = 0\n    \n    console.info('Circuit breaker reset')\n  }\n  \n  private shouldAttemptReset(): boolean {\n    return Date.now() - this.lastFailureTime >= this.config.resetTimeout\n  }\n  \n  getState(): CircuitBreakerState {\n    return this.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "437", "text": "reason,\n      timestamp: Date.now(),\n      failureCount: this.failureCount\n    })\n  }\n  \n  reset(): void {\n    this.state = CircuitBreakerState.CLOSED\n    this.failureCount = 0\n    this.successCount = 0\n    \n    console.info('Circuit breaker reset')\n  }\n  \n  private shouldAttemptReset(): boolean {\n    return Date.now() - this.lastFailureTime >= this.config.resetTimeout\n  }\n  \n  getState(): CircuitBreakerState {\n    return this.state\n  }\n  \n  getMetrics(): CircuitBreakerMetrics {\n    return {\n      state: this.state,\n      failureCount: this.failureCount,\n      successCount: this.successCount,\n      lastFailureTime: this.lastFailureTime\n    }\n  }\n}\n\ninterface CircuitBreakerMetrics {\n  state: CircuitBreakerState\n  failureCount: number\n  successCount: number\n  lastFailureTime: number\n}\n```\n\n## 자동 복구 시스템\n\n### 1. 복구 전략 관리자", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "438", "text": "state\n  }\n  \n  getMetrics(): CircuitBreakerMetrics {\n    return {\n      state: this.state,\n      failureCount: this.failureCount,\n      successCount: this.successCount,\n      lastFailureTime: this.lastFailureTime\n    }\n  }\n}\n\ninterface CircuitBreakerMetrics {\n  state: CircuitBreakerState\n  failureCount: number\n  successCount: number\n  lastFailureTime: number\n}\n```\n\n## 자동 복구 시스템\n\n### 1. 복구 전략 관리자\n\n```typescript\ninterface RecoveryStrategy {\n  id: string\n  name: string\n  type: RecoveryType\n  \n  // 복구 단계\n  steps: RecoveryStep[]\n  \n  // 복구 조건\n  conditions: RecoveryCondition[]\n  \n  // 롤백 전략\n  rollbackStrategy: RollbackStrategy\n  \n  // 복구 메트릭\n  metrics: RecoveryMetrics\n}", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "439", "text": "## 자동 복구 시스템\n\n### 1. 복구 전략 관리자\n\n```typescript\ninterface RecoveryStrategy {\n  id: string\n  name: string\n  type: RecoveryType\n  \n  // 복구 단계\n  steps: RecoveryStep[]\n  \n  // 복구 조건\n  conditions: RecoveryCondition[]\n  \n  // 롤백 전략\n  rollbackStrategy: RollbackStrategy\n  \n  // 복구 메트릭\n  metrics: RecoveryMetrics\n}\n\ntype RecoveryType = \n  | 'AUTOMATIC'    // 자동 복구\n  | 'SEMIAUTOMATIC' // 반자동 복구\n  | 'MANUAL'       // 수동 복구", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "440", "text": "type RecoveryType = \n  | 'AUTOMATIC'    // 자동 복구\n  | 'SEMIAUTOMATIC' // 반자동 복구\n  | 'MANUAL'       // 수동 복구\n\ninterface RecoveryStep {\n  id: string\n  name: string\n  type: StepType\n  order: number\n  \n  // 단계 실행\n  execute: (context: RecoveryContext) => Promise<StepResult>\n  \n  // 성공 조건\n  successCriteria: SuccessCriteria\n  \n  // 타임아웃\n  timeout: number\n  \n  // 재시도 정책\n  retryPolicy: RetryPolicy\n}\n\ntype StepType = \n  | 'DIAGNOSTIC'     // 진단\n  | 'ISOLATION'      // 격리\n  | 'REPAIR'         // 수리\n  | 'RESTART'        // 재시작\n  | 'RESTORE'        // 복원\n  | 'VERIFY'         // 검증", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "441", "text": "type StepType = \n  | 'DIAGNOSTIC'     // 진단\n  | 'ISOLATION'      // 격리\n  | 'REPAIR'         // 수리\n  | 'RESTART'        // 재시작\n  | 'RESTORE'        // 복원\n  | 'VERIFY'         // 검증\n\ninterface RecoveryContext {\n  incidentId: string\n  componentId: string\n  failureType: string\n  severity: FailureSeverity\n  startTime: number\n  \n  // 컨텍스트 데이터\n  data: Record<string, unknown>\n  \n  // 복구 이력\n  history: RecoveryStepResult[]\n}\n\nclass RecoveryManager {\n  private strategies = new Map<string, RecoveryStrategy>()\n  private activeRecoveries = new Map<string, RecoveryExecution>()\n  private recoveryQueue: RecoveryRequest[] = []\n  \n  registerStrategy(strategy: RecoveryStrategy): void {\n    this.strategies.set(strategy.id, strategy)\n  }\n  \n  async initiateRecovery(request: RecoveryRequest): Promise<string> {\n    const recoveryId = this.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "442", "text": "class RecoveryManager {\n  private strategies = new Map<string, RecoveryStrategy>()\n  private activeRecoveries = new Map<string, RecoveryExecution>()\n  private recoveryQueue: RecoveryRequest[] = []\n  \n  registerStrategy(strategy: RecoveryStrategy): void {\n    this.strategies.set(strategy.id, strategy)\n  }\n  \n  async initiateRecovery(request: RecoveryRequest): Promise<string> {\n    const recoveryId = this.generateRecoveryId()\n    \n    // 적절한 복구 전략 선택\n    const strategy = this.selectRecoveryStrategy(request)\n    \n    const context: RecoveryContext = {\n      incidentId: request.incidentId,\n      componentId: request.componentId,\n      failureType: request.failureType,\n      severity: request.severity,\n      startTime: Date.now(),\n      data: request.data || {},\n      history: []\n    }\n    \n    const execution: RecoveryExecution = {\n      id: recoveryId,\n      strategy,\n      context,\n      currentStep: 0,\n      status: RecoveryStatus.PENDING,\n      startTime: Date.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "443", "text": "selectRecoveryStrategy(request)\n    \n    const context: RecoveryContext = {\n      incidentId: request.incidentId,\n      componentId: request.componentId,\n      failureType: request.failureType,\n      severity: request.severity,\n      startTime: Date.now(),\n      data: request.data || {},\n      history: []\n    }\n    \n    const execution: RecoveryExecution = {\n      id: recoveryId,\n      strategy,\n      context,\n      currentStep: 0,\n      status: RecoveryStatus.PENDING,\n      startTime: Date.now()\n    }\n    \n    this.activeRecoveries.set(recoveryId, execution)\n    \n    // 복구 실행 시작\n    this.executeRecovery(recoveryId).catch(error => {\n      console.error(`Recovery execution failed: ${recoveryId}`, error)\n    })\n    \n    return recoveryId\n  }\n  \n  private async executeRecovery(recoveryId: string): Promise<void> {\n    const execution = this.activeRecoveries.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "444", "text": "context,\n      currentStep: 0,\n      status: RecoveryStatus.PENDING,\n      startTime: Date.now()\n    }\n    \n    this.activeRecoveries.set(recoveryId, execution)\n    \n    // 복구 실행 시작\n    this.executeRecovery(recoveryId).catch(error => {\n      console.error(`Recovery execution failed: ${recoveryId}`, error)\n    })\n    \n    return recoveryId\n  }\n  \n  private async executeRecovery(recoveryId: string): Promise<void> {\n    const execution = this.activeRecoveries.get(recoveryId)\n    if (!execution) {\n      throw new Error(`Recovery execution not found: ${recoveryId}`)\n    }\n    \n    execution.status = RecoveryStatus.RUNNING\n    \n    try {\n      const steps = execution.strategy.steps\n      \n      for (let i = 0; i < steps.length; i++) {\n        execution.currentStep = i\n        const step = steps[i]\n        \n        const stepResult = await this.executeStep(step, execution.context)\n        execution.context.history.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "445", "text": "activeRecoveries.get(recoveryId)\n    if (!execution) {\n      throw new Error(`Recovery execution not found: ${recoveryId}`)\n    }\n    \n    execution.status = RecoveryStatus.RUNNING\n    \n    try {\n      const steps = execution.strategy.steps\n      \n      for (let i = 0; i < steps.length; i++) {\n        execution.currentStep = i\n        const step = steps[i]\n        \n        const stepResult = await this.executeStep(step, execution.context)\n        execution.context.history.push(stepResult)\n        \n        // 성공 여부 확인\n        if (!this.meetsSuccessCriteria(stepResult, step.successCriteria)) {\n          if (step.retryPolicy.maxRetries > 0) {\n            // 재시도\n            await this.retryStep(step, execution.context, step.retryPolicy)\n          } else {\n            // 복구 실패\n            execution.status = RecoveryStatus.FAILED\n            await this.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "446", "text": "executeStep(step, execution.context)\n        execution.context.history.push(stepResult)\n        \n        // 성공 여부 확인\n        if (!this.meetsSuccessCriteria(stepResult, step.successCriteria)) {\n          if (step.retryPolicy.maxRetries > 0) {\n            // 재시도\n            await this.retryStep(step, execution.context, step.retryPolicy)\n          } else {\n            // 복구 실패\n            execution.status = RecoveryStatus.FAILED\n            await this.handleRecoveryFailure(execution)\n            return\n          }\n        }\n      }\n      \n      // 모든 단계 성공\n      execution.status = RecoveryStatus.COMPLETED\n      await this.handleRecoverySuccess(execution)\n      \n    } catch (error) {\n      execution.status = RecoveryStatus.FAILED\n      await this.handleRecoveryFailure(execution, error as Error)\n    } finally {\n      this.activeRecoveries.delete(recoveryId)\n    }\n  }\n  \n  private async executeStep(\n    step: RecoveryStep,", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "447", "text": "FAILED\n            await this.handleRecoveryFailure(execution)\n            return\n          }\n        }\n      }\n      \n      // 모든 단계 성공\n      execution.status = RecoveryStatus.COMPLETED\n      await this.handleRecoverySuccess(execution)\n      \n    } catch (error) {\n      execution.status = RecoveryStatus.FAILED\n      await this.handleRecoveryFailure(execution, error as Error)\n    } finally {\n      this.activeRecoveries.delete(recoveryId)\n    }\n  }\n  \n  private async executeStep(\n    step: RecoveryStep, \n    context: RecoveryContext\n  ): Promise<RecoveryStepResult> {\n    const startTime = Date.now()\n    \n    try {\n      // 타임아웃 적용\n      const result = await Promise.race([\n        step.execute(context),\n        this.createTimeoutPromise(step.timeout)\n      ])\n      \n      return {\n        stepId: step.id,\n        success: true,\n        result: result,\n        duration: Date.now() - startTime,\n        timestamp: Date.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "448", "text": "context: RecoveryContext\n  ): Promise<RecoveryStepResult> {\n    const startTime = Date.now()\n    \n    try {\n      // 타임아웃 적용\n      const result = await Promise.race([\n        step.execute(context),\n        this.createTimeoutPromise(step.timeout)\n      ])\n      \n      return {\n        stepId: step.id,\n        success: true,\n        result: result,\n        duration: Date.now() - startTime,\n        timestamp: Date.now()\n      }\n    } catch (error) {\n      return {\n        stepId: step.id,\n        success: false,\n        error: error as Error,\n        duration: Date.now() - startTime,\n        timestamp: Date.now()\n      }\n    }\n  }\n  \n  private async retryStep(\n    step: RecoveryStep, \n    context: RecoveryContext, \n    retryPolicy: RetryPolicy\n  ): Promise<RecoveryStepResult> {\n    let lastError: Error | null = null\n    \n    for (let attempt = 1; attempt <= retryPolicy.maxRetries;", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "449", "text": "now()\n      }\n    } catch (error) {\n      return {\n        stepId: step.id,\n        success: false,\n        error: error as Error,\n        duration: Date.now() - startTime,\n        timestamp: Date.now()\n      }\n    }\n  }\n  \n  private async retryStep(\n    step: RecoveryStep, \n    context: RecoveryContext, \n    retryPolicy: RetryPolicy\n  ): Promise<RecoveryStepResult> {\n    let lastError: Error | null = null\n    \n    for (let attempt = 1; attempt <= retryPolicy.maxRetries; attempt++) {\n      if (attempt > 1) {\n        // 대기 시간 적용\n        const delay = retryPolicy.delay * Math.pow(retryPolicy.backoffMultiplier, attempt - 1)\n        await this.sleep(delay)\n      }\n      \n      try {\n        const result = await this.executeStep(step, context)\n        if (result.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "450", "text": "retryPolicy: RetryPolicy\n  ): Promise<RecoveryStepResult> {\n    let lastError: Error | null = null\n    \n    for (let attempt = 1; attempt <= retryPolicy.maxRetries; attempt++) {\n      if (attempt > 1) {\n        // 대기 시간 적용\n        const delay = retryPolicy.delay * Math.pow(retryPolicy.backoffMultiplier, attempt - 1)\n        await this.sleep(delay)\n      }\n      \n      try {\n        const result = await this.executeStep(step, context)\n        if (result.success) {\n          return result\n        }\n      } catch (error) {\n        lastError = error as Error\n      }\n    }\n    \n    return {\n      stepId: step.id,\n      success: false,\n      error: lastError || new Error('Max retries exceeded'),\n      timestamp: Date.now()\n    }\n  }\n  \n  private selectRecoveryStrategy(request: RecoveryRequest): RecoveryStrategy {\n    // 실패 유형별 전략 매칭\n    for (const strategy of this.strategies.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "451", "text": "executeStep(step, context)\n        if (result.success) {\n          return result\n        }\n      } catch (error) {\n        lastError = error as Error\n      }\n    }\n    \n    return {\n      stepId: step.id,\n      success: false,\n      error: lastError || new Error('Max retries exceeded'),\n      timestamp: Date.now()\n    }\n  }\n  \n  private selectRecoveryStrategy(request: RecoveryRequest): RecoveryStrategy {\n    // 실패 유형별 전략 매칭\n    for (const strategy of this.strategies.values()) {\n      if (this.matchesStrategy(strategy, request)) {\n        return strategy\n      }\n    }\n    \n    // 기본 전략 반환\n    return this.getDefaultStrategy()\n  }\n  \n  private matchesStrategy(strategy: RecoveryStrategy, request: RecoveryRequest): boolean {\n    return strategy.conditions.some(condition =>\n      this.evaluateCondition(condition, request)\n    )\n  }\n}", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "452", "text": "strategies.values()) {\n      if (this.matchesStrategy(strategy, request)) {\n        return strategy\n      }\n    }\n    \n    // 기본 전략 반환\n    return this.getDefaultStrategy()\n  }\n  \n  private matchesStrategy(strategy: RecoveryStrategy, request: RecoveryRequest): boolean {\n    return strategy.conditions.some(condition =>\n      this.evaluateCondition(condition, request)\n    )\n  }\n}\n\ninterface RecoveryExecution {\n  id: string\n  strategy: RecoveryStrategy\n  context: RecoveryContext\n  currentStep: number\n  status: RecoveryStatus\n  startTime: number\n  endTime?: number\n}\n\nenum RecoveryStatus {\n  PENDING = 'PENDING',\n  RUNNING = 'RUNNING',\n  COMPLETED = 'COMPLETED',\n  FAILED = 'FAILED',\n  CANCELLED = 'CANCELLED'\n}\n\ninterface RecoveryStepResult {\n  stepId: string\n  success: boolean\n  result?: unknown\n  error?: Error\n  duration: number\n  timestamp: number\n}\n```\n\n### 2. 헬스체크 시스템", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "453", "text": "enum RecoveryStatus {\n  PENDING = 'PENDING',\n  RUNNING = 'RUNNING',\n  COMPLETED = 'COMPLETED',\n  FAILED = 'FAILED',\n  CANCELLED = 'CANCELLED'\n}\n\ninterface RecoveryStepResult {\n  stepId: string\n  success: boolean\n  result?: unknown\n  error?: Error\n  duration: number\n  timestamp: number\n}\n```\n\n### 2. 헬스체크 시스템\n\n```typescript\ninterface HealthCheck {\n  id: string\n  name: string\n  component: string\n  \n  // 검사 항목\n  checks: HealthCheckItem[]\n  \n  // 실행 스케줄\n  schedule: HealthCheckSchedule\n  \n  // 임계값\n  thresholds: HealthThresholds\n}\n\ninterface HealthCheckItem {\n  id: string\n  name: string\n  type: CheckType\n  \n  // 검사 실행\n  execute: () => Promise<HealthCheckResult>\n  \n  // 타임아웃\n  timeout: number\n  \n  // 의존성\n  dependencies: string[]\n}", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "454", "text": "interface HealthCheckItem {\n  id: string\n  name: string\n  type: CheckType\n  \n  // 검사 실행\n  execute: () => Promise<HealthCheckResult>\n  \n  // 타임아웃\n  timeout: number\n  \n  // 의존성\n  dependencies: string[]\n}\n\ntype CheckType = \n  | 'HTTP_ENDPOINT'    // HTTP 엔드포인트 검사\n  | 'DATABASE_QUERY'   // 데이터베이스 쿼리 검사\n  | 'FILE_SYSTEM'     // 파일 시스템 검사\n  | 'MEMORY_USAGE'    // 메모리 사용량 검사\n  | 'CPU_USAGE'       // CPU 사용량 검사\n  | 'CUSTOM'          // 사용자 정의 검사\n\ninterface HealthCheckResult {\n  status: HealthStatus\n  message: string\n  metrics?: Record<string, number>\n  timestamp: number\n  duration: number\n}", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "455", "text": "interface HealthCheckResult {\n  status: HealthStatus\n  message: string\n  metrics?: Record<string, number>\n  timestamp: number\n  duration: number\n}\n\nenum HealthStatus {\n  HEALTHY = 'HEALTHY',\n  DEGRADED = 'DEGRADED',\n  UNHEALTHY = 'UNHEALTHY',\n  UNKNOWN = 'UNKNOWN'\n}\n\nclass HealthCheckManager {\n  private healthChecks = new Map<string, HealthCheck>()\n  private checkResults = new Map<string, HealthCheckResult[]>()\n  private schedulers = new Map<string, NodeJS.Timeout>()\n  \n  registerHealthCheck(check: HealthCheck): void {\n    this.healthChecks.set(check.id, check)\n    \n    // 스케줄러 설정\n    this.scheduleHealthCheck(check)\n  }\n  \n  private scheduleHealthCheck(check: HealthCheck): void {\n    const scheduler = setInterval(async () => {\n      await this.executeHealthCheck(check.id)\n    }, check.schedule.interval)\n    \n    this.schedulers.set(check.id, scheduler)\n    \n    // 초기 실행\n    this.executeHealthCheck(check.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "456", "text": "NodeJS.Timeout>()\n  \n  registerHealthCheck(check: HealthCheck): void {\n    this.healthChecks.set(check.id, check)\n    \n    // 스케줄러 설정\n    this.scheduleHealthCheck(check)\n  }\n  \n  private scheduleHealthCheck(check: HealthCheck): void {\n    const scheduler = setInterval(async () => {\n      await this.executeHealthCheck(check.id)\n    }, check.schedule.interval)\n    \n    this.schedulers.set(check.id, scheduler)\n    \n    // 초기 실행\n    this.executeHealthCheck(check.id).catch(error => {\n      console.error(`Initial health check failed: ${check.id}`, error)\n    })\n  }\n  \n  async executeHealthCheck(checkId: string): Promise<HealthCheckResult[]> {\n    const check = this.healthChecks.get(checkId)\n    if (!check) {\n      throw new Error(`Health check not found: ${checkId}`)\n    }\n    \n    const results: HealthCheckResult[] = []\n    \n    for (const item of check.checks) {\n      try {\n        // 의존성 검사\n        if (item.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "457", "text": "executeHealthCheck(check.id).catch(error => {\n      console.error(`Initial health check failed: ${check.id}`, error)\n    })\n  }\n  \n  async executeHealthCheck(checkId: string): Promise<HealthCheckResult[]> {\n    const check = this.healthChecks.get(checkId)\n    if (!check) {\n      throw new Error(`Health check not found: ${checkId}`)\n    }\n    \n    const results: HealthCheckResult[] = []\n    \n    for (const item of check.checks) {\n      try {\n        // 의존성 검사\n        if (item.dependencies.length > 0) {\n          await this.checkDependencies(item.dependencies)\n        }\n        \n        // 타임아웃 적용\n        const result = await Promise.race([\n          item.execute(),\n          this.createTimeoutPromise(item.timeout)\n        ])\n        \n        results.push(result)\n        \n        // 임계값 검사\n        this.evaluateThresholds(result, check.thresholds)\n        \n      } catch (error) {\n        results.push({\n          status: HealthStatus.UNKNOWN,", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "458", "text": "dependencies.length > 0) {\n          await this.checkDependencies(item.dependencies)\n        }\n        \n        // 타임아웃 적용\n        const result = await Promise.race([\n          item.execute(),\n          this.createTimeoutPromise(item.timeout)\n        ])\n        \n        results.push(result)\n        \n        // 임계값 검사\n        this.evaluateThresholds(result, check.thresholds)\n        \n      } catch (error) {\n        results.push({\n          status: HealthStatus.UNKNOWN,\n          message: `Health check failed: ${(error as Error).message}`,\n          timestamp: Date.now(),\n          duration: 0\n        })\n      }\n    }\n    \n    // 결과 저장\n    if (!this.checkResults.has(checkId)) {\n      this.checkResults.set(checkId, [])\n    }\n    \n    const checkHistory = this.checkResults.get(checkId)!\n    checkHistory.push(...results)\n    \n    // 히스토리 크기 제한\n    if (checkHistory.length > 100) {\n      checkHistory.splice(0,", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "459", "text": "message}`,\n          timestamp: Date.now(),\n          duration: 0\n        })\n      }\n    }\n    \n    // 결과 저장\n    if (!this.checkResults.has(checkId)) {\n      this.checkResults.set(checkId, [])\n    }\n    \n    const checkHistory = this.checkResults.get(checkId)!\n    checkHistory.push(...results)\n    \n    // 히스토리 크기 제한\n    if (checkHistory.length > 100) {\n      checkHistory.splice(0, checkHistory.length - 100)\n    }\n    \n    // 전체 상태 계산\n    const overallStatus = this.calculateOverallStatus(results)\n    \n    // 이벤트 발행\n    await this.publishHealthCheckEvent({\n      checkId,\n      component: check.component,\n      status: overallStatus,\n      results,\n      timestamp: Date.now()\n    })\n    \n    return results\n  }\n  \n  private evaluateThresholds(\n    result: HealthCheckResult, \n    thresholds: HealthThresholds\n  ): void {\n    if (!result.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "460", "text": "splice(0, checkHistory.length - 100)\n    }\n    \n    // 전체 상태 계산\n    const overallStatus = this.calculateOverallStatus(results)\n    \n    // 이벤트 발행\n    await this.publishHealthCheckEvent({\n      checkId,\n      component: check.component,\n      status: overallStatus,\n      results,\n      timestamp: Date.now()\n    })\n    \n    return results\n  }\n  \n  private evaluateThresholds(\n    result: HealthCheckResult, \n    thresholds: HealthThresholds\n  ): void {\n    if (!result.metrics || !thresholds) return\n    \n    for (const [metric, value] of Object.entries(result.metrics)) {\n      const threshold = thresholds[metric]\n      if (!threshold) continue\n      \n      if (value > threshold.critical) {\n        result.status = HealthStatus.UNHEALTHY\n        result.message = `Critical threshold exceeded for ${metric}: ${value} > ${threshold.critical}`\n      } else if (value > threshold.warning) {\n        if (result.status === HealthStatus.HEALTHY) {\n          result.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "461", "text": "metrics || !thresholds) return\n    \n    for (const [metric, value] of Object.entries(result.metrics)) {\n      const threshold = thresholds[metric]\n      if (!threshold) continue\n      \n      if (value > threshold.critical) {\n        result.status = HealthStatus.UNHEALTHY\n        result.message = `Critical threshold exceeded for ${metric}: ${value} > ${threshold.critical}`\n      } else if (value > threshold.warning) {\n        if (result.status === HealthStatus.HEALTHY) {\n          result.status = HealthStatus.DEGRADED\n          result.message = `Warning threshold exceeded for ${metric}: ${value} > ${threshold.warning}`\n        }\n      }\n    }\n  }\n  \n  private calculateOverallStatus(results: HealthCheckResult[]): HealthStatus {\n    if (results.length === 0) return HealthStatus.UNKNOWN\n    \n    const statusCounts = {\n      [HealthStatus.HEALTHY]: 0,\n      [HealthStatus.DEGRADED]: 0,\n      [HealthStatus.UNHEALTHY]: 0,\n      [HealthStatus.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "462", "text": "status = HealthStatus.DEGRADED\n          result.message = `Warning threshold exceeded for ${metric}: ${value} > ${threshold.warning}`\n        }\n      }\n    }\n  }\n  \n  private calculateOverallStatus(results: HealthCheckResult[]): HealthStatus {\n    if (results.length === 0) return HealthStatus.UNKNOWN\n    \n    const statusCounts = {\n      [HealthStatus.HEALTHY]: 0,\n      [HealthStatus.DEGRADED]: 0,\n      [HealthStatus.UNHEALTHY]: 0,\n      [HealthStatus.UNKNOWN]: 0\n    }\n    \n    for (const result of results) {\n      statusCounts[result.status]++\n    }\n    \n    // 가장 심각한 상태 반환\n    if (statusCounts[HealthStatus.UNHEALTHY] > 0) {\n      return HealthStatus.UNHEALTHY\n    } else if (statusCounts[HealthStatus.DEGRADED] > 0) {\n      return HealthStatus.DEGRADED\n    } else if (statusCounts[HealthStatus.HEALTHY] === results.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "463", "text": "[HealthStatus.UNKNOWN]: 0\n    }\n    \n    for (const result of results) {\n      statusCounts[result.status]++\n    }\n    \n    // 가장 심각한 상태 반환\n    if (statusCounts[HealthStatus.UNHEALTHY] > 0) {\n      return HealthStatus.UNHEALTHY\n    } else if (statusCounts[HealthStatus.DEGRADED] > 0) {\n      return HealthStatus.DEGRADED\n    } else if (statusCounts[HealthStatus.HEALTHY] === results.length) {\n      return HealthStatus.HEALTHY\n    } else {\n      return HealthStatus.UNKNOWN\n    }\n  }\n}\n\ninterface HealthThresholds {\n  [metric: string]: {\n    warning: number\n    critical: number\n  }\n}\n\ninterface HealthCheckSchedule {\n  interval: number      // 검사 간격 (ms)\n  retryInterval?: number // 실패 시 재시도 간격 (ms)\n  maxRetries?: number   // 최대 재시도 횟수\n}\n```", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "464", "text": "HEALTHY] === results.length) {\n      return HealthStatus.HEALTHY\n    } else {\n      return HealthStatus.UNKNOWN\n    }\n  }\n}\n\ninterface HealthThresholds {\n  [metric: string]: {\n    warning: number\n    critical: number\n  }\n}\n\ninterface HealthCheckSchedule {\n  interval: number      // 검사 간격 (ms)\n  retryInterval?: number // 실패 시 재시도 간격 (ms)\n  maxRetries?: number   // 최대 재시도 횟수\n}\n```\n\n## 장애 감지 및 분석\n\n### 1. 이상 감지 시스템\n\n```typescript\ninterface AnomalyDetector {\n  // 이상 감지\n  detectAnomaly(metrics: MetricsData): Promise<AnomalyResult[]>\n  \n  // 모델 학습\n  trainModel(historicalData: MetricsData[]): Promise<void>\n  \n  // 임계값 동적 조정\n  adjustThresholds(anomalies: AnomalyResult[]): Promise<void>\n}", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "465", "text": "## 장애 감지 및 분석\n\n### 1. 이상 감지 시스템\n\n```typescript\ninterface AnomalyDetector {\n  // 이상 감지\n  detectAnomaly(metrics: MetricsData): Promise<AnomalyResult[]>\n  \n  // 모델 학습\n  trainModel(historicalData: MetricsData[]): Promise<void>\n  \n  // 임계값 동적 조정\n  adjustThresholds(anomalies: AnomalyResult[]): Promise<void>\n}\n\nclass StatisticalAnomalyDetector implements AnomalyDetector {\n  private baseline: BaselineMetrics\n  private thresholds: AnomalyThresholds\n  \n  async detectAnomaly(metrics: MetricsData): Promise<AnomalyResult[]> {\n    const anomalies: AnomalyResult[] = []\n    \n    // 1. Z-score 기반 이상 감지\n    const zScoreAnomalies = this.detectZScoreAnomalies(metrics)\n    anomalies.push(...zScoreAnomalies)\n    \n    // 2.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "466", "text": "class StatisticalAnomalyDetector implements AnomalyDetector {\n  private baseline: BaselineMetrics\n  private thresholds: AnomalyThresholds\n  \n  async detectAnomaly(metrics: MetricsData): Promise<AnomalyResult[]> {\n    const anomalies: AnomalyResult[] = []\n    \n    // 1. Z-score 기반 이상 감지\n    const zScoreAnomalies = this.detectZScoreAnomalies(metrics)\n    anomalies.push(...zScoreAnomalies)\n    \n    // 2. 이동 평균 기반 이상 감지\n    const movingAvgAnomalies = this.detectMovingAverageAnomalies(metrics)\n    anomalies.push(...movingAvgAnomalies)\n    \n    // 3. 급격 변화 감지\n    const suddenChangeAnomalies = this.detectSuddenChangeAnomalies(metrics)\n    anomalies.push(...suddenChangeAnomalies)\n    \n    // 4. 패턴 이상 감지\n    const patternAnomalies = this.detectPatternAnomalies(metrics)\n    anomalies.push(...", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "467", "text": "이동 평균 기반 이상 감지\n    const movingAvgAnomalies = this.detectMovingAverageAnomalies(metrics)\n    anomalies.push(...movingAvgAnomalies)\n    \n    // 3. 급격 변화 감지\n    const suddenChangeAnomalies = this.detectSuddenChangeAnomalies(metrics)\n    anomalies.push(...suddenChangeAnomalies)\n    \n    // 4. 패턴 이상 감지\n    const patternAnomalies = this.detectPatternAnomalies(metrics)\n    anomalies.push(...patternAnomalies)\n    \n    return anomalies\n  }\n  \n  private detectZScoreAnomalies(metrics: MetricsData): AnomalyResult[] {\n    const anomalies: AnomalyResult[] = []\n    \n    for (const [metric, value] of Object.entries(metrics.values)) {\n      const baseline = this.baseline[metric]\n      if (!baseline) continue\n      \n      const mean = baseline.mean\n      const stdDev = baseline.standardDeviation\n      \n      if (stdDev === 0) continue\n      \n      const zScore = Math.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "468", "text": "detectPatternAnomalies(metrics)\n    anomalies.push(...patternAnomalies)\n    \n    return anomalies\n  }\n  \n  private detectZScoreAnomalies(metrics: MetricsData): AnomalyResult[] {\n    const anomalies: AnomalyResult[] = []\n    \n    for (const [metric, value] of Object.entries(metrics.values)) {\n      const baseline = this.baseline[metric]\n      if (!baseline) continue\n      \n      const mean = baseline.mean\n      const stdDev = baseline.standardDeviation\n      \n      if (stdDev === 0) continue\n      \n      const zScore = Math.abs((value - mean) / stdDev)\n      \n      if (zScore > this.thresholds.zScore) {\n        anomalies.push({\n          type: 'STATISTICAL_OUTLIER',\n          metric,\n          value,\n          baseline: { mean, stdDev },\n          severity: this.calculateSeverity(zScore),\n          confidence: this.calculateConfidence(zScore),\n          timestamp: metrics.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "469", "text": "mean\n      const stdDev = baseline.standardDeviation\n      \n      if (stdDev === 0) continue\n      \n      const zScore = Math.abs((value - mean) / stdDev)\n      \n      if (zScore > this.thresholds.zScore) {\n        anomalies.push({\n          type: 'STATISTICAL_OUTLIER',\n          metric,\n          value,\n          baseline: { mean, stdDev },\n          severity: this.calculateSeverity(zScore),\n          confidence: this.calculateConfidence(zScore),\n          timestamp: metrics.timestamp\n        })\n      }\n    }\n    \n    return anomalies\n  }\n  \n  private detectMovingAverageAnomalies(metrics: MetricsData): AnomalyResult[] {\n    const anomalies: AnomalyResult[] = []\n    const windowSize = this.thresholds.movingAverageWindow\n    \n    for (const [metric, value] of Object.entries(metrics.values)) {\n      const history = this.getMetricHistory(metric, windowSize)\n      \n      if (history.length < windowSize) continue\n      \n      const movingAverage = history.reduce((sum, val) => sum + val,", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "470", "text": "timestamp: metrics.timestamp\n        })\n      }\n    }\n    \n    return anomalies\n  }\n  \n  private detectMovingAverageAnomalies(metrics: MetricsData): AnomalyResult[] {\n    const anomalies: AnomalyResult[] = []\n    const windowSize = this.thresholds.movingAverageWindow\n    \n    for (const [metric, value] of Object.entries(metrics.values)) {\n      const history = this.getMetricHistory(metric, windowSize)\n      \n      if (history.length < windowSize) continue\n      \n      const movingAverage = history.reduce((sum, val) => sum + val, 0) / history.length\n      const deviation = Math.abs(value - movingAverage)\n      const threshold = movingAverage * this.thresholds.movingAverageThreshold\n      \n      if (deviation > threshold) {\n        anomalies.push({\n          type: 'MOVING_AVERAGE_DEVIATION',\n          metric,\n          value,\n          movingAverage,\n          deviation,\n          severity: this.calculateSeverity(deviation / movingAverage),\n          timestamp: metrics.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "471", "text": "length < windowSize) continue\n      \n      const movingAverage = history.reduce((sum, val) => sum + val, 0) / history.length\n      const deviation = Math.abs(value - movingAverage)\n      const threshold = movingAverage * this.thresholds.movingAverageThreshold\n      \n      if (deviation > threshold) {\n        anomalies.push({\n          type: 'MOVING_AVERAGE_DEVIATION',\n          metric,\n          value,\n          movingAverage,\n          deviation,\n          severity: this.calculateSeverity(deviation / movingAverage),\n          timestamp: metrics.timestamp\n        })\n      }\n    }\n    \n    return anomalies\n  }\n  \n  private detectSuddenChangeAnomalies(metrics: MetricsData): AnomalyResult[] {\n    const anomalies: AnomalyResult[] = []\n    \n    for (const [metric, value] of Object.entries(metrics.values)) {\n      const recentValues = this.getMetricHistory(metric, 2)\n      \n      if (recentValues.length < 2) continue\n      \n      const previousValue = recentValues[recentValues.length - 2]\n      const changeRate = Math.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "472", "text": "timestamp: metrics.timestamp\n        })\n      }\n    }\n    \n    return anomalies\n  }\n  \n  private detectSuddenChangeAnomalies(metrics: MetricsData): AnomalyResult[] {\n    const anomalies: AnomalyResult[] = []\n    \n    for (const [metric, value] of Object.entries(metrics.values)) {\n      const recentValues = this.getMetricHistory(metric, 2)\n      \n      if (recentValues.length < 2) continue\n      \n      const previousValue = recentValues[recentValues.length - 2]\n      const changeRate = Math.abs((value - previousValue) / previousValue)\n      \n      if (changeRate > this.thresholds.suddenChangeThreshold) {\n        anomalies.push({\n          type: 'SUDDEN_CHANGE',\n          metric,\n          value,\n          previousValue,\n          changeRate,\n          severity: this.calculateSeverity(changeRate),\n          timestamp: metrics.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "473", "text": "getMetricHistory(metric, 2)\n      \n      if (recentValues.length < 2) continue\n      \n      const previousValue = recentValues[recentValues.length - 2]\n      const changeRate = Math.abs((value - previousValue) / previousValue)\n      \n      if (changeRate > this.thresholds.suddenChangeThreshold) {\n        anomalies.push({\n          type: 'SUDDEN_CHANGE',\n          metric,\n          value,\n          previousValue,\n          changeRate,\n          severity: this.calculateSeverity(changeRate),\n          timestamp: metrics.timestamp\n        })\n      }\n    }\n    \n    return anomalies\n  }\n  \n  async trainModel(historicalData: MetricsData[]): Promise<void> {\n    // 기준선 메트릭 계산\n    this.baseline = this.calculateBaseline(historicalData)\n    \n    // 동적 임계값 조정\n    this.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "474", "text": "push({\n          type: 'SUDDEN_CHANGE',\n          metric,\n          value,\n          previousValue,\n          changeRate,\n          severity: this.calculateSeverity(changeRate),\n          timestamp: metrics.timestamp\n        })\n      }\n    }\n    \n    return anomalies\n  }\n  \n  async trainModel(historicalData: MetricsData[]): Promise<void> {\n    // 기준선 메트릭 계산\n    this.baseline = this.calculateBaseline(historicalData)\n    \n    // 동적 임계값 조정\n    this.adjustDynamicThresholds(historicalData)\n  }\n  \n  private calculateBaseline(data: MetricsData[]): BaselineMetrics {\n    const baseline: BaselineMetrics = {}\n    \n    // 각 메트릭에 대한 통계 계산\n    const metricValues: Record<string, number[]> = {}\n    \n    for (const dataPoint of data) {\n      for (const [metric, value] of Object.entries(dataPoint.values)) {\n        if (!metricValues[metric]) {\n          metricValues[metric] = []\n        }\n        metricValues[metric].", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "475", "text": "adjustDynamicThresholds(historicalData)\n  }\n  \n  private calculateBaseline(data: MetricsData[]): BaselineMetrics {\n    const baseline: BaselineMetrics = {}\n    \n    // 각 메트릭에 대한 통계 계산\n    const metricValues: Record<string, number[]> = {}\n    \n    for (const dataPoint of data) {\n      for (const [metric, value] of Object.entries(dataPoint.values)) {\n        if (!metricValues[metric]) {\n          metricValues[metric] = []\n        }\n        metricValues[metric].push(value)\n      }\n    }\n    \n    for (const [metric, values] of Object.entries(metricValues)) {\n      const mean = values.reduce((sum, val) => sum + val, 0) / values.length\n      const variance = values.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / values.length\n      const standardDeviation = Math.sqrt(variance)\n      \n      baseline[metric] = { mean, standardDeviation }\n    }\n    \n    return baseline\n  }\n}", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "476", "text": "push(value)\n      }\n    }\n    \n    for (const [metric, values] of Object.entries(metricValues)) {\n      const mean = values.reduce((sum, val) => sum + val, 0) / values.length\n      const variance = values.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / values.length\n      const standardDeviation = Math.sqrt(variance)\n      \n      baseline[metric] = { mean, standardDeviation }\n    }\n    \n    return baseline\n  }\n}\n\ninterface AnomalyResult {\n  type: AnomalyType\n  metric: string\n  value: number\n  severity: AnomalySeverity\n  confidence: number\n  timestamp: number\n  \n  // 추가 정보\n  baseline?: { mean: number; standardDeviation: number }\n  movingAverage?: number\n  deviation?: number\n  previousValue?: number\n  changeRate?: number\n}", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "477", "text": "0) / values.length\n      const standardDeviation = Math.sqrt(variance)\n      \n      baseline[metric] = { mean, standardDeviation }\n    }\n    \n    return baseline\n  }\n}\n\ninterface AnomalyResult {\n  type: AnomalyType\n  metric: string\n  value: number\n  severity: AnomalySeverity\n  confidence: number\n  timestamp: number\n  \n  // 추가 정보\n  baseline?: { mean: number; standardDeviation: number }\n  movingAverage?: number\n  deviation?: number\n  previousValue?: number\n  changeRate?: number\n}\n\ntype AnomalyType = \n  | 'STATISTICAL_OUTLIER'\n  | 'MOVING_AVERAGE_DEVIATION'\n  | 'SUDDEN_CHANGE'\n  | 'PATTERN_ANOMALY'\n\nenum AnomalySeverity {\n  LOW = 'LOW',\n  MEDIUM = 'MEDIUM',\n  HIGH = 'HIGH',\n  CRITICAL = 'CRITICAL'\n}\n```\n\n### 2. 장애 상관 분석", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "478", "text": "type AnomalyType = \n  | 'STATISTICAL_OUTLIER'\n  | 'MOVING_AVERAGE_DEVIATION'\n  | 'SUDDEN_CHANGE'\n  | 'PATTERN_ANOMALY'\n\nenum AnomalySeverity {\n  LOW = 'LOW',\n  MEDIUM = 'MEDIUM',\n  HIGH = 'HIGH',\n  CRITICAL = 'CRITICAL'\n}\n```\n\n### 2. 장애 상관 분석\n\n```typescript\ninterface FailureCorrelationAnalyzer {\n  // 장애 상관 분석\n  analyzeCorrelations(incidents: Incident[]): Promise<CorrelationResult[]>\n  \n  // 근본 원인 분석\n  findRootCause(incident: Incident): Promise<RootCauseAnalysis>\n  \n  // 장애 패턴 식별\n  identifyPatterns(incidents: Incident[]): Promise<FailurePattern[]>\n}", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "479", "text": "### 2. 장애 상관 분석\n\n```typescript\ninterface FailureCorrelationAnalyzer {\n  // 장애 상관 분석\n  analyzeCorrelations(incidents: Incident[]): Promise<CorrelationResult[]>\n  \n  // 근본 원인 분석\n  findRootCause(incident: Incident): Promise<RootCauseAnalysis>\n  \n  // 장애 패턴 식별\n  identifyPatterns(incidents: Incident[]): Promise<FailurePattern[]>\n}\n\nclass FailureCorrelationAnalyzer implements FailureCorrelationAnalyzer {\n  async analyzeCorrelations(incidents: Incident[]): Promise<CorrelationResult[]> {\n    const correlations: CorrelationResult[] = []\n    \n    // 1. 시간적 상관 분석\n    const temporalCorrelations = this.analyzeTemporalCorrelations(incidents)\n    correlations.push(...temporalCorrelations)\n    \n    // 2.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "480", "text": "class FailureCorrelationAnalyzer implements FailureCorrelationAnalyzer {\n  async analyzeCorrelations(incidents: Incident[]): Promise<CorrelationResult[]> {\n    const correlations: CorrelationResult[] = []\n    \n    // 1. 시간적 상관 분석\n    const temporalCorrelations = this.analyzeTemporalCorrelations(incidents)\n    correlations.push(...temporalCorrelations)\n    \n    // 2. 컴포넌트 상관 분석\n    const componentCorrelations = this.analyzeComponentCorrelations(incidents)\n    correlations.push(...componentCorrelations)\n    \n    // 3. 인과관계 상관 분석\n    const causalCorrelations = this.analyzeCausalCorrelations(incidents)\n    correlations.push(...causalCorrelations)\n    \n    return correlations\n  }\n  \n  private analyzeTemporalCorrelations(incidents: Incident[]): CorrelationResult[] {\n    const correlations: CorrelationResult[] = []\n    \n    // 시간 윈도우 내 장애 그룹화\n    const timeWindows = this.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "481", "text": "인과관계 상관 분석\n    const causalCorrelations = this.analyzeCausalCorrelations(incidents)\n    correlations.push(...causalCorrelations)\n    \n    return correlations\n  }\n  \n  private analyzeTemporalCorrelations(incidents: Incident[]): CorrelationResult[] {\n    const correlations: CorrelationResult[] = []\n    \n    // 시간 윈도우 내 장애 그룹화\n    const timeWindows = this.groupByTimeWindow(incidents, 300000) // 5분 윈도우\n    \n    for (const window of timeWindows) {\n      if (window.incidents.length < 2) continue\n      \n      // 상관 계수 계산\n      const correlation = this.calculateTemporalCorrelation(window.incidents)\n      \n      if (correlation.strength > 0.7) { // 높은 상관 계수\n        correlations.push({\n          type: 'TEMPORAL',\n          incidents: window.incidents,\n          strength: correlation.strength,\n          confidence: correlation.confidence,", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "482", "text": "300000) // 5분 윈도우\n    \n    for (const window of timeWindows) {\n      if (window.incidents.length < 2) continue\n      \n      // 상관 계수 계산\n      const correlation = this.calculateTemporalCorrelation(window.incidents)\n      \n      if (correlation.strength > 0.7) { // 높은 상관 계수\n        correlations.push({\n          type: 'TEMPORAL',\n          incidents: window.incidents,\n          strength: correlation.strength,\n          confidence: correlation.confidence,\n          timeWindow: window.timeRange,\n          description: `Strong temporal correlation detected in ${window.timeRange.duration}ms window`\n        })\n      }\n    }\n    \n    return correlations\n  }\n  \n  private analyzeComponentCorrelations(incidents: Incident[]): CorrelationResult[] {\n    const correlations: CorrelationResult[] = []\n    \n    // 컴포넌트별 장애 빈도 계산\n    const componentFailures = this.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "483", "text": "incidents,\n          strength: correlation.strength,\n          confidence: correlation.confidence,\n          timeWindow: window.timeRange,\n          description: `Strong temporal correlation detected in ${window.timeRange.duration}ms window`\n        })\n      }\n    }\n    \n    return correlations\n  }\n  \n  private analyzeComponentCorrelations(incidents: Incident[]): CorrelationResult[] {\n    const correlations: CorrelationResult[] = []\n    \n    // 컴포넌트별 장애 빈도 계산\n    const componentFailures = this.groupByComponent(incidents)\n    \n    for (const [component, componentIncidents] of componentFailures.entries()) {\n      if (componentIncidents.length < 2) continue\n      \n      // 동시 발생 패턴 분석\n      const simultaneousFailures = this.findSimultaneousFailures(componentIncidents)\n      \n      if (simultaneousFailures.length > 0) {\n        correlations.push({\n          type: 'COMPONENT',\n          component,\n          incidents: simultaneousFailures,\n          strength: this.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "484", "text": "groupByComponent(incidents)\n    \n    for (const [component, componentIncidents] of componentFailures.entries()) {\n      if (componentIncidents.length < 2) continue\n      \n      // 동시 발생 패턴 분석\n      const simultaneousFailures = this.findSimultaneousFailures(componentIncidents)\n      \n      if (simultaneousFailures.length > 0) {\n        correlations.push({\n          type: 'COMPONENT',\n          component,\n          incidents: simultaneousFailures,\n          strength: this.calculateComponentCorrelationStrength(simultaneousFailures),\n          description: `Component ${component} shows correlated failure patterns`\n        })\n      }\n    }\n    \n    return correlations\n  }\n  \n  async findRootCause(incident: Incident): Promise<RootCauseAnalysis> {\n    const analysis: RootCauseAnalysis = {\n      incidentId: incident.id,\n      possibleCauses: [],\n      mostLikelyCause: null,\n      confidence: 0,\n      evidence: []\n    }\n    \n    // 1.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "485", "text": "component,\n          incidents: simultaneousFailures,\n          strength: this.calculateComponentCorrelationStrength(simultaneousFailures),\n          description: `Component ${component} shows correlated failure patterns`\n        })\n      }\n    }\n    \n    return correlations\n  }\n  \n  async findRootCause(incident: Incident): Promise<RootCauseAnalysis> {\n    const analysis: RootCauseAnalysis = {\n      incidentId: incident.id,\n      possibleCauses: [],\n      mostLikelyCause: null,\n      confidence: 0,\n      evidence: []\n    }\n    \n    // 1. 이벤트 트리 분석\n    const eventTree = this.buildEventTree(incident)\n    const rootEvents = this.findRootEvents(eventTree)\n    \n    // 2. 타임라인 분석\n    const timeline = this.buildTimeline(incident)\n    const criticalPath = this.findCriticalPath(timeline)\n    \n    // 3.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "486", "text": "id,\n      possibleCauses: [],\n      mostLikelyCause: null,\n      confidence: 0,\n      evidence: []\n    }\n    \n    // 1. 이벤트 트리 분석\n    const eventTree = this.buildEventTree(incident)\n    const rootEvents = this.findRootEvents(eventTree)\n    \n    // 2. 타임라인 분석\n    const timeline = this.buildTimeline(incident)\n    const criticalPath = this.findCriticalPath(timeline)\n    \n    // 3. 컴포넌트 의존성 분석\n    const dependencyGraph = this.buildDependencyGraph(incident)\n    const affectedComponents = this.findAffectedComponents(dependencyGraph)\n    \n    // 4.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "487", "text": "타임라인 분석\n    const timeline = this.buildTimeline(incident)\n    const criticalPath = this.findCriticalPath(timeline)\n    \n    // 3. 컴포넌트 의존성 분석\n    const dependencyGraph = this.buildDependencyGraph(incident)\n    const affectedComponents = this.findAffectedComponents(dependencyGraph)\n    \n    // 4. 가능한 원인 추론\n    const possibleCauses = this.inferPossibleCauses(rootEvents, criticalPath, affectedComponents)\n    \n    analysis.possibleCauses = possibleCauses\n    analysis.mostLikelyCause = this.selectMostLikelyCause(possibleCauses)\n    analysis.confidence = this.calculateConfidence(analysis.mostLikelyCause, evidence)\n    analysis.evidence = this.collectEvidence(incident, rootEvents, criticalPath)\n    \n    return analysis\n  }\n}\n\ninterface CorrelationResult {\n  type: CorrelationType\n  incidents: Incident[]\n  strength: number\n  confidence: number\n  timeWindow?: TimeRange\n  component?: string\n  description: string\n}", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "488", "text": "interface CorrelationResult {\n  type: CorrelationType\n  incidents: Incident[]\n  strength: number\n  confidence: number\n  timeWindow?: TimeRange\n  component?: string\n  description: string\n}\n\ntype CorrelationType = \n  | 'TEMPORAL'\n  | 'COMPONENT'\n  | 'CAUSAL'\n  | 'ENVIRONMENTAL'\n\ninterface RootCauseAnalysis {\n  incidentId: string\n  possibleCauses: PossibleCause[]\n  mostLikelyCause: PossibleCause | null\n  confidence: number\n  evidence: Evidence[]\n}\n\ninterface PossibleCause {\n  id: string\n  description: string\n  likelihood: number\n  category: CauseCategory\n  supportingEvidence: string[]\n}\n```\n\n## 결론\n\nZyFlow의 장애 격리 및 자동 복구 메커니즘은 다음과 같은 핵심 특징을 제공합니다:", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "489", "text": "1. **다단계 격리**: 프로세스, 서비스, 데이터베이스, 네트워크 수준의 격리\n2. **서킷 브레이커**: 연쇄적 장애 방지 및 자동 복구\n3. **지능형 복구**: 상황에 따른 동적 복구 전략 선택\n4. **실시간 헬스체크**: 지속적인 시스템 상태 모니터링\n5. **이상 감지**: 통계적 및 머신러닝 기반 조기 장애 감지\n6. **상관 분석**: 장애 패턴 식별 및 근본 원인 분석", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "490", "text": "이 메커니즘들을 통해 ZyFlow는 장애 발생 시에도 안정적인 서비스를 제공하고, 최소한의 개입으로 자동으로 복구할 수 있는 능력을 갖추게 됩니다.", "metadata": {"file_path": "docs/architecture/fault-isolation-recovery.md", "file_name": "fault-isolation-recovery.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "491", "text": "# ZyFlow 단일 진실 원천 아키텍처 통합 테스트 전략\n\n## 개요\n\n이 문서는 ZyFlow 단일 진실 원천 아키텍처의 통합 테스트를 위한 포괄적인 전략을 제시합니다. 복잡한 분산 시스템의 안정성과 신뢰성을 보장하기 위해, 단위 테스트부터 통합 테스트, 부하 테스트, 그리고 실제 운영 환경 테스트까지 다단계 테스트 접근법을 적용합니다.\n\n## 테스트 전략 원칙\n\n### 1. 테스트 피라미드 (Test Pyramid)", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "492", "text": "## 테스트 전략 원칙\n\n### 1. 테스트 피라미드 (Test Pyramid)\n\n```\n    /\\\n   /  \\     E2E 테스트 (5%)\n  /____\\    \n /      \\   통합 테스트 (25%)\n/__________\\ 단위 테스트 (70%)\n```\n\n- **단위 테스트 (70%)**: 개별 컴포넌트의 기능적 정확성 검증\n- **통합 테스트 (25%)**: 컴포넌트 간 상호작용 및 데이터 흐름 검증\n- **E2E 테스트 (5%)**: 전체 시스템의 사용자 시나리오 검증\n\n### 2. 테스트 분류", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "493", "text": "- **단위 테스트 (70%)**: 개별 컴포넌트의 기능적 정확성 검증\n- **통합 테스트 (25%)**: 컴포넌트 간 상호작용 및 데이터 흐름 검증\n- **E2E 테스트 (5%)**: 전체 시스템의 사용자 시나리오 검증\n\n### 2. 테스트 분류\n\n#### 기능적 테스트\n- **정상 경로 테스트**: 예상된 사용자 시나리오 검증\n- **예외 경로 테스트**: 오류 상황 및 예외 처리 검증\n- **경계값 테스트**: 시스템 한계 조건 검증", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "494", "text": "### 2. 테스트 분류\n\n#### 기능적 테스트\n- **정상 경로 테스트**: 예상된 사용자 시나리오 검증\n- **예외 경로 테스트**: 오류 상황 및 예외 처리 검증\n- **경계값 테스트**: 시스템 한계 조건 검증\n\n#### 비기능적 테스트\n- **성능 테스트**: 응답 시간, 처리량, 자원 사용량 검증\n- **안정성 테스트**: 장기간 운영 시 시스템 안정성 검증\n- **보안 테스트**: 데이터 보호 및 접근 제어 검증", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "495", "text": "#### 비기능적 테스트\n- **성능 테스트**: 응답 시간, 처리량, 자원 사용량 검증\n- **안정성 테스트**: 장기간 운영 시 시스템 안정성 검증\n- **보안 테스트**: 데이터 보호 및 접근 제어 검증\n\n#### 아키텍처 테스트\n- **동기화 테스트**: 다중 진실 원천 간 데이터 일관성 검증\n- **장애 복구 테스트**: 장애 상황에서의 자동 복구 능력 검증\n- **확장성 테스트**: 부하 증가에 따른 시스템 확장 능력 검증\n\n## 테스트 환경 구성\n\n### 1. 테스트 환경 계층", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "496", "text": "## 테스트 환경 구성\n\n### 1. 테스트 환경 계층\n\n```mermaid\ngraph TB\n    subgraph \"로컬 개발 환경\"\n        LOCAL[Local Testing]\n        UNIT[Unit Tests]\n        INTEGRATION[Integration Tests]\n    end\n    \n    subgraph \"CI/CD 환경\"\n        CI[Continuous Integration]\n        AUTO[Automated Testing]\n        BUILD[Build Verification]\n    end\n    \n    subgraph \"스테이징 환경\"\n        STAGING[Staging Environment]\n        LOAD[Load Testing]\n        SECURITY[Security Testing]\n    end\n    \n    subgraph \"프로덕션 환경\"\n        PROD[Production Environment]\n        SMOKE[Smoke Tests]\n        MONITOR[Monitoring Tests]\n    end\n    \n    LOCAL --> CI\n    CI --> STAGING\n    STAGING --> PROD\n```\n\n### 2. 테스트 데이터 관리", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "497", "text": "### 2. 테스트 데이터 관리\n\n```typescript\n// 테스트 데이터 관리자\nexport class TestDataManager {\n  private readonly testDataStores = new Map<string, TestDataStore>();\n  \n  constructor(\n    private readonly database: TestDatabase,\n    private readonly fileSystem: TestFileSystem\n  ) {}\n  \n  async setupTestEnvironment(testSuite: string): Promise<TestEnvironment> {\n    // 1. 테스트 데이터베이스 초기화\n    const db = await this.createTestDatabase(testSuite);\n    \n    // 2. 테스트 파일 시스템 준비\n    const fs = await this.createTestFileSystem(testSuite);\n    \n    // 3.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "498", "text": "테스트 데이터베이스 초기화\n    const db = await this.createTestDatabase(testSuite);\n    \n    // 2. 테스트 파일 시스템 준비\n    const fs = await this.createTestFileSystem(testSuite);\n    \n    // 3. 기본 테스트 데이터 생성\n    await this.seedTestData(db, fs);\n    \n    return new TestEnvironment(db, fs);\n  }\n  \n  async cleanupTestEnvironment(testSuite: string): Promise<void> {\n    // 테스트 환경 정리\n    await this.database.cleanup(testSuite);\n    await this.fileSystem.cleanup(testSuite);\n  }\n  \n  private async seedTestData(\n    database: TestDatabase,\n    fileSystem: TestFileSystem\n  ): Promise<void> {\n    // 기본 태스크 데이터 생성\n    const tasks = this.generateTestTasks(100);\n    await database.insertTasks(tasks);\n    \n    // 기본 tasks.md 파일 생성\n    const tasksMd = this.generateTasksMdContent(tasks);\n    await fileSystem.writeFile('tasks.md', tasksMd);\n  }\n}\n```\n\n## 단위 테스트 전략", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "499", "text": "## 단위 테스트 전략\n\n### 1. 컴포넌트별 테스트\n\n#### 상태 관리자 테스트\n```typescript\ndescribe('StateManager', () => {\n  let stateManager: StateManager;\n  let mockEventBus: jest.Mocked<EventBus>;\n  let mockCache: jest.Mocked<CacheProvider>;\n  \n  beforeEach(() => {\n    mockEventBus = createMockEventBus();\n    mockCache = createMockCache();\n    stateManager = new StateManager(mockEventBus, mockCache);\n  });\n  \n  describe('상태 업데이트', () => {\n    it('유효한 상태 업데이트 시 이벤트 발행', async () => {\n      // Arrange\n      const taskId = 'task-1';\n      const currentState = createTestTask({ id: taskId, status: 'pending' });\n      const newState = { ...currentState, status: 'in_progress' };\n      \n      // Act\n      await stateManager.updateState(taskId, currentState, newState);", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "500", "text": "mockCache);\n  });\n  \n  describe('상태 업데이트', () => {\n    it('유효한 상태 업데이트 시 이벤트 발행', async () => {\n      // Arrange\n      const taskId = 'task-1';\n      const currentState = createTestTask({ id: taskId, status: 'pending' });\n      const newState = { ...currentState, status: 'in_progress' };\n      \n      // Act\n      await stateManager.updateState(taskId, currentState, newState);\n      \n      // Assert\n      expect(mockEventBus.publish).toHaveBeenCalledWith(\n        expect.objectContaining({\n          type: 'state.updated',\n          aggregateId: taskId,\n          data: { previousState: currentState, newState }\n        })\n      );\n    });\n    \n    it('충돌 감지 시 ConcurrencyConflictError 발생', async () => {\n      // Arrange\n      const taskId = 'task-1';\n      const expectedVersion = 2;\n      const actualVersion = 3;\n      \n      jest.spyOn(stateManager, 'getCurrentVersion')\n         .", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "501", "text": "currentState, newState);\n      \n      // Assert\n      expect(mockEventBus.publish).toHaveBeenCalledWith(\n        expect.objectContaining({\n          type: 'state.updated',\n          aggregateId: taskId,\n          data: { previousState: currentState, newState }\n        })\n      );\n    });\n    \n    it('충돌 감지 시 ConcurrencyConflictError 발생', async () => {\n      // Arrange\n      const taskId = 'task-1';\n      const expectedVersion = 2;\n      const actualVersion = 3;\n      \n      jest.spyOn(stateManager, 'getCurrentVersion')\n         .mockResolvedValue(actualVersion);\n      \n      // Act & Assert\n      await expect(\n        stateManager.updateStateWithVersion(taskId, {}, {}, expectedVersion)\n      ).rejects.toThrow(ConcurrencyConflictError);\n    });\n  });\n});\n```\n\n#### 동기화 코디네이터 테스트\n```typescript\ndescribe('SyncCoordinator', () => {\n  let syncCoordinator: SyncCoordinator;\n  let mockConflictDetector: jest.Mocked<ConflictDetector>;\n  let mockConflictResolver: jest.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "502", "text": "spyOn(stateManager, 'getCurrentVersion')\n         .mockResolvedValue(actualVersion);\n      \n      // Act & Assert\n      await expect(\n        stateManager.updateStateWithVersion(taskId, {}, {}, expectedVersion)\n      ).rejects.toThrow(ConcurrencyConflictError);\n    });\n  });\n});\n```\n\n#### 동기화 코디네이터 테스트\n```typescript\ndescribe('SyncCoordinator', () => {\n  let syncCoordinator: SyncCoordinator;\n  let mockConflictDetector: jest.Mocked<ConflictDetector>;\n  let mockConflictResolver: jest.Mocked<ConflictResolver>;\n  let mockStateManager: jest.Mocked<StateManager>;\n  \n  beforeEach(() => {\n    mockConflictDetector = createMockConflictDetector();\n    mockConflictResolver = createMockConflictResolver();\n    mockStateManager = createMockStateManager();\n    \n    syncCoordinator = new SyncCoordinator(\n      mockConflictDetector,\n      mockConflictResolver,\n      mockStateManager\n    );\n  });\n  \n  describe('충돌 해결', () => {\n    it('자동 해결 가능한 충돌 처리',", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "503", "text": "let mockConflictResolver: jest.Mocked<ConflictResolver>;\n  let mockStateManager: jest.Mocked<StateManager>;\n  \n  beforeEach(() => {\n    mockConflictDetector = createMockConflictDetector();\n    mockConflictResolver = createMockConflictResolver();\n    mockStateManager = createMockStateManager();\n    \n    syncCoordinator = new SyncCoordinator(\n      mockConflictDetector,\n      mockConflictResolver,\n      mockStateManager\n    );\n  });\n  \n  describe('충돌 해결', () => {\n    it('자동 해결 가능한 충돌 처리', async () => {\n      // Arrange\n      const localState = createTestTask({ title: 'Local Title' });\n      const remoteState = createTestTask({ title: 'Remote Title' });\n      const baseState = createTestTask({ title: 'Base Title' });\n      \n      const conflict = new FieldConflict('title', 'Local Title', 'Remote Title', 'Base Title');\n      const resolution = new AutoResolution('title', 'Merged Title');\n      \n      mockConflictDetector.detectConflicts.mockResolvedValue([conflict]);\n      mockConflictResolver.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "504", "text": "async () => {\n      // Arrange\n      const localState = createTestTask({ title: 'Local Title' });\n      const remoteState = createTestTask({ title: 'Remote Title' });\n      const baseState = createTestTask({ title: 'Base Title' });\n      \n      const conflict = new FieldConflict('title', 'Local Title', 'Remote Title', 'Base Title');\n      const resolution = new AutoResolution('title', 'Merged Title');\n      \n      mockConflictDetector.detectConflicts.mockResolvedValue([conflict]);\n      mockConflictResolver.resolve.mockResolvedValue([resolution]);\n      \n      // Act\n      const result = await syncCoordinator.resolveConflicts(localState, remoteState, baseState);\n      \n      // Assert\n      expect(result.resolved).toBe(true);\n      expect(result.resolvedState.title).toBe('Merged Title');\n      expect(mockConflictResolver.resolve).toHaveBeenCalledWith([conflict]);\n    });\n    \n    it('수동 개입 필요한 충돌 처리', async () => {\n      // Arrange\n      const conflict = new ComplexConflict('structure', {}, {}, {});", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "505", "text": "mockConflictResolver.resolve.mockResolvedValue([resolution]);\n      \n      // Act\n      const result = await syncCoordinator.resolveConflicts(localState, remoteState, baseState);\n      \n      // Assert\n      expect(result.resolved).toBe(true);\n      expect(result.resolvedState.title).toBe('Merged Title');\n      expect(mockConflictResolver.resolve).toHaveBeenCalledWith([conflict]);\n    });\n    \n    it('수동 개입 필요한 충돌 처리', async () => {\n      // Arrange\n      const conflict = new ComplexConflict('structure', {}, {}, {});\n      const resolution = new ManualResolutionRequired(conflict);\n      \n      mockConflictDetector.detectConflicts.mockResolvedValue([conflict]);\n      mockConflictResolver.resolve.mockResolvedValue([resolution]);\n      \n      // Act\n      const result = await syncCoordinator.resolveConflicts({}, {}, {});\n      \n      // Assert\n      expect(result.resolved).toBe(false);\n      expect(result.requiresManualIntervention).toBe(true);\n    });\n  });\n});\n```\n\n### 2. 테스트 유틸리티", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "506", "text": "{}, {}, {});\n      const resolution = new ManualResolutionRequired(conflict);\n      \n      mockConflictDetector.detectConflicts.mockResolvedValue([conflict]);\n      mockConflictResolver.resolve.mockResolvedValue([resolution]);\n      \n      // Act\n      const result = await syncCoordinator.resolveConflicts({}, {}, {});\n      \n      // Assert\n      expect(result.resolved).toBe(false);\n      expect(result.requiresManualIntervention).toBe(true);\n    });\n  });\n});\n```\n\n### 2. 테스트 유틸리티\n\n```typescript\n// 테스트 데이터 생성기\nexport class TestDataGenerator {\n  static createTask(overrides?", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "507", "text": "resolveConflicts({}, {}, {});\n      \n      // Assert\n      expect(result.resolved).toBe(false);\n      expect(result.requiresManualIntervention).toBe(true);\n    });\n  });\n});\n```\n\n### 2. 테스트 유틸리티\n\n```typescript\n// 테스트 데이터 생성기\nexport class TestDataGenerator {\n  static createTask(overrides?: Partial<Task>): Task {\n    return {\n      id: faker.datatype.uuid(),\n      title: faker.lorem.sentence(),\n      description: faker.lorem.paragraph(),\n      status: faker.helpers.arrayElement(['pending', 'in_progress', 'completed']),\n      priority: faker.helpers.arrayElement(['low', 'medium', 'high']),\n      origin: faker.helpers.arrayElement(['ai', 'manual', 'imported']),\n      createdAt: faker.date.past(),\n      updatedAt: faker.date.recent(),\n      version: faker.datatype.number({ min: 1, max: 10 }),\n      checksum: faker.datatype.hexadecimal(32),\n      ...overrides\n    };\n  }\n  \n  static createTasks(count: number, overrides?", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "508", "text": ": Partial<Task>): Task[] {\n    return Array.from({ length: count }, () => this.createTask(overrides));\n  }\n  \n  static createChangeEvent(overrides?: Partial<ChangeEvent>): ChangeEvent {\n    return {\n      id: faker.datatype.uuid(),\n      type: faker.helpers.arrayElement(['task.created', 'task.updated', 'task.deleted']),\n      aggregateId: faker.datatype.uuid(),\n      aggregateType: 'task',\n      version: faker.datatype.number({ min: 1 }),\n      timestamp: faker.date.recent(),\n      data: {},\n      metadata: {},\n      ...overrides\n    };\n  }\n}\n```\n\n## 통합 테스트 전략\n\n### 1. 컴포넌트 통합 테스트\n\n#### 동기화 흐름 통합 테스트\n```typescript\ndescribe('Sync Flow Integration', () => {\n  let testEnvironment: TestEnvironment;\n  let syncCoordinator: SyncCoordinator;\n  let fileWatcher: FileWatcher;\n  let eventStore: EventStore;\n  \n  beforeAll(async () => {\n    testEnvironment = await TestDataManager.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "509", "text": "## 통합 테스트 전략\n\n### 1. 컴포넌트 통합 테스트\n\n#### 동기화 흐름 통합 테스트\n```typescript\ndescribe('Sync Flow Integration', () => {\n  let testEnvironment: TestEnvironment;\n  let syncCoordinator: SyncCoordinator;\n  let fileWatcher: FileWatcher;\n  let eventStore: EventStore;\n  \n  beforeAll(async () => {\n    testEnvironment = await TestDataManager.setupTestEnvironment('sync-integration');\n    syncCoordinator = testEnvironment.getSyncCoordinator();\n    fileWatcher = testEnvironment.getFileWatcher();\n    eventStore = testEnvironment.getEventStore();\n  });\n  \n  afterAll(async () => {\n    await TestDataManager.cleanupTestEnvironment('sync-integration');\n  });\n  \n  it('파일 변경에서 상태 동기화까지의 전체 흐름', async () => {\n    // Arrange\n    const originalTask = TestDataGenerator.createTask({\n      id: 'task-1',", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "510", "text": "setupTestEnvironment('sync-integration');\n    syncCoordinator = testEnvironment.getSyncCoordinator();\n    fileWatcher = testEnvironment.getFileWatcher();\n    eventStore = testEnvironment.getEventStore();\n  });\n  \n  afterAll(async () => {\n    await TestDataManager.cleanupTestEnvironment('sync-integration');\n  });\n  \n  it('파일 변경에서 상태 동기화까지의 전체 흐름', async () => {\n    // Arrange\n    const originalTask = TestDataGenerator.createTask({\n      id: 'task-1',\n      title: 'Original Title'\n    });\n    \n    await testEnvironment.insertTask(originalTask);\n    await testEnvironment.writeTasksMd([originalTask]);\n    \n    // Act - 파일 수정\n    const updatedTask = { ...originalTask, title: 'Updated Title' };\n    await testEnvironment.updateTasksMd([updatedTask]);\n    \n    // 파일 변경 감지 대기\n    await fileWatcher.waitForChange(5000);\n    \n    // Assert\n    const syncedTask = await testEnvironment.getTask('task-1');", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "511", "text": "createTask({\n      id: 'task-1',\n      title: 'Original Title'\n    });\n    \n    await testEnvironment.insertTask(originalTask);\n    await testEnvironment.writeTasksMd([originalTask]);\n    \n    // Act - 파일 수정\n    const updatedTask = { ...originalTask, title: 'Updated Title' };\n    await testEnvironment.updateTasksMd([updatedTask]);\n    \n    // 파일 변경 감지 대기\n    await fileWatcher.waitForChange(5000);\n    \n    // Assert\n    const syncedTask = await testEnvironment.getTask('task-1');\n    expect(syncedTask.title).toBe('Updated Title');\n    \n    // 이벤트 저장소 확인\n    const events = await eventStore.getEvents('task-1');\n    expect(events).toHaveLength(2); // created + updated\n    expect(events[1].type).toBe('task.updated');\n    expect(events[1].data.changes.title).toBe('Updated Title');\n  });\n  \n  it('동시 수정 시 충돌 감지 및 해결',", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "512", "text": "getTask('task-1');\n    expect(syncedTask.title).toBe('Updated Title');\n    \n    // 이벤트 저장소 확인\n    const events = await eventStore.getEvents('task-1');\n    expect(events).toHaveLength(2); // created + updated\n    expect(events[1].type).toBe('task.updated');\n    expect(events[1].data.changes.title).toBe('Updated Title');\n  });\n  \n  it('동시 수정 시 충돌 감지 및 해결', async () => {\n    // Arrange\n    const baseTask = TestDataGenerator.createTask({\n      id: 'task-2',\n      title: 'Base Title',\n      description: 'Base Description'\n    });\n    \n    await testEnvironment.insertTask(baseTask);\n    await testEnvironment.writeTasksMd([baseTask]);\n    \n    // Act - 동시 수정 시뮬레이션\n    const fileUpdate = { ...baseTask, title: 'File Updated Title' };\n    const dbUpdate = { ...baseTask, description: 'DB Updated Description' };", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "513", "text": "async () => {\n    // Arrange\n    const baseTask = TestDataGenerator.createTask({\n      id: 'task-2',\n      title: 'Base Title',\n      description: 'Base Description'\n    });\n    \n    await testEnvironment.insertTask(baseTask);\n    await testEnvironment.writeTasksMd([baseTask]);\n    \n    // Act - 동시 수정 시뮬레이션\n    const fileUpdate = { ...baseTask, title: 'File Updated Title' };\n    const dbUpdate = { ...baseTask, description: 'DB Updated Description' };\n    \n    // 파일 수정 (약간의 지연으로 동시성 시뮬레이션)\n    const filePromise = testEnvironment.updateTasksMd([fileUpdate]);\n    await new Promise(resolve => setTimeout(resolve, 100));\n    const dbPromise = testEnvironment.updateTask(dbUpdate);\n    \n    await Promise.all([filePromise, dbPromise]);\n    \n    // 동기화 대기\n    await fileWatcher.waitForChange(5000);", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "514", "text": "const dbUpdate = { ...baseTask, description: 'DB Updated Description' };\n    \n    // 파일 수정 (약간의 지연으로 동시성 시뮬레이션)\n    const filePromise = testEnvironment.updateTasksMd([fileUpdate]);\n    await new Promise(resolve => setTimeout(resolve, 100));\n    const dbPromise = testEnvironment.updateTask(dbUpdate);\n    \n    await Promise.all([filePromise, dbPromise]);\n    \n    // 동기화 대기\n    await fileWatcher.waitForChange(5000);\n    \n    // Assert\n    const finalTask = await testEnvironment.getTask('task-2');\n    expect(finalTask.title).toBe('File Updated Title');\n    expect(finalTask.description).toBe('DB Updated Description');\n    \n    // 충돌 해결 이벤트 확인\n    const events = await eventStore.getEvents('task-2');\n    const conflictEvents = events.filter(e => e.type === 'conflict.resolved');\n    expect(conflictEvents.length).toBeGreaterThan(0);\n  });\n});", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "515", "text": "waitForChange(5000);\n    \n    // Assert\n    const finalTask = await testEnvironment.getTask('task-2');\n    expect(finalTask.title).toBe('File Updated Title');\n    expect(finalTask.description).toBe('DB Updated Description');\n    \n    // 충돌 해결 이벤트 확인\n    const events = await eventStore.getEvents('task-2');\n    const conflictEvents = events.filter(e => e.type === 'conflict.resolved');\n    expect(conflictEvents.length).toBeGreaterThan(0);\n  });\n});\n```\n\n#### 이벤트 기반 아키텍처 통합 테스트\n```typescript\ndescribe('Event-Driven Architecture Integration', () => {\n  let testEnvironment: TestEnvironment;\n  let eventBus: EventBus;\n  let commandHandler: CommandHandler;\n  let queryHandler: QueryHandler;\n  \n  beforeAll(async () => {\n    testEnvironment = await TestDataManager.setupTestEnvironment('event-integration');\n    eventBus = testEnvironment.getEventBus();\n    commandHandler = testEnvironment.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "516", "text": "toBeGreaterThan(0);\n  });\n});\n```\n\n#### 이벤트 기반 아키텍처 통합 테스트\n```typescript\ndescribe('Event-Driven Architecture Integration', () => {\n  let testEnvironment: TestEnvironment;\n  let eventBus: EventBus;\n  let commandHandler: CommandHandler;\n  let queryHandler: QueryHandler;\n  \n  beforeAll(async () => {\n    testEnvironment = await TestDataManager.setupTestEnvironment('event-integration');\n    eventBus = testEnvironment.getEventBus();\n    commandHandler = testEnvironment.getCommandHandler();\n    queryHandler = testEnvironment.getQueryHandler();\n  });\n  \n  it('커맨드-이벤트-쿼리 흐름 통합', async () => {\n    // Arrange\n    const createTaskCommand = new CreateTaskCommand({\n      title: 'Integration Test Task',\n      description: 'Testing CQRS pattern'\n    });\n    \n    // Act - 커맨드 실행\n    const commandResult = await commandHandler.handle(createTaskCommand);", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "517", "text": "getEventBus();\n    commandHandler = testEnvironment.getCommandHandler();\n    queryHandler = testEnvironment.getQueryHandler();\n  });\n  \n  it('커맨드-이벤트-쿼리 흐름 통합', async () => {\n    // Arrange\n    const createTaskCommand = new CreateTaskCommand({\n      title: 'Integration Test Task',\n      description: 'Testing CQRS pattern'\n    });\n    \n    // Act - 커맨드 실행\n    const commandResult = await commandHandler.handle(createTaskCommand);\n    \n    // Assert - 커맨드 결과\n    expect(commandResult.success).toBe(true);\n    expect(commandResult.aggregateId).toBeDefined();\n    \n    // 이벤트 확인\n    const events = await testEnvironment.getEventStore().getEvents(commandResult.aggregateId);\n    expect(events).toHaveLength(1);\n    expect(events[0].type).toBe('task.created');\n    \n    // 쿼리로 데이터 확인\n    const getTaskQuery = new GetTaskQuery(commandResult.aggregateId);", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "518", "text": "handle(createTaskCommand);\n    \n    // Assert - 커맨드 결과\n    expect(commandResult.success).toBe(true);\n    expect(commandResult.aggregateId).toBeDefined();\n    \n    // 이벤트 확인\n    const events = await testEnvironment.getEventStore().getEvents(commandResult.aggregateId);\n    expect(events).toHaveLength(1);\n    expect(events[0].type).toBe('task.created');\n    \n    // 쿼리로 데이터 확인\n    const getTaskQuery = new GetTaskQuery(commandResult.aggregateId);\n    const task = await queryHandler.handle(getTaskQuery);\n    \n    expect(task.title).toBe('Integration Test Task');\n    expect(task.description).toBe('Testing CQRS pattern');\n  });\n});\n```\n\n### 2. 데이터베이스 통합 테스트\n\n```typescript\ndescribe('Database Integration', () => {\n  let testDatabase: TestDatabase;\n  let transactionManager: TransactionManager;\n  \n  beforeAll(async () => {\n    testDatabase = await TestDatabase.create('db-integration');", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "519", "text": "aggregateId);\n    const task = await queryHandler.handle(getTaskQuery);\n    \n    expect(task.title).toBe('Integration Test Task');\n    expect(task.description).toBe('Testing CQRS pattern');\n  });\n});\n```\n\n### 2. 데이터베이스 통합 테스트\n\n```typescript\ndescribe('Database Integration', () => {\n  let testDatabase: TestDatabase;\n  let transactionManager: TransactionManager;\n  \n  beforeAll(async () => {\n    testDatabase = await TestDatabase.create('db-integration');\n    transactionManager = new TransactionManager(testDatabase);\n  });\n  \n  afterAll(async () => {\n    await testDatabase.cleanup();\n  });\n  \n  it('분산 트랜잭션 원자성 보장', async () => {\n    // Arrange\n    const task1 = TestDataGenerator.createTask({ id: 'task-1' });\n    const task2 = TestDataGenerator.createTask({ id: 'task-2' });\n    const task3 = TestDataGenerator.createTask({ id: 'task-3' });", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "520", "text": "create('db-integration');\n    transactionManager = new TransactionManager(testDatabase);\n  });\n  \n  afterAll(async () => {\n    await testDatabase.cleanup();\n  });\n  \n  it('분산 트랜잭션 원자성 보장', async () => {\n    // Arrange\n    const task1 = TestDataGenerator.createTask({ id: 'task-1' });\n    const task2 = TestDataGenerator.createTask({ id: 'task-2' });\n    const task3 = TestDataGenerator.createTask({ id: 'task-3' });\n    \n    // Act & Assert - 성공 케이스\n    await expect(\n      transactionManager.executeInTransaction([\n        () => testDatabase.insertTask(task1),\n        () => testDatabase.insertTask(task2),\n        () => testDatabase.insertTask(task3)\n      ])\n    ).resolves.not.toThrow();\n    \n    const allTasks = await testDatabase.getAllTasks();\n    expect(allTasks).toHaveLength(3);", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "521", "text": "createTask({ id: 'task-2' });\n    const task3 = TestDataGenerator.createTask({ id: 'task-3' });\n    \n    // Act & Assert - 성공 케이스\n    await expect(\n      transactionManager.executeInTransaction([\n        () => testDatabase.insertTask(task1),\n        () => testDatabase.insertTask(task2),\n        () => testDatabase.insertTask(task3)\n      ])\n    ).resolves.not.toThrow();\n    \n    const allTasks = await testDatabase.getAllTasks();\n    expect(allTasks).toHaveLength(3);\n    \n    // Act & Assert - 실패 케이스 (롤백)\n    await testDatabase.clear();\n    \n    await expect(\n      transactionManager.executeInTransaction([\n        () => testDatabase.insertTask(task1),\n        () => testDatabase.insertTask(task2),\n        () => { throw new Error('Simulated failure'); },\n        () => testDatabase.insertTask(task3)\n      ])\n    ).rejects.toThrow('Simulated failure');\n    \n    const rolledBackTasks = await testDatabase.getAllTasks();", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "522", "text": "expect(allTasks).toHaveLength(3);\n    \n    // Act & Assert - 실패 케이스 (롤백)\n    await testDatabase.clear();\n    \n    await expect(\n      transactionManager.executeInTransaction([\n        () => testDatabase.insertTask(task1),\n        () => testDatabase.insertTask(task2),\n        () => { throw new Error('Simulated failure'); },\n        () => testDatabase.insertTask(task3)\n      ])\n    ).rejects.toThrow('Simulated failure');\n    \n    const rolledBackTasks = await testDatabase.getAllTasks();\n    expect(rolledBackTasks).toHaveLength(0);\n  });\n});\n```\n\n## 성능 테스트 전략\n\n### 1. 부하 테스트\n\n```typescript\ndescribe('Load Testing', () => {\n  let testEnvironment: TestEnvironment;\n  let loadGenerator: LoadGenerator;\n  \n  beforeAll(async () => {\n    testEnvironment = await TestDataManager.setupTestEnvironment('load-testing');\n    loadGenerator = new LoadGenerator(testEnvironment);\n  });", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "523", "text": "toThrow('Simulated failure');\n    \n    const rolledBackTasks = await testDatabase.getAllTasks();\n    expect(rolledBackTasks).toHaveLength(0);\n  });\n});\n```\n\n## 성능 테스트 전략\n\n### 1. 부하 테스트\n\n```typescript\ndescribe('Load Testing', () => {\n  let testEnvironment: TestEnvironment;\n  let loadGenerator: LoadGenerator;\n  \n  beforeAll(async () => {\n    testEnvironment = await TestDataManager.setupTestEnvironment('load-testing');\n    loadGenerator = new LoadGenerator(testEnvironment);\n  });\n  \n  it('대량 동시 요청 처리', async () => {\n    // Arrange\n    const concurrentUsers = 100;\n    const requestsPerUser = 10;\n    const targetResponseTime = 100; // ms\n    \n    // Act\n    const results = await loadGenerator.executeConcurrentLoad({\n      scenario: 'task-update',\n      concurrentUsers,\n      requestsPerUser,\n      duration: 60000 // 1분\n    });\n    \n    // Assert\n    expect(results.averageResponseTime).", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "524", "text": "});\n  \n  it('대량 동시 요청 처리', async () => {\n    // Arrange\n    const concurrentUsers = 100;\n    const requestsPerUser = 10;\n    const targetResponseTime = 100; // ms\n    \n    // Act\n    const results = await loadGenerator.executeConcurrentLoad({\n      scenario: 'task-update',\n      concurrentUsers,\n      requestsPerUser,\n      duration: 60000 // 1분\n    });\n    \n    // Assert\n    expect(results.averageResponseTime).toBeLessThan(targetResponseTime);\n    expect(results.successRate).toBeGreaterThan(0.99); // 99% 이상 성공\n    expect(results.errorRate).toBeLessThan(0.01); // 1% 미만 오류\n  });\n  \n  it('대량 데이터 동기화 성능', async () => {\n    // Arrange\n    const taskCount = 10000;\n    const tasks = TestDataGenerator.createTasks(taskCount);\n    \n    // Act\n    const startTime = Date.now();\n    await testEnvironment.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "525", "text": "toBeLessThan(targetResponseTime);\n    expect(results.successRate).toBeGreaterThan(0.99); // 99% 이상 성공\n    expect(results.errorRate).toBeLessThan(0.01); // 1% 미만 오류\n  });\n  \n  it('대량 데이터 동기화 성능', async () => {\n    // Arrange\n    const taskCount = 10000;\n    const tasks = TestDataGenerator.createTasks(taskCount);\n    \n    // Act\n    const startTime = Date.now();\n    await testEnvironment.insertTasks(tasks);\n    await testEnvironment.writeTasksMd(tasks);\n    \n    // 동기화 트리거\n    await testEnvironment.triggerSync();\n    \n    const endTime = Date.now();\n    const syncTime = endTime - startTime;\n    \n    // Assert\n    expect(syncTime).toBeLessThan(30000); // 30초 이내\n    expect(await testEnvironment.verifyDataConsistency()).toBe(true);\n  });\n});\n```\n\n### 2. 스트레스 테스트", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "526", "text": "now();\n    await testEnvironment.insertTasks(tasks);\n    await testEnvironment.writeTasksMd(tasks);\n    \n    // 동기화 트리거\n    await testEnvironment.triggerSync();\n    \n    const endTime = Date.now();\n    const syncTime = endTime - startTime;\n    \n    // Assert\n    expect(syncTime).toBeLessThan(30000); // 30초 이내\n    expect(await testEnvironment.verifyDataConsistency()).toBe(true);\n  });\n});\n```\n\n### 2. 스트레스 테스트\n\n```typescript\ndescribe('Stress Testing', () => {\n  let testEnvironment: TestEnvironment;\n  \n  beforeAll(async () => {\n    testEnvironment = await TestDataManager.setupTestEnvironment('stress-testing');\n  });\n  \n  it('시스템 한계 테스트', async () => {\n    // Arrange\n    const maxConcurrentUsers = 1000;\n    const incrementStep = 100;\n    \n    for (let users = incrementStep; users <= maxConcurrentUsers;", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "527", "text": "});\n```\n\n### 2. 스트레스 테스트\n\n```typescript\ndescribe('Stress Testing', () => {\n  let testEnvironment: TestEnvironment;\n  \n  beforeAll(async () => {\n    testEnvironment = await TestDataManager.setupTestEnvironment('stress-testing');\n  });\n  \n  it('시스템 한계 테스트', async () => {\n    // Arrange\n    const maxConcurrentUsers = 1000;\n    const incrementStep = 100;\n    \n    for (let users = incrementStep; users <= maxConcurrentUsers; users += incrementStep) {\n      // Act\n      const results = await testEnvironment.executeLoadTest({\n        concurrentUsers: users,\n        duration: 30000 // 30초\n      });\n      \n      // Assert\n      console.log(`Users: ${users}, Avg Response: ${results.averageResponseTime}ms, Error Rate: ${results.errorRate}%`);\n      \n      // 성능 저하가 심각하면 중단\n      if (results.errorRate > 0.1 || results.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "528", "text": "users <= maxConcurrentUsers; users += incrementStep) {\n      // Act\n      const results = await testEnvironment.executeLoadTest({\n        concurrentUsers: users,\n        duration: 30000 // 30초\n      });\n      \n      // Assert\n      console.log(`Users: ${users}, Avg Response: ${results.averageResponseTime}ms, Error Rate: ${results.errorRate}%`);\n      \n      // 성능 저하가 심각하면 중단\n      if (results.errorRate > 0.1 || results.averageResponseTime > 1000) {\n        console.log(`System limit reached at ${users} concurrent users`);\n        break;\n      }\n    }\n  });\n  \n  it('장기간 안정성 테스트', async () => {\n    // Arrange\n    const testDuration = 3600000; // 1시간\n    const monitoringInterval = 60000; // 1분\n    \n    // Act\n    const startTime = Date.now();\n    const metrics: SystemMetrics[] = [];\n    \n    while (Date.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "529", "text": "errorRate > 0.1 || results.averageResponseTime > 1000) {\n        console.log(`System limit reached at ${users} concurrent users`);\n        break;\n      }\n    }\n  });\n  \n  it('장기간 안정성 테스트', async () => {\n    // Arrange\n    const testDuration = 3600000; // 1시간\n    const monitoringInterval = 60000; // 1분\n    \n    // Act\n    const startTime = Date.now();\n    const metrics: SystemMetrics[] = [];\n    \n    while (Date.now() - startTime < testDuration) {\n      const metric = await testEnvironment.collectSystemMetrics();\n      metrics.push(metric);\n      \n      // 메모리 누수 감지\n      if (metric.memoryUsage > 1024 * 1024 * 1024) { // 1GB\n        throw new Error('Memory leak detected');\n      }\n      \n      await new Promise(resolve => setTimeout(resolve, monitoringInterval));\n    }\n    \n    // Assert\n    const avgMemoryUsage = metrics.reduce((sum,", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "530", "text": "while (Date.now() - startTime < testDuration) {\n      const metric = await testEnvironment.collectSystemMetrics();\n      metrics.push(metric);\n      \n      // 메모리 누수 감지\n      if (metric.memoryUsage > 1024 * 1024 * 1024) { // 1GB\n        throw new Error('Memory leak detected');\n      }\n      \n      await new Promise(resolve => setTimeout(resolve, monitoringInterval));\n    }\n    \n    // Assert\n    const avgMemoryUsage = metrics.reduce((sum, m) => sum + m.memoryUsage, 0) / metrics.length;\n    const maxMemoryUsage = Math.max(...metrics.map(m => m.memoryUsage));\n    \n    expect(avgMemoryUsage).toBeLessThan(512 * 1024 * 1024); // 512MB 평균\n    expect(maxMemoryUsage).toBeLessThan(1024 * 1024 * 1024); // 1GB 최대\n  });\n});\n```\n\n## 장애 복구 테스트", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "531", "text": "reduce((sum, m) => sum + m.memoryUsage, 0) / metrics.length;\n    const maxMemoryUsage = Math.max(...metrics.map(m => m.memoryUsage));\n    \n    expect(avgMemoryUsage).toBeLessThan(512 * 1024 * 1024); // 512MB 평균\n    expect(maxMemoryUsage).toBeLessThan(1024 * 1024 * 1024); // 1GB 최대\n  });\n});\n```\n\n## 장애 복구 테스트\n\n### 1. 서킷 브레이커 테스트\n\n```typescript\ndescribe('Circuit Breaker Testing', () => {\n  let circuitBreaker: CircuitBreaker;\n  let mockService: jest.Mocked<ExternalService>;\n  \n  beforeEach(() => {\n    mockService = createMockExternalService();\n    circuitBreaker = new CircuitBreaker({\n      threshold: 5,\n      timeout: 60000\n    });\n  });", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "532", "text": "});\n```\n\n## 장애 복구 테스트\n\n### 1. 서킷 브레이커 테스트\n\n```typescript\ndescribe('Circuit Breaker Testing', () => {\n  let circuitBreaker: CircuitBreaker;\n  let mockService: jest.Mocked<ExternalService>;\n  \n  beforeEach(() => {\n    mockService = createMockExternalService();\n    circuitBreaker = new CircuitBreaker({\n      threshold: 5,\n      timeout: 60000\n    });\n  });\n  \n  it('서비스 장애 시 서킷 브레이커 동작', async () => {\n    // Arrange - 서비스 장애 시뮬레이션\n    mockService.call.mockRejectedValue(new Error('Service unavailable'));\n    \n    // Act - 임계값 도달까지 실패 반복\n    for (let i = 0; i < 5; i++) {\n      await expect(\n        circuitBreaker.execute(() => mockService.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "533", "text": "});\n  \n  it('서비스 장애 시 서킷 브레이커 동작', async () => {\n    // Arrange - 서비스 장애 시뮬레이션\n    mockService.call.mockRejectedValue(new Error('Service unavailable'));\n    \n    // Act - 임계값 도달까지 실패 반복\n    for (let i = 0; i < 5; i++) {\n      await expect(\n        circuitBreaker.execute(() => mockService.call())\n      ).rejects.toThrow('Service unavailable');\n    }\n    \n    // Assert - 서킷 브레이커 열림\n    await expect(\n      circuitBreaker.execute(() => mockService.call())\n    ).rejects.toThrow('Circuit breaker is open');\n    \n    // 서비스 복구 후 타임아웃 대기\n    mockService.call.mockResolvedValue('success');\n    await new Promise(resolve => setTimeout(resolve, 61000));", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "534", "text": "execute(() => mockService.call())\n      ).rejects.toThrow('Service unavailable');\n    }\n    \n    // Assert - 서킷 브레이커 열림\n    await expect(\n      circuitBreaker.execute(() => mockService.call())\n    ).rejects.toThrow('Circuit breaker is open');\n    \n    // 서비스 복구 후 타임아웃 대기\n    mockService.call.mockResolvedValue('success');\n    await new Promise(resolve => setTimeout(resolve, 61000)); // 61초 대기\n    \n    // 서킷 브레이커 반열림 상태에서 성공\n    await expect(\n      circuitBreaker.execute(() => mockService.call())\n    ).resolves.toBe('success');\n  });\n});\n```\n\n### 2. 자동 복구 테스트\n\n```typescript\ndescribe('Auto Recovery Testing', () => {\n  let recoveryManager: AutoRecoveryManager;\n  let testEnvironment: TestEnvironment;", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "535", "text": "await new Promise(resolve => setTimeout(resolve, 61000)); // 61초 대기\n    \n    // 서킷 브레이커 반열림 상태에서 성공\n    await expect(\n      circuitBreaker.execute(() => mockService.call())\n    ).resolves.toBe('success');\n  });\n});\n```\n\n### 2. 자동 복구 테스트\n\n```typescript\ndescribe('Auto Recovery Testing', () => {\n  let recoveryManager: AutoRecoveryManager;\n  let testEnvironment: TestEnvironment;\n  \n  beforeAll(async () => {\n    testEnvironment = await TestDataManager.setupTestEnvironment('recovery-testing');\n    recoveryManager = testEnvironment.getRecoveryManager();\n  });\n  \n  it('데이터베이스 연결 장애 자동 복구', async () => {\n    // Arrange\n    await testEnvironment.simulateDatabaseFailure();\n    \n    // Act - 장애 감지 대기\n    const failure = await testEnvironment.waitForFailureDetection(10000);", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "536", "text": "let testEnvironment: TestEnvironment;\n  \n  beforeAll(async () => {\n    testEnvironment = await TestDataManager.setupTestEnvironment('recovery-testing');\n    recoveryManager = testEnvironment.getRecoveryManager();\n  });\n  \n  it('데이터베이스 연결 장애 자동 복구', async () => {\n    // Arrange\n    await testEnvironment.simulateDatabaseFailure();\n    \n    // Act - 장애 감지 대기\n    const failure = await testEnvironment.waitForFailureDetection(10000);\n    \n    // Assert - 자동 복구 시도\n    expect(failure).toBeDefined();\n    expect(failure.type).toBe('database_connection');\n    \n    const recoveryResult = await recoveryManager.handleFailure(failure);\n    expect(recoveryResult.success).toBe(true);\n    \n    // 복구 후 정상 작동 확인\n    await expect(testEnvironment.verifyDatabaseConnection()).resolves.toBe(true);\n  });\n  \n  it('파일 시스템 장애 자동 복구',", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "537", "text": "waitForFailureDetection(10000);\n    \n    // Assert - 자동 복구 시도\n    expect(failure).toBeDefined();\n    expect(failure.type).toBe('database_connection');\n    \n    const recoveryResult = await recoveryManager.handleFailure(failure);\n    expect(recoveryResult.success).toBe(true);\n    \n    // 복구 후 정상 작동 확인\n    await expect(testEnvironment.verifyDatabaseConnection()).resolves.toBe(true);\n  });\n  \n  it('파일 시스템 장애 자동 복구', async () => {\n    // Arrange\n    await testEnvironment.simulateFileSystemFailure();\n    \n    // Act\n    const failure = await testEnvironment.waitForFailureDetection(10000);\n    const recoveryResult = await recoveryManager.handleFailure(failure);\n    \n    // Assert\n    expect(recoveryResult.success).toBe(true);\n    expect(await testEnvironment.verifyFileSystemAccess()).resolves.toBe(true);\n  });\n});\n```\n\n## E2E 테스트 전략\n\n### 1. 사용자 시나리오 테스트", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "538", "text": "async () => {\n    // Arrange\n    await testEnvironment.simulateFileSystemFailure();\n    \n    // Act\n    const failure = await testEnvironment.waitForFailureDetection(10000);\n    const recoveryResult = await recoveryManager.handleFailure(failure);\n    \n    // Assert\n    expect(recoveryResult.success).toBe(true);\n    expect(await testEnvironment.verifyFileSystemAccess()).resolves.toBe(true);\n  });\n});\n```\n\n## E2E 테스트 전략\n\n### 1. 사용자 시나리오 테스트\n\n```typescript\ndescribe('End-to-End User Scenarios', () => {\n  let testEnvironment: TestEnvironment;\n  let userInterface: TestUserInterface;\n  \n  beforeAll(async () => {\n    testEnvironment = await TestDataManager.setupTestEnvironment('e2e-testing');\n    userInterface = new TestUserInterface(testEnvironment);\n  });\n  \n  it('태스크 생성부터 완료까지의 전체 라이프사이클', async () => {\n    // 1.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "539", "text": "### 1. 사용자 시나리오 테스트\n\n```typescript\ndescribe('End-to-End User Scenarios', () => {\n  let testEnvironment: TestEnvironment;\n  let userInterface: TestUserInterface;\n  \n  beforeAll(async () => {\n    testEnvironment = await TestDataManager.setupTestEnvironment('e2e-testing');\n    userInterface = new TestUserInterface(testEnvironment);\n  });\n  \n  it('태스크 생성부터 완료까지의 전체 라이프사이클', async () => {\n    // 1. 사용자 로그인\n    await userInterface.login('test-user', 'password');\n    \n    // 2. 새 태스크 생성\n    const taskData = {\n      title: 'E2E Test Task',\n      description: 'Testing complete task lifecycle',\n      priority: 'high'\n    };\n    \n    const createdTask = await userInterface.createTask(taskData);\n    expect(createdTask.id).toBeDefined();\n    expect(createdTask.status).toBe('pending');\n    \n    // 3.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "540", "text": "사용자 로그인\n    await userInterface.login('test-user', 'password');\n    \n    // 2. 새 태스크 생성\n    const taskData = {\n      title: 'E2E Test Task',\n      description: 'Testing complete task lifecycle',\n      priority: 'high'\n    };\n    \n    const createdTask = await userInterface.createTask(taskData);\n    expect(createdTask.id).toBeDefined();\n    expect(createdTask.status).toBe('pending');\n    \n    // 3. 태스크 상태 변경\n    const updatedTask = await userInterface.updateTaskStatus(createdTask.id, 'in_progress');\n    expect(updatedTask.status).toBe('in_progress');\n    \n    // 4. 태스크 완료\n    const completedTask = await userInterface.updateTaskStatus(createdTask.id, 'completed');\n    expect(completedTask.status).toBe('completed');\n    expect(completedTask.completedAt).toBeDefined();\n    \n    // 5. 데이터 일관성 검증\n    const fileContent = await testEnvironment.readTasksMd();\n    const dbTask = await testEnvironment.getTask(createdTask.id);", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "541", "text": "태스크 완료\n    const completedTask = await userInterface.updateTaskStatus(createdTask.id, 'completed');\n    expect(completedTask.status).toBe('completed');\n    expect(completedTask.completedAt).toBeDefined();\n    \n    // 5. 데이터 일관성 검증\n    const fileContent = await testEnvironment.readTasksMd();\n    const dbTask = await testEnvironment.getTask(createdTask.id);\n    \n    expect(fileContent).toContain('E2E Test Task');\n    expect(dbTask.status).toBe('completed');\n    \n    // 이벤트 히스토리 확인\n    const events = await testEnvironment.getEventStore().getEvents(createdTask.id);\n    expect(events.map(e => e.type)).toEqual([\n      'task.created',\n      'task.updated',\n      'task.updated'\n    ]);\n  });\n  \n  it('다중 사용자 동시 작업 시나리오', async () => {\n    // Arrange\n    const user1 = await userInterface.createUser('user1');", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "542", "text": "status).toBe('completed');\n    \n    // 이벤트 히스토리 확인\n    const events = await testEnvironment.getEventStore().getEvents(createdTask.id);\n    expect(events.map(e => e.type)).toEqual([\n      'task.created',\n      'task.updated',\n      'task.updated'\n    ]);\n  });\n  \n  it('다중 사용자 동시 작업 시나리오', async () => {\n    // Arrange\n    const user1 = await userInterface.createUser('user1');\n    const user2 = await userInterface.createUser('user2');\n    \n    const task = await userInterface.createTask({\n      title: 'Collaboration Task',\n      description: 'Testing multi-user collaboration'\n    });\n    \n    // Act - 동시 수정 시도\n    const user1Update = user1.updateTask(task.id, { title: 'User1 Title' });\n    const user2Update = user2.updateTask(task.id, { description: 'User2 Description' });\n    \n    await Promise.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "543", "text": "createUser('user1');\n    const user2 = await userInterface.createUser('user2');\n    \n    const task = await userInterface.createTask({\n      title: 'Collaboration Task',\n      description: 'Testing multi-user collaboration'\n    });\n    \n    // Act - 동시 수정 시도\n    const user1Update = user1.updateTask(task.id, { title: 'User1 Title' });\n    const user2Update = user2.updateTask(task.id, { description: 'User2 Description' });\n    \n    await Promise.all([user1Update, user2Update]);\n    \n    // Assert - 충돌 해결 확인\n    const finalTask = await userInterface.getTask(task.id);\n    \n    // 자동 병합 또는 수동 해결 결과 확인\n    expect(finalTask.title || finalTask.description).toBeDefined();\n    \n    // 충돌 해결 이벤트 확인\n    const events = await testEnvironment.getEventStore().getEvents(task.id);\n    const conflictEvents = events.filter(e => e.type.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "544", "text": "await Promise.all([user1Update, user2Update]);\n    \n    // Assert - 충돌 해결 확인\n    const finalTask = await userInterface.getTask(task.id);\n    \n    // 자동 병합 또는 수동 해결 결과 확인\n    expect(finalTask.title || finalTask.description).toBeDefined();\n    \n    // 충돌 해결 이벤트 확인\n    const events = await testEnvironment.getEventStore().getEvents(task.id);\n    const conflictEvents = events.filter(e => e.type.includes('conflict'));\n    expect(conflictEvents.length).toBeGreaterThan(0);\n  });\n});\n```\n\n## 테스트 자동화 및 CI/CD 통합\n\n### 1. GitHub Actions 워크플로우\n\n```yaml\n# .github/workflows/integration-tests.yml\nname: Integration Tests\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "545", "text": "getEventStore().getEvents(task.id);\n    const conflictEvents = events.filter(e => e.type.includes('conflict'));\n    expect(conflictEvents.length).toBeGreaterThan(0);\n  });\n});\n```\n\n## 테스트 자동화 및 CI/CD 통합\n\n### 1. GitHub Actions 워크플로우\n\n```yaml\n# .github/workflows/integration-tests.yml\nname: Integration Tests\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  unit-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n      \n      - name: Install dependencies\n        run: npm ci\n      \n      - name: Run unit tests\n        run: npm run test:unit\n      \n      - name: Upload coverage\n        uses: codecov/codecov-action@v3\n\n  integration-tests:\n    runs-on: ubuntu-latest", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "546", "text": "jobs:\n  unit-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n      \n      - name: Install dependencies\n        run: npm ci\n      \n      - name: Run unit tests\n        run: npm run test:unit\n      \n      - name: Upload coverage\n        uses: codecov/codecov-action@v3\n\n  integration-tests:\n    runs-on: ubuntu-latest\n    needs: unit-tests\n    services:\n      postgres:\n        image: postgres:14\n        env:\n          POSTGRES_PASSWORD: test\n          POSTGRES_DB: zyflow_test\n        options: >-\n          --health-cmd pg_isready\n          --health-interval 10s", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "547", "text": "needs: unit-tests\n    services:\n      postgres:\n        image: postgres:14\n        env:\n          POSTGRES_PASSWORD: test\n          POSTGRES_DB: zyflow_test\n        options: >-\n          --health-cmd pg_isready\n          --health-interval 10s\n          --health-timeout 5s\n          --health-retries 5\n      \n      redis:\n        image: redis:7\n        options: >-\n          --health-cmd \"redis-cli ping\"\n          --health-interval 10s\n          --health-timeout 5s", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "548", "text": "--health-timeout 5s\n          --health-retries 5\n      \n      redis:\n        image: redis:7\n        options: >-\n          --health-cmd \"redis-cli ping\"\n          --health-interval 10s\n          --health-timeout 5s\n          --health-retries 5\n    \n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n      \n      - name: Install dependencies\n        run: npm ci\n      \n      - name:", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "549", "text": "5s\n          --health-retries 5\n    \n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n      \n      - name: Install dependencies\n        run: npm ci\n      \n      - name: Setup test environment\n        run: npm run test:setup\n      \n      - name: Run integration tests\n        run: npm run test:integration\n        env:\n          DATABASE_URL: postgresql://postgres:test@localhost:5432/zyflow_test\n          REDIS_URL: redis://localhost:6379", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "550", "text": "- name: Setup test environment\n        run: npm run test:setup\n      \n      - name: Run integration tests\n        run: npm run test:integration\n        env:\n          DATABASE_URL: postgresql://postgres:test@localhost:5432/zyflow_test\n          REDIS_URL: redis://localhost:6379\n      \n      - name: Cleanup test environment\n        run: npm run test:cleanup\n        if: always()", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "551", "text": "run: npm run test:integration\n        env:\n          DATABASE_URL: postgresql://postgres:test@localhost:5432/zyflow_test\n          REDIS_URL: redis://localhost:6379\n      \n      - name: Cleanup test environment\n        run: npm run test:cleanup\n        if: always()\n\n  load-tests:\n    runs-on: ubuntu-latest\n    needs: integration-tests\n    if: github.ref == 'refs/heads/main'\n    \n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n      \n      - name: Install dependencies\n        run: npm ci\n      \n      - name: Run load tests\n        run: npm run test:load\n      \n      - name: Upload load test results\n        uses: actions/upload-artifact@v3\n        with:\n          name: load-test-results\n          path: test-results/load/\n```", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "552", "text": "### 2. 테스트 실행 스크립트\n\n```json\n{\n  \"scripts\": {\n    \"test\": \"npm run test:unit && npm run test:integration\",\n    \"test:unit\": \"jest --config jest.unit.config.js\",\n    \"test:integration\": \"jest --config jest.integration.config.js\",\n    \"test:e2e\": \"jest --config jest.e2e.config.js\",\n    \"test:load\": \"k6 run tests/load/scenarios.js\",\n    \"test:setup\": \"ts-node scripts/setup-test-environment.ts\",\n    \"test:cleanup\": \"ts-node scripts/cleanup-test-environment.ts\",\n    \"test:coverage\": \"jest --coverage\",\n    \"test:watch\": \"jest --watch\"\n  }\n}\n```\n\n## 테스트 결과 보고\n\n### 1. 테스트 대시보드\n\n```typescript\n// 테스트 결과 수집기\nexport class TestResultCollector {\n  private readonly results = new Map<string, TestSuiteResult>();\n  \n  async collectResults(): Promise<TestDashboard> {\n    const unitResults = await this.getUnitTestResults();", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "553", "text": "## 테스트 결과 보고\n\n### 1. 테스트 대시보드\n\n```typescript\n// 테스트 결과 수집기\nexport class TestResultCollector {\n  private readonly results = new Map<string, TestSuiteResult>();\n  \n  async collectResults(): Promise<TestDashboard> {\n    const unitResults = await this.getUnitTestResults();\n    const integrationResults = await this.getIntegrationTestResults();\n    const e2eResults = await this.getE2ETestResults();\n    const performanceResults = await this.getPerformanceTestResults();\n    \n    return {\n      summary: this.generateSummary([unitResults, integrationResults, e2eResults, performanceResults]),\n      unitTests: unitResults,\n      integrationTests: integrationResults,\n      e2eTests: e2eResults,\n      performanceTests: performanceResults,\n      trends: await this.getTrendData(),\n      coverage: await this.getCoverageReport()\n    };\n  }\n  \n  private generateSummary(results: TestSuiteResult[]): TestSummary {\n    const totalTests = results.reduce((sum, r) => sum + r.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "554", "text": "getPerformanceTestResults();\n    \n    return {\n      summary: this.generateSummary([unitResults, integrationResults, e2eResults, performanceResults]),\n      unitTests: unitResults,\n      integrationTests: integrationResults,\n      e2eTests: e2eResults,\n      performanceTests: performanceResults,\n      trends: await this.getTrendData(),\n      coverage: await this.getCoverageReport()\n    };\n  }\n  \n  private generateSummary(results: TestSuiteResult[]): TestSummary {\n    const totalTests = results.reduce((sum, r) => sum + r.total, 0);\n    const passedTests = results.reduce((sum, r) => sum + r.passed, 0);\n    const failedTests = results.reduce((sum, r) => sum + r.failed, 0);\n    const skippedTests = results.reduce((sum, r) => sum + r.skipped, 0);\n    \n    return {\n      total: totalTests,\n      passed: passedTests,\n      failed: failedTests,\n      skipped: skippedTests,", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "555", "text": "reduce((sum, r) => sum + r.total, 0);\n    const passedTests = results.reduce((sum, r) => sum + r.passed, 0);\n    const failedTests = results.reduce((sum, r) => sum + r.failed, 0);\n    const skippedTests = results.reduce((sum, r) => sum + r.skipped, 0);\n    \n    return {\n      total: totalTests,\n      passed: passedTests,\n      failed: failedTests,\n      skipped: skippedTests,\n      passRate: (passedTests / totalTests) * 100,\n      duration: results.reduce((sum, r) => sum + r.duration, 0)\n    };\n  }\n}\n```\n\n### 2. 품질 게이트\n\n```typescript\n// 품질 게이트 정의\nexport class QualityGate {\n  private readonly thresholds = {\n    unitTestPassRate: 95, // 95% 이상 통과\n    integrationTestPassRate: 90,", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "556", "text": "failed: failedTests,\n      skipped: skippedTests,\n      passRate: (passedTests / totalTests) * 100,\n      duration: results.reduce((sum, r) => sum + r.duration, 0)\n    };\n  }\n}\n```\n\n### 2. 품질 게이트\n\n```typescript\n// 품질 게이트 정의\nexport class QualityGate {\n  private readonly thresholds = {\n    unitTestPassRate: 95, // 95% 이상 통과\n    integrationTestPassRate: 90, // 90% 이상 통과\n    e2eTestPassRate: 85, // 85% 이상 통과\n    codeCoverage: 70, // 70% 이상 커버리지\n    performanceThreshold: {\n      averageResponseTime: 100, // 100ms 이하\n      errorRate: 0.01, // 1% 미만\n      throughput: 1000 // 1000 TPS 이상\n    }\n  };", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "557", "text": "// 95% 이상 통과\n    integrationTestPassRate: 90, // 90% 이상 통과\n    e2eTestPassRate: 85, // 85% 이상 통과\n    codeCoverage: 70, // 70% 이상 커버리지\n    performanceThreshold: {\n      averageResponseTime: 100, // 100ms 이하\n      errorRate: 0.01, // 1% 미만\n      throughput: 1000 // 1000 TPS 이상\n    }\n  };\n  \n  async evaluate(results: TestDashboard): Promise<QualityGateResult> {\n    const evaluations: GateEvaluation[] = [];\n    \n    // 단위 테스트 평가\n    evaluations.push(this.evaluateUnitTests(results.unitTests));\n    \n    // 통합 테스트 평가\n    evaluations.push(this.evaluateIntegrationTests(results.integrationTests));\n    \n    // E2E 테스트 평가\n    evaluations.push(this.evaluateE2ETests(results.e2eTests));", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "558", "text": "async evaluate(results: TestDashboard): Promise<QualityGateResult> {\n    const evaluations: GateEvaluation[] = [];\n    \n    // 단위 테스트 평가\n    evaluations.push(this.evaluateUnitTests(results.unitTests));\n    \n    // 통합 테스트 평가\n    evaluations.push(this.evaluateIntegrationTests(results.integrationTests));\n    \n    // E2E 테스트 평가\n    evaluations.push(this.evaluateE2ETests(results.e2eTests));\n    \n    // 코드 커버리지 평가\n    evaluations.push(this.evaluateCoverage(results.coverage));\n    \n    // 성능 평가\n    evaluations.push(this.evaluatePerformance(results.performanceTests));\n    \n    const passed = evaluations.every(e => e.passed);\n    const failedEvaluations = evaluations.filter(e => !e.passed);\n    \n    return {\n      passed,\n      evaluations,\n      failedEvaluations,\n      summary: passed \n        ?", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "559", "text": "push(this.evaluateE2ETests(results.e2eTests));\n    \n    // 코드 커버리지 평가\n    evaluations.push(this.evaluateCoverage(results.coverage));\n    \n    // 성능 평가\n    evaluations.push(this.evaluatePerformance(results.performanceTests));\n    \n    const passed = evaluations.every(e => e.passed);\n    const failedEvaluations = evaluations.filter(e => !e.passed);\n    \n    return {\n      passed,\n      evaluations,\n      failedEvaluations,\n      summary: passed \n        ? 'All quality gates passed' \n        : `Failed gates: ${failedEvaluations.map(e => e.name).join(', ')}`\n    };\n  }\n}\n```\n\n## 결론", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "560", "text": "const passed = evaluations.every(e => e.passed);\n    const failedEvaluations = evaluations.filter(e => !e.passed);\n    \n    return {\n      passed,\n      evaluations,\n      failedEvaluations,\n      summary: passed \n        ? 'All quality gates passed' \n        : `Failed gates: ${failedEvaluations.map(e => e.name).join(', ')}`\n    };\n  }\n}\n```\n\n## 결론\n\n이 통합 테스트 전략은 ZyFlow 단일 진실 원천 아키텍처의 안정성과 신뢰성을 보장하기 위한 포괄적인 접근법을 제공합니다. 다단계 테스트 피라미드를 통해 다양한 수준에서 시스템을 검증하고, 자동화된 CI/CD 파이프라인을 통해 지속적인 품질 관리를 실현할 수 있습니다.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "561", "text": "성공적인 테스트 전략 실행을 위한 핵심 요소:\n\n1. **포괄적인 테스트 커버리지**: 단위 테스트부터 E2E 테스트까지 모든 수준에서의 검증\n2. **자동화된 테스트 실행**: CI/CD 파이프라인을 통한 지속적인 테스트 자동화\n3. **실제 환경 시뮬레이션**: 프로덕션과 유사한 환경에서의 현실적인 테스트\n4. **품질 게이트**: 명확한 품질 기준을 통한 배포 결정 자동화\n5. **지속적인 개선**: 테스트 결과를 통한 시스템 품질 지속적 개선", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "562", "text": "이 전략을 통해 ZyFlow는 안정적이고 신뢰성 있는 단일 진실 원천 아키텍처를 구축하고 유지할 수 있을 것입니다.", "metadata": {"file_path": "docs/architecture/integration-testing-strategy.md", "file_name": "integration-testing-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "563", "text": "# ZyFlow 단일 진실 원천 아키텍처 마이그레이션 전략\n\n## 개요\n\n이 문서는 기존 ZyFlow 시스템을 새로운 단일 진실 원천 아키텍처로 점진적으로 전환하기 위한 포괄적인 마이그레이션 전략을 제시합니다. 마이그레이션 과정에서 시스템 안정성을 유지하면서, 최소한의 다운타임으로 새로운 아키텍처의 이점을 점진적으로 도입하는 것을 목표로 합니다.\n\n## 마이그레이션 원칙", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "564", "text": "## 마이그레이션 원칙\n\n### 1. 점진적 전환 (Gradual Migration)\n- **기능 기반 마이그레이션**: 독립적인 기능 단위로 순차적 마이그레이션\n- **안정성 우선**: 각 단계에서 시스템 안정성 확보 후 다음 단계 진행\n- **롤백 가능성**: 각 마이그레이션 단계는 독립적으로 롤백 가능해야 함", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "565", "text": "### 2. 이중 운영 (Dual Operation)\n- **레거시와 신규 시스템 병행**: 마이그레이션 기간 동안 두 시스템 동시 운영\n- **데이터 동기화**: 레거시와 신규 시스템 간 실시간 데이터 동기화 유지\n- **점진적 트래픽 전환**: 사용자 트래픽을 점진적으로 신규 시스템으로 이전", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "566", "text": "### 3. 위험 최소화 (Risk Minimization)\n- **카나리 배포**: 소수 사용자 그룹에 먼저 신규 시스템 적용\n- **모니터링 강화**: 마이그레이션 과정에서 지속적인 상태 모니터링\n- **자동화된 롤백**: 문제 발생 시 자동으로 이전 버전으로 복귀\n\n## 마이그레이션 단계\n\n### 1단계: 기반 인프라 구축 (Foundation Setup)\n\n#### 목표\n- 새로운 아키텍처의 기반 인프라 구축\n- 기존 시스템과의 호환성 확보\n- 기본 모니터링 및 롤백 메커니즘 구현", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "567", "text": "## 마이그레이션 단계\n\n### 1단계: 기반 인프라 구축 (Foundation Setup)\n\n#### 목표\n- 새로운 아키텍처의 기반 인프라 구축\n- 기존 시스템과의 호환성 확보\n- 기본 모니터링 및 롤백 메커니즘 구현\n\n#### 주요 작업\n1. **이벤트 저장소 구축**\n   ```typescript\n   // 이벤트 저장소 초기화\n   const eventStore = new EventStore({\n     adapter: new PostgreSQLEventAdapter(dbConnection),\n     snapshotStrategy: new IntervalSnapshotStrategy(100),\n     compressionEnabled: true\n   });\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "568", "text": "#### 주요 작업\n1. **이벤트 저장소 구축**\n   ```typescript\n   // 이벤트 저장소 초기화\n   const eventStore = new EventStore({\n     adapter: new PostgreSQLEventAdapter(dbConnection),\n     snapshotStrategy: new IntervalSnapshotStrategy(100),\n     compressionEnabled: true\n   });\n   ```\n\n2. **상태 관리자 구현**\n   ```typescript\n   // 상태 관리자 설정\n   const stateManager = new StateManager({\n     concurrencyControl: 'optimistic',\n     isolationLevel: 'read_committed',\n     cacheProvider: new RedisCacheProvider(redisClient)\n   });\n   ```\n\n3. **동기화 코디네이터 기본 구조**\n   ```typescript\n   // 동기화 코디네이터 초기 구현\n   const syncCoordinator = new SyncCoordinator({\n     conflictDetector: new ThreeWayConflictDetector(),\n     conflictResolver: new AutoConflictResolver(),\n     recoveryManager: new RecoveryManager()\n   });\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "569", "text": "3. **동기화 코디네이터 기본 구조**\n   ```typescript\n   // 동기화 코디네이터 초기 구현\n   const syncCoordinator = new SyncCoordinator({\n     conflictDetector: new ThreeWayConflictDetector(),\n     conflictResolver: new AutoConflictResolver(),\n     recoveryManager: new RecoveryManager()\n   });\n   ```\n\n4. **모니터링 시스템 연동**\n   ```typescript\n   // 모니터링 설정\n   const monitoring = new SystemMonitoring({\n     metricsCollector: new PrometheusCollector(),\n     alertManager: new AlertManager(),\n     healthChecker: new HealthChecker()\n   });\n   ```\n\n#### 성공 기준\n- [ ] 이벤트 저장소 정상 작동 및 1000 TPS 지원\n- [ ] 상태 관리자 기본 기능 동작 확인\n- [ ] 모니터링 대시보드에서 기본 메트릭 확인\n- [ ] 롤백 스크립트 테스트 완료", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "570", "text": "#### 성공 기준\n- [ ] 이벤트 저장소 정상 작동 및 1000 TPS 지원\n- [ ] 상태 관리자 기본 기능 동작 확인\n- [ ] 모니터링 대시보드에서 기본 메트릭 확인\n- [ ] 롤백 스크립트 테스트 완료\n\n#### 예상 기간: 2주\n\n---\n\n### 2단계: 이벤트 시스템 도입 (Event System Integration)\n\n#### 목표\n- 기존 시스템에 이벤트 기반 아키텍처 점진적 도입\n- 명세서(tasks.md) 변경에 대한 이벤트 생성 기능 구현\n- 기본적인 CQRS 패턴 적용", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "571", "text": "#### 목표\n- 기존 시스템에 이벤트 기반 아키텍처 점진적 도입\n- 명세서(tasks.md) 변경에 대한 이벤트 생성 기능 구현\n- 기본적인 CQRS 패턴 적용\n\n#### 주요 작업\n1. **도메인 이벤트 정의**\n   ```typescript\n   // 핵심 도메인 이벤트 정의\n   export class TaskCreatedEvent extends DomainEvent {\n     constructor(\n       public readonly taskId: string,\n       public readonly title: string,\n       public readonly description: string,\n       public readonly origin: TaskOrigin\n     ) {\n       super('task.created', taskId);\n     }\n   }\n   \n   export class TaskUpdatedEvent extends DomainEvent {\n     constructor(\n       public readonly taskId: string,\n       public readonly changes: Partial<TaskData>,\n       public readonly previousVersion: number,\n       public readonly newVersion: number\n     ) {\n       super('task.updated', taskId);\n     }\n   }\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "572", "text": "2. **이벤트 핸들러 구현**\n   ```typescript\n   // 태스크 이벤트 핸들러\n   export class TaskEventHandler implements EventHandler {\n     async handle(event: DomainEvent): Promise<void> {\n       switch (event.type) {\n         case 'task.created':\n           await this.handleTaskCreated(event as TaskCreatedEvent);\n           break;\n         case 'task.updated':\n           await this.handleTaskUpdated(event as TaskUpdatedEvent);\n           break;\n         // ... 기타 이벤트 처리\n       }\n     }\n   }\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "573", "text": "3. **File Watcher 확장**\n   ```typescript\n   // 기존 File Watcher에 이벤트 발행 기능 추가\n   export class EventEnabledFileWatcher extends FileWatcher {\n     constructor(\n       private eventBus: EventBus,\n       filePath: string,\n       options: WatcherOptions\n     ) {\n       super(filePath, options);\n     }\n     \n     protected async onFileChange(change: FileChange): Promise<void> {\n       // 기존 로직 실행\n       await super.onFileChange(change);\n       \n       // 이벤트 발행\n       const event = new FileChangedEvent(change);\n       await this.eventBus.publish(event);\n     }\n   }\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "574", "text": "4. **이벤트 기반 동기화 브릿지**\n   ```typescript\n   // 레거시 동기화와 이벤트 시스템 연결\n   export class LegacySyncEventBridge {\n     constructor(\n       private legacySync: LegacySyncService,\n       private eventBus: EventBus\n     ) {}\n     \n     async bridgeLegacySync(): Promise<void> {\n       this.legacySync.on('sync', async (result: SyncResult) => {\n         const event = new LegacySyncCompletedEvent(result);\n         await this.eventBus.publish(event);\n       });\n     }\n   }\n   ```\n\n#### 성공 기준\n- [ ] tasks.md 파일 변경 시 이벤트 정상 발행\n- [ ] 이벤트 저장소에 이벤트 정상 저장\n- [ ] 기본적인 CQRS 패턴 동작 확인\n- [ ] 레거시 시스템과의 호환성 유지\n\n#### 예상 기간: 3주\n\n---", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "575", "text": "#### 성공 기준\n- [ ] tasks.md 파일 변경 시 이벤트 정상 발행\n- [ ] 이벤트 저장소에 이벤트 정상 저장\n- [ ] 기본적인 CQRS 패턴 동작 확인\n- [ ] 레거시 시스템과의 호환성 유지\n\n#### 예상 기간: 3주\n\n---\n\n### 3단계: 상태 관리 및 동시성 제어 도입\n\n#### 목표\n- MVCC 기반 상태 관리 시스템 도입\n- 낙관적 동시성 제어 메커니즘 구현\n- 충돌 감지 및 해결 기능 통합\n\n#### 주요 작업\n1.", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "576", "text": "#### 예상 기간: 3주\n\n---\n\n### 3단계: 상태 관리 및 동시성 제어 도입\n\n#### 목표\n- MVCC 기반 상태 관리 시스템 도입\n- 낙관적 동시성 제어 메커니즘 구현\n- 충돌 감지 및 해결 기능 통합\n\n#### 주요 작업\n1. **MVCC 구현**\n   ```typescript\n   // MVCC 컨트롤러 구현\n   export class MVCCController {\n     private readonly versionStore = new Map<string, VersionedState[]>();\n     \n     async readVersion(\n       aggregateId: string,\n       version?: number\n     ): Promise<VersionedState | null> {\n       const versions = this.versionStore.get(aggregateId) || [];\n       \n       if (version) {\n         return versions.find(v => v.version === version) || null;\n       }\n       \n       // 최신 버전 반환\n       return versions.length > 0 ?", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "577", "text": ": number\n     ): Promise<VersionedState | null> {\n       const versions = this.versionStore.get(aggregateId) || [];\n       \n       if (version) {\n         return versions.find(v => v.version === version) || null;\n       }\n       \n       // 최신 버전 반환\n       return versions.length > 0 ? versions[versions.length - 1] : null;\n     }\n     \n     async writeVersion(\n       aggregateId: string,\n       state: any,\n       expectedVersion?: number\n     ): Promise<VersionedState> {\n       const currentVersions = this.versionStore.get(aggregateId) || [];\n       const latestVersion = currentVersions.length > 0 \n         ?", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "578", "text": "versions[versions.length - 1] : null;\n     }\n     \n     async writeVersion(\n       aggregateId: string,\n       state: any,\n       expectedVersion?: number\n     ): Promise<VersionedState> {\n       const currentVersions = this.versionStore.get(aggregateId) || [];\n       const latestVersion = currentVersions.length > 0 \n         ? currentVersions[currentVersions.length - 1].version \n         : 0;\n       \n       // 낙관적 동시성 제어\n       if (expectedVersion !== undefined && expectedVersion !== latestVersion) {\n         throw new ConcurrencyConflictError(\n           `Expected version ${expectedVersion}, but current is ${latestVersion}`\n         );\n       }\n       \n       const newVersion: VersionedState = {\n         aggregateId,\n         version: latestVersion + 1,\n         state,\n         timestamp: new Date(),\n         checksum: this.calculateChecksum(state)\n       };\n       \n       currentVersions.push(newVersion);\n       this.versionStore.set(aggregateId, currentVersions);\n       \n       return newVersion;\n     }\n   }\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "579", "text": "2. **충돌 감지기 통합**\n   ```typescript\n   // 3-way 충돌 감지기 구현\n   export class ThreeWayConflictDetector implements ConflictDetector {\n     async detectConflicts(\n       localState: TaskState,\n       remoteState: TaskState,\n       baseState: TaskState\n     ): Promise<Conflict[]> {\n       const conflicts: Conflict[] = [];\n       \n       // 필드별 충돌 감지\n       for (const field of this.getComparableFields(localState)) {\n         const localValue = localState[field];\n         const remoteValue = remoteState[field];\n         const baseValue = baseState[field];\n         \n         if (localValue !== baseValue && remoteValue !== baseValue) {\n           conflicts.push(new FieldConflict(field, localValue, remoteValue, baseValue));\n         }\n       }\n       \n       return conflicts;\n     }\n   }\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "580", "text": "3. **자동 충돌 해결기 구현**\n   ```typescript\n   // 자동 충돌 해결 전략\n   export class AutoConflictResolver implements ConflictResolver {\n     private readonly strategies: Map<ConflictType, ConflictResolutionStrategy> = new Map([\n       [ConflictType.FIELD_CONFLICT, new LastWriterWinsStrategy()],\n       [ConflictType.STRUCTURAL_CONFLICT, new MergeStrategy()],\n       [ConflictType.DELETION_CONFLICT, new PreserveStrategy()]\n     ]);\n     \n     async resolve(conflicts: Conflict[]): Promise<ConflictResolution[]> {\n       const resolutions: ConflictResolution[] = [];\n       \n       for (const conflict of conflicts) {\n         const strategy = this.strategies.get(conflict.type);\n         if (strategy) {\n           const resolution = await strategy.resolve(conflict);\n           resolutions.push(resolution);\n         } else {\n           resolutions.push(new ManualResolutionRequired(conflict));\n         }\n       }\n       \n       return resolutions;\n     }\n   }\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "581", "text": "4. **트랜잭션 관리자 도입**\n   ```typescript\n   // 분산 트랜잭션 관리\n   export class TransactionManager {\n     async executeInTransaction<T>(\n       operations: TransactionOperation[],\n       isolationLevel: IsolationLevel = 'read_committed'\n     ): Promise<T[]> {\n       const transaction = new DistributedTransaction(isolationLevel);\n       const results: T[] = [];\n       \n       try {\n         for (const operation of operations) {\n           const result = await operation.execute(transaction);\n           results.push(result);\n         }\n         \n         await transaction.commit();\n         return results;\n       } catch (error) {\n         await transaction.rollback();\n         throw error;\n       }\n     }\n   }\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "582", "text": "#### 성공 기준\n- [ ] MVCC를 통한 다중 버전 상태 관리 정상 작동\n- [ ] 낙관적 동시성 제어로 충돌 정상 감지\n- [ ] 자동 충돌 해결 기능 80% 이상의 충돌 해결\n- [ ] 트랜잭션 원자성 보장\n\n#### 예상 기간: 4주\n\n---\n\n### 4단계: 고급 기능 통합 (Advanced Features Integration)\n\n#### 목표\n- 캐싱 시스템 도입\n- 장애 격리 및 자동 복구 메커니즘 구현\n- 성능 최적화 기능 적용\n\n#### 주요 작업\n1.", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "583", "text": "#### 예상 기간: 4주\n\n---\n\n### 4단계: 고급 기능 통합 (Advanced Features Integration)\n\n#### 목표\n- 캐싱 시스템 도입\n- 장애 격리 및 자동 복구 메커니즘 구현\n- 성능 최적화 기능 적용\n\n#### 주요 작업\n1. **다단계 캐싱 시스템**\n   ```typescript\n   // 다단계 캐시 관리자\n   export class MultiLevelCacheManager implements CacheProvider {\n     constructor(\n       private l1Cache: MemoryCacheProvider,\n       private l2Cache: RedisCacheProvider,\n       private l3Cache: DatabaseCacheProvider\n     ) {}\n     \n     async get<T>(key: string): Promise<T | null> {\n       // L1 캐시 확인\n       let value = await this.l1Cache.get<T>(key);", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "584", "text": "**다단계 캐싱 시스템**\n   ```typescript\n   // 다단계 캐시 관리자\n   export class MultiLevelCacheManager implements CacheProvider {\n     constructor(\n       private l1Cache: MemoryCacheProvider,\n       private l2Cache: RedisCacheProvider,\n       private l3Cache: DatabaseCacheProvider\n     ) {}\n     \n     async get<T>(key: string): Promise<T | null> {\n       // L1 캐시 확인\n       let value = await this.l1Cache.get<T>(key);\n       if (value !== null) {\n         return value;\n       }\n       \n       // L2 캐시 확인\n       value = await this.l2Cache.get<T>(key);\n       if (value !== null) {\n         // L1 캐시에 저장\n         await this.l1Cache.set(key, value, { ttl: 300 }); // 5분\n         return value;\n       }\n       \n       // L3 캐시 확인\n       value = await this.l3Cache.", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "585", "text": "l1Cache.get<T>(key);\n       if (value !== null) {\n         return value;\n       }\n       \n       // L2 캐시 확인\n       value = await this.l2Cache.get<T>(key);\n       if (value !== null) {\n         // L1 캐시에 저장\n         await this.l1Cache.set(key, value, { ttl: 300 }); // 5분\n         return value;\n       }\n       \n       // L3 캐시 확인\n       value = await this.l3Cache.get<T>(key);\n       if (value !== null) {\n         // 상위 캐시에 저장\n         await this.l2Cache.set(key, value, { ttl: 3600 }); // 1시간\n         await this.l1Cache.set(key, value, { ttl: 300 });\n         return value;\n       }\n       \n       return null;\n     }\n   }\n   ```\n\n2.", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "586", "text": "// 5분\n         return value;\n       }\n       \n       // L3 캐시 확인\n       value = await this.l3Cache.get<T>(key);\n       if (value !== null) {\n         // 상위 캐시에 저장\n         await this.l2Cache.set(key, value, { ttl: 3600 }); // 1시간\n         await this.l1Cache.set(key, value, { ttl: 300 });\n         return value;\n       }\n       \n       return null;\n     }\n   }\n   ```\n\n2. **서킷 브레이커 패턴**\n   ```typescript\n   // 서킷 브레이커 구현\n   export class CircuitBreaker {\n     private state: CircuitState = 'closed';\n     private failureCount = 0;\n     private lastFailureTime?", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "587", "text": ": Date;\n     \n     constructor(\n       private readonly threshold: number = 5,\n       private readonly timeout: number = 60000 // 1분\n     ) {}\n     \n     async execute<T>(operation: () => Promise<T>): Promise<T> {\n       if (this.state === 'open') {\n         if (this.shouldAttemptReset()) {\n           this.state = 'half-open';\n         } else {\n           throw new CircuitBreakerOpenError('Circuit breaker is open');\n         }\n       }\n       \n       try {\n         const result = await operation();\n         this.onSuccess();\n         return result;\n       } catch (error) {\n         this.onFailure();\n         throw error;\n       }\n     }\n     \n     private onSuccess(): void {\n       this.failureCount = 0;\n       this.state = 'closed';\n     }\n     \n     private onFailure(): void {\n       this.failureCount++;\n       this.lastFailureTime = new Date();\n       \n       if (this.failureCount >= this.threshold) {\n         this.state = 'open';\n       }\n     }\n   }\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "588", "text": "3. **자동 복구 시스템**\n   ```typescript\n   // 자동 복구 관리자\n   export class AutoRecoveryManager {\n     constructor(\n       private healthChecker: HealthChecker,\n       private recoveryStrategies: Map<FailureType, RecoveryStrategy>\n     ) {}\n     \n     async handleFailure(failure: SystemFailure): Promise<RecoveryResult> {\n       const strategy = this.recoveryStrategies.get(failure.type);\n       \n       if (!strategy) {\n         return RecoveryResult.manualInterventionRequired(failure);\n       }\n       \n       try {\n         const result = await strategy.execute(failure);\n         \n         if (result.success) {\n           await this.healthChecker.verifyRecovery(failure.component);\n         }\n         \n         return result;\n       } catch (error) {\n         return RecoveryResult.recoveryFailed(failure, error);\n       }\n     }\n   }\n   ```\n\n4.", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "589", "text": "4. **성능 모니터링 최적화**\n   ```typescript\n   // 성능 메트릭 수집기\n   export class PerformanceMetricsCollector {\n     private readonly metrics = new Map<string, Metric[]>();\n     \n     recordOperation(\n       operation: string,\n       duration: number,\n       success: boolean,\n       metadata?: Record<string, any>\n     ): void {\n       const metric: Metric = {\n         operation,\n         duration,\n         success,\n         timestamp: new Date(),\n         metadata\n       };\n       \n       if (!this.metrics.has(operation)) {\n         this.metrics.set(operation, []);\n       }\n       \n       this.metrics.get(operation)!.push(metric);\n       \n       // 성능 임계값 초과 시 알림\n       if (duration > this.getThreshold(operation)) {\n         this.alertSlowOperation(metric);\n       }\n     }\n     \n     getPerformanceReport(operation?: string): PerformanceReport {\n       const data = operation \n         ?", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "590", "text": ": string): PerformanceReport {\n       const data = operation \n         ? this.metrics.get(operation) || []\n         : Array.from(this.metrics.values()).flat();\n       \n       return {\n         totalOperations: data.length,\n         successRate: data.filter(m => m.success).length / data.length,\n         averageDuration: data.reduce((sum, m) => sum + m.duration, 0) / data.length,\n         p95Duration: this.calculatePercentile(data, 0.95),\n         p99Duration: this.calculatePercentile(data, 0.99)\n       };\n     }\n   }\n   ```\n\n#### 성공 기준\n- [ ] 다단계 캐시로 응답 시간 50% 이상 개선\n- [ ] 서킷 브레이커로 연쇄적 장애 방지 확인\n- [ ] 자동 복구 시스템으로 90% 이상의 장애 자동 해결\n- [ ] 성능 모니터링으로 병목 지점 식별 및 해결", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "591", "text": "#### 성공 기준\n- [ ] 다단계 캐시로 응답 시간 50% 이상 개선\n- [ ] 서킷 브레이커로 연쇄적 장애 방지 확인\n- [ ] 자동 복구 시스템으로 90% 이상의 장애 자동 해결\n- [ ] 성능 모니터링으로 병목 지점 식별 및 해결\n\n#### 예상 기간: 3주\n\n---\n\n### 5단계: 전면 전환 및 레거시 제거 (Full Migration)\n\n#### 목표\n- 모든 트래픽을 신규 아키텍처로 전환\n- 레거시 시스템 및 코드 제거\n- 최종 성능 및 안정성 검증\n\n#### 주요 작업\n1.", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "592", "text": "#### 예상 기간: 3주\n\n---\n\n### 5단계: 전면 전환 및 레거시 제거 (Full Migration)\n\n#### 목표\n- 모든 트래픽을 신규 아키텍처로 전환\n- 레거시 시스템 및 코드 제거\n- 최종 성능 및 안정성 검증\n\n#### 주요 작업\n1. **트래픽 점진적 전환**\n   ```typescript\n   // 트래픽 라우터\n   export class TrafficRouter {\n     constructor(\n       private legacySystem: LegacySystem,\n       private newSystem: NewSystem,\n       private trafficSplitter: TrafficSplitter\n     ) {}\n     \n     async routeRequest(request: Request): Promise<Response> {\n       const system = await this.trafficSplitter.determineTarget(request);\n       \n       if (system === 'new') {\n         return await this.newSystem.handle(request);", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "593", "text": "**트래픽 점진적 전환**\n   ```typescript\n   // 트래픽 라우터\n   export class TrafficRouter {\n     constructor(\n       private legacySystem: LegacySystem,\n       private newSystem: NewSystem,\n       private trafficSplitter: TrafficSplitter\n     ) {}\n     \n     async routeRequest(request: Request): Promise<Response> {\n       const system = await this.trafficSplitter.determineTarget(request);\n       \n       if (system === 'new') {\n         return await this.newSystem.handle(request);\n       } else {\n         return await this.legacySystem.handle(request);\n       }\n     }\n   }\n   \n   // 트래픽 분배 전략\n   export class GradualTrafficSplitter implements TrafficSplitter {\n     private newSystemTrafficPercentage = 0;\n     \n     async determineTarget(request: Request): Promise<'legacy' | 'new'> {\n       // 점진적으로 신규 시스템 트래픽 증가\n       if (Math.random() * 100 < this.", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "594", "text": "handle(request);\n       } else {\n         return await this.legacySystem.handle(request);\n       }\n     }\n   }\n   \n   // 트래픽 분배 전략\n   export class GradualTrafficSplitter implements TrafficSplitter {\n     private newSystemTrafficPercentage = 0;\n     \n     async determineTarget(request: Request): Promise<'legacy' | 'new'> {\n       // 점진적으로 신규 시스템 트래픽 증가\n       if (Math.random() * 100 < this.newSystemTrafficPercentage) {\n         return 'new';\n       }\n       \n       return 'legacy';\n     }\n     \n     increaseNewSystemTraffic(percentage: number): void {\n       this.newSystemTrafficPercentage = Math.min(100, \n         this.newSystemTrafficPercentage + percentage);\n     }\n   }\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "595", "text": "}\n   }\n   ```\n\n2. **데이터 최종 동기화**\n   ```typescript\n   // 최종 데이터 동기화\n   export class FinalDataSynchronizer {\n     async performFinalSync(): Promise<SyncResult> {\n       // 1. 레거시 시스템에서 최종 데이터 추출\n       const legacyData = await this.extractLegacyData();\n       \n       // 2. 데이터 무결성 검증\n       const validation = await this.validateData(legacyData);\n       if (!validation.isValid) {\n         throw new DataValidationError(validation.errors);\n       }\n       \n       // 3. 신규 시스템으로 데이터 마이그레이션\n       const migration = await this.migrateToNewSystem(legacyData);\n       \n       // 4. 마이그레이션 결과 검증\n       const verification = await this.verifyMigration(migration);\n       \n       return {\n         success: verification.isValid,\n         migratedRecords: migration.recordCount,\n         errors: verification.errors\n       };\n     }\n   }\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "596", "text": "3. **레거시 코드 제거**\n   ```typescript\n   // 레거시 의존성 제거 스크립트\n   export class LegacyRemovalScript {\n     async removeLegacyComponents(): Promise<void> {\n       // 1. 사용되지 않는 임포트 제거\n       await this.removeUnusedImports();\n       \n       // 2. 레거시 컴포넌트 삭제\n       await this.deleteLegacyComponents();\n       \n       // 3. 레거시 설정 파일 제거\n       await this.removeLegacyConfigs();\n       \n       // 4. 의존성 정리\n       await this.cleanupDependencies();\n     }\n   }\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "597", "text": "4. **최종 시스템 검증**\n   ```typescript\n   // 시스템 통합 테스트\n   export class SystemIntegrationValidator {\n     async validateSystem(): Promise<ValidationResult> {\n       const results: TestResult[] = [];\n       \n       // 기능성 테스트\n       results.push(await this.testFunctionality());\n       \n       // 성능 테스트\n       results.push(await this.testPerformance());\n       \n       // 안정성 테스트\n       results.push(await this.testStability());\n       \n       // 보안 테스트\n       results.push(await this.testSecurity());\n       \n       return this.aggregateResults(results);\n     }\n   }\n   ```", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "598", "text": "#### 성공 기준\n- [ ] 100% 트래픽 신규 아키텍처로 전환\n- [ ] 레거시 시스템 완전히 제거\n- [ ] 모든 기능 정상 작동 확인\n- [ ] 성능 목표(동기화 지연 100ms 이하) 달성\n\n#### 예상 기간: 2주\n\n---\n\n## 롤백 전략\n\n### 1. 단계별 롤백 계획\n\n#### 1단계 롤백\n- **롤백 대상**: 이벤트 저장소, 상태 관리자, 기반 인프라\n- **롤백 방법**: 레거시 시스템으로 즉시 전환\n- **데이터 손실**: 없음", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "599", "text": "#### 예상 기간: 2주\n\n---\n\n## 롤백 전략\n\n### 1. 단계별 롤백 계획\n\n#### 1단계 롤백\n- **롤백 대상**: 이벤트 저장소, 상태 관리자, 기반 인프라\n- **롤백 방법**: 레거시 시스템으로 즉시 전환\n- **데이터 손실**: 없음\n\n#### 2단계 롤백\n- **롤백 대상**: 이벤트 시스템, CQRS 패턴\n- **롤백 방법**: 이벤트 비활성화, 레거시 동기화로 복귀\n- **데이터 손실**: 마이그레이션 기간 동안의 이벤트 로그", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "600", "text": "#### 2단계 롤백\n- **롤백 대상**: 이벤트 시스템, CQRS 패턴\n- **롤백 방법**: 이벤트 비활성화, 레거시 동기화로 복귀\n- **데이터 손실**: 마이그레이션 기간 동안의 이벤트 로그\n\n#### 3단계 롤백\n- **롤백 대상**: MVCC, 동시성 제어\n- **롤백 방법**: 상태 관리를 레거시 방식으로 변경\n- **데이터 손실**: 버전 정보, 충돌 해결 기록", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "601", "text": "#### 3단계 롤백\n- **롤백 대상**: MVCC, 동시성 제어\n- **롤백 방법**: 상태 관리를 레거시 방식으로 변경\n- **데이터 손실**: 버전 정보, 충돌 해결 기록\n\n#### 4단계 롤백\n- **롤백 대상**: 캐싱, 장애 복구, 성능 최적화\n- **롤백 방법**: 기능 비활성화\n- **데이터 손실**: 캐시 데이터, 성능 메트릭\n\n#### 5단계 롤백\n- **롤백 대상**: 전체 시스템\n- **롤백 방법**: 레거시 시스템으로 완전 복귀\n- **데이터 손실**: 마이그레이션된 모든 데이터", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "602", "text": "#### 5단계 롤백\n- **롤백 대상**: 전체 시스템\n- **롤백 방법**: 레거시 시스템으로 완전 복귀\n- **데이터 손실**: 마이그레이션된 모든 데이터\n\n### 2. 롤백 자동화\n\n```typescript\n// 롤백 관리자\nexport class RollbackManager {\n  constructor(\n    private rollbackStrategies: Map<number, RollbackStrategy>,\n    private systemValidator: SystemValidator\n  ) {}\n  \n  async executeRollback(stage: number): Promise<RollbackResult> {\n    const strategy = this.rollbackStrategies.get(stage);\n    \n    if (!strategy) {\n      throw new Error(`No rollback strategy found for stage ${stage}`);\n    }\n    \n    try {\n      // 롤백 전 시스템 상태 저장\n      const beforeRollback = await this.systemValidator.captureState();\n      \n      // 롤백 실행\n      const result = await strategy.", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "603", "text": "RollbackStrategy>,\n    private systemValidator: SystemValidator\n  ) {}\n  \n  async executeRollback(stage: number): Promise<RollbackResult> {\n    const strategy = this.rollbackStrategies.get(stage);\n    \n    if (!strategy) {\n      throw new Error(`No rollback strategy found for stage ${stage}`);\n    }\n    \n    try {\n      // 롤백 전 시스템 상태 저장\n      const beforeRollback = await this.systemValidator.captureState();\n      \n      // 롤백 실행\n      const result = await strategy.execute();\n      \n      // 롤백 후 시스템 상태 검증\n      const afterRollback = await this.systemValidator.validate();\n      \n      if (!afterRollback.isValid) {\n        // 롤백 실패 시 복구 시도\n        await this.recoverFromFailedRollback(beforeRollback);\n        throw new RollbackFailedError('System validation failed after rollback');\n      }\n      \n      return result;\n    } catch (error) {\n      await this.handleRollbackError(stage, error);\n      throw error;", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "604", "text": "execute();\n      \n      // 롤백 후 시스템 상태 검증\n      const afterRollback = await this.systemValidator.validate();\n      \n      if (!afterRollback.isValid) {\n        // 롤백 실패 시 복구 시도\n        await this.recoverFromFailedRollback(beforeRollback);\n        throw new RollbackFailedError('System validation failed after rollback');\n      }\n      \n      return result;\n    } catch (error) {\n      await this.handleRollbackError(stage, error);\n      throw error;\n    }\n  }\n}\n```\n\n## 위험 관리\n\n### 1. 기술적 위험", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "605", "text": "}\n      \n      return result;\n    } catch (error) {\n      await this.handleRollbackError(stage, error);\n      throw error;\n    }\n  }\n}\n```\n\n## 위험 관리\n\n### 1. 기술적 위험\n\n| 위험 | 확률 | 영향 | 완화 전략 |\n|------|------|------|-----------|\n| 데이터 손실 | 중 | 높 | 정기 백업, 롤백 계획, 데이터 무결성 검증 |\n| 성능 저하 | 높 | 중 | 성능 테스트, 점진적 전환, 모니터링 |\n| 호환성 문제 | 중 | 중 | 이중 운영, 호환성 테스트, API 버저닝 |\n| 복잡성 증가 | 높 | 중 | 문서화, 팀 교육, 단순화된 설계 |", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "606", "text": "### 2. 운영적 위험\n\n| 위험 | 확률 | 영향 | 완화 전략 |\n|------|------|------|-----------|\n| 다운타임 | 중 | 높 | 카나리 배포, 블루-그린 배포, 롤백 자동화 |\n| 팀 피로도 | 중 | 중 | 단계적 마이그레이션, 충분한 휴식, 지원 |\n| 지식 부족 | 중 | 중 | 교육 프로그램, 문서화, 멘토링 |\n| 일정 지연 | 높 | 중 | 여유 시간 확보, 우선순위 조정, 자원 추가 |\n\n### 3. 비즈니스 위험", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "607", "text": "### 3. 비즈니스 위험\n\n| 위험 | 확률 | 영향 | 완화 전략 |\n|------|------|------|-----------|\n| 사용자 경험 저하 | 중 | 높 | 사용자 피드백, 점진적 전환, A/B 테스트 |\n| 기능 손실 | 낮 | 높 | 기능 매핑, 테스트, 검증 |\n| 비용 초과 | 중 | 중 | 예산 관리, 우선순위 조정, 단계적 투자 |\n\n## 성공 측정 지표\n\n### 1. 기술적 지표", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "608", "text": "## 성공 측정 지표\n\n### 1. 기술적 지표\n\n| 지표 | 목표 | 측정 방법 |\n|------|------|-----------|\n| 동기화 지연 시간 | 100ms 이하 | 성능 모니터링 |\n| 시스템 가용성 | 99.9% 이상 | 업타임 모니터링 |\n| 충돌 해결률 | 90% 이상 | 충돌 해결 메트릭 |\n| 오류율 | 0.1% 이하 | 에러 로그 분석 |\n\n### 2. 운영적 지표", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "609", "text": "### 2. 운영적 지표\n\n| 지표 | 목표 | 측정 방법 |\n|------|------|-----------|\n| 롤백 횟수 | 2회 이하 | 배포 기록 |\n| 장애 복구 시간 | 5분 이하 | 장애 보고서 |\n| 팀 생산성 | 90% 이상 유지 | 작업 완료율 |\n| 문서 완성도 | 100% | 문서 검토 |\n\n### 3. 비즈니스 지표", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "610", "text": "### 3. 비즈니스 지표\n\n| 지표 | 목표 | 측정 방법 |\n|------|------|-----------|\n| 사용자 만족도 | 4.5/5 이상 | 사용자 설문 |\n| 기능 완성도 | 100% | 기능 목록 대비 |\n| 비용 효율성 | 20% 개선 | 비용 분석 |\n| 시장 경쟁력 | 상위 20% | 시장 조사 |\n\n## 결론", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "611", "text": "## 결론\n\n이 마이그레이션 전략은 ZyFlow 시스템을 안정적으로 새로운 단일 진실 원천 아키텍처로 전환하기 위한 포괄적인 계획입니다. 점진적 접근 방식을 통해 위험을 최소화하고, 각 단계에서 명확한 성공 기준을 설정하여 마이그레이션 과정을 체계적으로 관리할 수 있습니다.\n\n성공적인 마이그레이션을 위해서는 다음 사항들이 중요합니다:", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "612", "text": "성공적인 마이그레이션을 위해서는 다음 사항들이 중요합니다:\n\n1. **철저한 계획과 준비**: 각 단계의 세부 계획과 롤백 전략 수립\n2. **지속적인 모니터링**: 마이그레이션 과정에서의 실시간 상태 모니터링\n3. **유연한 대응**: 예상치 못한 문제에 대한 신속한 대응 능력\n4. **팀 협업**: 개발, 운영, 비즈니스 팀 간의 긴밀한 협력\n\n이 전략을 통해 ZyFlow는 더 안정적이고 확장 가능한 단일 진실 원천 아키텍처를 성공적으로 구축할 수 있을 것입니다.", "metadata": {"file_path": "docs/architecture/migration-strategy.md", "file_name": "migration-strategy.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "613", "text": "# 성능 및 확장성 최적화 방안\n\n## 개요\n\nZyFlow의 단일 진실 원천 아키텍처에서 성능 및 확장성은 시스템의 안정성과 사용자 경험에 직접적인 영향을 미칩니다. 이 설계는 다중 사용자 환경에서의 높은 처리량과 낮은 지연 시간을 보장하면서도 시스템의 수평적 확장을 지원하는 것을 목표로 합니다.\n\n## 성능 목표", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "614", "text": "## 성능 목표\n\n### 1. 응답 시간 목표\n- **API 응답**: 95%의 요청이 100ms 이내에 응답\n- **동기화 작업**: 일반 작업 1초 이내, 대량 작업 10초 이내\n- **쿼리 응답**: 단일 레코드 50ms, 복잡한 쿼리 500ms 이내\n- **이벤트 처리**: 이벤트 발행에서 처리 완료까지 10ms 이내\n\n### 2. 처리량 목표\n- **동시 사용자**: 1,000명 동시 접속 지원\n- **초당 요청**: 10,000 RPS (Requests Per Second)\n- **이벤트 처리**: 100,000 events/second\n- **동기화 작업**: 1,000 concurrent sync operations", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "615", "text": "### 2. 처리량 목표\n- **동시 사용자**: 1,000명 동시 접속 지원\n- **초당 요청**: 10,000 RPS (Requests Per Second)\n- **이벤트 처리**: 100,000 events/second\n- **동기화 작업**: 1,000 concurrent sync operations\n\n### 3. 자원 사용 목표\n- **CPU 사용률**: 평균 60% 이하, 피크 80% 이하\n- **메모리 사용**: 2GB 이내 (단일 인스턴스)\n- **디스크 I/O**: 80% 이하\n- **네트워크 대역폭**: 1Gbps 이내 활용\n\n## 캐싱 전략\n\n### 1. 다단계 캐싱 아키텍처", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "616", "text": "## 캐싱 전략\n\n### 1. 다단계 캐싱 아키텍처\n\n```typescript\ninterface MultiLevelCache {\n  // L1: 인메모리 캐시 (가장 빠른 접근)\n  l1Cache: MemoryCache\n  \n  // L2: 분산 캐시 (Redis 등)\n  l2Cache: DistributedCache\n  \n  // L3: 영속성 캐시 (DB 쿼리 결과)\n  l3Cache: PersistentCache\n}\n\nclass CacheManager {\n  private readonly l1 = new Map<string, CacheEntry>()\n  private readonly l2: RedisClient\n  private readonly l3: DatabaseCache\n  \n  async get<T>(key: string): Promise<T | null> {\n    // L1 캐시 확인\n    const l1Result = await this.getFromL1<T>(key)\n    if (l1Result !== null) {\n      this.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "617", "text": "class CacheManager {\n  private readonly l1 = new Map<string, CacheEntry>()\n  private readonly l2: RedisClient\n  private readonly l3: DatabaseCache\n  \n  async get<T>(key: string): Promise<T | null> {\n    // L1 캐시 확인\n    const l1Result = await this.getFromL1<T>(key)\n    if (l1Result !== null) {\n      this.recordCacheHit('L1')\n      return l1Result\n    }\n    \n    // L2 캐시 확인\n    const l2Result = await this.getFromL2<T>(key)\n    if (l2Result !== null) {\n      // L1에 백필\n      await this.setToL1(key, l2Result, 300) // 5분\n      this.recordCacheHit('L2')\n      return l2Result\n    }\n    \n    // L3 캐시 확인\n    const l3Result = await this.getFromL3<T>(key)\n    if (l3Result !== null) {\n      // L2,", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "618", "text": "getFromL2<T>(key)\n    if (l2Result !== null) {\n      // L1에 백필\n      await this.setToL1(key, l2Result, 300) // 5분\n      this.recordCacheHit('L2')\n      return l2Result\n    }\n    \n    // L3 캐시 확인\n    const l3Result = await this.getFromL3<T>(key)\n    if (l3Result !== null) {\n      // L2, L1에 백필\n      await this.setToL2(key, l3Result, 1800) // 30분\n      await this.setToL1(key, l3Result, 300)\n      this.recordCacheHit('L3')\n      return l3Result\n    }\n    \n    this.recordCacheMiss()\n    return null\n  }\n  \n  async set<T>(key: string, value: T, ttl: number = 3600): Promise<void> {\n    await Promise.all([\n      this.setToL1(key, value, Math.min(ttl, 300)),", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "619", "text": "setToL2(key, l3Result, 1800) // 30분\n      await this.setToL1(key, l3Result, 300)\n      this.recordCacheHit('L3')\n      return l3Result\n    }\n    \n    this.recordCacheMiss()\n    return null\n  }\n  \n  async set<T>(key: string, value: T, ttl: number = 3600): Promise<void> {\n    await Promise.all([\n      this.setToL1(key, value, Math.min(ttl, 300)), // L1은 최대 5분\n      this.setToL2(key, value, ttl),\n      this.setToL3(key, value, ttl)\n    ])\n  }\n  \n  private async invalidatePattern(pattern: string): Promise<void> {\n    // L1 패턴 무효화\n    for (const key of this.l1.keys()) {\n      if (this.matchesPattern(key, pattern)) {\n        this.l1.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "620", "text": "all([\n      this.setToL1(key, value, Math.min(ttl, 300)), // L1은 최대 5분\n      this.setToL2(key, value, ttl),\n      this.setToL3(key, value, ttl)\n    ])\n  }\n  \n  private async invalidatePattern(pattern: string): Promise<void> {\n    // L1 패턴 무효화\n    for (const key of this.l1.keys()) {\n      if (this.matchesPattern(key, pattern)) {\n        this.l1.delete(key)\n      }\n    }\n    \n    // L2 패턴 무효화\n    const l2Keys = await this.l2.keys(pattern)\n    if (l2Keys.length > 0) {\n      await this.l2.del(...l2Keys)\n    }\n    \n    // L3 패턴 무효화\n    await this.l3.invalidatePattern(pattern)\n  }\n}", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "621", "text": "l1.keys()) {\n      if (this.matchesPattern(key, pattern)) {\n        this.l1.delete(key)\n      }\n    }\n    \n    // L2 패턴 무효화\n    const l2Keys = await this.l2.keys(pattern)\n    if (l2Keys.length > 0) {\n      await this.l2.del(...l2Keys)\n    }\n    \n    // L3 패턴 무효화\n    await this.l3.invalidatePattern(pattern)\n  }\n}\n\ninterface CacheEntry {\n  value: unknown\n  expiresAt: number\n  accessCount: number\n  lastAccessed: number\n}\n```\n\n### 2. 지능형 캐시 전략", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "622", "text": "l2.keys(pattern)\n    if (l2Keys.length > 0) {\n      await this.l2.del(...l2Keys)\n    }\n    \n    // L3 패턴 무효화\n    await this.l3.invalidatePattern(pattern)\n  }\n}\n\ninterface CacheEntry {\n  value: unknown\n  expiresAt: number\n  accessCount: number\n  lastAccessed: number\n}\n```\n\n### 2. 지능형 캐시 전략\n\n```typescript\ninterface CacheStrategy {\n  // 캐시 가능성 예측\n  predictCacheability(key: string, data: unknown): CacheabilityScore\n  \n  // TTL 동적 조정\n  calculateOptimalTTL(key: string, accessPattern: AccessPattern): number\n  \n  // 캐시 우선순위 계산\n  calculatePriority(entry: CacheEntry): number\n}\n\nclass IntelligentCacheStrategy implements CacheStrategy {\n  private accessPatterns = new Map<string, AccessPattern>()\n  \n  predictCacheability(key: string,", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "623", "text": "```typescript\ninterface CacheStrategy {\n  // 캐시 가능성 예측\n  predictCacheability(key: string, data: unknown): CacheabilityScore\n  \n  // TTL 동적 조정\n  calculateOptimalTTL(key: string, accessPattern: AccessPattern): number\n  \n  // 캐시 우선순위 계산\n  calculatePriority(entry: CacheEntry): number\n}\n\nclass IntelligentCacheStrategy implements CacheStrategy {\n  private accessPatterns = new Map<string, AccessPattern>()\n  \n  predictCacheability(key: string, data: unknown): CacheabilityScore {\n    const pattern = this.accessPatterns.get(key)\n    if (!pattern) {\n      return { score: 0.5, reason: 'NO_HISTORY' }\n    }\n    \n    let score = 0.5 // 기본 점수\n    \n    // 접근 빈도 기반 점수\n    if (pattern.frequency > 10) { // 하루 10회 이상\n      score += 0.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "624", "text": "AccessPattern>()\n  \n  predictCacheability(key: string, data: unknown): CacheabilityScore {\n    const pattern = this.accessPatterns.get(key)\n    if (!pattern) {\n      return { score: 0.5, reason: 'NO_HISTORY' }\n    }\n    \n    let score = 0.5 // 기본 점수\n    \n    // 접근 빈도 기반 점수\n    if (pattern.frequency > 10) { // 하루 10회 이상\n      score += 0.3\n    }\n    \n    // 접근 규칙성 기반 점수\n    if (pattern.regularity > 0.8) {\n      score += 0.2\n    }\n    \n    // 데이터 크기 기반 점수 (작을수록 높음)\n    const dataSize = this.calculateDataSize(data)\n    if (dataSize < 1024) { // 1KB 미만\n      score += 0.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "625", "text": "3\n    }\n    \n    // 접근 규칙성 기반 점수\n    if (pattern.regularity > 0.8) {\n      score += 0.2\n    }\n    \n    // 데이터 크기 기반 점수 (작을수록 높음)\n    const dataSize = this.calculateDataSize(data)\n    if (dataSize < 1024) { // 1KB 미만\n      score += 0.1\n    } else if (dataSize > 10240) { // 10KB 초과\n      score -= 0.2\n    }\n    \n    // 계산 비용 기반 점수\n    const computeCost = this.estimateComputeCost(key, data)\n    if (computeCost > 100) { // 높은 계산 비용\n      score += 0.2\n    }\n    \n    return {\n      score: Math.max(0, Math.min(1, score)),\n      reason: this.getScoreReason(pattern, dataSize,", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "626", "text": "1\n    } else if (dataSize > 10240) { // 10KB 초과\n      score -= 0.2\n    }\n    \n    // 계산 비용 기반 점수\n    const computeCost = this.estimateComputeCost(key, data)\n    if (computeCost > 100) { // 높은 계산 비용\n      score += 0.2\n    }\n    \n    return {\n      score: Math.max(0, Math.min(1, score)),\n      reason: this.getScoreReason(pattern, dataSize, computeCost)\n    }\n  }\n  \n  calculateOptimalTTL(key: string, pattern: AccessPattern): number {\n    // 접근 패턴 기반 TTL 계산\n    const avgInterval = pattern.averageInterval // 평균 접근 간격\n    const variance = pattern.intervalVariance // 간격 분산\n    \n    // 변동성이 적은 경우: 다음 접근 시간까지\n    if (variance < avgInterval * 0.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "627", "text": "getScoreReason(pattern, dataSize, computeCost)\n    }\n  }\n  \n  calculateOptimalTTL(key: string, pattern: AccessPattern): number {\n    // 접근 패턴 기반 TTL 계산\n    const avgInterval = pattern.averageInterval // 평균 접근 간격\n    const variance = pattern.intervalVariance // 간격 분산\n    \n    // 변동성이 적은 경우: 다음 접근 시간까지\n    if (variance < avgInterval * 0.1) {\n      return Math.max(avgInterval * 2, 300) // 최소 5분\n    }\n    \n    // 변동성이 큰 경우: 평균 간격의 절반\n    return Math.max(avgInterval * 0.5, 60) // 최소 1분\n  }\n}\n\ninterface CacheabilityScore {\n  score: number // 0-1 사이\n  reason: string\n}", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "628", "text": "1) {\n      return Math.max(avgInterval * 2, 300) // 최소 5분\n    }\n    \n    // 변동성이 큰 경우: 평균 간격의 절반\n    return Math.max(avgInterval * 0.5, 60) // 최소 1분\n  }\n}\n\ninterface CacheabilityScore {\n  score: number // 0-1 사이\n  reason: string\n}\n\ninterface AccessPattern {\n  frequency: number // 접근 빈도 (일/시간당)\n  regularity: number // 규칙성 (0-1)\n  averageInterval: number // 평균 접근 간격 (초)\n  intervalVariance: number // 간격 분산\n  lastAccess: number\n}\n```\n\n## 데이터베이스 최적화\n\n### 1. 읽기 최적화", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "629", "text": "interface AccessPattern {\n  frequency: number // 접근 빈도 (일/시간당)\n  regularity: number // 규칙성 (0-1)\n  averageInterval: number // 평균 접근 간격 (초)\n  intervalVariance: number // 간격 분산\n  lastAccess: number\n}\n```\n\n## 데이터베이스 최적화\n\n### 1. 읽기 최적화\n\n```typescript\ninterface ReadOptimization {\n  // 인덱스 전략\n  createOptimalIndexes(): Promise<void>\n  \n  // 쿼리 최적화\n  optimizeQuery(query: string): OptimizedQuery\n  \n  // 파티셔닝 전략\n  partitionStrategy: PartitionStrategy\n}", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "630", "text": "## 데이터베이스 최적화\n\n### 1. 읽기 최적화\n\n```typescript\ninterface ReadOptimization {\n  // 인덱스 전략\n  createOptimalIndexes(): Promise<void>\n  \n  // 쿼리 최적화\n  optimizeQuery(query: string): OptimizedQuery\n  \n  // 파티셔닝 전략\n  partitionStrategy: PartitionStrategy\n}\n\nclass DatabaseReadOptimizer implements ReadOptimization {\n  async createOptimalIndexes(): Promise<void> {\n    // 자주 조회되는 필드에 대한 인덱스 생성\n    const indexes = [\n      // 태스크 조회 최적화\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_tasks_change_id_status ON tasks(change_id, status)',\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_tasks_assignee_status ON tasks(assignee, status) WHERE assignee IS NOT NULL',\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_tasks_created_at ON tasks(created_at DESC)',", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "631", "text": "class DatabaseReadOptimizer implements ReadOptimization {\n  async createOptimalIndexes(): Promise<void> {\n    // 자주 조회되는 필드에 대한 인덱스 생성\n    const indexes = [\n      // 태스크 조회 최적화\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_tasks_change_id_status ON tasks(change_id, status)',\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_tasks_assignee_status ON tasks(assignee, status) WHERE assignee IS NOT NULL',\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_tasks_created_at ON tasks(created_at DESC)',\n      \n      // 이벤트 조회 최적화\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_events_timestamp_type ON events(timestamp, type)',\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_events_aggregate_id_version ON events(aggregate_id, version)',\n      \n      // 동기화 상태 조회 최적화\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_sync_status_change_id ON sync_status(change_id, last_sync)',", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "632", "text": "status) WHERE assignee IS NOT NULL',\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_tasks_created_at ON tasks(created_at DESC)',\n      \n      // 이벤트 조회 최적화\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_events_timestamp_type ON events(timestamp, type)',\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_events_aggregate_id_version ON events(aggregate_id, version)',\n      \n      // 동기화 상태 조회 최적화\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_sync_status_change_id ON sync_status(change_id, last_sync)',\n      \n      // 부분 인덱스 (조건절 자주 사용)\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_tasks_active ON tasks(status) WHERE status IN (\\'todo\\', \\'in-progress\\')'\n    ]\n    \n    for (const indexSql of indexes) {\n      await this.db.execute(indexSql)\n    }\n  }\n  \n  optimizeQuery(query: string): OptimizedQuery {\n    const optimized = {\n      originalQuery: query,\n      optimizedQuery: query,\n      optimizations: [] as string[],", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "633", "text": "last_sync)',\n      \n      // 부분 인덱스 (조건절 자주 사용)\n      'CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_tasks_active ON tasks(status) WHERE status IN (\\'todo\\', \\'in-progress\\')'\n    ]\n    \n    for (const indexSql of indexes) {\n      await this.db.execute(indexSql)\n    }\n  }\n  \n  optimizeQuery(query: string): OptimizedQuery {\n    const optimized = {\n      originalQuery: query,\n      optimizedQuery: query,\n      optimizations: [] as string[],\n      estimatedImprovement: 0\n    }\n    \n    // 1. SELECT * 제거\n    if (query.includes('SELECT *')) {\n      optimized.optimizedQuery = query.replace(/SELECT \\*/g, 'SELECT id, title, status, priority, created_at, updated_at')\n      optimized.optimizations.push('Replaced SELECT * with specific columns')\n      optimized.estimatedImprovement += 20\n    }\n    \n    // 2.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "634", "text": "optimizedQuery: query,\n      optimizations: [] as string[],\n      estimatedImprovement: 0\n    }\n    \n    // 1. SELECT * 제거\n    if (query.includes('SELECT *')) {\n      optimized.optimizedQuery = query.replace(/SELECT \\*/g, 'SELECT id, title, status, priority, created_at, updated_at')\n      optimized.optimizations.push('Replaced SELECT * with specific columns')\n      optimized.estimatedImprovement += 20\n    }\n    \n    // 2. LIMIT 추가 (없는 경우)\n    if (!query.includes('LIMIT') && query.includes('SELECT')) {\n      optimized.optimizedQuery += ' LIMIT 1000'\n      optimized.optimizations.push('Added LIMIT clause')\n      optimized.estimatedImprovement += 15\n    }\n    \n    // 3.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "635", "text": "LIMIT 추가 (없는 경우)\n    if (!query.includes('LIMIT') && query.includes('SELECT')) {\n      optimized.optimizedQuery += ' LIMIT 1000'\n      optimized.optimizations.push('Added LIMIT clause')\n      optimized.estimatedImprovement += 15\n    }\n    \n    // 3. 서브쿼리 최적화\n    if (query.includes('IN (SELECT')) {\n      optimized.optimizedQuery = this.optimizeSubquery(optimized.optimizedQuery)\n      optimized.optimizations.push('Optimized subquery to JOIN')\n      optimized.estimatedImprovement += 30\n    }\n    \n    return optimized\n  }\n  \n  private optimizeSubquery(query: string): string {\n    // IN (SELECT ...)을 JOIN으로 변환\n    return query.replace(\n      /IN \\((SELECT.*?)\\)/g,\n      'EXISTS ($1)'\n    )\n  }\n}\n\ninterface OptimizedQuery {\n  originalQuery: string\n  optimizedQuery: string\n  optimizations: string[]\n  estimatedImprovement: number // % 향상 예상\n}", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "636", "text": ")\\)/g,\n      'EXISTS ($1)'\n    )\n  }\n}\n\ninterface OptimizedQuery {\n  originalQuery: string\n  optimizedQuery: string\n  optimizations: string[]\n  estimatedImprovement: number // % 향상 예상\n}\n\ninterface PartitionStrategy {\n  // 시간 기반 파티셔닝\n  timeBasedPartitioning: {\n    table: string\n    column: string\n    interval: 'daily' | 'weekly' | 'monthly'\n  }\n  \n  // 해시 기반 파티셔닝\n  hashBasedPartitioning: {\n    table: string\n    column: string\n    partitions: number\n  }\n}\n```\n\n### 2. 쓰기 최적화", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "637", "text": "interface PartitionStrategy {\n  // 시간 기반 파티셔닝\n  timeBasedPartitioning: {\n    table: string\n    column: string\n    interval: 'daily' | 'weekly' | 'monthly'\n  }\n  \n  // 해시 기반 파티셔닝\n  hashBasedPartitioning: {\n    table: string\n    column: string\n    partitions: number\n  }\n}\n```\n\n### 2. 쓰기 최적화\n\n```typescript\ninterface WriteOptimization {\n  // 배치 쓰기\n  batchWrite(operations: WriteOperation[]): Promise<BatchResult>\n  \n  // 비동기 쓰기 큐\n  queueWrite(operation: WriteOperation): Promise<void>\n  \n  // 쓰기 버퍼링\n  bufferWrites(bufferSize: number, flushInterval: number): void\n}\n\nclass DatabaseWriteOptimizer implements WriteOptimization {\n  private writeQueue: WriteOperation[] = []\n  private batchBuffer: WriteOperation[] = []\n  private flushTimer?: NodeJS.Timeout\n  \n  constructor(\n    private db: Database,", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "638", "text": "class DatabaseWriteOptimizer implements WriteOptimization {\n  private writeQueue: WriteOperation[] = []\n  private batchBuffer: WriteOperation[] = []\n  private flushTimer?: NodeJS.Timeout\n  \n  constructor(\n    private db: Database,\n    private batchSize = 100,\n    private flushInterval = 1000\n  ) {\n    this.startFlushTimer()\n  }\n  \n  async batchWrite(operations: WriteOperation[]): Promise<BatchResult> {\n    const transactions = this.groupByTransaction(operations)\n    const results: BatchResult = {\n      totalOperations: operations.length,\n      successfulOperations: 0,\n      failedOperations: 0,\n      errors: []\n    }\n    \n    for (const [transactionId, txOperations] of transactions) {\n      try {\n        await this.db.transaction(async (trx) => {\n          for (const operation of txOperations) {\n            await this.executeOperation(trx, operation)\n          }\n        })\n        \n        results.successfulOperations += txOperations.length\n      } catch (error) {\n        results.failedOperations += txOperations.length\n        results.errors.push({\n          transactionId,", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "639", "text": "length,\n      successfulOperations: 0,\n      failedOperations: 0,\n      errors: []\n    }\n    \n    for (const [transactionId, txOperations] of transactions) {\n      try {\n        await this.db.transaction(async (trx) => {\n          for (const operation of txOperations) {\n            await this.executeOperation(trx, operation)\n          }\n        })\n        \n        results.successfulOperations += txOperations.length\n      } catch (error) {\n        results.failedOperations += txOperations.length\n        results.errors.push({\n          transactionId,\n          error: error.message,\n          operations: txOperations\n        })\n      }\n    }\n    \n    return results\n  }\n  \n  async queueWrite(operation: WriteOperation): Promise<void> {\n    this.writeQueue.push(operation)\n    \n    if (this.writeQueue.length >= this.batchSize) {\n      await this.flushQueue()\n    }\n  }\n  \n  private async flushQueue(): Promise<void> {\n    if (this.writeQueue.length === 0) return\n    \n    const operations = [...this.writeQueue]\n    this.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "640", "text": "errors.push({\n          transactionId,\n          error: error.message,\n          operations: txOperations\n        })\n      }\n    }\n    \n    return results\n  }\n  \n  async queueWrite(operation: WriteOperation): Promise<void> {\n    this.writeQueue.push(operation)\n    \n    if (this.writeQueue.length >= this.batchSize) {\n      await this.flushQueue()\n    }\n  }\n  \n  private async flushQueue(): Promise<void> {\n    if (this.writeQueue.length === 0) return\n    \n    const operations = [...this.writeQueue]\n    this.writeQueue = []\n    \n    try {\n      await this.batchWrite(operations)\n    } catch (error) {\n      console.error('Batch write failed:', error)\n      // 실패한 작업을 다시 큐에 추가 (재시도 로직)\n      this.writeQueue.unshift(...operations)\n    }\n  }\n  \n  private startFlushTimer(): void {\n    this.flushTimer = setInterval(async () => {\n      await this.flushQueue()\n    }, this.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "641", "text": "length === 0) return\n    \n    const operations = [...this.writeQueue]\n    this.writeQueue = []\n    \n    try {\n      await this.batchWrite(operations)\n    } catch (error) {\n      console.error('Batch write failed:', error)\n      // 실패한 작업을 다시 큐에 추가 (재시도 로직)\n      this.writeQueue.unshift(...operations)\n    }\n  }\n  \n  private startFlushTimer(): void {\n    this.flushTimer = setInterval(async () => {\n      await this.flushQueue()\n    }, this.flushInterval)\n  }\n  \n  private groupByTransaction(operations: WriteOperation[]): Map<string, WriteOperation[]> {\n    const groups = new Map<string, WriteOperation[]>()\n    \n    for (const operation of operations) {\n      const transactionId = operation.transactionId || 'default'\n      \n      if (!groups.has(transactionId)) {\n        groups.set(transactionId, [])\n      }\n      \n      groups.get(transactionId)!.push(operation)\n    }\n    \n    return groups\n  }\n}", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "642", "text": "flushTimer = setInterval(async () => {\n      await this.flushQueue()\n    }, this.flushInterval)\n  }\n  \n  private groupByTransaction(operations: WriteOperation[]): Map<string, WriteOperation[]> {\n    const groups = new Map<string, WriteOperation[]>()\n    \n    for (const operation of operations) {\n      const transactionId = operation.transactionId || 'default'\n      \n      if (!groups.has(transactionId)) {\n        groups.set(transactionId, [])\n      }\n      \n      groups.get(transactionId)!.push(operation)\n    }\n    \n    return groups\n  }\n}\n\ninterface WriteOperation {\n  type: 'INSERT' | 'UPDATE' | 'DELETE'\n  table: string\n  data: Record<string, unknown>\n  condition?: string\n  transactionId?: string\n}\n\ninterface BatchResult {\n  totalOperations: number\n  successfulOperations: number\n  failedOperations: number\n  errors: Array<{\n    transactionId: string\n    error: string\n    operations: WriteOperation[]\n  }>\n}\n```\n\n## 이벤트 처리 최적화\n\n### 1. 이벤트 배치 처리", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "643", "text": "push(operation)\n    }\n    \n    return groups\n  }\n}\n\ninterface WriteOperation {\n  type: 'INSERT' | 'UPDATE' | 'DELETE'\n  table: string\n  data: Record<string, unknown>\n  condition?: string\n  transactionId?: string\n}\n\ninterface BatchResult {\n  totalOperations: number\n  successfulOperations: number\n  failedOperations: number\n  errors: Array<{\n    transactionId: string\n    error: string\n    operations: WriteOperation[]\n  }>\n}\n```\n\n## 이벤트 처리 최적화\n\n### 1. 이벤트 배치 처리\n\n```typescript\ninterface EventBatchProcessor {\n  // 이벤트 배치 처리\n  processBatch(events: DomainEvent[]): Promise<BatchProcessResult>\n  \n  // 병렬 처리\n  processParallel(events: DomainEvent[], concurrency: number): Promise<BatchProcessResult>\n  \n  // 스트리밍 처리\n  processStream(eventStream: AsyncIterable<DomainEvent>): Promise<void>\n}", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "644", "text": "## 이벤트 처리 최적화\n\n### 1. 이벤트 배치 처리\n\n```typescript\ninterface EventBatchProcessor {\n  // 이벤트 배치 처리\n  processBatch(events: DomainEvent[]): Promise<BatchProcessResult>\n  \n  // 병렬 처리\n  processParallel(events: DomainEvent[], concurrency: number): Promise<BatchProcessResult>\n  \n  // 스트리밍 처리\n  processStream(eventStream: AsyncIterable<DomainEvent>): Promise<void>\n}\n\nclass HighPerformanceEventProcessor implements EventBatchProcessor {\n  private readonly maxBatchSize = 1000\n  private readonly maxConcurrency = 10\n  \n  async processBatch(events: DomainEvent[]): Promise<BatchProcessResult> {\n    const startTime = Date.now()\n    const result: BatchProcessResult = {\n      totalEvents: events.length,\n      processedEvents: 0,\n      failedEvents: 0,\n      errors: [],\n      duration: 0\n    }\n    \n    // 이벤트 타입별로 그룹화\n    const groupedEvents = this.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "645", "text": "class HighPerformanceEventProcessor implements EventBatchProcessor {\n  private readonly maxBatchSize = 1000\n  private readonly maxConcurrency = 10\n  \n  async processBatch(events: DomainEvent[]): Promise<BatchProcessResult> {\n    const startTime = Date.now()\n    const result: BatchProcessResult = {\n      totalEvents: events.length,\n      processedEvents: 0,\n      failedEvents: 0,\n      errors: [],\n      duration: 0\n    }\n    \n    // 이벤트 타입별로 그룹화\n    const groupedEvents = this.groupByEventType(events)\n    \n    // 그룹별 병렬 처리\n    const groupPromises = Array.from(groupedEvents.entries()).map(\n      ([eventType, groupEvents]) => \n        this.processEventGroup(eventType, groupEvents)\n    )\n    \n    const groupResults = await Promise.allSettled(groupPromises)\n    \n    for (const groupResult of groupResults) {\n      if (groupResult.status === 'fulfilled') {\n        result.processedEvents += groupResult.value.processedEvents\n        result.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "646", "text": "groupByEventType(events)\n    \n    // 그룹별 병렬 처리\n    const groupPromises = Array.from(groupedEvents.entries()).map(\n      ([eventType, groupEvents]) => \n        this.processEventGroup(eventType, groupEvents)\n    )\n    \n    const groupResults = await Promise.allSettled(groupPromises)\n    \n    for (const groupResult of groupResults) {\n      if (groupResult.status === 'fulfilled') {\n        result.processedEvents += groupResult.value.processedEvents\n        result.failedEvents += groupResult.value.failedEvents\n        result.errors.push(...groupResult.value.errors)\n      } else {\n        result.errors.push({\n          error: groupResult.reason.message,\n          events: []\n        })\n      }\n    }\n    \n    result.duration = Date.now() - startTime\n    return result\n  }\n  \n  async processParallel(\n    events: DomainEvent[], \n    concurrency: number = this.maxConcurrency\n  ): Promise<BatchProcessResult> {\n    const chunks = this.chunkArray(events, Math.ceil(events.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "647", "text": "failedEvents += groupResult.value.failedEvents\n        result.errors.push(...groupResult.value.errors)\n      } else {\n        result.errors.push({\n          error: groupResult.reason.message,\n          events: []\n        })\n      }\n    }\n    \n    result.duration = Date.now() - startTime\n    return result\n  }\n  \n  async processParallel(\n    events: DomainEvent[], \n    concurrency: number = this.maxConcurrency\n  ): Promise<BatchProcessResult> {\n    const chunks = this.chunkArray(events, Math.ceil(events.length / concurrency))\n    \n    const chunkPromises = chunks.map(chunk => \n      this.processBatch(chunk)\n    )\n    \n    const chunkResults = await Promise.allSettled(chunkPromises)\n    \n    return this.aggregateChunkResults(chunkResults)\n  }\n  \n  private async processEventGroup(\n    eventType: string, \n    events: DomainEvent[]\n  ): Promise<BatchProcessResult> {\n    const handler = this.getEventHandler(eventType)\n    if (!handler) {\n      return {\n        totalEvents: events.length,", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "648", "text": "chunkArray(events, Math.ceil(events.length / concurrency))\n    \n    const chunkPromises = chunks.map(chunk => \n      this.processBatch(chunk)\n    )\n    \n    const chunkResults = await Promise.allSettled(chunkPromises)\n    \n    return this.aggregateChunkResults(chunkResults)\n  }\n  \n  private async processEventGroup(\n    eventType: string, \n    events: DomainEvent[]\n  ): Promise<BatchProcessResult> {\n    const handler = this.getEventHandler(eventType)\n    if (!handler) {\n      return {\n        totalEvents: events.length,\n        processedEvents: 0,\n        failedEvents: events.length,\n        errors: [{ error: `No handler for event type: ${eventType}`, events }],\n        duration: 0\n      }\n    }\n    \n    try {\n      // 이벤트 핸들러 최적화된 실행\n      return await handler.processOptimized(events)\n    } catch (error) {\n      return {\n        totalEvents: events.length,\n        processedEvents: 0,\n        failedEvents: events.length,\n        errors: [{ error: error.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "649", "text": "length,\n        processedEvents: 0,\n        failedEvents: events.length,\n        errors: [{ error: `No handler for event type: ${eventType}`, events }],\n        duration: 0\n      }\n    }\n    \n    try {\n      // 이벤트 핸들러 최적화된 실행\n      return await handler.processOptimized(events)\n    } catch (error) {\n      return {\n        totalEvents: events.length,\n        processedEvents: 0,\n        failedEvents: events.length,\n        errors: [{ error: error.message, events }],\n        duration: 0\n      }\n    }\n  }\n}\n\ninterface BatchProcessResult {\n  totalEvents: number\n  processedEvents: number\n  failedEvents: number\n  errors: Array<{\n    error: string\n    events: DomainEvent[]\n  }>\n  duration: number\n}\n```\n\n### 2. 이벤트 스트리밍", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "650", "text": "length,\n        processedEvents: 0,\n        failedEvents: events.length,\n        errors: [{ error: error.message, events }],\n        duration: 0\n      }\n    }\n  }\n}\n\ninterface BatchProcessResult {\n  totalEvents: number\n  processedEvents: number\n  failedEvents: number\n  errors: Array<{\n    error: string\n    events: DomainEvent[]\n  }>\n  duration: number\n}\n```\n\n### 2. 이벤트 스트리밍\n\n```typescript\ninterface EventStreamProcessor {\n  // 스트리밍 처리 시작\n  startProcessing(config: StreamConfig): Promise<void>\n  \n  // 백프레처 관리\n  manageBackpressure(): Promise<void>\n  \n  // 스트림 상태 모니터링\n  getStreamMetrics(): StreamMetrics\n}\n\nclass BackpressureAwareEventProcessor implements EventStreamProcessor {\n  private eventQueue: DomainEvent[] = []\n  private processing = false\n  private metrics: StreamMetrics\n  \n  constructor(private maxQueueSize = 10000) {\n    this.metrics = this.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "651", "text": "class BackpressureAwareEventProcessor implements EventStreamProcessor {\n  private eventQueue: DomainEvent[] = []\n  private processing = false\n  private metrics: StreamMetrics\n  \n  constructor(private maxQueueSize = 10000) {\n    this.metrics = this.initializeMetrics()\n  }\n  \n  async startProcessing(config: StreamConfig): Promise<void> {\n    // 이벤트 스트림 구독\n    const eventStream = this.createEventStream(config.filter)\n    \n    for await (const event of eventStream) {\n      // 백프레처 확인\n      if (this.eventQueue.length >= this.maxQueueSize) {\n        await this.handleBackpressure()\n      }\n      \n      this.eventQueue.push(event)\n      this.metrics.eventsQueued++\n      \n      // 비동기 처리 시작\n      if (!this.processing) {\n        this.processQueue().catch(error => {\n          console.error('Queue processing error:', error)\n        })\n      }\n    }\n  }\n  \n  private async processQueue(): Promise<void> {\n    if (this.processing) return\n    \n    this.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "652", "text": "eventQueue.length >= this.maxQueueSize) {\n        await this.handleBackpressure()\n      }\n      \n      this.eventQueue.push(event)\n      this.metrics.eventsQueued++\n      \n      // 비동기 처리 시작\n      if (!this.processing) {\n        this.processQueue().catch(error => {\n          console.error('Queue processing error:', error)\n        })\n      }\n    }\n  }\n  \n  private async processQueue(): Promise<void> {\n    if (this.processing) return\n    \n    this.processing = true\n    \n    while (this.eventQueue.length > 0) {\n      const batchSize = Math.min(this.eventQueue.length, 100)\n      const batch = this.eventQueue.splice(0, batchSize)\n      \n      try {\n        const result = await this.processBatch(batch)\n        this.updateMetrics(result)\n      } catch (error) {\n        console.error('Batch processing error:', error)\n        this.metrics.processingErrors++\n      }\n    }\n    \n    this.processing = false\n  }\n  \n  private async handleBackpressure(): Promise<void> {\n    this.metrics.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "653", "text": "eventQueue.length > 0) {\n      const batchSize = Math.min(this.eventQueue.length, 100)\n      const batch = this.eventQueue.splice(0, batchSize)\n      \n      try {\n        const result = await this.processBatch(batch)\n        this.updateMetrics(result)\n      } catch (error) {\n        console.error('Batch processing error:', error)\n        this.metrics.processingErrors++\n      }\n    }\n    \n    this.processing = false\n  }\n  \n  private async handleBackpressure(): Promise<void> {\n    this.metrics.backpressureEvents++\n    \n    // 1. 큐 크기 줄이기\n    if (this.eventQueue.length > this.maxQueueSize * 0.9) {\n      const dropCount = Math.floor(this.eventQueue.length * 0.1)\n      this.eventQueue.splice(0, dropCount)\n      this.metrics.eventsDropped += dropCount\n    }\n    \n    // 2. 처리 속도 조절\n    await this.sleep(100) // 100ms 대기\n    \n    // 3.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "654", "text": "metrics.backpressureEvents++\n    \n    // 1. 큐 크기 줄이기\n    if (this.eventQueue.length > this.maxQueueSize * 0.9) {\n      const dropCount = Math.floor(this.eventQueue.length * 0.1)\n      this.eventQueue.splice(0, dropCount)\n      this.metrics.eventsDropped += dropCount\n    }\n    \n    // 2. 처리 속도 조절\n    await this.sleep(100) // 100ms 대기\n    \n    // 3. 경고 로그\n    console.warn(`Event queue backpressure: ${this.eventQueue.length} events queued`)\n  }\n  \n  private updateMetrics(result: BatchProcessResult): void {\n    this.metrics.eventsProcessed += result.processedEvents\n    this.metrics.eventsFailed += result.failedEvents\n    this.metrics.averageProcessingTime = \n      (this.metrics.averageProcessingTime + result.duration) / 2\n  }\n}\n\ninterface StreamConfig {\n  filter?: EventFilter\n  batchSize?: number\n  maxConcurrency?: number\n}", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "655", "text": "경고 로그\n    console.warn(`Event queue backpressure: ${this.eventQueue.length} events queued`)\n  }\n  \n  private updateMetrics(result: BatchProcessResult): void {\n    this.metrics.eventsProcessed += result.processedEvents\n    this.metrics.eventsFailed += result.failedEvents\n    this.metrics.averageProcessingTime = \n      (this.metrics.averageProcessingTime + result.duration) / 2\n  }\n}\n\ninterface StreamConfig {\n  filter?: EventFilter\n  batchSize?: number\n  maxConcurrency?: number\n}\n\ninterface StreamMetrics {\n  eventsQueued: number\n  eventsProcessed: number\n  eventsFailed: number\n  eventsDropped: number\n  backpressureEvents: number\n  processingErrors: number\n  averageProcessingTime: number\n  queueSize: number\n}\n```\n\n## 수평적 확장\n\n### 1. 마이크로서비스 아키텍처", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "656", "text": "interface StreamConfig {\n  filter?: EventFilter\n  batchSize?: number\n  maxConcurrency?: number\n}\n\ninterface StreamMetrics {\n  eventsQueued: number\n  eventsProcessed: number\n  eventsFailed: number\n  eventsDropped: number\n  backpressureEvents: number\n  processingErrors: number\n  averageProcessingTime: number\n  queueSize: number\n}\n```\n\n## 수평적 확장\n\n### 1. 마이크로서비스 아키텍처\n\n```typescript\ninterface ServiceRegistry {\n  // 서비스 등록\n  registerService(service: ServiceInfo): Promise<void>\n  \n  // 서비스 발견\n  discoverServices(serviceType: string): Promise<ServiceInfo[]>\n  \n  // 로드 밸런싱\n  selectService(serviceType: string, strategy: LoadBalancingStrategy): Promise<ServiceInfo | null>\n}\n\nclass MicroserviceRegistry implements ServiceRegistry {\n  private services = new Map<string, ServiceInfo[]>()\n  private healthChecks = new Map<string,", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "657", "text": "```typescript\ninterface ServiceRegistry {\n  // 서비스 등록\n  registerService(service: ServiceInfo): Promise<void>\n  \n  // 서비스 발견\n  discoverServices(serviceType: string): Promise<ServiceInfo[]>\n  \n  // 로드 밸런싱\n  selectService(serviceType: string, strategy: LoadBalancingStrategy): Promise<ServiceInfo | null>\n}\n\nclass MicroserviceRegistry implements ServiceRegistry {\n  private services = new Map<string, ServiceInfo[]>()\n  private healthChecks = new Map<string, HealthCheck>()\n  \n  async registerService(service: ServiceInfo): Promise<void> {\n    if (!this.services.has(service.type)) {\n      this.services.set(service.type, [])\n    }\n    \n    this.services.get(service.type)!.push(service)\n    \n    // 헬스체크 시작\n    this.startHealthCheck(service)\n  }\n  \n  async discoverServices(serviceType: string): Promise<ServiceInfo[]> {\n    const services = this.services.get(serviceType) || []\n    return services.filter(service => this.isHealthy(service.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "658", "text": "HealthCheck>()\n  \n  async registerService(service: ServiceInfo): Promise<void> {\n    if (!this.services.has(service.type)) {\n      this.services.set(service.type, [])\n    }\n    \n    this.services.get(service.type)!.push(service)\n    \n    // 헬스체크 시작\n    this.startHealthCheck(service)\n  }\n  \n  async discoverServices(serviceType: string): Promise<ServiceInfo[]> {\n    const services = this.services.get(serviceType) || []\n    return services.filter(service => this.isHealthy(service.id))\n  }\n  \n  async selectService(\n    serviceType: string, \n    strategy: LoadBalancingStrategy = 'ROUND_ROBIN'\n  ): Promise<ServiceInfo | null> {\n    const healthyServices = await this.discoverServices(serviceType)\n    \n    if (healthyServices.length === 0) {\n      return null\n    }\n    \n    switch (strategy) {\n      case 'ROUND_ROBIN':\n        return this.roundRobinSelect(healthyServices)\n      case 'LEAST_CONNECTIONS':\n        return this.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "659", "text": "get(serviceType) || []\n    return services.filter(service => this.isHealthy(service.id))\n  }\n  \n  async selectService(\n    serviceType: string, \n    strategy: LoadBalancingStrategy = 'ROUND_ROBIN'\n  ): Promise<ServiceInfo | null> {\n    const healthyServices = await this.discoverServices(serviceType)\n    \n    if (healthyServices.length === 0) {\n      return null\n    }\n    \n    switch (strategy) {\n      case 'ROUND_ROBIN':\n        return this.roundRobinSelect(healthyServices)\n      case 'LEAST_CONNECTIONS':\n        return this.leastConnectionsSelect(healthyServices)\n      case 'WEIGHTED_RESPONSE_TIME':\n        return this.weightedResponseTimeSelect(healthyServices)\n      default:\n        return healthyServices[0]\n    }\n  }\n  \n  private roundRobinSelect(services: ServiceInfo[]): ServiceInfo {\n    const index = Math.floor(Math.random() * services.length)\n    return services[index]\n  }\n  \n  private leastConnectionsSelect(services: ServiceInfo[]): ServiceInfo {\n    return services.reduce((min, current) => \n      current.connections < min.connections ?", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "660", "text": "leastConnectionsSelect(healthyServices)\n      case 'WEIGHTED_RESPONSE_TIME':\n        return this.weightedResponseTimeSelect(healthyServices)\n      default:\n        return healthyServices[0]\n    }\n  }\n  \n  private roundRobinSelect(services: ServiceInfo[]): ServiceInfo {\n    const index = Math.floor(Math.random() * services.length)\n    return services[index]\n  }\n  \n  private leastConnectionsSelect(services: ServiceInfo[]): ServiceInfo {\n    return services.reduce((min, current) => \n      current.connections < min.connections ? current : min\n    )\n  }\n  \n  private weightedResponseTimeSelect(services: ServiceInfo[]): ServiceInfo {\n    const totalWeight = services.reduce((sum, service) => \n      sum + (1 / service.averageResponseTime), 0\n    )\n    \n    let random = Math.random() * totalWeight\n    \n    for (const service of services) {\n      random -= 1 / service.averageResponseTime\n      if (random <= 0) {\n        return service\n      }\n    }\n    \n    return services[0]\n  }\n}", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "661", "text": "current) => \n      current.connections < min.connections ? current : min\n    )\n  }\n  \n  private weightedResponseTimeSelect(services: ServiceInfo[]): ServiceInfo {\n    const totalWeight = services.reduce((sum, service) => \n      sum + (1 / service.averageResponseTime), 0\n    )\n    \n    let random = Math.random() * totalWeight\n    \n    for (const service of services) {\n      random -= 1 / service.averageResponseTime\n      if (random <= 0) {\n        return service\n      }\n    }\n    \n    return services[0]\n  }\n}\n\ninterface ServiceInfo {\n  id: string\n  type: string\n  host: string\n  port: number\n  connections: number\n  averageResponseTime: number\n  lastHealthCheck: number\n  metadata: Record<string, unknown>\n}\n\ntype LoadBalancingStrategy = 'ROUND_ROBIN' | 'LEAST_CONNECTIONS' | 'WEIGHTED_RESPONSE_TIME'\n```\n\n### 2. 데이터 파티셔닝", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "662", "text": "interface ServiceInfo {\n  id: string\n  type: string\n  host: string\n  port: number\n  connections: number\n  averageResponseTime: number\n  lastHealthCheck: number\n  metadata: Record<string, unknown>\n}\n\ntype LoadBalancingStrategy = 'ROUND_ROBIN' | 'LEAST_CONNECTIONS' | 'WEIGHTED_RESPONSE_TIME'\n```\n\n### 2. 데이터 파티셔닝\n\n```typescript\ninterface DataPartitioning {\n  // 파티셔닝 전략\n  getPartitionKey(data: Record<string, unknown>): string\n  \n  // 파티션 라우팅\n  routeToPartition(partitionKey: string): Promise<PartitionInfo>\n  \n  // 파티션 재균형\n  rebalancePartitions(): Promise<void>\n}\n\nclass ConsistentHashPartitioning implements DataPartitioning {\n  private ring: ConsistentHashRing\n  private partitions = new Map<string, PartitionInfo>()\n  \n  constructor(partitions: PartitionInfo[]) {\n    this.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "663", "text": "class ConsistentHashPartitioning implements DataPartitioning {\n  private ring: ConsistentHashRing\n  private partitions = new Map<string, PartitionInfo>()\n  \n  constructor(partitions: PartitionInfo[]) {\n    this.initializeRing(partitions)\n  }\n  \n  getPartitionKey(data: Record<string, unknown>): string {\n    // 해시 키 생성 전략\n    if (data.changeId) {\n      return data.changeId as string\n    }\n    \n    if (data.taskId) {\n      return data.taskId as string\n    }\n    \n    if (data.userId) {\n      return data.userId as string\n    }\n    \n    // 기본 해시\n    return this.hashObject(data)\n  }\n  \n  async routeToPartition(partitionKey: string): Promise<PartitionInfo> {\n    const partitionId = this.ring.getNode(partitionKey)\n    const partition = this.partitions.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "664", "text": "changeId) {\n      return data.changeId as string\n    }\n    \n    if (data.taskId) {\n      return data.taskId as string\n    }\n    \n    if (data.userId) {\n      return data.userId as string\n    }\n    \n    // 기본 해시\n    return this.hashObject(data)\n  }\n  \n  async routeToPartition(partitionKey: string): Promise<PartitionInfo> {\n    const partitionId = this.ring.getNode(partitionKey)\n    const partition = this.partitions.get(partitionId)\n    \n    if (!partition) {\n      throw new Error(`Partition not found: ${partitionId}`)\n    }\n    \n    return partition\n  }\n  \n  async rebalancePartitions(): Promise<void> {\n    const currentLoad = await this.measurePartitionLoad()\n    const imbalancedPartitions = this.detectImbalance(currentLoad)\n    \n    if (imbalancedPartitions.length > 0) {\n      await this.redistributeData(imbalancedPartitions)\n    }\n  }\n  \n  private initializeRing(partitions: PartitionInfo[]): void {\n    this.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "665", "text": "partitions.get(partitionId)\n    \n    if (!partition) {\n      throw new Error(`Partition not found: ${partitionId}`)\n    }\n    \n    return partition\n  }\n  \n  async rebalancePartitions(): Promise<void> {\n    const currentLoad = await this.measurePartitionLoad()\n    const imbalancedPartitions = this.detectImbalance(currentLoad)\n    \n    if (imbalancedPartitions.length > 0) {\n      await this.redistributeData(imbalancedPartitions)\n    }\n  }\n  \n  private initializeRing(partitions: PartitionInfo[]): void {\n    this.ring = new ConsistentHashRing()\n    \n    for (const partition of partitions) {\n      this.ring.addNode(partition.id, partition.weight || 1)\n      this.partitions.set(partition.id, partition)\n    }\n  }\n}\n\ninterface PartitionInfo {\n  id: string\n  host: string\n  port: number\n  weight?: number\n  currentLoad?: number\n  maxCapacity?: number\n}", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "666", "text": "id, partition)\n    }\n  }\n}\n\ninterface PartitionInfo {\n  id: string\n  host: string\n  port: number\n  weight?: number\n  currentLoad?: number\n  maxCapacity?: number\n}\n\nclass ConsistentHashRing {\n  private ring: number[] = []\n  private nodes = new Map<number, string>()\n  \n  addNode(nodeId: string, weight: number = 1): void {\n    for (let i = 0; i < weight; i++) {\n      const key = this.hash(`${nodeId}:${i}`)\n      this.ring.push(key)\n      this.nodes.set(key, nodeId)\n    }\n    \n    this.ring.sort((a, b) => a - b)\n  }\n  \n  getNode(key: string): string {\n    if (this.ring.length === 0) {\n      throw new Error('No nodes in ring')\n    }\n    \n    const hash = this.hash(key)\n    \n    // 시계 방향 탐색\n    for (const ringKey of this.ring) {\n      if (ringKey >= hash) {\n        return this.nodes.get(ringKey)!\n      }", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "667", "text": "}\n    \n    // 루프백\n    return this.nodes.get(this.ring[0])!\n  }\n  \n  private hash(input: string): number {\n    let hash = 0\n    for (let i = 0; i < input.length; i++) {\n      const char = input.charCodeAt(i)\n      hash = ((hash << 5) - hash) + char\n      hash = hash & hash // 32비트 정수로 변환\n    }\n    return hash >>> 0\n  }\n}\n```\n\n## 모니터링 및 최적화\n\n### 1. 성능 모니터링\n\n```typescript\ninterface PerformanceMonitor {\n  // 메트릭 수집\n  collectMetrics(): Promise<PerformanceMetrics>\n  \n  // 병목 지점 식별\n  identifyBottlenecks(): Promise<Bottleneck[]>\n  \n  // 자동 최적화 제안\n  suggestOptimizations(): Promise<OptimizationSuggestion[]>\n}", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "668", "text": "## 모니터링 및 최적화\n\n### 1. 성능 모니터링\n\n```typescript\ninterface PerformanceMonitor {\n  // 메트릭 수집\n  collectMetrics(): Promise<PerformanceMetrics>\n  \n  // 병목 지점 식별\n  identifyBottlenecks(): Promise<Bottleneck[]>\n  \n  // 자동 최적화 제안\n  suggestOptimizations(): Promise<OptimizationSuggestion[]>\n}\n\nclass SystemPerformanceMonitor implements PerformanceMonitor {\n  private metricsCollector: MetricsCollector\n  private profiler: SystemProfiler\n  \n  async collectMetrics(): Promise<PerformanceMetrics> {\n    const [\n      cpuMetrics,\n      memoryMetrics,\n      diskMetrics,\n      networkMetrics,\n      applicationMetrics\n    ] = await Promise.all([\n      this.collectCPUMetrics(),\n      this.collectMemoryMetrics(),\n      this.collectDiskMetrics(),\n      this.collectNetworkMetrics(),\n      this.collectApplicationMetrics()\n    ])\n    \n    return {\n      timestamp: Date.now(),\n      cpu: cpuMetrics,\n      memory: memoryMetrics,", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "669", "text": "memoryMetrics,\n      diskMetrics,\n      networkMetrics,\n      applicationMetrics\n    ] = await Promise.all([\n      this.collectCPUMetrics(),\n      this.collectMemoryMetrics(),\n      this.collectDiskMetrics(),\n      this.collectNetworkMetrics(),\n      this.collectApplicationMetrics()\n    ])\n    \n    return {\n      timestamp: Date.now(),\n      cpu: cpuMetrics,\n      memory: memoryMetrics,\n      disk: diskMetrics,\n      network: networkMetrics,\n      application: applicationMetrics\n    }\n  }\n  \n  async identifyBottlenecks(): Promise<Bottleneck[]> {\n    const metrics = await this.collectMetrics()\n    const bottlenecks: Bottleneck[] = []\n    \n    // CPU 병목 확인\n    if (metrics.cpu.utilization > 80) {\n      bottlenecks.push({\n        type: 'CPU',\n        severity: 'HIGH',\n        description: `CPU utilization is ${metrics.cpu.utilization}%`,\n        suggestions: [\n          'Optimize CPU-intensive operations',\n          'Consider horizontal scaling',", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "670", "text": "application: applicationMetrics\n    }\n  }\n  \n  async identifyBottlenecks(): Promise<Bottleneck[]> {\n    const metrics = await this.collectMetrics()\n    const bottlenecks: Bottleneck[] = []\n    \n    // CPU 병목 확인\n    if (metrics.cpu.utilization > 80) {\n      bottlenecks.push({\n        type: 'CPU',\n        severity: 'HIGH',\n        description: `CPU utilization is ${metrics.cpu.utilization}%`,\n        suggestions: [\n          'Optimize CPU-intensive operations',\n          'Consider horizontal scaling',\n          'Profile and optimize hot code paths'\n        ]\n      })\n    }\n    \n    // 메모리 병목 확인\n    if (metrics.memory.utilization > 85) {\n      bottlenecks.push({\n        type: 'MEMORY',\n        severity: 'HIGH',\n        description: `Memory utilization is ${metrics.memory.utilization}%`,\n        suggestions: [\n          'Optimize memory usage',\n          'Implement memory pooling',", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "671", "text": "cpu.utilization}%`,\n        suggestions: [\n          'Optimize CPU-intensive operations',\n          'Consider horizontal scaling',\n          'Profile and optimize hot code paths'\n        ]\n      })\n    }\n    \n    // 메모리 병목 확인\n    if (metrics.memory.utilization > 85) {\n      bottlenecks.push({\n        type: 'MEMORY',\n        severity: 'HIGH',\n        description: `Memory utilization is ${metrics.memory.utilization}%`,\n        suggestions: [\n          'Optimize memory usage',\n          'Implement memory pooling',\n          'Check for memory leaks'\n        ]\n      })\n    }\n    \n    // 데이터베이스 병목 확인\n    if (metrics.application.dbResponseTime > 500) {\n      bottlenecks.push({\n        type: 'DATABASE',\n        severity: 'MEDIUM',\n        description: `Database response time is ${metrics.application.dbResponseTime}ms`,\n        suggestions: [\n          'Optimize slow queries',\n          'Add appropriate indexes',", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "672", "text": "memory.utilization}%`,\n        suggestions: [\n          'Optimize memory usage',\n          'Implement memory pooling',\n          'Check for memory leaks'\n        ]\n      })\n    }\n    \n    // 데이터베이스 병목 확인\n    if (metrics.application.dbResponseTime > 500) {\n      bottlenecks.push({\n        type: 'DATABASE',\n        severity: 'MEDIUM',\n        description: `Database response time is ${metrics.application.dbResponseTime}ms`,\n        suggestions: [\n          'Optimize slow queries',\n          'Add appropriate indexes',\n          'Consider read replicas'\n        ]\n      })\n    }\n    \n    return bottlenecks\n  }\n  \n  async suggestOptimizations(): Promise<OptimizationSuggestion[]> {\n    const metrics = await this.collectMetrics()\n    const suggestions: OptimizationSuggestion[] = []\n    \n    // 캐시 최적화 제안\n    if (metrics.application.cacheHitRate < 0.8) {\n      suggestions.push({\n        category: 'CACHING',\n        priority: 'HIGH',", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "673", "text": "suggestions: [\n          'Optimize slow queries',\n          'Add appropriate indexes',\n          'Consider read replicas'\n        ]\n      })\n    }\n    \n    return bottlenecks\n  }\n  \n  async suggestOptimizations(): Promise<OptimizationSuggestion[]> {\n    const metrics = await this.collectMetrics()\n    const suggestions: OptimizationSuggestion[] = []\n    \n    // 캐시 최적화 제안\n    if (metrics.application.cacheHitRate < 0.8) {\n      suggestions.push({\n        category: 'CACHING',\n        priority: 'HIGH',\n        description: 'Cache hit rate is below 80%',\n        estimatedImprovement: '30-50% response time reduction',\n        implementation: {\n          effort: 'MEDIUM',\n          risk: 'LOW',\n          steps: [\n            'Analyze cache access patterns',\n            'Implement intelligent cache warming',\n            'Adjust cache TTL values'\n          ]\n        }\n      })\n    }\n    \n    // 데이터베이스 최적화 제안\n    if (metrics.application.slowQueryCount > 10) {\n      suggestions.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "674", "text": "priority: 'HIGH',\n        description: 'Cache hit rate is below 80%',\n        estimatedImprovement: '30-50% response time reduction',\n        implementation: {\n          effort: 'MEDIUM',\n          risk: 'LOW',\n          steps: [\n            'Analyze cache access patterns',\n            'Implement intelligent cache warming',\n            'Adjust cache TTL values'\n          ]\n        }\n      })\n    }\n    \n    // 데이터베이스 최적화 제안\n    if (metrics.application.slowQueryCount > 10) {\n      suggestions.push({\n        category: 'DATABASE',\n        priority: 'HIGH',\n        description: `${metrics.application.slowQueryCount} slow queries detected`,\n        estimatedImprovement: '40-60% query time reduction',\n        implementation: {\n          effort: 'MEDIUM',\n          risk: 'LOW',\n          steps: [\n            'Analyze query execution plans',\n            'Add missing indexes',\n            'Rewrite inefficient queries'\n          ]\n        }\n      })\n    }\n    \n    return suggestions\n  }\n}", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "675", "text": "application.slowQueryCount > 10) {\n      suggestions.push({\n        category: 'DATABASE',\n        priority: 'HIGH',\n        description: `${metrics.application.slowQueryCount} slow queries detected`,\n        estimatedImprovement: '40-60% query time reduction',\n        implementation: {\n          effort: 'MEDIUM',\n          risk: 'LOW',\n          steps: [\n            'Analyze query execution plans',\n            'Add missing indexes',\n            'Rewrite inefficient queries'\n          ]\n        }\n      })\n    }\n    \n    return suggestions\n  }\n}\n\ninterface PerformanceMetrics {\n  timestamp: number\n  cpu: CPUMetrics\n  memory: MemoryMetrics\n  disk: DiskMetrics\n  network: NetworkMetrics\n  application: ApplicationMetrics\n}\n\ninterface Bottleneck {\n  type: 'CPU' | 'MEMORY' | 'DISK' | 'NETWORK' | 'DATABASE'\n  severity: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL'\n  description: string\n  suggestions: string[]\n}", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "676", "text": "'Rewrite inefficient queries'\n          ]\n        }\n      })\n    }\n    \n    return suggestions\n  }\n}\n\ninterface PerformanceMetrics {\n  timestamp: number\n  cpu: CPUMetrics\n  memory: MemoryMetrics\n  disk: DiskMetrics\n  network: NetworkMetrics\n  application: ApplicationMetrics\n}\n\ninterface Bottleneck {\n  type: 'CPU' | 'MEMORY' | 'DISK' | 'NETWORK' | 'DATABASE'\n  severity: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL'\n  description: string\n  suggestions: string[]\n}\n\ninterface OptimizationSuggestion {\n  category: string\n  priority: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL'\n  description: string\n  estimatedImprovement: string\n  implementation: {\n    effort: 'LOW' | 'MEDIUM' | 'HIGH'\n    risk: 'LOW' | 'MEDIUM' | 'HIGH'\n    steps: string[]\n  }\n}\n```\n\n## 결론", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "677", "text": "interface OptimizationSuggestion {\n  category: string\n  priority: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL'\n  description: string\n  estimatedImprovement: string\n  implementation: {\n    effort: 'LOW' | 'MEDIUM' | 'HIGH'\n    risk: 'LOW' | 'MEDIUM' | 'HIGH'\n    steps: string[]\n  }\n}\n```\n\n## 결론\n\nZyFlow의 성능 및 확장성 최적화 방안은 다음과 같은 핵심 전략을 포함합니다:", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "678", "text": "1. **다단계 캐싱**: L1/L2/L3 캐시 계층으로 응답 시간 최적화\n2. **지능형 캐싱**: 접근 패턴 분석을 통한 동적 TTL 및 우선순위 관리\n3. **데이터베이스 최적화**: 인덱스 전략, 쿼리 최적화, 파티셔닝\n4. **이벤트 처리 최적화**: 배치 처리, 병렬 처리, 백프레처 관리\n5. **수평적 확장**: 마이크로서비스 아키텍처, 일관성 해싱, 로드 밸런싱\n6. **지속적 모니터링**: 실시간 성능 모니터링, 병목 지점 식별, 자동 최적화 제안", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "679", "text": "이 전략들을 통해 ZyFlow는 높은 성능과 확장성을 유지하면서도 안정적인 서비스를 제공할 수 있습니다.", "metadata": {"file_path": "docs/architecture/performance-scalability.md", "file_name": "performance-scalability.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "680", "text": "# ZyFlow 단일 진실 원천(Single Source of Truth) 아키텍처 설계\n\n## 개요\n\nZyFlow의 단일 진실 원천 아키텍처는 하이브리드 방식을 채택하여 **tasks.md 파일을 명세서(Spec)로**, **SQLite DB를 실행 상태(Runtime State)로** 분리합니다. 이 아키텍처는 기존의 충돌 감지, 자동 복구, 변경 로그 및 리플레이 시스템을 통합하여 안정적이고 확장 가능한 시스템을 구축합니다.\n\n## 핵심 원칙", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "681", "text": "## 핵심 원칙\n\n### 1. 책임 분리 (Separation of Concerns)\n- **tasks.md**: 사용자 인터페이스, 명세서, 버전 관리의 진실 원천\n- **SQLite DB**: 실행 상태, 성능 최적화, 복잡한 쿼리의 진실 원천\n- **Event Store**: 모든 변경의 불변 기록, 시스템 상태 재구성의 진실 원천\n\n### 2. 이벤트 기반 아키텍처 (Event-Driven Architecture)\n- 모든 상태 변경은 이벤트를 통해 발생\n- 이벤트 소싱(Event Sourcing)을 통한 상태 재구성\n- CQRS(Command Query Responsibility Segregation) 패턴 적용", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "682", "text": "### 2. 이벤트 기반 아키텍처 (Event-Driven Architecture)\n- 모든 상태 변경은 이벤트를 통해 발생\n- 이벤트 소싱(Event Sourcing)을 통한 상태 재구성\n- CQRS(Command Query Responsibility Segregation) 패턴 적용\n\n### 3. 최종 일관성 (Eventual Consistency)\n- 시스템 구성 요소 간의 일관성은 비동기적으로 보장\n- 충돌 발생 시 자동 해결 및 수동 개입 프로세스\n- 롤백 포인트를 통한 안정적인 상태 복원\n\n## 아키텍처 구성 요소\n\n### 1. 중앙 동기화 코디네이터 (SyncCoordinator)", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "683", "text": "## 아키텍처 구성 요소\n\n### 1. 중앙 동기화 코디네이터 (SyncCoordinator)\n\n```typescript\ninterface SyncCoordinator {\n  // 명세서와 실행 상태 간의 동기화 조율\n  syncSpecToRuntime(changeId: string): Promise<SyncResult>\n  syncRuntimeToSpec(changeId: string): Promise<SyncResult>\n  \n  // 충돌 감지 및 해결\n  detectConflicts(changeId: string): Promise<Conflict[]>\n  resolveConflicts(conflicts: Conflict[], strategy: ResolutionStrategy): Promise<void>\n  \n  // 상태 일관성 검증\n  validateConsistency(changeId: string): Promise<ConsistencyReport>\n}\n```\n\n### 2. 이벤트 버스 (Event Bus)", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "684", "text": "### 2. 이벤트 버스 (Event Bus)\n\n```typescript\ninterface EventBus {\n  // 이벤트 발행 및 구독\n  publish<T extends Event>(event: T): Promise<void>\n  subscribe<T extends Event>(eventType: string, handler: EventHandler<T>): () => void\n  \n  // 이벤트 스트림 관리\n  getEventStream(filter?: EventFilter): AsyncIterable<Event>\n  replayEvents(fromTimestamp: number): AsyncIterable<Event>\n}\n```\n\n### 3. 상태 관리자 (StateManager)\n\n```typescript\ninterface StateManager {\n  // 명세서 상태 관리\n  getSpecState(changeId: string): Promise<SpecState>\n  updateSpecState(changeId: string, state: Partial<SpecState>): Promise<void>\n  \n  // 실행 상태 관리\n  getRuntimeState(changeId: string): Promise<RuntimeState>\n  updateRuntimeState(changeId: string, state: Partial<RuntimeState>): Promise<void>\n  \n  // 상태 동기화\n  syncStates(changeId: string): Promise<SyncResult>\n}\n```", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "685", "text": "```typescript\ninterface StateManager {\n  // 명세서 상태 관리\n  getSpecState(changeId: string): Promise<SpecState>\n  updateSpecState(changeId: string, state: Partial<SpecState>): Promise<void>\n  \n  // 실행 상태 관리\n  getRuntimeState(changeId: string): Promise<RuntimeState>\n  updateRuntimeState(changeId: string, state: Partial<RuntimeState>): Promise<void>\n  \n  // 상태 동기화\n  syncStates(changeId: string): Promise<SyncResult>\n}\n```\n\n## 데이터 흐름\n\n### 1. 정상 동기화 흐름", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "686", "text": "## 데이터 흐름\n\n### 1. 정상 동기화 흐름\n\n```mermaid\ngraph TD\n    A[사용자 액션] --> B{액션 타입?}\n    B -->|tasks.md 수정| C[File Watcher]\n    B -->|DB 직접 수정| D[DB Trigger]\n    \n    C --> E[SyncCoordinator]\n    D --> E\n    \n    E --> F[Event Bus]\n    F --> G[Change Log Manager]\n    F --> H[State Manager]\n    F --> I[Conflict Detector]\n    \n    H --> J[SQLite DB]\n    G --> K[Event Store]\n    \n    I --> L{충돌 발생?}\n    L -->|아니오| M[상태 업데이트 완료]\n    L -->|예| N[Conflict Resolver]\n    N --> O[자동 해결 시도]\n    O --> P{해결 성공?}\n    P -->|예| M\n    P -->|아니오| Q[수동 개입 요청]\n```", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "687", "text": "### 2. 충돌 해결 흐름\n\n```mermaid\ngraph TD\n    A[충돌 감지] --> B[충돌 분류]\n    B --> C{충돌 유형}\n    \n    C -->|데이터 충돌| D[데이터 병합 시도]\n    C -->|스키마 충돌| E[스키마 자동 마이그레이션]\n    C -->|버전 충돌| F[버전 충돌 해결]\n    \n    D --> G{자동 해결 가능?}", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "688", "text": "E --> G\n    F --> G\n    \n    G -->|예| H[자동 해결 적용]\n    G -->|아니오| I[수동 개입 요청]\n    \n    H --> J[롤백 포인트 생성]\n    J --> K[상태 업데이트]\n    K --> L[이벤트 기록]\n    \n    I --> M[사용자 알림]\n    M --> N[사용자 선택 대기]\n    N --> O[사용자 선택 적용]\n    O --> J\n```\n\n## 동시성 제어 전략\n\n### 1. 낙관적 동시성 제어 (Optimistic Concurrency Control)\n\n```typescript\ninterface VersionedState {\n  version: number\n  timestamp: number\n  checksum: string\n}\n\ninterface OptimisticLock {\n  acquireLock(resourceId: string, expectedVersion: number): Promise<LockToken>\n  releaseLock(token: LockToken): Promise<void>\n  validateVersion(resourceId: string, expectedVersion: number): Promise<boolean>\n}\n```", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "689", "text": "## 동시성 제어 전략\n\n### 1. 낙관적 동시성 제어 (Optimistic Concurrency Control)\n\n```typescript\ninterface VersionedState {\n  version: number\n  timestamp: number\n  checksum: string\n}\n\ninterface OptimisticLock {\n  acquireLock(resourceId: string, expectedVersion: number): Promise<LockToken>\n  releaseLock(token: LockToken): Promise<void>\n  validateVersion(resourceId: string, expectedVersion: number): Promise<boolean>\n}\n```\n\n### 2. MVCC (Multi-Version Concurrency Control)\n\n```typescript\ninterface VersionedRecord {\n  id: string\n  version: number\n  validFrom: number\n  validTo: number | null\n  data: Record<string, unknown>\n  createdBy: string\n  createdAt: number\n}\n```\n\n## 성능 최적화\n\n### 1. 다단계 캐싱", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "690", "text": "## 성능 최적화\n\n### 1. 다단계 캐싱\n\n```typescript\ninterface CacheManager {\n  // L1: 인메모리 캐시 (가장 빈번한 접근)\n  getL1<T>(key: string): Promise<T | null>\n  setL1<T>(key: string, value: T, ttl?: number): Promise<void>\n  \n  // L2: Redis 캐시 (공유 상태)\n  getL2<T>(key: string): Promise<T | null>\n  setL2<T>(key: string, value: T, ttl?: number): Promise<void>\n  \n  // L3: DB 캐시 (쿼리 결과)\n  getL3<T>(query: string): Promise<T | null>\n  setL3<T>(query: string, result: T, ttl?: number): Promise<void>\n}\n```\n\n### 2. 배치 처리 및 스트리밍", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "691", "text": "### 2. 배치 처리 및 스트리밍\n\n```typescript\ninterface BatchProcessor {\n  processBatch<T, R>(items: T[], processor: (item: T) => Promise<R>): Promise<R[]>\n  streamProcess<T, R>(stream: AsyncIterable<T>, processor: (item: T) => Promise<R>): AsyncIterable<R>\n}\n```\n\n## 장애 격리 및 복구\n\n### 1. 서킷 브레이커 패턴\n\n```typescript\ninterface CircuitBreaker {\n  execute<T>(operation: () => Promise<T>): Promise<T>\n  getState(): 'CLOSED' | 'OPEN' | 'HALF_OPEN'\n  reset(): void\n}\n```\n\n### 2. 장애 격리 영역", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "692", "text": "## 장애 격리 및 복구\n\n### 1. 서킷 브레이커 패턴\n\n```typescript\ninterface CircuitBreaker {\n  execute<T>(operation: () => Promise<T>): Promise<T>\n  getState(): 'CLOSED' | 'OPEN' | 'HALF_OPEN'\n  reset(): void\n}\n```\n\n### 2. 장애 격리 영역\n\n```typescript\ninterface IsolationBoundary {\n  // 파일 시스템 격리\n  isolateFileSystem(operation: () => Promise<void>): Promise<void>\n  \n  // 데이터베이스 격리\n  isolateDatabase<T>(operation: () => Promise<T>): Promise<T>\n  \n  // 네트워크 격리\n  isolateNetwork<T>(operation: () => Promise<T>): Promise<T>\n}\n```\n\n## 마이그레이션 전략\n\n### 1. 점진적 마이그레이션", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "693", "text": "```typescript\ninterface IsolationBoundary {\n  // 파일 시스템 격리\n  isolateFileSystem(operation: () => Promise<void>): Promise<void>\n  \n  // 데이터베이스 격리\n  isolateDatabase<T>(operation: () => Promise<T>): Promise<T>\n  \n  // 네트워크 격리\n  isolateNetwork<T>(operation: () => Promise<T>): Promise<T>\n}\n```\n\n## 마이그레이션 전략\n\n### 1. 점진적 마이그레이션\n\n1. **Phase 1**: 이벤트 시스템 도입 및 기존 시스템과의 통합\n2. **Phase 2**: SyncCoordinator 도입 및 양방향 동기화 구현\n3. **Phase 3**: CQRS 패턴 적용 및 읽기/쓰기 분리\n4. **Phase 4**: 성능 최적화 및 모니터링 강화", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "694", "text": "1. **Phase 1**: 이벤트 시스템 도입 및 기존 시스템과의 통합\n2. **Phase 2**: SyncCoordinator 도입 및 양방향 동기화 구현\n3. **Phase 3**: CQRS 패턴 적용 및 읽기/쓰기 분리\n4. **Phase 4**: 성능 최적화 및 모니터링 강화\n\n### 2. 호환성 보장\n\n- 기존 API와의 하위 호환성 유지\n- 점진적 기능 전환을 위한 플래그 시스템\n- 롤백 계획 및 데이터 백업 전략\n\n## 모니터링 및 관찰 가능성\n\n### 1. 메트릭 수집", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "695", "text": "### 2. 호환성 보장\n\n- 기존 API와의 하위 호환성 유지\n- 점진적 기능 전환을 위한 플래그 시스템\n- 롤백 계획 및 데이터 백업 전략\n\n## 모니터링 및 관찰 가능성\n\n### 1. 메트릭 수집\n\n```typescript\ninterface MetricsCollector {\n  // 동기화 메트릭\n  recordSyncDuration(changeId: string, duration: number): void\n  recordConflictCount(changeId: string, count: number): void\n  recordErrorRate(component: string, error: Error): void\n  \n  // 성능 메트릭\n  recordCacheHitRate(cacheLevel: string, hitRate: number): void\n  recordThroughput(operation: string, count: number): void\n  recordLatency(operation: string, latency: number): void\n}\n```\n\n### 2. 분산 추적", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "696", "text": "### 2. 분산 추적\n\n```typescript\ninterface DistributedTracing {\n  startSpan(operationName: string, parentSpan?: Span): Span\n  injectContext(span: Span, carrier: Record<string, string>): void\n  extractContext(carrier: Record<string, string>): SpanContext | null\n}\n```\n\n## 보안 고려사항\n\n### 1. 접근 제어\n\n```typescript\ninterface AccessControl {\n  checkPermission(userId: string, resource: string, action: string): Promise<boolean>\n  grantPermission(userId: string, resource: string, action: string): Promise<void>\n  revokePermission(userId: string, resource: string, action: string): Promise<void>\n}\n```\n\n### 2. 데이터 암호화\n\n- 전송 중 데이터 암호화 (TLS)\n- 저장된 데이터 암호화 (AES-256)\n- 키 관리 시스템 통합\n\n## 결론", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "697", "text": "### 2. 데이터 암호화\n\n- 전송 중 데이터 암호화 (TLS)\n- 저장된 데이터 암호화 (AES-256)\n- 키 관리 시스템 통합\n\n## 결론\n\nZyFlow의 단일 진실 원천 아키텍처는 하이브리드 방식을 통해 명세서와 실행 상태의 책임을 명확히 분리하면서, 이벤트 기반 아키텍처를 통해 시스템의 일관성과 안정성을 보장합니다. 이 아키텍처는 기존 시스템의 강점을 유지하면서도 확장성과 유지보수성을 크게 향상시킬 수 있습니다.", "metadata": {"file_path": "docs/architecture/single-source-of-truth.md", "file_name": "single-source-of-truth.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "698", "text": "# 상태 관리 모델 및 동시성 제어 전략 설계\n\n## 개요\n\nZyFlow의 단일 진실 원천 아키텍처에서 상태 관리와 동시성 제어는 시스템의 안정성과 일관성을 보장하는 핵심 요소입니다. 이 설계는 다중 사용자 환경에서의 데이터 무결성을 유지하면서도 높은 성능을 제공하는 것을 목표로 합니다.\n\n## 핵심 원칙\n\n### 1. 낙관적 동시성 제어 (Optimistic Concurrency Control)\n- 대부분의 작업이 충돌 없이 완료된다고 가정\n- 버전 번호를 통한 충돌 감지\n- 충돌 발생 시 재시도 또는 병합 전략 적용", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "699", "text": "## 핵심 원칙\n\n### 1. 낙관적 동시성 제어 (Optimistic Concurrency Control)\n- 대부분의 작업이 충돌 없이 완료된다고 가정\n- 버전 번호를 통한 충돌 감지\n- 충돌 발생 시 재시도 또는 병합 전략 적용\n\n### 2. MVCC (Multi-Version Concurrency Control)\n- 여러 버전의 데이터 동시 유지\n- 읽기 작업은 항상 특정 시점의 스냅샷 제공\n- 쓰기 작업은 새 버전 생성\n\n### 3. 분산 잠금 (Distributed Locking)\n- 중요 리소스에 대한 배타적 접근 보장\n- 데드락 방지 및 타임아웃 처리\n- 계층적 잠금 전략", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "700", "text": "### 3. 분산 잠금 (Distributed Locking)\n- 중요 리소스에 대한 배타적 접근 보장\n- 데드락 방지 및 타임아웃 처리\n- 계층적 잠금 전략\n\n## 상태 관리 모델\n\n### 1. 버전화된 상태 모델\n\n```typescript\ninterface VersionedState {\n  id: string\n  version: number\n  timestamp: number\n  checksum: string\n  \n  // 상태 데이터\n  data: Record<string, unknown>\n  \n  // 메타데이터\n  metadata: {\n    createdBy: string\n    updatedBy?: string\n    parentId?: string\n    branch?: string\n    [key: string]: unknown\n  }\n  \n  // 동시성 제어\n  concurrency: {\n    lockToken?: string\n    lockExpiresAt?: number\n    expectedVersion?: number\n  }\n}", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "701", "text": "```typescript\ninterface VersionedState {\n  id: string\n  version: number\n  timestamp: number\n  checksum: string\n  \n  // 상태 데이터\n  data: Record<string, unknown>\n  \n  // 메타데이터\n  metadata: {\n    createdBy: string\n    updatedBy?: string\n    parentId?: string\n    branch?: string\n    [key: string]: unknown\n  }\n  \n  // 동시성 제어\n  concurrency: {\n    lockToken?: string\n    lockExpiresAt?: number\n    expectedVersion?: number\n  }\n}\n\ninterface StateTransition {\n  fromVersion: number\n  toVersion: number\n  operation: string\n  timestamp: number\n  userId: string\n  \n  // 변경 내용\n  changes: Record<string, { old: unknown; new: unknown }>\n  \n  // 전환 메타데이터\n  metadata: {\n    reason?: string\n    context?: Record<string, unknown>\n    [key: string]: unknown\n  }\n}\n```\n\n### 2. 상태 관리자 인터페이스", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "702", "text": "### 2. 상태 관리자 인터페이스\n\n```typescript\ninterface StateManager<T = Record<string, unknown>> {\n  // 상태 조회\n  getState(id: string, version?: number): Promise<VersionedState<T> | null>\n  getCurrentState(id: string): Promise<VersionedState<T> | null>\n  getStateHistory(id: string, options?: HistoryOptions): Promise<StateTransition[]>\n  \n  // 상태 수정\n  updateState(\n    id: string, \n    updates: Partial<T>, \n    options?: UpdateOptions\n  ): Promise<StateUpdateResult<T>>\n  \n  // 동시성 제어\n  acquireLock(id: string, options?: LockOptions): Promise<LockToken | null>\n  releaseLock(token: LockToken): Promise<boolean>\n  extendLock(token: LockToken, duration: number): Promise<boolean>\n  \n  // 상태 검증\n  validateState(id: string): Promise<StateValidationResult>\n  compareStates(id1: string, id2: string): Promise<StateComparison>\n}", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "703", "text": "interface UpdateOptions {\n  expectedVersion?: number\n  lockToken?: string\n  reason?: string\n  metadata?: Record<string, unknown>\n  autoRetry?: boolean\n  maxRetries?: number\n}\n\ninterface LockOptions {\n  duration?: number // 밀리초\n  timeout?: number  // 대기 시간\n  exclusive?: boolean\n  metadata?: Record<string, unknown>\n}\n\ninterface HistoryOptions {\n  fromVersion?: number\n  toVersion?: number\n  timeRange?: { start: number; end: number }\n  limit?: number\n  includeMetadata?: boolean\n}\n\ninterface StateUpdateResult<T> {\n  success: boolean\n  state?: VersionedState<T>\n  conflict?: StateConflict\n  error?: Error\n  \n  // 업데이트 정보\n  transition?: StateTransition\n  newVersion?: number\n}\n\ninterface StateConflict {\n  type: ConflictType\n  expectedVersion: number\n  actualVersion: number\n  conflictingUpdates: Record<string, unknown>\n  resolution?: ConflictResolution\n}", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "704", "text": "interface StateUpdateResult<T> {\n  success: boolean\n  state?: VersionedState<T>\n  conflict?: StateConflict\n  error?: Error\n  \n  // 업데이트 정보\n  transition?: StateTransition\n  newVersion?: number\n}\n\ninterface StateConflict {\n  type: ConflictType\n  expectedVersion: number\n  actualVersion: number\n  conflictingUpdates: Record<string, unknown>\n  resolution?: ConflictResolution\n}\n\ntype ConflictType = \n  | 'VERSION_CONFLICT'    // 버전 충돌\n  | 'SIMULTANEOUS_UPDATE' // 동시 업데이트\n  | 'LOCK_CONFLICT'       // 잠금 충돌\n  | 'DEPENDENCY_CONFLICT'  // 의존성 충돌\n\ninterface ConflictResolution {\n  strategy: ResolutionStrategy\n  resolvedState?: Record<string, unknown>\n  requiresManualIntervention?: boolean\n}\n```\n\n### 3. 낙관적 잠금 구현\n\n```typescript\nclass OptimisticLockManager {\n  private locks = new Map<string,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "705", "text": "interface ConflictResolution {\n  strategy: ResolutionStrategy\n  resolvedState?: Record<string, unknown>\n  requiresManualIntervention?: boolean\n}\n```\n\n### 3. 낙관적 잠금 구현\n\n```typescript\nclass OptimisticLockManager {\n  private locks = new Map<string, LockInfo>()\n  \n  async acquireLock(\n    resourceId: string, \n    expectedVersion: number,\n    options: LockOptions = {}\n  ): Promise<LockToken | null> {\n    const currentLock = this.locks.get(resourceId)\n    \n    // 기존 잠금 확인\n    if (currentLock && !this.isExpired(currentLock)) {\n      if (currentLock.exclusive || options.exclusive) {\n        return null // 잠금 획득 실패\n      }\n    }\n    \n    const lockToken: LockToken = {\n      id: this.generateLockId(),\n      resourceId,\n      expectedVersion,\n      acquiredAt: Date.now(),\n      expiresAt: Date.now() + (options.duration || 30000),", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "706", "text": "locks.get(resourceId)\n    \n    // 기존 잠금 확인\n    if (currentLock && !this.isExpired(currentLock)) {\n      if (currentLock.exclusive || options.exclusive) {\n        return null // 잠금 획득 실패\n      }\n    }\n    \n    const lockToken: LockToken = {\n      id: this.generateLockId(),\n      resourceId,\n      expectedVersion,\n      acquiredAt: Date.now(),\n      expiresAt: Date.now() + (options.duration || 30000), // 기본 30초\n      exclusive: options.exclusive || false,\n      userId: options.metadata?.userId,\n      metadata: options.metadata\n    }\n    \n    this.locks.set(resourceId, {\n      token: lockToken,\n      version: expectedVersion\n    })\n    \n    return lockToken\n  }\n  \n  async releaseLock(token: LockToken): Promise<boolean> {\n    const lockInfo = this.locks.get(token.resourceId)\n    \n    if (!lockInfo || lockInfo.token.id !== token.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "707", "text": "duration || 30000), // 기본 30초\n      exclusive: options.exclusive || false,\n      userId: options.metadata?.userId,\n      metadata: options.metadata\n    }\n    \n    this.locks.set(resourceId, {\n      token: lockToken,\n      version: expectedVersion\n    })\n    \n    return lockToken\n  }\n  \n  async releaseLock(token: LockToken): Promise<boolean> {\n    const lockInfo = this.locks.get(token.resourceId)\n    \n    if (!lockInfo || lockInfo.token.id !== token.id) {\n      return false\n    }\n    \n    this.locks.delete(token.resourceId)\n    return true\n  }\n  \n  async validateLock(token: LockToken): Promise<boolean> {\n    const lockInfo = this.locks.get(token.resourceId)\n    \n    if (!lockInfo || lockInfo.token.id !== token.id) {\n      return false\n    }\n    \n    if (this.isExpired(lockInfo)) {\n      this.locks.delete(token.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "708", "text": "locks.get(token.resourceId)\n    \n    if (!lockInfo || lockInfo.token.id !== token.id) {\n      return false\n    }\n    \n    this.locks.delete(token.resourceId)\n    return true\n  }\n  \n  async validateLock(token: LockToken): Promise<boolean> {\n    const lockInfo = this.locks.get(token.resourceId)\n    \n    if (!lockInfo || lockInfo.token.id !== token.id) {\n      return false\n    }\n    \n    if (this.isExpired(lockInfo)) {\n      this.locks.delete(token.resourceId)\n      return false\n    }\n    \n    return true\n  }\n  \n  private isExpired(lockInfo: LockInfo): boolean {\n    return Date.now() > lockInfo.token.expiresAt\n  }\n  \n  private generateLockId(): string {\n    return `lock_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n  }\n}", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "709", "text": "token.id !== token.id) {\n      return false\n    }\n    \n    if (this.isExpired(lockInfo)) {\n      this.locks.delete(token.resourceId)\n      return false\n    }\n    \n    return true\n  }\n  \n  private isExpired(lockInfo: LockInfo): boolean {\n    return Date.now() > lockInfo.token.expiresAt\n  }\n  \n  private generateLockId(): string {\n    return `lock_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n  }\n}\n\ninterface LockToken {\n  id: string\n  resourceId: string\n  expectedVersion: number\n  acquiredAt: number\n  expiresAt: number\n  exclusive: boolean\n  userId?: string\n  metadata?: Record<string, unknown>\n}\n\ninterface LockInfo {\n  token: LockToken\n  version: number\n}\n```\n\n### 4. MVCC 구현\n\n```typescript\nclass MVCCStateManager<T> implements StateManager<T> {\n  private versions = new Map<string,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "710", "text": "now()}_${Math.random().toString(36).substr(2, 9)}`\n  }\n}\n\ninterface LockToken {\n  id: string\n  resourceId: string\n  expectedVersion: number\n  acquiredAt: number\n  expiresAt: number\n  exclusive: boolean\n  userId?: string\n  metadata?: Record<string, unknown>\n}\n\ninterface LockInfo {\n  token: LockToken\n  version: number\n}\n```\n\n### 4. MVCC 구현\n\n```typescript\nclass MVCCStateManager<T> implements StateManager<T> {\n  private versions = new Map<string, VersionedState<T>[]>()\n  private lockManager = new OptimisticLockManager()\n  \n  async getCurrentState(id: string): Promise<VersionedState<T> | null> {\n    const versions = this.versions.get(id) || []\n    if (versions.length === 0) return null\n    \n    // 가장 최신 버전 반환\n    return versions[versions.length - 1]\n  }\n  \n  async getState(id: string, version: number): Promise<VersionedState<T> | null> {\n    const versions = this.versions.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "711", "text": "VersionedState<T>[]>()\n  private lockManager = new OptimisticLockManager()\n  \n  async getCurrentState(id: string): Promise<VersionedState<T> | null> {\n    const versions = this.versions.get(id) || []\n    if (versions.length === 0) return null\n    \n    // 가장 최신 버전 반환\n    return versions[versions.length - 1]\n  }\n  \n  async getState(id: string, version: number): Promise<VersionedState<T> | null> {\n    const versions = this.versions.get(id) || []\n    return versions.find(v => v.version === version) || null\n  }\n  \n  async updateState(\n    id: string,\n    updates: Partial<T>,\n    options: UpdateOptions = {}\n  ): Promise<StateUpdateResult<T>> {\n    const currentState = await this.getCurrentState(id)\n    \n    // 버전 충돌 검사\n    if (options.expectedVersion && currentState) {\n      if (currentState.version !== options.expectedVersion) {\n        return {\n          success: false,\n          conflict: {\n            type: 'VERSION_CONFLICT',", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "712", "text": "versions.get(id) || []\n    return versions.find(v => v.version === version) || null\n  }\n  \n  async updateState(\n    id: string,\n    updates: Partial<T>,\n    options: UpdateOptions = {}\n  ): Promise<StateUpdateResult<T>> {\n    const currentState = await this.getCurrentState(id)\n    \n    // 버전 충돌 검사\n    if (options.expectedVersion && currentState) {\n      if (currentState.version !== options.expectedVersion) {\n        return {\n          success: false,\n          conflict: {\n            type: 'VERSION_CONFLICT',\n            expectedVersion: options.expectedVersion,\n            actualVersion: currentState.version,\n            conflictingUpdates: updates\n          }\n        }\n      }\n    }\n    \n    // 잠금 검사\n    if (options.lockToken) {\n      const lockValid = await this.lockManager.validateLock(options.lockToken)\n      if (!lockValid) {\n        return {\n          success: false,\n          conflict: {\n            type: 'LOCK_CONFLICT',\n            expectedVersion: options.expectedVersion || 0,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "713", "text": "conflict: {\n            type: 'VERSION_CONFLICT',\n            expectedVersion: options.expectedVersion,\n            actualVersion: currentState.version,\n            conflictingUpdates: updates\n          }\n        }\n      }\n    }\n    \n    // 잠금 검사\n    if (options.lockToken) {\n      const lockValid = await this.lockManager.validateLock(options.lockToken)\n      if (!lockValid) {\n        return {\n          success: false,\n          conflict: {\n            type: 'LOCK_CONFLICT',\n            expectedVersion: options.expectedVersion || 0,\n            actualVersion: currentState?.version || 0,\n            conflictingUpdates: updates\n          }\n        }\n      }\n    }\n    \n    // 새 버전 생성\n    const newVersion = (currentState?.version || 0) + 1\n    const newData = currentState ? { ...currentState.data, ...updates } : updates as T\n    \n    const newState: VersionedState<T> = {\n      id,\n      version: newVersion,\n      timestamp: Date.now(),\n      checksum: this.calculateChecksum(newData),", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "714", "text": "expectedVersion || 0,\n            actualVersion: currentState?.version || 0,\n            conflictingUpdates: updates\n          }\n        }\n      }\n    }\n    \n    // 새 버전 생성\n    const newVersion = (currentState?.version || 0) + 1\n    const newData = currentState ? { ...currentState.data, ...updates } : updates as T\n    \n    const newState: VersionedState<T> = {\n      id,\n      version: newVersion,\n      timestamp: Date.now(),\n      checksum: this.calculateChecksum(newData),\n      data: newData,\n      metadata: {\n        createdBy: options.metadata?.userId || 'system',\n        updatedBy: options.metadata?.userId,\n        parentId: currentState?.id,\n        ...options.metadata\n      }\n    }\n    \n    // 상태 저장\n    if (!this.versions.has(id)) {\n      this.versions.set(id, [])\n    }\n    this.versions.get(id)!.push(newState)\n    \n    // 전환 기록\n    const transition: StateTransition = {\n      fromVersion: currentState?.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "715", "text": "calculateChecksum(newData),\n      data: newData,\n      metadata: {\n        createdBy: options.metadata?.userId || 'system',\n        updatedBy: options.metadata?.userId,\n        parentId: currentState?.id,\n        ...options.metadata\n      }\n    }\n    \n    // 상태 저장\n    if (!this.versions.has(id)) {\n      this.versions.set(id, [])\n    }\n    this.versions.get(id)!.push(newState)\n    \n    // 전환 기록\n    const transition: StateTransition = {\n      fromVersion: currentState?.version || 0,\n      toVersion: newVersion,\n      operation: 'UPDATE',\n      timestamp: Date.now(),\n      userId: options.metadata?.userId || 'system',\n      changes: this.extractChanges(currentState?.data || {}, updates),\n      metadata: {\n        reason: options.reason,\n        context: options.metadata\n      }\n    }\n    \n    return {\n      success: true,\n      state: newState,\n      newVersion,\n      transition\n    }\n  }\n  \n  async acquireLock(id: string,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "716", "text": "version || 0,\n      toVersion: newVersion,\n      operation: 'UPDATE',\n      timestamp: Date.now(),\n      userId: options.metadata?.userId || 'system',\n      changes: this.extractChanges(currentState?.data || {}, updates),\n      metadata: {\n        reason: options.reason,\n        context: options.metadata\n      }\n    }\n    \n    return {\n      success: true,\n      state: newState,\n      newVersion,\n      transition\n    }\n  }\n  \n  async acquireLock(id: string, options: LockOptions = {}): Promise<LockToken | null> {\n    const currentState = await this.getCurrentState(id)\n    const expectedVersion = currentState?.version || 0\n    \n    return await this.lockManager.acquireLock(id, expectedVersion, options)\n  }\n  \n  async releaseLock(token: LockToken): Promise<boolean> {\n    return await this.lockManager.releaseLock(token)\n  }\n  \n  async validateState(id: string): Promise<StateValidationResult> {\n    const state = await this.getCurrentState(id)\n    \n    if (!state) {\n      return {\n        valid: false,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "717", "text": "options: LockOptions = {}): Promise<LockToken | null> {\n    const currentState = await this.getCurrentState(id)\n    const expectedVersion = currentState?.version || 0\n    \n    return await this.lockManager.acquireLock(id, expectedVersion, options)\n  }\n  \n  async releaseLock(token: LockToken): Promise<boolean> {\n    return await this.lockManager.releaseLock(token)\n  }\n  \n  async validateState(id: string): Promise<StateValidationResult> {\n    const state = await this.getCurrentState(id)\n    \n    if (!state) {\n      return {\n        valid: false,\n        issues: [{ type: 'MISSING_STATE', description: `State not found: ${id}` }]\n      }\n    }\n    \n    const issues: StateIssue[] = []\n    \n    // 체크섬 검증\n    const expectedChecksum = this.calculateChecksum(state.data)\n    if (state.checksum !== expectedChecksum) {\n      issues.push({\n        type: 'CHECKSUM_MISMATCH',\n        description: `Checksum mismatch for state ${id}`,\n        expected: expectedChecksum,\n        actual: state.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "718", "text": "issues: [{ type: 'MISSING_STATE', description: `State not found: ${id}` }]\n      }\n    }\n    \n    const issues: StateIssue[] = []\n    \n    // 체크섬 검증\n    const expectedChecksum = this.calculateChecksum(state.data)\n    if (state.checksum !== expectedChecksum) {\n      issues.push({\n        type: 'CHECKSUM_MISMATCH',\n        description: `Checksum mismatch for state ${id}`,\n        expected: expectedChecksum,\n        actual: state.checksum\n      })\n    }\n    \n    // 버전 무결성 검증\n    const versions = this.versions.get(id) || []\n    for (let i = 1; i < versions.length; i++) {\n      if (versions[i].version !== versions[i-1].version + 1) {\n        issues.push({\n          type: 'VERSION_GAP',\n          description: `Version gap detected between ${versions[i-1].version} and ${versions[i].version}`\n        })\n      }\n    }\n    \n    return {\n      valid: issues.length === 0,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "719", "text": "checksum\n      })\n    }\n    \n    // 버전 무결성 검증\n    const versions = this.versions.get(id) || []\n    for (let i = 1; i < versions.length; i++) {\n      if (versions[i].version !== versions[i-1].version + 1) {\n        issues.push({\n          type: 'VERSION_GAP',\n          description: `Version gap detected between ${versions[i-1].version} and ${versions[i].version}`\n        })\n      }\n    }\n    \n    return {\n      valid: issues.length === 0,\n      issues\n    }\n  }\n  \n  private calculateChecksum(data: Record<string, unknown>): string {\n    const content = JSON.stringify(data, Object.keys(data).sort())\n    return require('crypto').createHash('sha256').update(content).digest('hex')\n  }\n  \n  private extractChanges(\n    oldData: Record<string, unknown>, \n    newData: Record<string, unknown>\n  ): Record<string, { old: unknown; new: unknown }> {\n    const changes: Record<string, { old: unknown;", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "720", "text": "length === 0,\n      issues\n    }\n  }\n  \n  private calculateChecksum(data: Record<string, unknown>): string {\n    const content = JSON.stringify(data, Object.keys(data).sort())\n    return require('crypto').createHash('sha256').update(content).digest('hex')\n  }\n  \n  private extractChanges(\n    oldData: Record<string, unknown>, \n    newData: Record<string, unknown>\n  ): Record<string, { old: unknown; new: unknown }> {\n    const changes: Record<string, { old: unknown; new: unknown }> = {}\n    \n    // 모든 키 수집\n    const allKeys = new Set([...Object.keys(oldData), ...Object.keys(newData)])\n    \n    for (const key of allKeys) {\n      const oldValue = oldData[key]\n      const newValue = newData[key]\n      \n      if (oldValue !== newValue) {\n        changes[key] = { old: oldValue, new: newValue }\n      }\n    }\n    \n    return changes\n  }\n}\n\ninterface StateValidationResult {\n  valid: boolean\n  issues: StateIssue[]\n}", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "721", "text": "{ old: unknown; new: unknown }> = {}\n    \n    // 모든 키 수집\n    const allKeys = new Set([...Object.keys(oldData), ...Object.keys(newData)])\n    \n    for (const key of allKeys) {\n      const oldValue = oldData[key]\n      const newValue = newData[key]\n      \n      if (oldValue !== newValue) {\n        changes[key] = { old: oldValue, new: newValue }\n      }\n    }\n    \n    return changes\n  }\n}\n\ninterface StateValidationResult {\n  valid: boolean\n  issues: StateIssue[]\n}\n\ninterface StateIssue {\n  type: string\n  description: string\n  expected?: unknown\n  actual?: unknown\n}\n```\n\n## 동시성 제어 전략\n\n### 1. 계층적 잠금 전략\n\n```typescript\ninterface LockHierarchy {\n  // 리소스 계층 구조\n  levels: LockLevel[]\n  \n  // 잠금 획득 순서\n  acquireOrder: string[]\n}", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "722", "text": "interface StateValidationResult {\n  valid: boolean\n  issues: StateIssue[]\n}\n\ninterface StateIssue {\n  type: string\n  description: string\n  expected?: unknown\n  actual?: unknown\n}\n```\n\n## 동시성 제어 전략\n\n### 1. 계층적 잠금 전략\n\n```typescript\ninterface LockHierarchy {\n  // 리소스 계층 구조\n  levels: LockLevel[]\n  \n  // 잠금 획득 순서\n  acquireOrder: string[]\n}\n\ninterface LockLevel {\n  name: string\n  resources: string[]\n  timeout: number\n  exclusive: boolean\n}\n\nclass HierarchicalLockManager {\n  private hierarchy: LockHierarchy\n  private lockManagers = new Map<string, OptimisticLockManager>()\n  \n  constructor(hierarchy: LockHierarchy) {\n    this.hierarchy = hierarchy\n    \n    // 각 레벨별 잠금 관리자 생성\n    hierarchy.levels.forEach(level => {\n      this.lockManagers.set(level.name,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "723", "text": "interface LockLevel {\n  name: string\n  resources: string[]\n  timeout: number\n  exclusive: boolean\n}\n\nclass HierarchicalLockManager {\n  private hierarchy: LockHierarchy\n  private lockManagers = new Map<string, OptimisticLockManager>()\n  \n  constructor(hierarchy: LockHierarchy) {\n    this.hierarchy = hierarchy\n    \n    // 각 레벨별 잠금 관리자 생성\n    hierarchy.levels.forEach(level => {\n      this.lockManagers.set(level.name, new OptimisticLockManager())\n    })\n  }\n  \n  async acquireMultipleLocks(\n    resourceId: string,\n    levels: string[],\n    options: LockOptions = {}\n  ): Promise<LockToken[]> {\n    // 계층 순서에 따라 잠금 획득\n    const sortedLevels = this.sortByHierarchy(levels)\n    const tokens: LockToken[] = []\n    \n    try {\n      for (const levelName of sortedLevels) {\n        const lockManager = this.lockManagers.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "724", "text": "lockManagers.set(level.name, new OptimisticLockManager())\n    })\n  }\n  \n  async acquireMultipleLocks(\n    resourceId: string,\n    levels: string[],\n    options: LockOptions = {}\n  ): Promise<LockToken[]> {\n    // 계층 순서에 따라 잠금 획득\n    const sortedLevels = this.sortByHierarchy(levels)\n    const tokens: LockToken[] = []\n    \n    try {\n      for (const levelName of sortedLevels) {\n        const lockManager = this.lockManagers.get(levelName)\n        if (!lockManager) {\n          throw new Error(`Unknown lock level: ${levelName}`)\n        }\n        \n        const levelOptions = this.getLevelOptions(levelName, options)\n        const token = await lockManager.acquireLock(resourceId, 0, levelOptions)\n        \n        if (!token) {\n          // 잠금 획득 실패 시 이미 획득한 잠금 해제\n          await this.releaseMultipleLocks(tokens)\n          return []\n        }\n        \n        tokens.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "725", "text": "lockManagers.get(levelName)\n        if (!lockManager) {\n          throw new Error(`Unknown lock level: ${levelName}`)\n        }\n        \n        const levelOptions = this.getLevelOptions(levelName, options)\n        const token = await lockManager.acquireLock(resourceId, 0, levelOptions)\n        \n        if (!token) {\n          // 잠금 획득 실패 시 이미 획득한 잠금 해제\n          await this.releaseMultipleLocks(tokens)\n          return []\n        }\n        \n        tokens.push(token)\n      }\n      \n      return tokens\n    } catch (error) {\n      // 오류 발생 시 정리\n      await this.releaseMultipleLocks(tokens)\n      throw error\n    }\n  }\n  \n  async releaseMultipleLocks(tokens: LockToken[]): Promise<boolean> {\n    const results = await Promise.allSettled(\n      tokens.map(token => {\n        const lockManager = this.lockManagers.get(this.getLockLevel(token.resourceId))\n        return lockManager?.releaseLock(token) || Promise.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "726", "text": "push(token)\n      }\n      \n      return tokens\n    } catch (error) {\n      // 오류 발생 시 정리\n      await this.releaseMultipleLocks(tokens)\n      throw error\n    }\n  }\n  \n  async releaseMultipleLocks(tokens: LockToken[]): Promise<boolean> {\n    const results = await Promise.allSettled(\n      tokens.map(token => {\n        const lockManager = this.lockManagers.get(this.getLockLevel(token.resourceId))\n        return lockManager?.releaseLock(token) || Promise.resolve(false)\n      })\n    )\n    \n    return results.every(result => result.status === 'fulfilled' && result.value)\n  }\n  \n  private sortByHierarchy(levels: string[]): string[] {\n    return levels.sort((a, b) => {\n      const orderA = this.hierarchy.acquireOrder.indexOf(a)\n      const orderB = this.hierarchy.acquireOrder.indexOf(b)\n      return orderA - orderB\n    })\n  }\n  \n  private getLevelOptions(levelName: string, options: LockOptions): LockOptions {\n    const level = this.hierarchy.levels.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "727", "text": "every(result => result.status === 'fulfilled' && result.value)\n  }\n  \n  private sortByHierarchy(levels: string[]): string[] {\n    return levels.sort((a, b) => {\n      const orderA = this.hierarchy.acquireOrder.indexOf(a)\n      const orderB = this.hierarchy.acquireOrder.indexOf(b)\n      return orderA - orderB\n    })\n  }\n  \n  private getLevelOptions(levelName: string, options: LockOptions): LockOptions {\n    const level = this.hierarchy.levels.find(l => l.name === levelName)\n    if (!level) return options\n    \n    return {\n      ...options,\n      duration: options.duration || level.timeout,\n      exclusive: options.exclusive !== undefined ? options.exclusive : level.exclusive\n    }\n  }\n  \n  private getLockLevel(resourceId: string): string {\n    // 리소스 ID에서 레벨 추출\n    const parts = resourceId.split(':')\n    return parts[0] // 첫 부분이 레벨\n  }\n}\n```", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "728", "text": "hierarchy.levels.find(l => l.name === levelName)\n    if (!level) return options\n    \n    return {\n      ...options,\n      duration: options.duration || level.timeout,\n      exclusive: options.exclusive !== undefined ? options.exclusive : level.exclusive\n    }\n  }\n  \n  private getLockLevel(resourceId: string): string {\n    // 리소스 ID에서 레벨 추출\n    const parts = resourceId.split(':')\n    return parts[0] // 첫 부분이 레벨\n  }\n}\n```\n\n### 2. 분산 트랜잭션 관리\n\n```typescript\ninterface DistributedTransaction {\n  id: string\n  participants: TransactionParticipant[]\n  status: TransactionStatus\n  createdAt: number\n  timeoutAt: number\n  \n  // 2PC 상태\n  prepareResults?: Map<string, boolean>\n  commitResults?: Map<string, boolean>\n}", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "729", "text": "### 2. 분산 트랜잭션 관리\n\n```typescript\ninterface DistributedTransaction {\n  id: string\n  participants: TransactionParticipant[]\n  status: TransactionStatus\n  createdAt: number\n  timeoutAt: number\n  \n  // 2PC 상태\n  prepareResults?: Map<string, boolean>\n  commitResults?: Map<string, boolean>\n}\n\ninterface TransactionParticipant {\n  id: string\n  resourceId: string\n  operation: TransactionOperation\n  prepare: () => Promise<boolean>\n  commit: () => Promise<boolean>\n  rollback: () => Promise<boolean>\n}\n\nenum TransactionStatus {\n  ACTIVE = 'ACTIVE',\n  PREPARING = 'PREPARING',\n  PREPARED = 'PREPARED',\n  COMMITTING = 'COMMITTING',\n  COMMITTED = 'COMMITTED',\n  ABORTING = 'ABORTING',\n  ABORTED = 'ABORTED',\n  TIMEOUT = 'TIMEOUT'\n}\n\nclass DistributedTransactionManager {\n  private transactions = new Map<string, DistributedTransaction>()\n  private lockManager: HierarchicalLockManager\n  \n  constructor(lockManager: HierarchicalLockManager) {\n    this.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "730", "text": "enum TransactionStatus {\n  ACTIVE = 'ACTIVE',\n  PREPARING = 'PREPARING',\n  PREPARED = 'PREPARED',\n  COMMITTING = 'COMMITTING',\n  COMMITTED = 'COMMITTED',\n  ABORTING = 'ABORTING',\n  ABORTED = 'ABORTED',\n  TIMEOUT = 'TIMEOUT'\n}\n\nclass DistributedTransactionManager {\n  private transactions = new Map<string, DistributedTransaction>()\n  private lockManager: HierarchicalLockManager\n  \n  constructor(lockManager: HierarchicalLockManager) {\n    this.lockManager = lockManager\n  }\n  \n  async executeTransaction(\n    participants: TransactionParticipant[],\n    timeout: number = 30000\n  ): Promise<boolean> {\n    const transaction: DistributedTransaction = {\n      id: this.generateTransactionId(),\n      participants,\n      status: TransactionStatus.ACTIVE,\n      createdAt: Date.now(),\n      timeoutAt: Date.now() + timeout\n    }\n    \n    this.transactions.set(transaction.id, transaction)\n    \n    try {\n      // 2-Phase Commit 실행\n      return await this.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "731", "text": "lockManager = lockManager\n  }\n  \n  async executeTransaction(\n    participants: TransactionParticipant[],\n    timeout: number = 30000\n  ): Promise<boolean> {\n    const transaction: DistributedTransaction = {\n      id: this.generateTransactionId(),\n      participants,\n      status: TransactionStatus.ACTIVE,\n      createdAt: Date.now(),\n      timeoutAt: Date.now() + timeout\n    }\n    \n    this.transactions.set(transaction.id, transaction)\n    \n    try {\n      // 2-Phase Commit 실행\n      return await this.executeTwoPhaseCommit(transaction)\n    } finally {\n      this.transactions.delete(transaction.id)\n    }\n  }\n  \n  private async executeTwoPhaseCommit(\n    transaction: DistributedTransaction\n  ): Promise<boolean> {\n    // Phase 1: Prepare\n    transaction.status = TransactionStatus.PREPARING\n    const prepareResults = new Map<string, boolean>()\n    \n    for (const participant of transaction.participants) {\n      try {\n        const result = await Promise.race([\n          participant.prepare(),\n          this.createTimeoutPromise(transaction.timeoutAt - Date.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "732", "text": "executeTwoPhaseCommit(transaction)\n    } finally {\n      this.transactions.delete(transaction.id)\n    }\n  }\n  \n  private async executeTwoPhaseCommit(\n    transaction: DistributedTransaction\n  ): Promise<boolean> {\n    // Phase 1: Prepare\n    transaction.status = TransactionStatus.PREPARING\n    const prepareResults = new Map<string, boolean>()\n    \n    for (const participant of transaction.participants) {\n      try {\n        const result = await Promise.race([\n          participant.prepare(),\n          this.createTimeoutPromise(transaction.timeoutAt - Date.now())\n        ])\n        \n        prepareResults.set(participant.id, result)\n        \n        if (!result) {\n          // Prepare 실패 시 롤백\n          await this.abortTransaction(transaction, prepareResults)\n          return false\n        }\n      } catch (error) {\n        // 오류 발생 시 롤백\n        await this.abortTransaction(transaction, prepareResults)\n        return false\n      }\n    }\n    \n    transaction.prepareResults = prepareResults\n    transaction.status = TransactionStatus.PREPARED\n    \n    // Phase 2: Commit\n    transaction.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "733", "text": "timeoutAt - Date.now())\n        ])\n        \n        prepareResults.set(participant.id, result)\n        \n        if (!result) {\n          // Prepare 실패 시 롤백\n          await this.abortTransaction(transaction, prepareResults)\n          return false\n        }\n      } catch (error) {\n        // 오류 발생 시 롤백\n        await this.abortTransaction(transaction, prepareResults)\n        return false\n      }\n    }\n    \n    transaction.prepareResults = prepareResults\n    transaction.status = TransactionStatus.PREPARED\n    \n    // Phase 2: Commit\n    transaction.status = TransactionStatus.COMMITTING\n    const commitResults = new Map<string, boolean>()\n    \n    for (const participant of transaction.participants) {\n      try {\n        const result = await Promise.race([\n          participant.commit(),\n          this.createTimeoutPromise(transaction.timeoutAt - Date.now())\n        ])\n        \n        commitResults.set(participant.id, result)\n        \n        if (!result) {\n          console.error(`Commit failed for participant ${participant.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "734", "text": "prepareResults = prepareResults\n    transaction.status = TransactionStatus.PREPARED\n    \n    // Phase 2: Commit\n    transaction.status = TransactionStatus.COMMITTING\n    const commitResults = new Map<string, boolean>()\n    \n    for (const participant of transaction.participants) {\n      try {\n        const result = await Promise.race([\n          participant.commit(),\n          this.createTimeoutPromise(transaction.timeoutAt - Date.now())\n        ])\n        \n        commitResults.set(participant.id, result)\n        \n        if (!result) {\n          console.error(`Commit failed for participant ${participant.id}`)\n          // 실제 시스템에서는 보상 트랜잭션 실행\n        }\n      } catch (error) {\n        console.error(`Commit error for participant ${participant.id}:`, error)\n        commitResults.set(participant.id, false)\n      }\n    }\n    \n    transaction.commitResults = commitResults\n    \n    const allCommitted = Array.from(commitResults.values()).every(result => result)\n    transaction.status = allCommitted ?", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "735", "text": "status = allCommitted ? TransactionStatus.COMMITTED : TransactionStatus.ABORTED\n    \n    return allCommitted\n  }\n  \n  private async abortTransaction(\n    transaction: DistributedTransaction,\n    prepareResults: Map<string, boolean>\n  ): Promise<void> {\n    transaction.status = TransactionStatus.ABORTING\n    \n    // Prepare 성공한 참여자들 롤백\n    const rollbackPromises = transaction.participants\n      .filter(p => prepareResults.get(p.id) === true)\n      .map(p => p.rollback().catch(error => \n        console.error(`Rollback failed for participant ${p.id}:`, error)\n      ))\n    \n    await Promise.allSettled(rollbackPromises)\n    transaction.status = TransactionStatus.ABORTED\n  }\n  \n  private createTimeoutPromise(timeout: number): Promise<never> {\n    return new Promise((_, reject) => {\n      setTimeout(() => reject(new Error('Transaction timeout')), timeout)\n    })\n  }\n  \n  private generateTransactionId(): string {\n    return `tx_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n  }\n}\n```", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "736", "text": "### 3. 충돌 해결 전략\n\n```typescript\ninterface ConflictResolver {\n  resolveConflict<T>(\n    conflict: StateConflict,\n    currentState: VersionedState<T>,\n    requestedUpdates: Partial<T>\n  ): Promise<ConflictResolution>\n}\n\nclass ThreeWayMergeResolver implements ConflictResolver {\n  async resolveConflict<T>(\n    conflict: StateConflict,\n    currentState: VersionedState<T>,\n    requestedUpdates: Partial<T>\n  ): Promise<ConflictResolution> {\n    switch (conflict.type) {\n      case 'VERSION_CONFLICT':\n        return await this.resolveVersionConflict(currentState, requestedUpdates)\n      \n      case 'SIMULTANEOUS_UPDATE':\n        return await this.resolveSimultaneousUpdate(conflict, currentState, requestedUpdates)\n      \n      default:\n        return {\n          strategy: 'MANUAL',\n          requiresManualIntervention: true\n        }\n    }\n  }\n  \n  private async resolveVersionConflict<T>(\n    currentState: VersionedState<T>,\n    requestedUpdates: Partial<T>\n  ): Promise<ConflictResolution> {\n    // 3-way merge 시도\n    const baseState = await this.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "737", "text": "resolveVersionConflict(currentState, requestedUpdates)\n      \n      case 'SIMULTANEOUS_UPDATE':\n        return await this.resolveSimultaneousUpdate(conflict, currentState, requestedUpdates)\n      \n      default:\n        return {\n          strategy: 'MANUAL',\n          requiresManualIntervention: true\n        }\n    }\n  }\n  \n  private async resolveVersionConflict<T>(\n    currentState: VersionedState<T>,\n    requestedUpdates: Partial<T>\n  ): Promise<ConflictResolution> {\n    // 3-way merge 시도\n    const baseState = await this.getBaseState(currentState.id, conflict.expectedVersion)\n    if (!baseState) {\n      return {\n        strategy: 'MANUAL',\n        requiresManualIntervention: true\n      }\n    }\n    \n    const mergeResult = await this.threeWayMerge(\n      baseState.data,\n      currentState.data,\n      requestedUpdates\n    )\n    \n    if (mergeResult.success) {\n      return {\n        strategy: 'MERGE',\n        resolvedState: mergeResult.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "738", "text": "getBaseState(currentState.id, conflict.expectedVersion)\n    if (!baseState) {\n      return {\n        strategy: 'MANUAL',\n        requiresManualIntervention: true\n      }\n    }\n    \n    const mergeResult = await this.threeWayMerge(\n      baseState.data,\n      currentState.data,\n      requestedUpdates\n    )\n    \n    if (mergeResult.success) {\n      return {\n        strategy: 'MERGE',\n        resolvedState: mergeResult.mergedState\n      }\n    }\n    \n    // 자동 병합 실패 시 전략 선택\n    return this.selectFallbackStrategy(currentState, requestedUpdates)\n  }\n  \n  private async threeWayMerge<T>(\n    base: T,\n    current: T,\n    requested: Partial<T>\n  ): Promise<{ success: boolean; mergedState?: T }> {\n    const merged: any = { ...current }\n    const conflicts: string[] = []\n    \n    for (const [key, newValue] of Object.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "739", "text": "mergedState\n      }\n    }\n    \n    // 자동 병합 실패 시 전략 선택\n    return this.selectFallbackStrategy(currentState, requestedUpdates)\n  }\n  \n  private async threeWayMerge<T>(\n    base: T,\n    current: T,\n    requested: Partial<T>\n  ): Promise<{ success: boolean; mergedState?: T }> {\n    const merged: any = { ...current }\n    const conflicts: string[] = []\n    \n    for (const [key, newValue] of Object.entries(requested)) {\n      const baseValue = (base as any)[key]\n      const currentValue = (current as any)[key]\n      \n      // 값이 동일한 경우\n      if (currentValue === newValue) {\n        continue\n      }\n      \n      // base와 동일한 경우\n      if (baseValue === newValue) {\n        merged[key] = currentValue\n        continue\n      }\n      \n      // base와 동일한 경우\n      if (baseValue === currentValue) {\n        merged[key] = newValue\n        continue\n      }\n      \n      // 충돌 발생\n      conflicts.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "740", "text": "push(key)\n    }\n    \n    if (conflicts.length > 0) {\n      return { success: false }\n    }\n    \n    return { success: true, mergedState: merged }\n  }\n  \n  private selectFallbackStrategy<T>(\n    currentState: VersionedState<T>,\n    requestedUpdates: Partial<T>\n  ): ConflictResolution {\n    // 타임스탬프 기반 전략\n    if (currentState.timestamp > Date.now() - 60000) { // 1분 이내 업데이트\n      return {\n        strategy: 'CURRENT_WINS',\n        resolvedState: currentState.data\n      }\n    }\n    \n    // 사용자 우선 전략\n    return {\n      strategy: 'REQUESTED_WINS',\n      resolvedState: { ...currentState.data, ...requestedUpdates }\n    }\n  }\n}\n```\n\n## 성능 최적화\n\n### 1. 상태 캐싱", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "741", "text": "timestamp > Date.now() - 60000) { // 1분 이내 업데이트\n      return {\n        strategy: 'CURRENT_WINS',\n        resolvedState: currentState.data\n      }\n    }\n    \n    // 사용자 우선 전략\n    return {\n      strategy: 'REQUESTED_WINS',\n      resolvedState: { ...currentState.data, ...requestedUpdates }\n    }\n  }\n}\n```\n\n## 성능 최적화\n\n### 1. 상태 캐싱\n\n```typescript\ninterface StateCache {\n  get<T>(key: string): Promise<VersionedState<T> | null>\n  set<T>(key: string, state: VersionedState<T>, ttl?: number): Promise<void>\n  invalidate(key: string): Promise<void>\n  invalidatePattern(pattern: string): Promise<void>\n}\n\nclass MultiLevelStateCache implements StateCache {\n  private l1Cache = new Map<string, CacheEntry>() // 인메모리\n  private l2Cache?: StateCache // Redis 등 외부 캐시\n  \n  constructor(l2Cache?", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "742", "text": "```typescript\ninterface StateCache {\n  get<T>(key: string): Promise<VersionedState<T> | null>\n  set<T>(key: string, state: VersionedState<T>, ttl?: number): Promise<void>\n  invalidate(key: string): Promise<void>\n  invalidatePattern(pattern: string): Promise<void>\n}\n\nclass MultiLevelStateCache implements StateCache {\n  private l1Cache = new Map<string, CacheEntry>() // 인메모리\n  private l2Cache?: StateCache // Redis 등 외부 캐시\n  \n  constructor(l2Cache?: StateCache) {\n    this.l2Cache = l2Cache\n  }\n  \n  async get<T>(key: string): Promise<VersionedState<T> | null> {\n    // L1 캐시 확인\n    const l1Entry = this.l1Cache.get(key)\n    if (l1Entry && !this.isExpired(l1Entry)) {\n      return l1Entry.state as VersionedState<T>\n    }\n    \n    // L2 캐시 확인\n    if (this.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "743", "text": ": StateCache) {\n    this.l2Cache = l2Cache\n  }\n  \n  async get<T>(key: string): Promise<VersionedState<T> | null> {\n    // L1 캐시 확인\n    const l1Entry = this.l1Cache.get(key)\n    if (l1Entry && !this.isExpired(l1Entry)) {\n      return l1Entry.state as VersionedState<T>\n    }\n    \n    // L2 캐시 확인\n    if (this.l2Cache) {\n      const l2State = await this.l2Cache.get<T>(key)\n      if (l2State) {\n        // L1 캐시에 저장\n        this.l1Cache.set(key, {\n          state: l2State,\n          expiresAt: Date.now() + 300000 // 5분\n        })\n        return l2State\n      }\n    }\n    \n    return null\n  }\n  \n  async set<T>(key: string, state: VersionedState<T>,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "744", "text": "l2Cache) {\n      const l2State = await this.l2Cache.get<T>(key)\n      if (l2State) {\n        // L1 캐시에 저장\n        this.l1Cache.set(key, {\n          state: l2State,\n          expiresAt: Date.now() + 300000 // 5분\n        })\n        return l2State\n      }\n    }\n    \n    return null\n  }\n  \n  async set<T>(key: string, state: VersionedState<T>, ttl = 300000): Promise<void> {\n    // L1 캐시에 저장\n    this.l1Cache.set(key, {\n      state,\n      expiresAt: Date.now() + ttl\n    })\n    \n    // L2 캐시에 저장\n    if (this.l2Cache) {\n      await this.l2Cache.set(key, state, ttl)\n    }\n  }\n  \n  async invalidate(key: string): Promise<void> {\n    this.l1Cache.delete(key)\n    if (this.l2Cache) {\n      await this.l2Cache.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "745", "text": "l1Cache.set(key, {\n      state,\n      expiresAt: Date.now() + ttl\n    })\n    \n    // L2 캐시에 저장\n    if (this.l2Cache) {\n      await this.l2Cache.set(key, state, ttl)\n    }\n  }\n  \n  async invalidate(key: string): Promise<void> {\n    this.l1Cache.delete(key)\n    if (this.l2Cache) {\n      await this.l2Cache.invalidate(key)\n    }\n  }\n  \n  async invalidatePattern(pattern: string): Promise<void> {\n    // L1 캐시에서 패턴 매칭 항목 삭제\n    for (const key of this.l1Cache.keys()) {\n      if (this.matchesPattern(key, pattern)) {\n        this.l1Cache.delete(key)\n      }\n    }\n    \n    // L2 캐시에서 패턴 매칭 항목 삭제\n    if (this.l2Cache) {\n      await this.l2Cache.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "746", "text": "l2Cache.invalidate(key)\n    }\n  }\n  \n  async invalidatePattern(pattern: string): Promise<void> {\n    // L1 캐시에서 패턴 매칭 항목 삭제\n    for (const key of this.l1Cache.keys()) {\n      if (this.matchesPattern(key, pattern)) {\n        this.l1Cache.delete(key)\n      }\n    }\n    \n    // L2 캐시에서 패턴 매칭 항목 삭제\n    if (this.l2Cache) {\n      await this.l2Cache.invalidatePattern(pattern)\n    }\n  }\n  \n  private isExpired(entry: CacheEntry): boolean {\n    return Date.now() > entry.expiresAt\n  }\n  \n  private matchesPattern(key: string, pattern: string): boolean {\n    const regex = new RegExp(pattern.replace(/\\*/g, '.*'))\n    return regex.test(key)\n  }\n}\n\ninterface CacheEntry {\n  state: VersionedState\n  expiresAt: number\n}\n```\n\n### 2. 배치 상태 업데이트", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "747", "text": "l2Cache) {\n      await this.l2Cache.invalidatePattern(pattern)\n    }\n  }\n  \n  private isExpired(entry: CacheEntry): boolean {\n    return Date.now() > entry.expiresAt\n  }\n  \n  private matchesPattern(key: string, pattern: string): boolean {\n    const regex = new RegExp(pattern.replace(/\\*/g, '.*'))\n    return regex.test(key)\n  }\n}\n\ninterface CacheEntry {\n  state: VersionedState\n  expiresAt: number\n}\n```\n\n### 2. 배치 상태 업데이트\n\n```typescript\nclass BatchStateUpdater<T> {\n  private pendingUpdates = new Map<string, PendingUpdate<T>>()\n  private batchSize = 50\n  private flushInterval = 1000 // 1초\n  private flushTimer?: NodeJS.Timeout\n  \n  constructor(\n    private stateManager: StateManager<T>,\n    private conflictResolver: ConflictResolver\n  ) {\n    this.startFlushTimer()\n  }\n  \n  async scheduleUpdate(\n    id: string,\n    updates: Partial<T>,\n    options?", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "748", "text": "### 2. 배치 상태 업데이트\n\n```typescript\nclass BatchStateUpdater<T> {\n  private pendingUpdates = new Map<string, PendingUpdate<T>>()\n  private batchSize = 50\n  private flushInterval = 1000 // 1초\n  private flushTimer?: NodeJS.Timeout\n  \n  constructor(\n    private stateManager: StateManager<T>,\n    private conflictResolver: ConflictResolver\n  ) {\n    this.startFlushTimer()\n  }\n  \n  async scheduleUpdate(\n    id: string,\n    updates: Partial<T>,\n    options?: UpdateOptions\n  ): Promise<StateUpdateResult<T>> {\n    const updateId = this.generateUpdateId()\n    \n    // 대기열에 추가\n    this.pendingUpdates.set(id, {\n      id: updateId,\n      resourceId: id,\n      updates,\n      options,\n      timestamp: Date.now()\n    })\n    \n    // 배치 크기 확인\n    if (this.pendingUpdates.size >= this.batchSize) {\n      await this.flushUpdates()\n    }\n    \n    // 결과를 기다림\n    return await this.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "749", "text": ": UpdateOptions\n  ): Promise<StateUpdateResult<T>> {\n    const updateId = this.generateUpdateId()\n    \n    // 대기열에 추가\n    this.pendingUpdates.set(id, {\n      id: updateId,\n      resourceId: id,\n      updates,\n      options,\n      timestamp: Date.now()\n    })\n    \n    // 배치 크기 확인\n    if (this.pendingUpdates.size >= this.batchSize) {\n      await this.flushUpdates()\n    }\n    \n    // 결과를 기다림\n    return await this.waitForUpdateResult(updateId)\n  }\n  \n  private async flushUpdates(): Promise<void> {\n    if (this.pendingUpdates.size === 0) return\n    \n    const updates = Array.from(this.pendingUpdates.values())\n    this.pendingUpdates.clear()\n    \n    // 리소스별로 그룹화\n    const groupedUpdates = this.groupByResource(updates)\n    \n    // 병렬 처리\n    const results = await Promise.allSettled(\n      Array.from(groupedUpdates.entries()).map(([resourceId,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "750", "text": "waitForUpdateResult(updateId)\n  }\n  \n  private async flushUpdates(): Promise<void> {\n    if (this.pendingUpdates.size === 0) return\n    \n    const updates = Array.from(this.pendingUpdates.values())\n    this.pendingUpdates.clear()\n    \n    // 리소스별로 그룹화\n    const groupedUpdates = this.groupByResource(updates)\n    \n    // 병렬 처리\n    const results = await Promise.allSettled(\n      Array.from(groupedUpdates.entries()).map(([resourceId, resourceUpdates]) =>\n        this.processResourceUpdates(resourceId, resourceUpdates)\n      )\n    )\n    \n    // 결과 처리\n    results.forEach(result => {\n      if (result.status === 'rejected') {\n        console.error('Batch update failed:', result.reason)\n      }\n    })\n  }\n  \n  private async processResourceUpdates(\n    resourceId: string,\n    updates: PendingUpdate<T>[]\n  ): Promise<void> {\n    // 업데이트 순서 정렬 (타임스탬프 기준)\n    updates.sort((a,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "751", "text": "resourceUpdates]) =>\n        this.processResourceUpdates(resourceId, resourceUpdates)\n      )\n    )\n    \n    // 결과 처리\n    results.forEach(result => {\n      if (result.status === 'rejected') {\n        console.error('Batch update failed:', result.reason)\n      }\n    })\n  }\n  \n  private async processResourceUpdates(\n    resourceId: string,\n    updates: PendingUpdate<T>[]\n  ): Promise<void> {\n    // 업데이트 순서 정렬 (타임스탬프 기준)\n    updates.sort((a, b) => a.timestamp - b.timestamp)\n    \n    let currentState = await this.stateManager.getCurrentState(resourceId)\n    \n    for (const update of updates) {\n      const result = await this.stateManager.updateState(\n        resourceId,\n        update.updates,\n        {\n          ...update.options,\n          expectedVersion: currentState?.version\n        }\n      )\n      \n      if (result.success) {\n        currentState = result.state\n        this.resolveUpdate(update.id, result)\n      } else if (result.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "752", "text": "sort((a, b) => a.timestamp - b.timestamp)\n    \n    let currentState = await this.stateManager.getCurrentState(resourceId)\n    \n    for (const update of updates) {\n      const result = await this.stateManager.updateState(\n        resourceId,\n        update.updates,\n        {\n          ...update.options,\n          expectedVersion: currentState?.version\n        }\n      )\n      \n      if (result.success) {\n        currentState = result.state\n        this.resolveUpdate(update.id, result)\n      } else if (result.conflict) {\n        // 충돌 해결 시도\n        const resolution = await this.conflictResolver.resolveConflict(\n          result.conflict,\n          currentState!,\n          update.updates\n        )\n        \n        if (resolution.resolvedState) {\n          const retryResult = await this.stateManager.updateState(\n            resourceId,\n            resolution.resolvedState,\n            update.options\n          )\n          \n          if (retryResult.success) {\n            currentState = retryResult.state\n            this.resolveUpdate(update.id,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "753", "text": "id, result)\n      } else if (result.conflict) {\n        // 충돌 해결 시도\n        const resolution = await this.conflictResolver.resolveConflict(\n          result.conflict,\n          currentState!,\n          update.updates\n        )\n        \n        if (resolution.resolvedState) {\n          const retryResult = await this.stateManager.updateState(\n            resourceId,\n            resolution.resolvedState,\n            update.options\n          )\n          \n          if (retryResult.success) {\n            currentState = retryResult.state\n            this.resolveUpdate(update.id, retryResult)\n          } else {\n            this.resolveUpdate(update.id, retryResult)\n          }\n        } else {\n          this.resolveUpdate(update.id, result)\n        }\n      } else {\n        this.resolveUpdate(update.id, result)\n      }\n    }\n  }\n  \n  private resolveUpdate(updateId: string,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "754", "text": "resolution.resolvedState,\n            update.options\n          )\n          \n          if (retryResult.success) {\n            currentState = retryResult.state\n            this.resolveUpdate(update.id, retryResult)\n          } else {\n            this.resolveUpdate(update.id, retryResult)\n          }\n        } else {\n          this.resolveUpdate(update.id, result)\n        }\n      } else {\n        this.resolveUpdate(update.id, result)\n      }\n    }\n  }\n  \n  private resolveUpdate(updateId: string, result: StateUpdateResult<T>): void {\n    // 결과를 대기 중인 요청에 전달\n    // 실제 구현에서는 Promise 또는 이벤트 기반으로 구현\n  }\n  \n  private async waitForUpdateResult(updateId: string): Promise<StateUpdateResult<T>> {\n    // 실제 구현에서는 Promise 기반 대기\n    return new Promise((resolve) => {\n      // 결과 대기 로직\n    })\n  }\n  \n  private groupByResource(updates: PendingUpdate<T>[]): Map<string,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "755", "text": "PendingUpdate<T>[]> {\n    const grouped = new Map<string, PendingUpdate<T>[]>()\n    \n    for (const update of updates) {\n      if (!grouped.has(update.resourceId)) {\n        grouped.set(update.resourceId, [])\n      }\n      grouped.get(update.resourceId)!.push(update)\n    }\n    \n    return grouped\n  }\n  \n  private startFlushTimer(): void {\n    this.flushTimer = setInterval(() => {\n      this.flushUpdates().catch(error => \n        console.error('Flush timer error:', error)\n      )\n    }, this.flushInterval)\n  }\n  \n  private generateUpdateId(): string {\n    return `update_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n  }\n}\n\ninterface PendingUpdate<T> {\n  id: string\n  resourceId: string\n  updates: Partial<T>\n  options?: UpdateOptions\n  timestamp: number\n}\n```\n\n## 모니터링 및 진단\n\n### 1. 동시성 메트릭", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "756", "text": "now()}_${Math.random().toString(36).substr(2, 9)}`\n  }\n}\n\ninterface PendingUpdate<T> {\n  id: string\n  resourceId: string\n  updates: Partial<T>\n  options?: UpdateOptions\n  timestamp: number\n}\n```\n\n## 모니터링 및 진단\n\n### 1. 동시성 메트릭\n\n```typescript\ninterface ConcurrencyMetrics {\n  // 잠금 메트릭\n  lockAcquisitions: number\n  lockContentions: number\n  lockWaitTime: number\n  lockHoldTime: number\n  \n  // 트랜잭션 메트릭\n  transactionsStarted: number\n  transactionsCommitted: number\n  transactionsAborted: number\n  transactionDuration: number\n  \n  // 충돌 메트릭\n  conflictsDetected: number\n  conflictsResolved: number\n  conflictResolutionTime: number\n  \n  // 상태 메트릭\n  stateUpdates: number\n  stateReads: number\n  cacheHitRate: number\n}", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "757", "text": "class ConcurrencyMonitor {\n  private metrics: ConcurrencyMetrics = this.initializeMetrics()\n  private timers = new Map<string, number>()\n  \n  recordLockAcquisition(resourceId: string, waitTime: number): void {\n    this.metrics.lockAcquisitions++\n    this.metrics.lockWaitTime = (this.metrics.lockWaitTime + waitTime) / 2\n  }\n  \n  recordLockContention(resourceId: string): void {\n    this.metrics.lockContentions++\n  }\n  \n  recordLockRelease(resourceId: string, holdTime: number): void {\n    this.metrics.lockHoldTime = (this.metrics.lockHoldTime + holdTime) / 2\n  }\n  \n  recordTransactionStart(transactionId: string): void {\n    this.metrics.transactionsStarted++\n    this.timers.set(transactionId, Date.now())\n  }\n  \n  recordTransactionCommit(transactionId: string): void {\n    this.metrics.transactionsCommitted++\n    this.recordTransactionEnd(transactionId)\n  }\n  \n  recordTransactionAbort(transactionId: string): void {\n    this.metrics.transactionsAborted++\n    this.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "758", "text": "holdTime: number): void {\n    this.metrics.lockHoldTime = (this.metrics.lockHoldTime + holdTime) / 2\n  }\n  \n  recordTransactionStart(transactionId: string): void {\n    this.metrics.transactionsStarted++\n    this.timers.set(transactionId, Date.now())\n  }\n  \n  recordTransactionCommit(transactionId: string): void {\n    this.metrics.transactionsCommitted++\n    this.recordTransactionEnd(transactionId)\n  }\n  \n  recordTransactionAbort(transactionId: string): void {\n    this.metrics.transactionsAborted++\n    this.recordTransactionEnd(transactionId)\n  }\n  \n  private recordTransactionEnd(transactionId: string): void {\n    const startTime = this.timers.get(transactionId)\n    if (startTime) {\n      const duration = Date.now() - startTime\n      this.metrics.transactionDuration = (this.metrics.transactionDuration + duration) / 2\n      this.timers.delete(transactionId)\n    }\n  }\n  \n  getMetrics(): ConcurrencyMetrics {\n    return { ...this.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "759", "text": "metrics.transactionsAborted++\n    this.recordTransactionEnd(transactionId)\n  }\n  \n  private recordTransactionEnd(transactionId: string): void {\n    const startTime = this.timers.get(transactionId)\n    if (startTime) {\n      const duration = Date.now() - startTime\n      this.metrics.transactionDuration = (this.metrics.transactionDuration + duration) / 2\n      this.timers.delete(transactionId)\n    }\n  }\n  \n  getMetrics(): ConcurrencyMetrics {\n    return { ...this.metrics }\n  }\n  \n  private initializeMetrics(): ConcurrencyMetrics {\n    return {\n      lockAcquisitions: 0,\n      lockContentions: 0,\n      lockWaitTime: 0,\n      lockHoldTime: 0,\n      transactionsStarted: 0,\n      transactionsCommitted: 0,\n      transactionsAborted: 0,\n      transactionDuration: 0,\n      conflictsDetected: 0,\n      conflictsResolved: 0,\n      conflictResolutionTime: 0,\n      stateUpdates: 0,\n      stateReads: 0,", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "760", "text": "lockContentions: 0,\n      lockWaitTime: 0,\n      lockHoldTime: 0,\n      transactionsStarted: 0,\n      transactionsCommitted: 0,\n      transactionsAborted: 0,\n      transactionDuration: 0,\n      conflictsDetected: 0,\n      conflictsResolved: 0,\n      conflictResolutionTime: 0,\n      stateUpdates: 0,\n      stateReads: 0,\n      cacheHitRate: 0\n    }\n  }\n}\n```\n\n## 결론\n\nZyFlow의 상태 관리 모델 및 동시성 제어 전략은 다음과 같은 핵심 특징을 제공합니다:", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "761", "text": "stateReads: 0,\n      cacheHitRate: 0\n    }\n  }\n}\n```\n\n## 결론\n\nZyFlow의 상태 관리 모델 및 동시성 제어 전략은 다음과 같은 핵심 특징을 제공합니다:\n\n1. **낙관적 동시성 제어**: 높은 동시성 처리 능력\n2. **MVCC**: 일관된 읽기 스냅샷 제공\n3. **계층적 잠금**: 데드락 방지 및 효율적인 리소스 관리\n4. **분산 트랜잭션**: 다중 리소스의 원자성 보장\n5. **자동 충돌 해결**: 3-way merge 등 지능형 해결 전략\n6. **성능 최적화**: 다단계 캐싱 및 배치 처리", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "762", "text": "이 전략들은 ZyFlow가 다중 사용자 환경에서도 데이터 일관성을 유지하면서 높은 성능을 제공할 수 있는 기반이 됩니다.", "metadata": {"file_path": "docs/architecture/state-management-concurrency.md", "file_name": "state-management-concurrency.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "763", "text": "# 중앙 동기화 코디네이터(SyncCoordinator) 설계\n\n## 개요\n\nSyncCoordinator는 ZyFlow 단일 진실 원천 아키텍처의 핵심 컴포넌트로, tasks.md 파일(명세서)과 SQLite DB(실행 상태) 간의 동기화를 조율합니다. 이 컴포넌트는 충돌 감지, 해결, 상태 일관성 보장 등 모든 동기화 관련 작업을 중앙에서 관리합니다.\n\n## 핵심 책임\n\n### 1. 동기화 조율\n- Spec-to-Runtime 동기화: tasks.md → SQLite DB\n- Runtime-to-Spec 동기화: SQLite DB → tasks.md\n- 양방향 동기화: 변경 사항 병합 및 충돌 해결", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "764", "text": "## 핵심 책임\n\n### 1. 동기화 조율\n- Spec-to-Runtime 동기화: tasks.md → SQLite DB\n- Runtime-to-Spec 동기화: SQLite DB → tasks.md\n- 양방향 동기화: 변경 사항 병합 및 충돌 해결\n\n### 2. 충돌 관리\n- 실시간 충돌 감지\n- 충돌 분류 및 우선순위 결정\n- 자동 및 수동 충돌 해결 조율\n\n### 3. 상태 일관성 보장\n- 버전 관리 및 낙관적 잠금\n- 상태 검증 및 복구\n- 롤백 포인트 관리\n\n## 상세 설계\n\n### 1. 핵심 인터페이스", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "765", "text": "```typescript\ninterface SyncCoordinator {\n  // 초기화\n  initialize(config: SyncCoordinatorConfig): Promise<void>\n  \n  // 동기화 작업\n  syncSpecToRuntime(changeId: string, options?: SyncOptions): Promise<SyncResult>\n  syncRuntimeToSpec(changeId: string, options?: SyncOptions): Promise<SyncResult>\n  bidirectionalSync(changeId: string, options?: SyncOptions): Promise<SyncResult>\n  \n  // 충돌 관리\n  detectConflicts(changeId: string): Promise<Conflict[]>\n  resolveConflicts(conflicts: Conflict[], strategy: ResolutionStrategy): Promise<ConflictResolution>\n  \n  // 상태 관리\n  validateConsistency(changeId: string): Promise<ConsistencyReport>\n  createRollbackPoint(changeId: string, description?: string): Promise<RollbackPoint>\n  rollbackToPoint(changeId: string, rollbackPointId: string): Promise<void>\n  \n  // 모니터링\n  getSyncStatus(changeId: string): Promise<SyncStatus>\n  getSyncHistory(changeId: string, filter?: HistoryFilter): Promise<SyncHistory[]>\n}", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "766", "text": "interface SyncCoordinatorConfig {\n  // 동기화 설정\n  syncInterval: number\n  maxRetries: number\n  retryDelay: number\n  \n  // 충돌 해결 설정\n  defaultResolutionStrategy: ResolutionStrategy\n  autoResolveThreshold: number\n  \n  // 성능 설정\n  batchSize: number\n  maxConcurrency: number\n  timeoutMs: number\n  \n  // 의존성 주입\n  eventBus: EventBus\n  stateManager: StateManager\n  conflictResolver: ConflictResolver\n  changeLogManager: ChangeLogManager\n  recoveryManager: SyncRecoveryManager\n}\n```\n\n### 2. 동기화 결과 타입", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "767", "text": "### 2. 동기화 결과 타입\n\n```typescript\ninterface SyncResult {\n  success: boolean\n  changeId: string\n  syncType: 'SPEC_TO_RUNTIME' | 'RUNTIME_TO_SPEC' | 'BIDIRECTIONAL'\n  \n  // 처리 통계\n  recordsProcessed: number\n  recordsSucceeded: number\n  recordsFailed: number\n  recordsSkipped: number\n  \n  // 충돌 정보\n  conflictsDetected: Conflict[]\n  conflictsResolved: Conflict[]\n  conflictsRemaining: Conflict[]\n  \n  // 성능 메트릭\n  duration: number\n  throughput: number\n  \n  // 롤백 정보\n  rollbackPointId?: string\n  \n  // 오류 정보\n  errors?: SyncError[]\n  warnings?: SyncWarning[]\n}", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "768", "text": "interface Conflict {\n  id: string\n  changeId: string\n  type: ConflictType\n  severity: ConflictSeverity\n  \n  // 충돌 대상\n  resourceType: 'task' | 'change' | 'metadata'\n  resourceId: string\n  \n  // 충돌 내용\n  specValue: unknown\n  runtimeValue: unknown\n  baseValue: unknown\n  \n  // 메타데이터\n  detectedAt: number\n  detectedBy: string\n  context: Record<string, unknown>\n}\n\ntype ConflictType = \n  | 'DATA_CONFLICT'      // 데이터 내용 불일치\n  | 'STRUCTURE_CONFLICT'  // 구조 불일치\n  | 'VERSION_CONFLICT'    // 버전 불일치\n  | 'DEPENDENCY_CONFLICT' // 의존성 충돌\n  | 'PERMISSION_CONFLICT' // 권한 충돌\n\ntype ConflictSeverity = 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL'", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "769", "text": "type ConflictType = \n  | 'DATA_CONFLICT'      // 데이터 내용 불일치\n  | 'STRUCTURE_CONFLICT'  // 구조 불일치\n  | 'VERSION_CONFLICT'    // 버전 불일치\n  | 'DEPENDENCY_CONFLICT' // 의존성 충돌\n  | 'PERMISSION_CONFLICT' // 권한 충돌\n\ntype ConflictSeverity = 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL'\n\ninterface ConflictResolution {\n  conflictId: string\n  strategy: ResolutionStrategy\n  resolution: unknown\n  resolvedAt: number\n  resolvedBy: 'AUTO' | 'USER' | 'SYSTEM'\n  applied: boolean\n}", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "770", "text": "type ConflictSeverity = 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL'\n\ninterface ConflictResolution {\n  conflictId: string\n  strategy: ResolutionStrategy\n  resolution: unknown\n  resolvedAt: number\n  resolvedBy: 'AUTO' | 'USER' | 'SYSTEM'\n  applied: boolean\n}\n\ntype ResolutionStrategy = \n  | 'SPEC_WINS'         // 명세서 우선\n  | 'RUNTIME_WINS'       // 실행 상태 우선\n  | 'LAST_WRITE_WINS'    // 마지막 쓰기 우선\n  | 'MERGE'              // 자동 병합\n  | 'MANUAL'             // 수동 해결\n  | 'SKIP'               // 건너뛰기\n```\n\n### 3. 상태 일관성 보장", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "771", "text": "type ResolutionStrategy = \n  | 'SPEC_WINS'         // 명세서 우선\n  | 'RUNTIME_WINS'       // 실행 상태 우선\n  | 'LAST_WRITE_WINS'    // 마지막 쓰기 우선\n  | 'MERGE'              // 자동 병합\n  | 'MANUAL'             // 수동 해결\n  | 'SKIP'               // 건너뛰기\n```\n\n### 3. 상태 일관성 보장\n\n```typescript\ninterface ConsistencyReport {\n  changeId: string\n  isConsistent: boolean\n  checkedAt: number\n  \n  // 불일치 항목\n  inconsistencies: Inconsistency[]\n  \n  // 상태 요약\n  specState: StateSnapshot\n  runtimeState: StateSnapshot\n  \n  // 권장 사항\n  recommendations: string[]\n}", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "772", "text": "### 3. 상태 일관성 보장\n\n```typescript\ninterface ConsistencyReport {\n  changeId: string\n  isConsistent: boolean\n  checkedAt: number\n  \n  // 불일치 항목\n  inconsistencies: Inconsistency[]\n  \n  // 상태 요약\n  specState: StateSnapshot\n  runtimeState: StateSnapshot\n  \n  // 권장 사항\n  recommendations: string[]\n}\n\ninterface Inconsistency {\n  id: string\n  type: InconsistencyType\n  severity: 'LOW' | 'MEDIUM' | 'HIGH'\n  \n  // 불일치 상세\n  resourcePath: string\n  expectedValue: unknown\n  actualValue: unknown\n  \n  // 해결 제안\n  suggestedAction: string\n  autoFixable: boolean\n}", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "773", "text": "interface Inconsistency {\n  id: string\n  type: InconsistencyType\n  severity: 'LOW' | 'MEDIUM' | 'HIGH'\n  \n  // 불일치 상세\n  resourcePath: string\n  expectedValue: unknown\n  actualValue: unknown\n  \n  // 해결 제안\n  suggestedAction: string\n  autoFixable: boolean\n}\n\ntype InconsistencyType = \n  | 'MISSING_RESOURCE'     // 리소스 누락\n  | 'EXTRA_RESOURCE'       // 추가 리소스\n  | 'VALUE_MISMATCH'       // 값 불일치\n  | 'TYPE_MISMATCH'        // 타입 불일치\n  | 'VERSION_MISMATCH'     // 버전 불일치\n  | 'DEPENDENCY_BROKEN'    // 의존성 깨짐", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "774", "text": "type InconsistencyType = \n  | 'MISSING_RESOURCE'     // 리소스 누락\n  | 'EXTRA_RESOURCE'       // 추가 리소스\n  | 'VALUE_MISMATCH'       // 값 불일치\n  | 'TYPE_MISMATCH'        // 타입 불일치\n  | 'VERSION_MISMATCH'     // 버전 불일치\n  | 'DEPENDENCY_BROKEN'    // 의존성 깨짐\n\ninterface StateSnapshot {\n  version: number\n  timestamp: number\n  checksum: string\n  \n  // 리소스 상태\n  resources: ResourceState[]\n  \n  // 메타데이터\n  metadata: Record<string, unknown>\n}\n\ninterface ResourceState {\n  id: string\n  type: string\n  version: number\n  lastModified: number\n  checksum: string\n  data: Record<string, unknown>\n}\n```\n\n### 4. 동기화 옵션", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "775", "text": "interface ResourceState {\n  id: string\n  type: string\n  version: number\n  lastModified: number\n  checksum: string\n  data: Record<string, unknown>\n}\n```\n\n### 4. 동기화 옵션\n\n```typescript\ninterface SyncOptions {\n  // 동기화 범위\n  resourceTypes?: string[]\n  includeIds?: string[]\n  excludeIds?: string[]\n  \n  // 동기화 전략\n  strategy?: 'INCREMENTAL' | 'FULL' | 'SMART'\n  conflictResolution?: ResolutionStrategy\n  \n  // 성능 옵션\n  batchSize?: number\n  maxConcurrency?: number\n  timeoutMs?: number\n  \n  // 안전 옵션\n  dryRun?: boolean\n  createRollbackPoint?: boolean\n  stopOnConflict?: boolean\n  \n  // 필터링\n  modifiedSince?: number\n  filter?: (resource: ResourceState) => boolean\n}\n```\n\n## 구현 전략\n\n### 1. 동기화 워크플로우", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "776", "text": "## 구현 전략\n\n### 1. 동기화 워크플로우\n\n```mermaid\ngraph TD\n    A[동기화 요청] --> B[사전 검증]\n    B --> C{검증 통과?}\n    C -->|아니오| D[오류 반환]\n    C -->|예| E[롤백 포인트 생성]\n    \n    E --> F[상태 스냅샷 생성]\n    F --> G[변경 사항 분석]\n    G --> H[충돌 감지]\n    \n    H --> I{충돌 발생?}\n    I -->|예| J[충돌 해결 시도]\n    I -->|아니오| K[동기화 실행]\n    \n    J --> L{자동 해결 가능?}", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "777", "text": "I -->|예| J[충돌 해결 시도]\n    I -->|아니오| K[동기화 실행]\n    \n    J --> L{자동 해결 가능?}\n    L -->|예| M[자동 해결 적용]\n    L -->|아니오| N[수동 개입 요청]\n    \n    M --> K\n    N --> O[사용자 대기]\n    O --> P{사용자 선택}\n    P -->|해결| K\n    P -->|취소| Q[롤백]\n    \n    K --> R[동기화 적용]\n    R --> S{성공?}\n    S -->|예| T[상태 검증]\n    S -->|아니오| Q\n    \n    T --> U{일관성 확인?}", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "778", "text": "S -->|예| T[상태 검증]\n    S -->|아니오| Q\n    \n    T --> U{일관성 확인?}\n    U -->|예| V[커밋]\n    U -->|아니오| Q\n    \n    V --> W[이벤트 발행]\n    W --> X[성공 반환]\n    \n    Q --> Y[롤백 적용]\n    Y --> Z[오류 반환]\n```\n\n### 2. 충돌 해결 전략\n\n#### 2.1 자동 해결 알고리즘", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "779", "text": "### 2. 충돌 해결 전략\n\n#### 2.1 자동 해결 알고리즘\n\n```typescript\nclass AutoConflictResolver {\n  async resolveConflict(conflict: Conflict): Promise<ConflictResolution> {\n    switch (conflict.type) {\n      case 'DATA_CONFLICT':\n        return await this.resolveDataConflict(conflict)\n      \n      case 'STRUCTURE_CONFLICT':\n        return await this.resolveStructureConflict(conflict)\n      \n      case 'VERSION_CONFLICT':\n        return await this.resolveVersionConflict(conflict)\n      \n      case 'DEPENDENCY_CONFLICT':\n        return await this.resolveDependencyConflict(conflict)\n      \n      default:\n        throw new Error(`Unsupported conflict type: ${conflict.type}`)\n    }\n  }\n  \n  private async resolveDataConflict(conflict: Conflict): Promise<ConflictResolution> {\n    // 1.", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "780", "text": "3-way merge 시도\n    const mergeResult = await this.threeWayMerge(\n      conflict.baseValue,\n      conflict.specValue,\n      conflict.runtimeValue\n    )\n    \n    if (mergeResult.success) {\n      return {\n        conflictId: conflict.id,\n        strategy: 'MERGE',\n        resolution: mergeResult.mergedValue,\n        resolvedAt: Date.now(),\n        resolvedBy: 'AUTO',\n        applied: false\n      }\n    }\n    \n    // 2. 타임스탬프 기반 해결\n    if (conflict.context.specModifiedAt > conflict.context.runtimeModifiedAt) {\n      return {\n        conflictId: conflict.id,\n        strategy: 'SPEC_WINS',\n        resolution: conflict.specValue,\n        resolvedAt: Date.now(),\n        resolvedBy: 'AUTO',\n        applied: false\n      }\n    }\n    \n    return {\n      conflictId: conflict.id,\n      strategy: 'RUNTIME_WINS',\n      resolution: conflict.runtimeValue,\n      resolvedAt: Date.now(),\n      resolvedBy: 'AUTO',\n      applied: false\n    }\n  }\n}\n```", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "781", "text": "#### 2.2 3-way Merge 알고리즘\n\n```typescript\ninterface MergeResult {\n  success: boolean\n  mergedValue?: unknown\n  conflicts?: string[]\n  warnings?: string[]\n}\n\nclass ThreeWayMerger {\n  async merge(\n    base: unknown,\n    spec: unknown,\n    runtime: unknown\n  ): Promise<MergeResult> {\n    // 객체 타입 확인\n    if (this.isObject(base) && this.isObject(spec) && this.isObject(runtime)) {\n      return await this.mergeObjects(base, spec, runtime)\n    }\n    \n    // 배열 타입 확인\n    if (Array.isArray(base) && Array.isArray(spec) && Array.isArray(runtime)) {\n      return await this.mergeArrays(base, spec, runtime)\n    }\n    \n    // 기본 타입\n    return this.mergePrimitives(base, spec, runtime)\n  }\n  \n  private async mergeObjects(\n    base: Record<string, unknown>,\n    spec: Record<string, unknown>,\n    runtime: Record<string, unknown>\n  ): Promise<MergeResult> {\n    const result: Record<string,", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "782", "text": "mergeObjects(base, spec, runtime)\n    }\n    \n    // 배열 타입 확인\n    if (Array.isArray(base) && Array.isArray(spec) && Array.isArray(runtime)) {\n      return await this.mergeArrays(base, spec, runtime)\n    }\n    \n    // 기본 타입\n    return this.mergePrimitives(base, spec, runtime)\n  }\n  \n  private async mergeObjects(\n    base: Record<string, unknown>,\n    spec: Record<string, unknown>,\n    runtime: Record<string, unknown>\n  ): Promise<MergeResult> {\n    const result: Record<string, unknown> = {}\n    const conflicts: string[] = []\n    const warnings: string[] = []\n    \n    // 모든 키 수집\n    const allKeys = new Set([\n      ...Object.keys(base),\n      ...Object.keys(spec),\n      ...Object.", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "783", "text": "mergePrimitives(base, spec, runtime)\n  }\n  \n  private async mergeObjects(\n    base: Record<string, unknown>,\n    spec: Record<string, unknown>,\n    runtime: Record<string, unknown>\n  ): Promise<MergeResult> {\n    const result: Record<string, unknown> = {}\n    const conflicts: string[] = []\n    const warnings: string[] = []\n    \n    // 모든 키 수집\n    const allKeys = new Set([\n      ...Object.keys(base),\n      ...Object.keys(spec),\n      ...Object.keys(runtime)\n    ])\n    \n    for (const key of allKeys) {\n      const baseValue = base[key]\n      const specValue = spec[key]\n      const runtimeValue = runtime[key]\n      \n      // 값이 동일한 경우\n      if (this.deepEqual(specValue, runtimeValue)) {\n        result[key] = specValue\n        continue\n      }\n      \n      // base와 동일한 경우\n      if (this.deepEqual(baseValue,", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "784", "text": "..Object.keys(base),\n      ...Object.keys(spec),\n      ...Object.keys(runtime)\n    ])\n    \n    for (const key of allKeys) {\n      const baseValue = base[key]\n      const specValue = spec[key]\n      const runtimeValue = runtime[key]\n      \n      // 값이 동일한 경우\n      if (this.deepEqual(specValue, runtimeValue)) {\n        result[key] = specValue\n        continue\n      }\n      \n      // base와 동일한 경우\n      if (this.deepEqual(baseValue, specValue)) {\n        result[key] = runtimeValue\n        continue\n      }\n      \n      if (this.deepEqual(baseValue, runtimeValue)) {\n        result[key] = specValue\n        continue\n      }\n      \n      // 재귀적 병합 시도\n      const mergeResult = await this.merge(baseValue, specValue, runtimeValue)\n      if (mergeResult.success) {\n        result[key] = mergeResult.mergedValue\n        warnings.push(`Auto-merged conflicting values for key: ${key}`)\n      } else {\n        conflicts.", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "785", "text": "deepEqual(baseValue, specValue)) {\n        result[key] = runtimeValue\n        continue\n      }\n      \n      if (this.deepEqual(baseValue, runtimeValue)) {\n        result[key] = specValue\n        continue\n      }\n      \n      // 재귀적 병합 시도\n      const mergeResult = await this.merge(baseValue, specValue, runtimeValue)\n      if (mergeResult.success) {\n        result[key] = mergeResult.mergedValue\n        warnings.push(`Auto-merged conflicting values for key: ${key}`)\n      } else {\n        conflicts.push(`Unresolvable conflict for key: ${key}`)\n        // 기본 전략: spec 우선\n        result[key] = specValue\n      }\n    }\n    \n    return {\n      success: conflicts.length === 0,\n      mergedValue: result,\n      conflicts,\n      warnings\n    }\n  }\n}\n```\n\n### 3. 성능 최적화\n\n#### 3.1 배치 처리", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "786", "text": "### 3. 성능 최적화\n\n#### 3.1 배치 처리\n\n```typescript\nclass BatchSyncProcessor {\n  async processBatch(\n    items: SyncItem[],\n    options: SyncOptions\n  ): Promise<BatchResult> {\n    const results: SyncResult[] = []\n    const batchSize = options.batchSize || 100\n    \n    // 배치로 분할\n    const batches = this.chunkArray(items, batchSize)\n    \n    for (const batch of batches) {\n      const batchResults = await Promise.allSettled(\n        batch.map(item => this.processItem(item, options))\n      )\n      \n      results.push(...batchResults.map(result => \n        result.status === 'fulfilled' ? result.value : this.createErrorResult(result.reason)\n      ))\n    }\n    \n    return this.aggregateResults(results)\n  }\n  \n  private async processItem(item: SyncItem, options: SyncOptions): Promise<SyncResult> {\n    // 개별 아이템 처리 로직\n    // 낙관적 잠금, 충돌 감지, 해결 등\n  }\n}\n```", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "787", "text": "#### 3.2 캐싱 전략\n\n```typescript\nclass SyncCacheManager {\n  private specCache = new Map<string, CachedSpecState>()\n  private runtimeCache = new Map<string, CachedRuntimeState>()\n  private conflictCache = new Map<string, CachedConflictResult>()\n  \n  async getCachedSpecState(changeId: string): Promise<SpecState | null> {\n    const cached = this.specCache.get(changeId)\n    if (cached && !this.isExpired(cached)) {\n      return cached.state\n    }\n    return null\n  }\n  \n  async cacheSpecState(changeId: string, state: SpecState): Promise<void> {\n    this.specCache.set(changeId, {\n      state,\n      cachedAt: Date.now(),\n      ttl: 5 * 60 * 1000 // 5분\n    })\n  }\n  \n  // 유사한 패턴으로 runtimeCache, conflictCache 구현\n}\n\ninterface CachedSpecState {\n  state: SpecState\n  cachedAt: number\n  ttl: number\n}\n```\n\n### 4. 모니터링 및 진단", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "788", "text": "interface CachedSpecState {\n  state: SpecState\n  cachedAt: number\n  ttl: number\n}\n```\n\n### 4. 모니터링 및 진단\n\n#### 4.1 동기화 메트릭\n\n```typescript\ninterface SyncMetrics {\n  // 기본 메트릭\n  totalSyncs: number\n  successfulSyncs: number\n  failedSyncs: number\n  averageSyncTime: number\n  \n  // 충돌 메트릭\n  conflictsDetected: number\n  conflictsResolved: number\n  averageResolutionTime: number\n  \n  // 성능 메트릭\n  throughput: number\n  latency: number\n  errorRate: number\n  \n  // 리소스 메트릭\n  memoryUsage: number\n  cpuUsage: number\n  diskIO: number\n}", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "789", "text": "class SyncMetricsCollector {\n  private metrics: SyncMetrics = this.initializeMetrics()\n  \n  recordSyncStart(changeId: string): void {\n    // 동기화 시작 기록\n  }\n  \n  recordSyncComplete(changeId: string, result: SyncResult): void {\n    // 동기화 완료 기록\n    this.updateMetrics(result)\n  }\n  \n  recordConflictDetected(conflict: Conflict): void {\n    // 충돌 감지 기록\n  }\n  \n  recordConflictResolved(resolution: ConflictResolution): void {\n    // 충돌 해결 기록\n  }\n  \n  getMetrics(): SyncMetrics {\n    return { ...this.metrics }\n  }\n}\n```\n\n#### 4.2 상태 진단\n\n```typescript\nclass SyncDiagnostics {\n  async diagnoseSyncIssues(changeId: string): Promise<DiagnosticReport> {\n    const report: DiagnosticReport = {\n      changeId,\n      timestamp: Date.now(),\n      issues: [],\n      recommendations: []\n    }\n    \n    // 1.", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "790", "text": "#### 4.2 상태 진단\n\n```typescript\nclass SyncDiagnostics {\n  async diagnoseSyncIssues(changeId: string): Promise<DiagnosticReport> {\n    const report: DiagnosticReport = {\n      changeId,\n      timestamp: Date.now(),\n      issues: [],\n      recommendations: []\n    }\n    \n    // 1. 상태 일관성 검사\n    const consistencyReport = await this.checkConsistency(changeId)\n    if (!consistencyReport.isConsistent) {\n      report.issues.push(...consistencyReport.inconsistencies.map(\n        inc => this.inconsistencyToIssue(inc)\n      ))\n    }\n    \n    // 2. 성능 문제 검사\n    const performanceIssues = await this.checkPerformance(changeId)\n    report.issues.push(...performanceIssues)\n    \n    // 3. 의존성 문제 검사\n    const dependencyIssues = await this.checkDependencies(changeId)\n    report.issues.push(...dependencyIssues)\n    \n    // 4. 권장 사항 생성\n    report.recommendations = this.generateRecommendations(report.", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "791", "text": "성능 문제 검사\n    const performanceIssues = await this.checkPerformance(changeId)\n    report.issues.push(...performanceIssues)\n    \n    // 3. 의존성 문제 검사\n    const dependencyIssues = await this.checkDependencies(changeId)\n    report.issues.push(...dependencyIssues)\n    \n    // 4. 권장 사항 생성\n    report.recommendations = this.generateRecommendations(report.issues)\n    \n    return report\n  }\n  \n  private async checkPerformance(changeId: string): Promise<Issue[]> {\n    const issues: Issue[] = []\n    \n    // 동기화 시간 확인\n    const syncHistory = await this.getSyncHistory(changeId)\n    const recentSyncs = syncHistory.filter(s => \n      Date.now() - s.timestamp < 24 * 60 * 60 * 1000 // 최근 24시간\n    )\n    \n    if (recentSyncs.length > 0) {\n      const avgTime = recentSyncs.reduce((sum, s) => sum + s.duration, 0) / recentSyncs.", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "792", "text": "getSyncHistory(changeId)\n    const recentSyncs = syncHistory.filter(s => \n      Date.now() - s.timestamp < 24 * 60 * 60 * 1000 // 최근 24시간\n    )\n    \n    if (recentSyncs.length > 0) {\n      const avgTime = recentSyncs.reduce((sum, s) => sum + s.duration, 0) / recentSyncs.length\n      \n      if (avgTime > 10000) { // 10초 이상\n        issues.push({\n          type: 'PERFORMANCE',\n          severity: 'HIGH',\n          description: `Average sync time is ${avgTime}ms, which exceeds the 10s threshold`,\n          suggestions: [\n            'Consider increasing batch size',\n            'Check for resource contention',\n            'Optimize database queries'\n          ]\n        })\n      }\n    }\n    \n    return issues\n  }\n}\n```\n\n## 통합 전략\n\n### 1. 기존 시스템과의 통합", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "793", "text": "push({\n          type: 'PERFORMANCE',\n          severity: 'HIGH',\n          description: `Average sync time is ${avgTime}ms, which exceeds the 10s threshold`,\n          suggestions: [\n            'Consider increasing batch size',\n            'Check for resource contention',\n            'Optimize database queries'\n          ]\n        })\n      }\n    }\n    \n    return issues\n  }\n}\n```\n\n## 통합 전략\n\n### 1. 기존 시스템과의 통합\n\n- **File Watcher**: 파일 변경 감지 시 SyncCoordinator에 알림\n- **Sync Manager**: 기존 동기화 로직을 SyncCoordinator로 마이그레이션\n- **Change Log Manager**: 모든 동기화 이벤트 기록\n- **Recovery Manager**: 동기화 실패 시 자동 복구\n\n### 2. MCP 서버 연동\n\n```typescript\n// MCP 서버에 추가할 도구들\nconst syncCoordinatorTools = [\n  {\n    name: 'sync_change',", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "794", "text": "- **File Watcher**: 파일 변경 감지 시 SyncCoordinator에 알림\n- **Sync Manager**: 기존 동기화 로직을 SyncCoordinator로 마이그레이션\n- **Change Log Manager**: 모든 동기화 이벤트 기록\n- **Recovery Manager**: 동기화 실패 시 자동 복구\n\n### 2. MCP 서버 연동\n\n```typescript\n// MCP 서버에 추가할 도구들\nconst syncCoordinatorTools = [\n  {\n    name: 'sync_change',\n    description: 'Sync a specific change between spec and runtime',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        changeId: { type: 'string' },\n        direction: { type: 'string', enum: ['spec_to_runtime', 'runtime_to_spec', 'bidirectional'] },\n        options: { type: 'object' }\n      },\n      required: ['changeId']\n    }\n  },\n  {\n    name: 'detect_conflicts',\n    description: 'Detect conflicts for a specific change',", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "795", "text": "description: 'Sync a specific change between spec and runtime',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        changeId: { type: 'string' },\n        direction: { type: 'string', enum: ['spec_to_runtime', 'runtime_to_spec', 'bidirectional'] },\n        options: { type: 'object' }\n      },\n      required: ['changeId']\n    }\n  },\n  {\n    name: 'detect_conflicts',\n    description: 'Detect conflicts for a specific change',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        changeId: { type: 'string' }\n      },\n      required: ['changeId']\n    }\n  },\n  {\n    name: 'resolve_conflicts',\n    description: 'Resolve detected conflicts',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        conflictIds: { type: 'array', items: { type: 'string' } },\n        strategy: { type: 'string', enum: ['spec_wins', 'runtime_wins', 'merge',", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "796", "text": "inputSchema: {\n      type: 'object',\n      properties: {\n        changeId: { type: 'string' }\n      },\n      required: ['changeId']\n    }\n  },\n  {\n    name: 'resolve_conflicts',\n    description: 'Resolve detected conflicts',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        conflictIds: { type: 'array', items: { type: 'string' } },\n        strategy: { type: 'string', enum: ['spec_wins', 'runtime_wins', 'merge', 'manual'] }\n      },\n      required: ['conflictIds', 'strategy']\n    }\n  }\n]\n```\n\n## 결론", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "797", "text": "required: ['changeId']\n    }\n  },\n  {\n    name: 'resolve_conflicts',\n    description: 'Resolve detected conflicts',\n    inputSchema: {\n      type: 'object',\n      properties: {\n        conflictIds: { type: 'array', items: { type: 'string' } },\n        strategy: { type: 'string', enum: ['spec_wins', 'runtime_wins', 'merge', 'manual'] }\n      },\n      required: ['conflictIds', 'strategy']\n    }\n  }\n]\n```\n\n## 결론\n\nSyncCoordinator는 ZyFlow의 단일 진실 원천 아키텍처에서 핵심적인 역할을 수행하며, tasks.md 파일과 SQLite DB 간의 일관성을 보장합니다. 충돌 감지 및 해결, 성능 최적화, 모니터링 기능을 통해 안정적이고 확장 가능한 동기화 시스템을 제공합니다.", "metadata": {"file_path": "docs/architecture/sync-coordinator-design.md", "file_name": "sync-coordinator-design.md", "creation_date": "2025-12-01", "last_modified_date": "2025-12-01"}}
{"id": "798", "text": "# Zyflow Alert System - Open Specification\n\n> Version: 1.0.0\n> Status: Draft\n> Created: 2024-12-28\n\n## Overview\n\n개발자의 다중 서비스 알림(GitHub Actions, Vercel, Supabase, Sentry 등)을 통합 수집하고, AI Agent가 자동 분석 및 해결을 시도하며, 처리 과정을 모니터링할 수 있는 시스템.\n\n---\n\n## Goals\n\n| Goal | Description |\n|------|-------------|\n| **G1** | 이메일 알림 의존도 제거 |\n| **G2** | 단일 인터페이스에서 모든 알림 확인 |\n| **G3** | Agent 기반 자동 분류 및 해결 |\n| **G4** | 처리 과정 투명성 확보 |\n| **G5** | 외부 서비스 로그와 연결 (복제 X) |\n\n---", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "799", "text": "---\n\n## Goals\n\n| Goal | Description |\n|------|-------------|\n| **G1** | 이메일 알림 의존도 제거 |\n| **G2** | 단일 인터페이스에서 모든 알림 확인 |\n| **G3** | Agent 기반 자동 분류 및 해결 |\n| **G4** | 처리 과정 투명성 확보 |\n| **G5** | 외부 서비스 로그와 연결 (복제 X) |\n\n---\n\n## Design Decisions", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "800", "text": "---\n\n## Design Decisions\n\n| 항목 | 결정 | 이유 |\n|------|------|------|\n| 알림 보관 기간 | **90일** | Slack 무료 플랜과 동일, 충분한 히스토리 |\n| Agent 분석 범위 | **모든 케이스** | 학습 데이터 축적, 점진적 개선 |\n| Auto-fix PR | **리뷰 대기** | 안전성 우선, 사용자 확인 필요 |\n| Multi-repo | **지원** | 프로젝트별 그룹핑 |\n\n---\n\n## Architecture\n\n```\n┌──────────────────────────────────────────────────────────────┐\n│                        External Services                      │\n├──────────────────────────────────────────────────────────────┤\n│  GitHub Actions  │  Vercel  │  Supabase  │  Sentry  │  ...", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "801", "text": "---\n\n## Architecture\n\n```\n┌──────────────────────────────────────────────────────────────┐\n│                        External Services                      │\n├──────────────────────────────────────────────────────────────┤\n│  GitHub Actions  │  Vercel  │  Supabase  │  Sentry  │  ...  │\n└────────┬─────────┴────┬─────┴─────┬──────┴────┬─────┴───────┘\n         │              │           │           │\n         ▼              ▼           ▼           ▼\n┌──────────────────────────────────────────────────────────────┐\n│                    Webhook Gateway", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "802", "text": "│           │           │\n         ▼              ▼           ▼           ▼\n┌──────────────────────────────────────────────────────────────┐\n│                    Webhook Gateway                            │\n│                   /api/webhooks/:source                       │\n└────────────────────────────┬─────────────────────────────────┘\n                             │", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "803", "text": "Webhook Gateway                            │\n│                   /api/webhooks/:source                       │\n└────────────────────────────┬─────────────────────────────────┘\n                             │\n                             ▼\n┌──────────────────────────────────────────────────────────────┐\n│                    Alert Processor                            │\n│  ┌─────────────┐  ┌─────────────┐", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "804", "text": "│\n                             ▼\n┌──────────────────────────────────────────────────────────────┐\n│                    Alert Processor                            │\n│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐   │\n│  │   Parser    │→ │  Classifier │→ │  Action Dispatcher  │   │\n│  └─────────────┘  └─────────────┘  └─────────────────────┘   │\n└────────────────────────────┬─────────────────────────────────┘\n                             │", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "805", "text": "┌─────────────┐  ┌─────────────────────┐   │\n│  │   Parser    │→ │  Classifier │→ │  Action Dispatcher  │   │\n│  └─────────────┘  └─────────────┘  └─────────────────────┘   │\n└────────────────────────────┬─────────────────────────────────┘\n                             │\n              ┌──────────────┼──────────────┐\n              ▼              ▼              ▼\n       ┌───────────┐  ┌───────────┐  ┌───────────┐\n       │  Storage  │  │   Agent   │  │", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "806", "text": "│\n              ┌──────────────┼──────────────┐\n              ▼              ▼              ▼\n       ┌───────────┐  ┌───────────┐  ┌───────────┐\n       │  Storage  │  │   Agent   │  │  Notifier │\n       │ (SQLite)  │  │  Handler  │  │  (Slack)  │\n       └───────────┘  └───────────┘  └───────────┘\n                             │", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "807", "text": "Agent   │  │  Notifier │\n       │ (SQLite)  │  │  Handler  │  │  (Slack)  │\n       └───────────┘  └───────────┘  └───────────┘\n                             │\n                             ▼\n                    ┌───────────────┐\n                    │  Auto-Fixer   │\n                    │  (PR/Retry/   │\n                    │   Rollback)   │", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "808", "text": "▼\n                    ┌───────────────┐\n                    │  Auto-Fixer   │\n                    │  (PR/Retry/   │\n                    │   Rollback)   │\n                    └───────────────┘\n```\n\n---\n\n## Data Models\n\n### Alert", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "809", "text": "│  Auto-Fixer   │\n                    │  (PR/Retry/   │\n                    │   Rollback)   │\n                    └───────────────┘\n```\n\n---\n\n## Data Models\n\n### Alert\n\n```typescript\ninterface Alert {\n  id: string;                    // uuid\n  source: AlertSource;           // 'github' | 'vercel' | 'sentry' | 'supabase'\n  type: string;                  // 'build.failed' | 'deploy.error' | 'error.new'\n  severity: Severity;            // 'critical' | 'warning' | 'info'\n  status: AlertStatus;           // 'pending' | 'processing' | 'resolved' | 'ignored'", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "810", "text": "└───────────────┘\n```\n\n---\n\n## Data Models\n\n### Alert\n\n```typescript\ninterface Alert {\n  id: string;                    // uuid\n  source: AlertSource;           // 'github' | 'vercel' | 'sentry' | 'supabase'\n  type: string;                  // 'build.failed' | 'deploy.error' | 'error.new'\n  severity: Severity;            // 'critical' | 'warning' | 'info'\n  status: AlertStatus;           // 'pending' | 'processing' | 'resolved' | 'ignored'\n\n  title: string;                 // 요약 제목\n  summary?: string;              // Agent 분석 요약\n  externalUrl?: string;          // 원본 서비스 링크\n\n  payload: Record<string, any>;  // 원본 webhook 데이터\n  metadata: {\n    repo?: string;\n    branch?: string;\n    commit?: string;\n    environment?: string;\n    projectId?: string;          // Zyflow 프로젝트 연결\n  };", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "811", "text": "title: string;                 // 요약 제목\n  summary?: string;              // Agent 분석 요약\n  externalUrl?: string;          // 원본 서비스 링크\n\n  payload: Record<string, any>;  // 원본 webhook 데이터\n  metadata: {\n    repo?: string;\n    branch?: string;\n    commit?: string;\n    environment?: string;\n    projectId?: string;          // Zyflow 프로젝트 연결\n  };\n\n  analysis?: AlertAnalysis;      // Agent 분석 결과\n\n  resolution?: {\n    type: 'auto' | 'manual';\n    action: string;              // 'pr_created' | 'retried' | 'rolled_back' | 'ignored'\n    details?: string;\n    prUrl?: string;\n  };\n\n  createdAt: string;\n  updatedAt: string;\n  resolvedAt?: string;\n  expiresAt: string;             // createdAt + 90일\n}", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "812", "text": "analysis?: AlertAnalysis;      // Agent 분석 결과\n\n  resolution?: {\n    type: 'auto' | 'manual';\n    action: string;              // 'pr_created' | 'retried' | 'rolled_back' | 'ignored'\n    details?: string;\n    prUrl?: string;\n  };\n\n  createdAt: string;\n  updatedAt: string;\n  resolvedAt?: string;\n  expiresAt: string;             // createdAt + 90일\n}\n\ntype AlertSource = 'github' | 'vercel' | 'sentry' | 'supabase' | 'custom';\ntype Severity = 'critical' | 'warning' | 'info';\ntype AlertStatus = 'pending' | 'processing' | 'resolved' | 'ignored';\n```\n\n### Alert Analysis\n\n```typescript\ninterface AlertAnalysis {\n  alertId: string;\n\n  // 분석 결과\n  rootCause?: string;            // 추정 원인\n  relatedFiles?: string[];       // 관련 파일\n  suggestedFix?: string;         // 제안 수정", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "813", "text": "### Alert Analysis\n\n```typescript\ninterface AlertAnalysis {\n  alertId: string;\n\n  // 분석 결과\n  rootCause?: string;            // 추정 원인\n  relatedFiles?: string[];       // 관련 파일\n  suggestedFix?: string;         // 제안 수정\n\n  // 자동 수정 가능 여부\n  autoFixable: boolean;\n  autoFixAction?: 'retry' | 'rollback' | 'patch';\n  confidence: number;            // 0-1\n\n  // 참고 정보\n  similarAlerts?: string[];      // 유사한 과거 alert IDs\n  documentation?: string;        // 관련 문서 링크\n\n  analyzedAt: string;\n}\n```\n\n### Activity Log\n\n```typescript\ninterface ActivityLog {\n  id: string;\n  alertId?: string;              // 연관 alert (optional)\n\n  actor: 'system' | 'agent' | 'user';\n  action: string;                // 'webhook.received' | 'analysis.started' | 'pr.created'\n  description: string;\n\n  metadata?: Record<string, any>;", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "814", "text": "analyzedAt: string;\n}\n```\n\n### Activity Log\n\n```typescript\ninterface ActivityLog {\n  id: string;\n  alertId?: string;              // 연관 alert (optional)\n\n  actor: 'system' | 'agent' | 'user';\n  action: string;                // 'webhook.received' | 'analysis.started' | 'pr.created'\n  description: string;\n\n  metadata?: Record<string, any>;\n\n  createdAt: string;\n}\n```\n\n### Webhook Config\n\n```typescript\ninterface WebhookConfig {\n  id: string;\n  source: AlertSource;\n  name: string;                  // 사용자 지정 이름\n\n  endpoint: string;              // 생성된 webhook URL\n  secret?: string;               // webhook 검증용 (암호화 저장)\n  enabled: boolean;\n\n  rules: {\n    include?: string[];          // 포함할 이벤트 타입\n    exclude?: string[];          // 제외할 이벤트 타입\n    severityMap?: Record<string, Severity>;\n  };", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "815", "text": "```typescript\ninterface WebhookConfig {\n  id: string;\n  source: AlertSource;\n  name: string;                  // 사용자 지정 이름\n\n  endpoint: string;              // 생성된 webhook URL\n  secret?: string;               // webhook 검증용 (암호화 저장)\n  enabled: boolean;\n\n  rules: {\n    include?: string[];          // 포함할 이벤트 타입\n    exclude?: string[];          // 제외할 이벤트 타입\n    severityMap?: Record<string, Severity>;\n  };\n\n  // 연결된 프로젝트들\n  projectIds?: string[];\n\n  createdAt: string;\n  updatedAt: string;\n}\n```\n\n### Notification Config\n\n```typescript\ninterface NotificationConfig {\n  id: string;\n\n  // Slack 설정\n  slack?: {\n    webhookUrl: string;          // 암호화 저장\n    channel?: string;\n    enabled: boolean;\n  };", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "816", "text": "// 연결된 프로젝트들\n  projectIds?: string[];\n\n  createdAt: string;\n  updatedAt: string;\n}\n```\n\n### Notification Config\n\n```typescript\ninterface NotificationConfig {\n  id: string;\n\n  // Slack 설정\n  slack?: {\n    webhookUrl: string;          // 암호화 저장\n    channel?: string;\n    enabled: boolean;\n  };\n\n  // 알림 규칙\n  rules: {\n    onCritical: boolean;         // critical 알림 시\n    onAutoFix: boolean;          // 자동 수정 완료 시\n    onAll: boolean;              // 모든 알림\n  };\n\n  createdAt: string;\n  updatedAt: string;\n}\n```\n\n---\n\n## Database Schema (SQLite)", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "817", "text": "// Slack 설정\n  slack?: {\n    webhookUrl: string;          // 암호화 저장\n    channel?: string;\n    enabled: boolean;\n  };\n\n  // 알림 규칙\n  rules: {\n    onCritical: boolean;         // critical 알림 시\n    onAutoFix: boolean;          // 자동 수정 완료 시\n    onAll: boolean;              // 모든 알림\n  };\n\n  createdAt: string;\n  updatedAt: string;\n}\n```\n\n---\n\n## Database Schema (SQLite)\n\n```sql\n-- Alerts 테이블\nCREATE TABLE alerts (\n  id TEXT PRIMARY KEY,\n  source TEXT NOT NULL,\n  type TEXT NOT NULL,\n  severity TEXT NOT NULL CHECK (severity IN ('critical', 'warning', 'info')),\n  status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'resolved', 'ignored')),\n\n  title TEXT NOT NULL,\n  summary TEXT,\n  external_url TEXT,", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "818", "text": "createdAt: string;\n  updatedAt: string;\n}\n```\n\n---\n\n## Database Schema (SQLite)\n\n```sql\n-- Alerts 테이블\nCREATE TABLE alerts (\n  id TEXT PRIMARY KEY,\n  source TEXT NOT NULL,\n  type TEXT NOT NULL,\n  severity TEXT NOT NULL CHECK (severity IN ('critical', 'warning', 'info')),\n  status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'resolved', 'ignored')),\n\n  title TEXT NOT NULL,\n  summary TEXT,\n  external_url TEXT,\n\n  payload TEXT NOT NULL,         -- JSON\n  metadata TEXT,                 -- JSON\n  analysis TEXT,                 -- JSON\n  resolution TEXT,               -- JSON\n\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  updated_at TEXT NOT NULL DEFAULT (datetime('now')),\n  resolved_at TEXT,\n  expires_at TEXT NOT NULL       -- created_at + 90 days\n);", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "819", "text": "title TEXT NOT NULL,\n  summary TEXT,\n  external_url TEXT,\n\n  payload TEXT NOT NULL,         -- JSON\n  metadata TEXT,                 -- JSON\n  analysis TEXT,                 -- JSON\n  resolution TEXT,               -- JSON\n\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  updated_at TEXT NOT NULL DEFAULT (datetime('now')),\n  resolved_at TEXT,\n  expires_at TEXT NOT NULL       -- created_at + 90 days\n);\n\nCREATE INDEX idx_alerts_status ON alerts(status);\nCREATE INDEX idx_alerts_source ON alerts(source);\nCREATE INDEX idx_alerts_severity ON alerts(severity);\nCREATE INDEX idx_alerts_created_at ON alerts(created_at);\nCREATE INDEX idx_alerts_expires_at ON alerts(expires_at);\n\n-- Activity Logs 테이블\nCREATE TABLE activity_logs (\n  id TEXT PRIMARY KEY,\n  alert_id TEXT,\n\n  actor TEXT NOT NULL CHECK (actor IN ('system', 'agent', 'user')),\n  action TEXT NOT NULL,\n  description TEXT NOT NULL,\n\n  metadata TEXT,                 -- JSON\n\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "820", "text": "-- Activity Logs 테이블\nCREATE TABLE activity_logs (\n  id TEXT PRIMARY KEY,\n  alert_id TEXT,\n\n  actor TEXT NOT NULL CHECK (actor IN ('system', 'agent', 'user')),\n  action TEXT NOT NULL,\n  description TEXT NOT NULL,\n\n  metadata TEXT,                 -- JSON\n\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n\n  FOREIGN KEY (alert_id) REFERENCES alerts(id) ON DELETE CASCADE\n);\n\nCREATE INDEX idx_activity_logs_alert_id ON activity_logs(alert_id);\nCREATE INDEX idx_activity_logs_created_at ON activity_logs(created_at);\n\n-- Webhook Configs 테이블\nCREATE TABLE webhook_configs (\n  id TEXT PRIMARY KEY,\n  source TEXT NOT NULL,\n  name TEXT NOT NULL,\n\n  endpoint TEXT NOT NULL,\n  secret TEXT,                   -- 암호화됨\n  enabled INTEGER NOT NULL DEFAULT 1,\n\n  rules TEXT,                    -- JSON\n  project_ids TEXT,              -- JSON array\n\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  updated_at TEXT NOT NULL DEFAULT (datetime('now'))\n);", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "821", "text": "-- Webhook Configs 테이블\nCREATE TABLE webhook_configs (\n  id TEXT PRIMARY KEY,\n  source TEXT NOT NULL,\n  name TEXT NOT NULL,\n\n  endpoint TEXT NOT NULL,\n  secret TEXT,                   -- 암호화됨\n  enabled INTEGER NOT NULL DEFAULT 1,\n\n  rules TEXT,                    -- JSON\n  project_ids TEXT,              -- JSON array\n\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  updated_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\n-- Notification Config 테이블 (싱글톤)\nCREATE TABLE notification_config (\n  id TEXT PRIMARY KEY DEFAULT 'default',\n\n  slack_webhook_url TEXT,        -- 암호화됨\n  slack_channel TEXT,\n  slack_enabled INTEGER NOT NULL DEFAULT 0,\n\n  rule_on_critical INTEGER NOT NULL DEFAULT 1,\n  rule_on_autofix INTEGER NOT NULL DEFAULT 1,\n  rule_on_all INTEGER NOT NULL DEFAULT 0,\n\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  updated_at TEXT NOT NULL DEFAULT (datetime('now'))\n);", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "822", "text": "-- Notification Config 테이블 (싱글톤)\nCREATE TABLE notification_config (\n  id TEXT PRIMARY KEY DEFAULT 'default',\n\n  slack_webhook_url TEXT,        -- 암호화됨\n  slack_channel TEXT,\n  slack_enabled INTEGER NOT NULL DEFAULT 0,\n\n  rule_on_critical INTEGER NOT NULL DEFAULT 1,\n  rule_on_autofix INTEGER NOT NULL DEFAULT 1,\n  rule_on_all INTEGER NOT NULL DEFAULT 0,\n\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  updated_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\n-- 만료된 알림 자동 삭제 (앱에서 주기적으로 실행)\n-- DELETE FROM alerts WHERE expires_at < datetime('now');\n```\n\n---\n\n## API Endpoints\n\n### Webhooks (External → Zyflow)\n\n```\nPOST /api/webhooks/github\nPOST /api/webhooks/vercel\nPOST /api/webhooks/sentry\nPOST /api/webhooks/supabase\nPOST /api/webhooks/custom/:configId\n```", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "823", "text": "created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  updated_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\n-- 만료된 알림 자동 삭제 (앱에서 주기적으로 실행)\n-- DELETE FROM alerts WHERE expires_at < datetime('now');\n```\n\n---\n\n## API Endpoints\n\n### Webhooks (External → Zyflow)\n\n```\nPOST /api/webhooks/github\nPOST /api/webhooks/vercel\nPOST /api/webhooks/sentry\nPOST /api/webhooks/supabase\nPOST /api/webhooks/custom/:configId\n```\n\n**Response:**\n```json\n{\n  \"success\": true,\n  \"alertId\": \"uuid\"\n}\n```\n\n### Alerts\n\n```\nGET    /api/alerts\n  Query: source, severity, status, limit, offset, projectId\n\nGET    /api/alerts/:id\n\nPATCH  /api/alerts/:id\n  Body: { status: 'resolved' | 'ignored' }\n\nPOST   /api/alerts/:id/retry\n  Response: { success: true, workflowRunUrl: \"...\" }", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "824", "text": "**Response:**\n```json\n{\n  \"success\": true,\n  \"alertId\": \"uuid\"\n}\n```\n\n### Alerts\n\n```\nGET    /api/alerts\n  Query: source, severity, status, limit, offset, projectId\n\nGET    /api/alerts/:id\n\nPATCH  /api/alerts/:id\n  Body: { status: 'resolved' | 'ignored' }\n\nPOST   /api/alerts/:id/retry\n  Response: { success: true, workflowRunUrl: \"...\" }\n\nPOST   /api/alerts/:id/analyze\n  Response: { success: true, analysis: AlertAnalysis }\n\nGET    /api/alerts/stats\n  Response: { total, bySeverity, bySource, byStatus }\n```\n\n### Activity Logs\n\n```\nGET    /api/activities\n  Query: alertId, actor, limit, offset\n```\n\n### Webhook Configs\n\n```\nGET    /api/webhook-configs\n\nPOST   /api/webhook-configs\n  Body: { source, name, rules?, projectIds? }\n  Response: { id, endpoint, secret }", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "825", "text": "POST   /api/alerts/:id/analyze\n  Response: { success: true, analysis: AlertAnalysis }\n\nGET    /api/alerts/stats\n  Response: { total, bySeverity, bySource, byStatus }\n```\n\n### Activity Logs\n\n```\nGET    /api/activities\n  Query: alertId, actor, limit, offset\n```\n\n### Webhook Configs\n\n```\nGET    /api/webhook-configs\n\nPOST   /api/webhook-configs\n  Body: { source, name, rules?, projectIds? }\n  Response: { id, endpoint, secret }\n\nPATCH  /api/webhook-configs/:id\n  Body: { name?, enabled?, rules?, projectIds? }\n\nDELETE /api/webhook-configs/:id\n\nPOST   /api/webhook-configs/:id/regenerate-secret\n  Response: { secret }\n```\n\n### Notification Config\n\n```\nGET    /api/notification-config\n\nPATCH  /api/notification-config\n  Body: { slack?, rules? }\n\nPOST   /api/notification-config/test\n  Response: { success: true }\n```\n\n---\n\n## Webhook Parsers\n\n### GitHub Actions", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "826", "text": "PATCH  /api/webhook-configs/:id\n  Body: { name?, enabled?, rules?, projectIds? }\n\nDELETE /api/webhook-configs/:id\n\nPOST   /api/webhook-configs/:id/regenerate-secret\n  Response: { secret }\n```\n\n### Notification Config\n\n```\nGET    /api/notification-config\n\nPATCH  /api/notification-config\n  Body: { slack?, rules? }\n\nPOST   /api/notification-config/test\n  Response: { success: true }\n```\n\n---\n\n## Webhook Parsers\n\n### GitHub Actions\n\n```typescript\ninterface GitHubWorkflowPayload {\n  action: 'completed' | 'requested' | 'in_progress';\n  workflow_run: {\n    id: number;\n    name: string;\n    conclusion: 'success' | 'failure' | 'cancelled' | 'skipped' | null;\n    html_url: string;\n    head_branch: string;\n    head_sha: string;\n  };\n  repository: {\n    full_name: string;\n  };\n}\n\nfunction parseGitHubWebhook(payload: GitHubWorkflowPayload): Partial<Alert> {\n  const isFailure = payload.workflow_run.conclusion === 'failure';", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "827", "text": "```typescript\ninterface GitHubWorkflowPayload {\n  action: 'completed' | 'requested' | 'in_progress';\n  workflow_run: {\n    id: number;\n    name: string;\n    conclusion: 'success' | 'failure' | 'cancelled' | 'skipped' | null;\n    html_url: string;\n    head_branch: string;\n    head_sha: string;\n  };\n  repository: {\n    full_name: string;\n  };\n}\n\nfunction parseGitHubWebhook(payload: GitHubWorkflowPayload): Partial<Alert> {\n  const isFailure = payload.workflow_run.conclusion === 'failure';\n\n  return {\n    source: 'github',\n    type: `workflow.${payload.workflow_run.conclusion || payload.action}`,\n    severity: isFailure ? 'critical' : 'info',\n    title: `${payload.workflow_run.name} - ${payload.workflow_run.conclusion || payload.action}`,\n    externalUrl: payload.workflow_run.html_url,\n    metadata: {\n      repo: payload.repository.full_name,\n      branch: payload.workflow_run.head_branch,\n      commit: payload.workflow_run.head_sha,\n    },\n    payload,\n  };\n}\n```\n\n### Vercel", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "828", "text": "return {\n    source: 'github',\n    type: `workflow.${payload.workflow_run.conclusion || payload.action}`,\n    severity: isFailure ? 'critical' : 'info',\n    title: `${payload.workflow_run.name} - ${payload.workflow_run.conclusion || payload.action}`,\n    externalUrl: payload.workflow_run.html_url,\n    metadata: {\n      repo: payload.repository.full_name,\n      branch: payload.workflow_run.head_branch,\n      commit: payload.workflow_run.head_sha,\n    },\n    payload,\n  };\n}\n```\n\n### Vercel\n\n```typescript\ninterface VercelDeploymentPayload {\n  type: 'deployment.created' | 'deployment.error' | 'deployment.succeeded' | 'deployment.canceled';\n  deployment: {\n    id: string;\n    name: string;\n    url: string;\n    inspectorUrl: string;\n    target: 'production' | 'preview';\n    meta?: {\n      githubRepo?: string;\n      githubBranch?: string;\n      githubCommitSha?: string;\n    };\n  };\n}\n\nfunction parseVercelWebhook(payload: VercelDeploymentPayload): Partial<Alert> {\n  const isError = payload.type === 'deployment.error';", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "829", "text": "function parseVercelWebhook(payload: VercelDeploymentPayload): Partial<Alert> {\n  const isError = payload.type === 'deployment.error';\n\n  return {\n    source: 'vercel',\n    type: payload.type,\n    severity: isError ? 'critical' : 'info',\n    title: `Deploy ${payload.deployment.name} - ${payload.type.replace('deployment.', '')}`,\n    externalUrl: payload.deployment.inspectorUrl,\n    metadata: {\n      repo: payload.deployment.meta?.githubRepo,\n      branch: payload.deployment.meta?.githubBranch,\n      commit: payload.deployment.meta?.githubCommitSha,\n      environment: payload.deployment.target,\n    },\n    payload,\n  };\n}\n```\n\n### Sentry", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "830", "text": "return {\n    source: 'vercel',\n    type: payload.type,\n    severity: isError ? 'critical' : 'info',\n    title: `Deploy ${payload.deployment.name} - ${payload.type.replace('deployment.', '')}`,\n    externalUrl: payload.deployment.inspectorUrl,\n    metadata: {\n      repo: payload.deployment.meta?.githubRepo,\n      branch: payload.deployment.meta?.githubBranch,\n      commit: payload.deployment.meta?.githubCommitSha,\n      environment: payload.deployment.target,\n    },\n    payload,\n  };\n}\n```\n\n### Sentry\n\n```typescript\ninterface SentryIssuePayload {\n  action: 'created' | 'resolved' | 'assigned' | 'ignored';\n  data: {\n    issue: {\n      id: string;\n      title: string;\n      culprit: string;\n      level: 'fatal' | 'error' | 'warning' | 'info' | 'debug';\n      permalink: string;\n      project: {\n        slug: string;\n        name: string;\n      };\n    };\n  };\n}", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "831", "text": "### Sentry\n\n```typescript\ninterface SentryIssuePayload {\n  action: 'created' | 'resolved' | 'assigned' | 'ignored';\n  data: {\n    issue: {\n      id: string;\n      title: string;\n      culprit: string;\n      level: 'fatal' | 'error' | 'warning' | 'info' | 'debug';\n      permalink: string;\n      project: {\n        slug: string;\n        name: string;\n      };\n    };\n  };\n}\n\nfunction parseSentryWebhook(payload: SentryIssuePayload): Partial<Alert> {\n  const severityMap: Record<string, Severity> = {\n    fatal: 'critical',\n    error: 'warning',\n    warning: 'info',\n    info: 'info',\n    debug: 'info',\n  };\n\n  return {\n    source: 'sentry',\n    type: `issue.${payload.action}`,\n    severity: severityMap[payload.data.issue.level] || 'info',\n    title: payload.data.issue.title,\n    externalUrl: payload.data.issue.permalink,\n    metadata: {\n      environment: payload.data.issue.project.slug,\n    },\n    payload,\n  };\n}\n```\n\n### Supabase", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "832", "text": "return {\n    source: 'sentry',\n    type: `issue.${payload.action}`,\n    severity: severityMap[payload.data.issue.level] || 'info',\n    title: payload.data.issue.title,\n    externalUrl: payload.data.issue.permalink,\n    metadata: {\n      environment: payload.data.issue.project.slug,\n    },\n    payload,\n  };\n}\n```\n\n### Supabase\n\n```typescript\ninterface SupabaseWebhookPayload {\n  type: string;                  // 'db.error' | 'auth.user.created' | etc\n  project_id: string;\n  timestamp: string;\n  message?: string;\n  details?: Record<string, any>;\n}\n\nfunction parseSupabaseWebhook(payload: SupabaseWebhookPayload): Partial<Alert> {\n  const isError = payload.type.includes('error') || payload.type.includes('failed');\n\n  return {\n    source: 'supabase',\n    type: payload.type,\n    severity: isError ? 'warning' : 'info',\n    title: payload.message || payload.type,\n    metadata: {\n      environment: payload.project_id,\n    },\n    payload,\n  };\n}\n```\n\n---\n\n## Agent Integration\n\n### Analysis Prompt Template", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "833", "text": "function parseSupabaseWebhook(payload: SupabaseWebhookPayload): Partial<Alert> {\n  const isError = payload.type.includes('error') || payload.type.includes('failed');\n\n  return {\n    source: 'supabase',\n    type: payload.type,\n    severity: isError ? 'warning' : 'info',\n    title: payload.message || payload.type,\n    metadata: {\n      environment: payload.project_id,\n    },\n    payload,\n  };\n}\n```\n\n---\n\n## Agent Integration\n\n### Analysis Prompt Template\n\n```markdown\nAnalyze this alert and provide structured findings:\n\n**Alert:**\n- Source: {{source}}\n- Type: {{type}}\n- Title: {{title}}\n\n**Payload:**\n{{payload}}\n\n**Repository Context (if available):**\n{{repoContext}}\n\n**Instructions:**\n1. Identify the root cause\n2. List related files if applicable\n3. Suggest a fix\n4. Determine if auto-fixable (retry, rollback, or code patch)\n5. Rate your confidence (0-1)", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "834", "text": "---\n\n## Agent Integration\n\n### Analysis Prompt Template\n\n```markdown\nAnalyze this alert and provide structured findings:\n\n**Alert:**\n- Source: {{source}}\n- Type: {{type}}\n- Title: {{title}}\n\n**Payload:**\n{{payload}}\n\n**Repository Context (if available):**\n{{repoContext}}\n\n**Instructions:**\n1. Identify the root cause\n2. List related files if applicable\n3. Suggest a fix\n4. Determine if auto-fixable (retry, rollback, or code patch)\n5. Rate your confidence (0-1)\n\n**Output Format (JSON):**\n{\n  \"rootCause\": \"...\",\n  \"relatedFiles\": [\"...\"],\n  \"suggestedFix\": \"...\",\n  \"autoFixable\": true/false,\n  \"autoFixAction\": \"retry\" | \"rollback\" | \"patch\" | null,\n  \"confidence\": 0.0-1.0,\n  \"documentation\": \"...\" // optional\n}\n```\n\n### Risk Assessment\n\n자동 수정 전 위험도를 평가하여 승인 방식을 결정한다.", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "835", "text": "**Output Format (JSON):**\n{\n  \"rootCause\": \"...\",\n  \"relatedFiles\": [\"...\"],\n  \"suggestedFix\": \"...\",\n  \"autoFixable\": true/false,\n  \"autoFixAction\": \"retry\" | \"rollback\" | \"patch\" | null,\n  \"confidence\": 0.0-1.0,\n  \"documentation\": \"...\" // optional\n}\n```\n\n### Risk Assessment\n\n자동 수정 전 위험도를 평가하여 승인 방식을 결정한다.\n\n```typescript\ninterface RiskAssessment {\n  level: 'low' | 'medium' | 'high';\n  autoApprove: boolean;\n  requiresReview: boolean;\n  reason: string;\n}\n```", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "836", "text": "### Risk Assessment\n\n자동 수정 전 위험도를 평가하여 승인 방식을 결정한다.\n\n```typescript\ninterface RiskAssessment {\n  level: 'low' | 'medium' | 'high';\n  autoApprove: boolean;\n  requiresReview: boolean;\n  reason: string;\n}\n```\n\n| 위험도 | 예시 | 자동 승인 | PR 필요 |\n|--------|------|----------|---------|\n| **Low** | 재시도, 캐시 클리어, 린트/포맷 수정, unused import 제거 | ✅ 바로 실행 | ❌ |\n| **Medium** | 타입 에러 수정, optional chaining 추가, 의존성 업데이트 | ❌ | ✅ 리뷰 대기 |\n| **High** | 로직 변경, DB 스키마, 보안 관련, 인증 코드 | ❌ | ✅ 리뷰 필수 + 라벨 |\n\n#### Low Risk (자동 승인) 조건", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "837", "text": "#### Low Risk (자동 승인) 조건\n\nActions:\n- `retry` - 워크플로우 재실행\n- `cache_clear` - 캐시 정리\n- `rerun_tests` - 테스트 재실행\n\nPatterns (suggestedFix 매칭):\n- 린트/포맷팅 수정\n- import 순서 정리\n- trailing space/comma 정리\n- unused import/variable 제거\n\n#### High Risk (리뷰 필수) 조건\n\nPatterns:\n- security, auth, password, secret, token\n- database, schema, migration\n- delete, remove, drop\n- payment, billing, credit\n\nFiles:\n- `.env*`\n- `config/(prod|production)/*`\n- `**/migration/**`\n- `schema.(ts|sql)`\n\n#### Risk Assessment 로직\n\n```typescript\nfunction assessRisk(analysis: AlertAnalysis): RiskAssessment {\n  const { autoFixAction, relatedFiles, suggestedFix } = analysis;", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "838", "text": "#### High Risk (리뷰 필수) 조건\n\nPatterns:\n- security, auth, password, secret, token\n- database, schema, migration\n- delete, remove, drop\n- payment, billing, credit\n\nFiles:\n- `.env*`\n- `config/(prod|production)/*`\n- `**/migration/**`\n- `schema.(ts|sql)`\n\n#### Risk Assessment 로직\n\n```typescript\nfunction assessRisk(analysis: AlertAnalysis): RiskAssessment {\n  const { autoFixAction, relatedFiles, suggestedFix } = analysis;\n\n  // Low Risk Actions - 자동 승인\n  const lowRiskActions = ['retry', 'cache_clear', 'rerun_tests'];\n\n  const lowRiskPatterns = [\n    /lint\\s*(fix|error)/i,\n    /format(ting)?/i,\n    /import\\s*order/i,\n    /trailing\\s*(space|comma)/i,\n    /unused\\s*(import|variable)/i,\n  ];", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "839", "text": "```typescript\nfunction assessRisk(analysis: AlertAnalysis): RiskAssessment {\n  const { autoFixAction, relatedFiles, suggestedFix } = analysis;\n\n  // Low Risk Actions - 자동 승인\n  const lowRiskActions = ['retry', 'cache_clear', 'rerun_tests'];\n\n  const lowRiskPatterns = [\n    /lint\\s*(fix|error)/i,\n    /format(ting)?/i,\n    /import\\s*order/i,\n    /trailing\\s*(space|comma)/i,\n    /unused\\s*(import|variable)/i,\n  ];\n\n  // High Risk - 리뷰 필수\n  const highRiskPatterns = [\n    /security/i,\n    /auth(entication)?/i,\n    /password|secret|token/i,\n    /database|schema|migration/i,\n    /delete|remove|drop/i,\n    /payment|billing|credit/i,\n  ];\n\n  const highRiskFiles = [\n    /\\.env/,\n    /config\\/(prod|production)/,\n    /migration/,\n    /schema\\.(ts|sql)/,\n  ];", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "840", "text": "// High Risk - 리뷰 필수\n  const highRiskPatterns = [\n    /security/i,\n    /auth(entication)?/i,\n    /password|secret|token/i,\n    /database|schema|migration/i,\n    /delete|remove|drop/i,\n    /payment|billing|credit/i,\n  ];\n\n  const highRiskFiles = [\n    /\\.env/,\n    /config\\/(prod|production)/,\n    /migration/,\n    /schema\\.(ts|sql)/,\n  ];\n\n  // 판정\n  if (lowRiskActions.includes(autoFixAction)) {\n    return {\n      level: 'low',\n      autoApprove: true,\n      requiresReview: false,\n      reason: `Safe action: ${autoFixAction}`,\n    };\n  }\n\n  if (lowRiskPatterns.some(p => p.test(suggestedFix || ''))) {\n    return {\n      level: 'low',\n      autoApprove: true,\n      requiresReview: false,\n      reason: 'Code style fix only',\n    };\n  }", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "841", "text": "// 판정\n  if (lowRiskActions.includes(autoFixAction)) {\n    return {\n      level: 'low',\n      autoApprove: true,\n      requiresReview: false,\n      reason: `Safe action: ${autoFixAction}`,\n    };\n  }\n\n  if (lowRiskPatterns.some(p => p.test(suggestedFix || ''))) {\n    return {\n      level: 'low',\n      autoApprove: true,\n      requiresReview: false,\n      reason: 'Code style fix only',\n    };\n  }\n\n  if (highRiskPatterns.some(p => p.test(suggestedFix || '')) ||\n      relatedFiles?.some(f => highRiskFiles.some(p => p.test(f)))) {\n    return {\n      level: 'high',\n      autoApprove: false,\n      requiresReview: true,\n      reason: 'Sensitive code or files affected',\n    };\n  }\n\n  return {\n    level: 'medium',\n    autoApprove: false,\n    requiresReview: true,\n    reason: 'Code logic change',\n  };\n}\n```\n\n### Auto-Fix Actions", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "842", "text": "### Auto-Fix Actions\n\n| Action | Trigger Condition | Risk Level | Implementation |\n|--------|------------------|------------|----------------|\n| **retry** | `autoFixAction === 'retry'` | Low | GitHub API: 워크플로우 재실행, 바로 실행 |\n| **rollback** | `autoFixAction === 'rollback'` + `confidence >= 0.8` | Medium | Vercel API: 이전 배포 복원, 리뷰 대기 |\n| **patch (low)** | `autoFixAction === 'patch'` + `riskLevel === 'low'` | Low | Git: 바로 커밋 & 푸시, Slack 알림 |\n| **patch (medium/high)** | `autoFixAction === 'patch'` + `riskLevel !== 'low'` | Medium/High | Git: PR 생성, 리뷰 대기 |\n| **escalate** | 나머지 모든 케이스 | - | Slack 알림 + 상세 분석 결과 첨부 |", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "843", "text": "### Auto-Fix Flow\n\n```\nAlert 수신\n    ↓\nAgent 분석 (confidence, autoFixAction)\n    ↓\nRisk Assessment\n    ↓\n┌─────────────────────────────────────────────┐\n│                                             │\n▼                    ▼                    ▼\n[Low Risk]       [Medium Risk]       [High Risk]\n    │                 │                   │\n    ▼                 ▼                   ▼\n바로 실행          PR 생성             PR 생성\n(retry/patch)     리뷰 대기         + 🔴 라벨 추가\n    │                 │                   │\n    ▼                 │                   │\nSlack 알림           └─────────┬─────────┘\n\"✅ 자동 해결\"                 ▼\n                         Slack 알림\n                     \"👀 리뷰 필요: [PR링크]\"\n```\n\n---\n\n## Slack Notification Format\n\n### Critical Alert\n\n```\n🔴 *Critical Alert*\n\n*Build Failed* - GitHub Actions\nRepository: `zyflow/main`\nBranch: `feature/new-ui`", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "844", "text": "---\n\n## Slack Notification Format\n\n### Critical Alert\n\n```\n🔴 *Critical Alert*\n\n*Build Failed* - GitHub Actions\nRepository: `zyflow/main`\nBranch: `feature/new-ui`\n\n> TypeScript compilation error in AlertList.tsx\n\n[View on GitHub](url) | [View in Zyflow](url)\n```\n\n### Auto-Fix Completed\n\n```\n🟢 *Auto-Fixed*\n\n*Type Error* resolved via PR\n\nRepository: `zyflow/main`\nAction: Created fix PR #143\n\n[Review PR](url) | [View Details](url)\n```\n\n---\n\n## UI Components\n\n### AlertCenter (Sidebar)\n\n위치: 사이드바 메뉴 아이템으로 추가", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "845", "text": "---\n\n## UI Components\n\n### AlertCenter (Sidebar)\n\n위치: 사이드바 메뉴 아이템으로 추가\n\n```\nsrc/components/alerts/\n├── AlertCenter.tsx           # 메인 컨테이너\n├── AlertList.tsx             # 알림 목록\n├── AlertItem.tsx             # 개별 알림 카드\n├── AlertDetail.tsx           # 상세 뷰\n├── AlertTimeline.tsx         # Activity 타임라인\n├── AlertFilters.tsx          # 필터 UI\n├── AlertStats.tsx            # 통계 요약\n├── AlertSettings.tsx         # 설정 패널\n└── hooks/\n    ├── useAlerts.ts          # 알림 데이터 훅\n    ├── useAlertActions.ts    # 액션 훅 (retry, ignore 등)\n    └── useWebhookConfigs.ts  # Webhook 설정 훅\n```\n\n---\n\n## Implementation Phases", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "846", "text": "---\n\n## Implementation Phases\n\n### Phase 1: Foundation (Week 1)\n\n- [ ] DB 스키마 마이그레이션\n- [ ] Webhook 엔드포인트 구현 (`/api/webhooks/*`)\n- [ ] GitHub, Vercel 파서 구현\n- [ ] Alert CRUD API\n- [ ] 기본 AlertList UI\n- [ ] 사이드바에 Alerts 메뉴 추가\n\n### Phase 2: Core Features (Week 2)\n\n- [ ] Sentry, Supabase 파서 추가\n- [ ] AlertDetail 뷰\n- [ ] ActivityTimeline 컴포넌트\n- [ ] Webhook 설정 UI\n- [ ] 만료 알림 자동 삭제 (90일)\n\n### Phase 3: Notifications (Week 3)\n\n- [ ] Slack 알림 연동\n- [ ] Notification 설정 UI\n- [ ] 알림 테스트 기능\n- [ ] 필터 및 검색 기능\n\n### Phase 4: Agent Integration (Week 4)", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "847", "text": "- [ ] Sentry, Supabase 파서 추가\n- [ ] AlertDetail 뷰\n- [ ] ActivityTimeline 컴포넌트\n- [ ] Webhook 설정 UI\n- [ ] 만료 알림 자동 삭제 (90일)\n\n### Phase 3: Notifications (Week 3)\n\n- [ ] Slack 알림 연동\n- [ ] Notification 설정 UI\n- [ ] 알림 테스트 기능\n- [ ] 필터 및 검색 기능\n\n### Phase 4: Agent Integration (Week 4)\n\n- [ ] Alert 분석 Agent 프롬프트\n- [ ] 분석 결과 저장 및 표시\n- [ ] 유사 Alert 매칭 로직\n- [ ] Auto-fix: retry 구현\n\n### Phase 5: Advanced Auto-Fix (Week 5)", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "848", "text": "- [ ] Slack 알림 연동\n- [ ] Notification 설정 UI\n- [ ] 알림 테스트 기능\n- [ ] 필터 및 검색 기능\n\n### Phase 4: Agent Integration (Week 4)\n\n- [ ] Alert 분석 Agent 프롬프트\n- [ ] 분석 결과 저장 및 표시\n- [ ] 유사 Alert 매칭 로직\n- [ ] Auto-fix: retry 구현\n\n### Phase 5: Advanced Auto-Fix (Week 5)\n\n- [ ] Auto-fix: rollback 구현\n- [ ] Auto-fix: PR 생성 (리뷰 대기)\n- [ ] 통계 대시보드\n- [ ] 성능 최적화\n\n---\n\n## Security", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "849", "text": "- [ ] Alert 분석 Agent 프롬프트\n- [ ] 분석 결과 저장 및 표시\n- [ ] 유사 Alert 매칭 로직\n- [ ] Auto-fix: retry 구현\n\n### Phase 5: Advanced Auto-Fix (Week 5)\n\n- [ ] Auto-fix: rollback 구현\n- [ ] Auto-fix: PR 생성 (리뷰 대기)\n- [ ] 통계 대시보드\n- [ ] 성능 최적화\n\n---\n\n## Security\n\n| 항목 | 구현 |\n|------|------|\n| Webhook 검증 | HMAC-SHA256 signature 검증 (GitHub, Vercel) |\n| Secret 저장 | AES-256 암호화 후 DB 저장 |\n| Rate Limiting | 소스당 100 req/min |\n| Payload 크기 | 최대 1MB |\n| HTTPS Only | Webhook endpoint는 HTTPS만 허용 |\n\n---\n\n## Metrics & Monitoring\n\n추적할 메트릭:", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "850", "text": "---\n\n## Security\n\n| 항목 | 구현 |\n|------|------|\n| Webhook 검증 | HMAC-SHA256 signature 검증 (GitHub, Vercel) |\n| Secret 저장 | AES-256 암호화 후 DB 저장 |\n| Rate Limiting | 소스당 100 req/min |\n| Payload 크기 | 최대 1MB |\n| HTTPS Only | Webhook endpoint는 HTTPS만 허용 |\n\n---\n\n## Metrics & Monitoring\n\n추적할 메트릭:\n\n- `alerts.received` - 수신된 알림 수 (by source)\n- `alerts.resolved` - 해결된 알림 수 (by resolution type)\n- `alerts.auto_fixed` - 자동 해결된 알림 수\n- `agent.analysis_time` - Agent 분석 소요 시간\n- `webhook.latency` - Webhook 처리 지연\n\n---\n\n## Future Considerations", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "851", "text": "---\n\n## Metrics & Monitoring\n\n추적할 메트릭:\n\n- `alerts.received` - 수신된 알림 수 (by source)\n- `alerts.resolved` - 해결된 알림 수 (by resolution type)\n- `alerts.auto_fixed` - 자동 해결된 알림 수\n- `agent.analysis_time` - Agent 분석 소요 시간\n- `webhook.latency` - Webhook 처리 지연\n\n---\n\n## Future Considerations\n\n- [ ] 이메일 알림 옵션 추가\n- [ ] 모바일 푸시 알림\n- [ ] Alert 패턴 학습 및 예측\n- [ ] 팀 협업 기능 (할당, 코멘트)\n- [ ] 커스텀 webhook 파서 UI\n- [ ] Grafana/Datadog 연동\n\n---\n\n## Appendix: External Service Webhook Setup\n\n### GitHub Actions", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "852", "text": "---\n\n## Future Considerations\n\n- [ ] 이메일 알림 옵션 추가\n- [ ] 모바일 푸시 알림\n- [ ] Alert 패턴 학습 및 예측\n- [ ] 팀 협업 기능 (할당, 코멘트)\n- [ ] 커스텀 webhook 파서 UI\n- [ ] Grafana/Datadog 연동\n\n---\n\n## Appendix: External Service Webhook Setup\n\n### GitHub Actions\n\n1. Repository → Settings → Webhooks → Add webhook\n2. Payload URL: `https://your-domain/api/webhooks/github`\n3. Content type: `application/json`\n4. Secret: Zyflow에서 생성된 secret\n5. Events: \"Workflow runs\" 선택\n\n### Vercel\n\n1. Project → Settings → Webhooks → Add\n2. URL: `https://your-domain/api/webhooks/vercel`\n3. Events: `deployment.created`, `deployment.error`, `deployment.succeeded`\n\n### Sentry", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "853", "text": "---\n\n## Appendix: External Service Webhook Setup\n\n### GitHub Actions\n\n1. Repository → Settings → Webhooks → Add webhook\n2. Payload URL: `https://your-domain/api/webhooks/github`\n3. Content type: `application/json`\n4. Secret: Zyflow에서 생성된 secret\n5. Events: \"Workflow runs\" 선택\n\n### Vercel\n\n1. Project → Settings → Webhooks → Add\n2. URL: `https://your-domain/api/webhooks/vercel`\n3. Events: `deployment.created`, `deployment.error`, `deployment.succeeded`\n\n### Sentry\n\n1. Settings → Integrations → Webhooks\n2. Callback URL: `https://your-domain/api/webhooks/sentry`\n3. 또는 Slack 연동 후 Zyflow로 전달\n\n### Supabase\n\n1. Project → Database → Webhooks (Database Webhooks 기능)\n2. 또는 Edge Functions로 커스텀 알림 구현", "metadata": {"file_path": "docs/specs/alert-system.md", "file_name": "alert-system.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "854", "text": "# OpenSpec Instructions\n\nInstructions for AI coding assistants using OpenSpec for spec-driven development.\n\n## TL;DR Quick Checklist\n\n- Search existing work: `openspec spec list --long`, `openspec list` (use `rg` only for full-text search)\n- Decide scope: new capability vs modify existing capability\n- Pick a unique `change-id`: kebab-case, verb-led (`add-`, `update-`, `remove-`, `refactor-`)\n- Scaffold: `proposal.md`, `tasks.md`, `design.md` (only if needed), and delta specs per affected capability\n- Write deltas: use `## ADDED|MODIFIED|REMOVED|RENAMED Requirements`; include at least one `#### Scenario:` per requirement\n- Validate: `openspec validate [change-id] --strict` and fix issues\n- Request approval: Do not start implementation until proposal is approved\n\n## Three-Stage Workflow\n\n### Stage 1: Creating Changes\nCreate proposal when you need to:\n- Add features or functionality\n- Make breaking changes (API, schema)\n- Change architecture or patterns  \n- Optimize performance (changes behavior)\n- Update security patterns", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "855", "text": "## Three-Stage Workflow\n\n### Stage 1: Creating Changes\nCreate proposal when you need to:\n- Add features or functionality\n- Make breaking changes (API, schema)\n- Change architecture or patterns  \n- Optimize performance (changes behavior)\n- Update security patterns\n\nTriggers (examples):\n- \"Help me create a change proposal\"\n- \"Help me plan a change\"\n- \"Help me create a proposal\"\n- \"I want to create a spec proposal\"\n- \"I want to create a spec\"\n\nLoose matching guidance:\n- Contains one of: `proposal`, `change`, `spec`\n- With one of: `create`, `plan`, `make`, `start`, `help`\n\nSkip proposal for:\n- Bug fixes (restore intended behavior)\n- Typos, formatting, comments\n- Dependency updates (non-breaking)\n- Configuration changes\n- Tests for existing behavior", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "856", "text": "Loose matching guidance:\n- Contains one of: `proposal`, `change`, `spec`\n- With one of: `create`, `plan`, `make`, `start`, `help`\n\nSkip proposal for:\n- Bug fixes (restore intended behavior)\n- Typos, formatting, comments\n- Dependency updates (non-breaking)\n- Configuration changes\n- Tests for existing behavior\n\n**Workflow**\n1. Review `openspec/project.md`, `openspec list`, and `openspec list --specs` to understand current context.\n2. Choose a unique verb-led `change-id` and scaffold `proposal.md`, `tasks.md`, optional `design.md`, and spec deltas under `openspec/changes/<id>/`.\n3. Draft spec deltas using `## ADDED|MODIFIED|REMOVED Requirements` with at least one `#### Scenario:` per requirement.\n4. Run `openspec validate <id> --strict` and resolve any issues before sharing the proposal.", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "857", "text": "### Stage 2: Implementing Changes\nTrack these steps as TODOs and complete them one by one.\n1. **Read proposal.md** - Understand what's being built\n2. **Read design.md** (if exists) - Review technical decisions\n3. **Read tasks.md** - Get implementation checklist\n4. **Implement tasks sequentially** - Complete in order\n5. **Confirm completion** - Ensure every item in `tasks.md` is finished before updating statuses\n6. **Update checklist** - After all work is done, set every task to `- [x]` so the list reflects reality\n7. **Approval gate** - Do not start implementation until the proposal is reviewed and approved\n\n### Stage 3: Archiving Changes\nAfter deployment, create separate PR to:\n- Move `changes/[name]/` → `changes/archive/YYYY-MM-DD-[name]/`\n- Update `specs/` if capabilities changed\n- Use `openspec archive <change-id> --skip-specs --yes` for tooling-only changes (always pass the change ID explicitly)\n- Run `openspec validate --strict` to confirm the archived change passes checks\n\n## Before Any Task", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "858", "text": "### Stage 3: Archiving Changes\nAfter deployment, create separate PR to:\n- Move `changes/[name]/` → `changes/archive/YYYY-MM-DD-[name]/`\n- Update `specs/` if capabilities changed\n- Use `openspec archive <change-id> --skip-specs --yes` for tooling-only changes (always pass the change ID explicitly)\n- Run `openspec validate --strict` to confirm the archived change passes checks\n\n## Before Any Task\n\n**Context Checklist:**\n- [ ] Read relevant specs in `specs/[capability]/spec.md`\n- [ ] Check pending changes in `changes/` for conflicts\n- [ ] Read `openspec/project.md` for conventions\n- [ ] Run `openspec list` to see active changes\n- [ ] Run `openspec list --specs` to see existing capabilities\n\n**Before Creating Specs:**\n- Always check if capability already exists\n- Prefer modifying existing specs over creating duplicates\n- Use `openspec show [spec]` to review current state\n- If request is ambiguous, ask 1–2 clarifying questions before scaffolding", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "859", "text": "**Before Creating Specs:**\n- Always check if capability already exists\n- Prefer modifying existing specs over creating duplicates\n- Use `openspec show [spec]` to review current state\n- If request is ambiguous, ask 1–2 clarifying questions before scaffolding\n\n### Search Guidance\n- Enumerate specs: `openspec spec list --long` (or `--json` for scripts)\n- Enumerate changes: `openspec list` (or `openspec change list --json` - deprecated but available)\n- Show details:\n  - Spec: `openspec show <spec-id> --type spec` (use `--json` for filters)\n  - Change: `openspec show <change-id> --json --deltas-only`\n- Full-text search (use ripgrep): `rg -n \"Requirement:|Scenario:\" openspec/specs`\n\n## Quick Start\n\n### CLI Commands", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "860", "text": "## Quick Start\n\n### CLI Commands\n\n```bash\n# Essential commands\nopenspec list                  # List active changes\nopenspec list --specs          # List specifications\nopenspec show [item]           # Display change or spec\nopenspec validate [item]       # Validate changes or specs\nopenspec archive <change-id> [--yes|-y]   # Archive after deployment (add --yes for non-interactive runs)\n\n# Project management\nopenspec init [path]           # Initialize OpenSpec\nopenspec update [path]         # Update instruction files\n\n# Interactive mode\nopenspec show                  # Prompts for selection\nopenspec validate              # Bulk validation mode\n\n# Debugging\nopenspec show [change] --json --deltas-only\nopenspec validate [change] --strict\n```\n\n### Command Flags", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "861", "text": "# Project management\nopenspec init [path]           # Initialize OpenSpec\nopenspec update [path]         # Update instruction files\n\n# Interactive mode\nopenspec show                  # Prompts for selection\nopenspec validate              # Bulk validation mode\n\n# Debugging\nopenspec show [change] --json --deltas-only\nopenspec validate [change] --strict\n```\n\n### Command Flags\n\n- `--json` - Machine-readable output\n- `--type change|spec` - Disambiguate items\n- `--strict` - Comprehensive validation\n- `--no-interactive` - Disable prompts\n- `--skip-specs` - Archive without spec updates\n- `--yes`/`-y` - Skip confirmation prompts (non-interactive archive)\n\n## Directory Structure", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "862", "text": "## Directory Structure\n\n```\nopenspec/\n├── project.md              # Project conventions\n├── specs/                  # Current truth - what IS built\n│   └── [capability]/       # Single focused capability\n│       ├── spec.md         # Requirements and scenarios\n│       └── design.md       # Technical patterns\n├── changes/                # Proposals - what SHOULD change\n│   ├── [change-name]/\n│   │   ├── proposal.md     # Why, what, impact\n│   │   ├── tasks.md        # Implementation checklist\n│   │   ├── design.md       # Technical decisions (optional; see criteria)\n│   │   └── specs/          # Delta changes\n│   │       └── [capability]/\n│   │           └── spec.md # ADDED/MODIFIED/REMOVED\n│   └── archive/            # Completed changes\n```\n\n## Creating Change Proposals\n\n### Decision Tree", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "863", "text": "## Creating Change Proposals\n\n### Decision Tree\n\n```\nNew request?\n├─ Bug fix restoring spec behavior? → Fix directly\n├─ Typo/format/comment? → Fix directly  \n├─ New feature/capability? → Create proposal\n├─ Breaking change? → Create proposal\n├─ Architecture change? → Create proposal\n└─ Unclear? → Create proposal (safer)\n```\n\n### Proposal Structure\n\n1. **Create directory:** `changes/[change-id]/` (kebab-case, verb-led, unique)\n\n2. **Write proposal.md:**\n```markdown\n# Change: [Brief description of change]\n\n## Why\n[1-2 sentences on problem/opportunity]\n\n## What Changes\n- [Bullet list of changes]\n- [Mark breaking changes with **BREAKING**]\n\n## Impact\n- Affected specs: [list capabilities]\n- Affected code: [key files/systems]\n```\n\n3. **Create spec deltas:** `specs/[capability]/spec.md`\n```markdown\n## ADDED Requirements\n### Requirement: New Feature\nThe system SHALL provide...", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "864", "text": "2. **Write proposal.md:**\n```markdown\n# Change: [Brief description of change]\n\n## Why\n[1-2 sentences on problem/opportunity]\n\n## What Changes\n- [Bullet list of changes]\n- [Mark breaking changes with **BREAKING**]\n\n## Impact\n- Affected specs: [list capabilities]\n- Affected code: [key files/systems]\n```\n\n3. **Create spec deltas:** `specs/[capability]/spec.md`\n```markdown\n## ADDED Requirements\n### Requirement: New Feature\nThe system SHALL provide...\n\n#### Scenario: Success case\n- **WHEN** user performs action\n- **THEN** expected result\n\n## MODIFIED Requirements\n### Requirement: Existing Feature\n[Complete modified requirement]\n\n## REMOVED Requirements\n### Requirement: Old Feature\n**Reason**: [Why removing]\n**Migration**: [How to handle]\n```\nIf multiple capabilities are affected, create multiple delta files under `changes/[change-id]/specs/<capability>/spec.md`—one per capability.", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "865", "text": "#### Scenario: Success case\n- **WHEN** user performs action\n- **THEN** expected result\n\n## MODIFIED Requirements\n### Requirement: Existing Feature\n[Complete modified requirement]\n\n## REMOVED Requirements\n### Requirement: Old Feature\n**Reason**: [Why removing]\n**Migration**: [How to handle]\n```\nIf multiple capabilities are affected, create multiple delta files under `changes/[change-id]/specs/<capability>/spec.md`—one per capability.\n\n4. **Create tasks.md:**\n```markdown\n## 1. Implementation\n- [ ] 1.1 Create database schema\n- [ ] 1.2 Implement API endpoint\n- [ ] 1.3 Add frontend component\n- [ ] 1.4 Write tests\n```\n\n### tasks.md 작성 규칙 (ZyFlow 파싱 호환)\n\nZyFlow와 MCP 서버가 tasks.md를 정확하게 파싱할 수 있도록 다음 형식을 준수합니다:", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "866", "text": "4. **Create tasks.md:**\n```markdown\n## 1. Implementation\n- [ ] 1.1 Create database schema\n- [ ] 1.2 Implement API endpoint\n- [ ] 1.3 Add frontend component\n- [ ] 1.4 Write tests\n```\n\n### tasks.md 작성 규칙 (ZyFlow 파싱 호환)\n\nZyFlow와 MCP 서버가 tasks.md를 정확하게 파싱할 수 있도록 다음 형식을 준수합니다:\n\n**Phase/섹션 형식:**\n```markdown\n## Phase 1: 제목           # 또는 ## 1. 제목\n### 1.1 서브섹션 제목       # 번호.번호 형식 권장\n```", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "867", "text": "### tasks.md 작성 규칙 (ZyFlow 파싱 호환)\n\nZyFlow와 MCP 서버가 tasks.md를 정확하게 파싱할 수 있도록 다음 형식을 준수합니다:\n\n**Phase/섹션 형식:**\n```markdown\n## Phase 1: 제목           # 또는 ## 1. 제목\n### 1.1 서브섹션 제목       # 번호.번호 형식 권장\n```\n\n**태스크 형식:**\n```markdown\n- [ ] 태스크 제목           # 미완료\n- [x] 완료된 태스크         # 완료\n  - [ ] 하위 태스크         # 2칸 들여쓰기\n  - [x] 완료된 하위 태스크\n```\n\n**권장 구조:**\n```markdown\n# Tasks: Change 제목\n\n## Phase 1: 데이터베이스", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "868", "text": "**태스크 형식:**\n```markdown\n- [ ] 태스크 제목           # 미완료\n- [x] 완료된 태스크         # 완료\n  - [ ] 하위 태스크         # 2칸 들여쓰기\n  - [x] 완료된 하위 태스크\n```\n\n**권장 구조:**\n```markdown\n# Tasks: Change 제목\n\n## Phase 1: 데이터베이스\n\n### 1.1 스키마 설계\n- [ ] 테이블 생성\n  - [ ] users 테이블\n  - [ ] orders 테이블\n- [ ] 인덱스 추가\n\n### 1.2 마이그레이션\n- [ ] 마이그레이션 파일 작성\n- [ ] 테스트 환경 적용\n\n## Phase 2: API 구현\n...\n```", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "869", "text": "## Phase 1: 데이터베이스\n\n### 1.1 스키마 설계\n- [ ] 테이블 생성\n  - [ ] users 테이블\n  - [ ] orders 테이블\n- [ ] 인덱스 추가\n\n### 1.2 마이그레이션\n- [ ] 마이그레이션 파일 작성\n- [ ] 테스트 환경 적용\n\n## Phase 2: API 구현\n...\n```\n\n**주의사항:**\n- Phase는 `## Phase N:` 또는 `## N.` 형식 사용\n- 서브섹션은 `### N.N` 형식 사용 (예: `### 1.1`, `### 2.3`)\n- 하위 태스크는 정확히 **2칸** 들여쓰기\n- 태스크 번호 없이 `- [ ]` 사용 (ID는 파서가 자동 생성)", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "870", "text": "**주의사항:**\n- Phase는 `## Phase N:` 또는 `## N.` 형식 사용\n- 서브섹션은 `### N.N` 형식 사용 (예: `### 1.1`, `### 2.3`)\n- 하위 태스크는 정확히 **2칸** 들여쓰기\n- 태스크 번호 없이 `- [ ]` 사용 (ID는 파서가 자동 생성)\n\n5. **Create design.md when needed:**\nCreate `design.md` if any of the following apply; otherwise omit it:\n- Cross-cutting change (multiple services/modules) or a new architectural pattern\n- New external dependency or significant data model changes\n- Security, performance, or migration complexity\n- Ambiguity that benefits from technical decisions before coding\n\nMinimal `design.md` skeleton:\n```markdown\n## Context\n[Background, constraints, stakeholders]\n\n## Goals / Non-Goals\n- Goals: [...]\n- Non-Goals: [...]", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "871", "text": "5. **Create design.md when needed:**\nCreate `design.md` if any of the following apply; otherwise omit it:\n- Cross-cutting change (multiple services/modules) or a new architectural pattern\n- New external dependency or significant data model changes\n- Security, performance, or migration complexity\n- Ambiguity that benefits from technical decisions before coding\n\nMinimal `design.md` skeleton:\n```markdown\n## Context\n[Background, constraints, stakeholders]\n\n## Goals / Non-Goals\n- Goals: [...]\n- Non-Goals: [...]\n\n## Decisions\n- Decision: [What and why]\n- Alternatives considered: [Options + rationale]\n\n## Risks / Trade-offs\n- [Risk] → Mitigation\n\n## Migration Plan\n[Steps, rollback]\n\n## Open Questions\n- [...]\n```\n\n## Spec File Format\n\n### Critical: Scenario Formatting\n\n**CORRECT** (use #### headers):\n```markdown\n#### Scenario: User login success\n- **WHEN** valid credentials provided\n- **THEN** return JWT token\n```", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "872", "text": "## Goals / Non-Goals\n- Goals: [...]\n- Non-Goals: [...]\n\n## Decisions\n- Decision: [What and why]\n- Alternatives considered: [Options + rationale]\n\n## Risks / Trade-offs\n- [Risk] → Mitigation\n\n## Migration Plan\n[Steps, rollback]\n\n## Open Questions\n- [...]\n```\n\n## Spec File Format\n\n### Critical: Scenario Formatting\n\n**CORRECT** (use #### headers):\n```markdown\n#### Scenario: User login success\n- **WHEN** valid credentials provided\n- **THEN** return JWT token\n```\n\n**WRONG** (don't use bullets or bold):\n```markdown\n- **Scenario: User login**  ❌\n**Scenario**: User login     ❌\n### Scenario: User login      ❌\n```\n\nEvery requirement MUST have at least one scenario.\n\n### Requirement Wording\n- Use SHALL/MUST for normative requirements (avoid should/may unless intentionally non-normative)\n\n### Delta Operations", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "873", "text": "**CORRECT** (use #### headers):\n```markdown\n#### Scenario: User login success\n- **WHEN** valid credentials provided\n- **THEN** return JWT token\n```\n\n**WRONG** (don't use bullets or bold):\n```markdown\n- **Scenario: User login**  ❌\n**Scenario**: User login     ❌\n### Scenario: User login      ❌\n```\n\nEvery requirement MUST have at least one scenario.\n\n### Requirement Wording\n- Use SHALL/MUST for normative requirements (avoid should/may unless intentionally non-normative)\n\n### Delta Operations\n\n- `## ADDED Requirements` - New capabilities\n- `## MODIFIED Requirements` - Changed behavior\n- `## REMOVED Requirements` - Deprecated features\n- `## RENAMED Requirements` - Name changes\n\nHeaders matched with `trim(header)` - whitespace ignored.", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "874", "text": "### Requirement Wording\n- Use SHALL/MUST for normative requirements (avoid should/may unless intentionally non-normative)\n\n### Delta Operations\n\n- `## ADDED Requirements` - New capabilities\n- `## MODIFIED Requirements` - Changed behavior\n- `## REMOVED Requirements` - Deprecated features\n- `## RENAMED Requirements` - Name changes\n\nHeaders matched with `trim(header)` - whitespace ignored.\n\n#### When to use ADDED vs MODIFIED\n- ADDED: Introduces a new capability or sub-capability that can stand alone as a requirement. Prefer ADDED when the change is orthogonal (e.g., adding \"Slash Command Configuration\") rather than altering the semantics of an existing requirement.\n- MODIFIED: Changes the behavior, scope, or acceptance criteria of an existing requirement. Always paste the full, updated requirement content (header + all scenarios). The archiver will replace the entire requirement with what you provide here; partial deltas will drop previous details.\n- RENAMED: Use when only the name changes. If you also change behavior, use RENAMED (name) plus MODIFIED (content) referencing the new name.", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "875", "text": "Common pitfall: Using MODIFIED to add a new concern without including the previous text. This causes loss of detail at archive time. If you aren’t explicitly changing the existing requirement, add a new requirement under ADDED instead.\n\nAuthoring a MODIFIED requirement correctly:\n1) Locate the existing requirement in `openspec/specs/<capability>/spec.md`.\n2) Copy the entire requirement block (from `### Requirement: ...` through its scenarios).\n3) Paste it under `## MODIFIED Requirements` and edit to reflect the new behavior.\n4) Ensure the header text matches exactly (whitespace-insensitive) and keep at least one `#### Scenario:`.\n\nExample for RENAMED:\n```markdown\n## RENAMED Requirements\n- FROM: `### Requirement: Login`\n- TO: `### Requirement: User Authentication`\n```\n\n## Troubleshooting\n\n### Common Errors\n\n**\"Change must have at least one delta\"**\n- Check `changes/[name]/specs/` exists with .md files\n- Verify files have operation prefixes (## ADDED Requirements)", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "876", "text": "Example for RENAMED:\n```markdown\n## RENAMED Requirements\n- FROM: `### Requirement: Login`\n- TO: `### Requirement: User Authentication`\n```\n\n## Troubleshooting\n\n### Common Errors\n\n**\"Change must have at least one delta\"**\n- Check `changes/[name]/specs/` exists with .md files\n- Verify files have operation prefixes (## ADDED Requirements)\n\n**\"Requirement must have at least one scenario\"**\n- Check scenarios use `#### Scenario:` format (4 hashtags)\n- Don't use bullet points or bold for scenario headers\n\n**Silent scenario parsing failures**\n- Exact format required: `#### Scenario: Name`\n- Debug with: `openspec show [change] --json --deltas-only`\n\n### Validation Tips\n\n```bash\n# Always use strict mode for comprehensive checks\nopenspec validate [change] --strict\n\n# Debug delta parsing\nopenspec show [change] --json | jq '.deltas'\n\n# Check specific requirement\nopenspec show [spec] --json -r 1\n```\n\n## Happy Path Script", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "877", "text": "**Silent scenario parsing failures**\n- Exact format required: `#### Scenario: Name`\n- Debug with: `openspec show [change] --json --deltas-only`\n\n### Validation Tips\n\n```bash\n# Always use strict mode for comprehensive checks\nopenspec validate [change] --strict\n\n# Debug delta parsing\nopenspec show [change] --json | jq '.deltas'\n\n# Check specific requirement\nopenspec show [spec] --json -r 1\n```\n\n## Happy Path Script\n\n```bash\n# 1) Explore current state\nopenspec spec list --long\nopenspec list\n# Optional full-text search:\n# rg -n \"Requirement:|Scenario:\" openspec/specs\n# rg -n \"^#|Requirement:\" openspec/changes", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "878", "text": "### Validation Tips\n\n```bash\n# Always use strict mode for comprehensive checks\nopenspec validate [change] --strict\n\n# Debug delta parsing\nopenspec show [change] --json | jq '.deltas'\n\n# Check specific requirement\nopenspec show [spec] --json -r 1\n```\n\n## Happy Path Script\n\n```bash\n# 1) Explore current state\nopenspec spec list --long\nopenspec list\n# Optional full-text search:\n# rg -n \"Requirement:|Scenario:\" openspec/specs\n# rg -n \"^#|Requirement:\" openspec/changes\n\n# 2) Choose change id and scaffold\nCHANGE=add-two-factor-auth\nmkdir -p openspec/changes/$CHANGE/{specs/auth}\nprintf \"## Why\\n...\\n\\n## What Changes\\n- ...\\n\\n## Impact\\n- ...\\n\" > openspec/changes/$CHANGE/proposal.md\nprintf \"## 1. Implementation\\n- [ ] 1.1 ...\\n\" > openspec/changes/$CHANGE/tasks.md", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "879", "text": "# 2) Choose change id and scaffold\nCHANGE=add-two-factor-auth\nmkdir -p openspec/changes/$CHANGE/{specs/auth}\nprintf \"## Why\\n...\\n\\n## What Changes\\n- ...\\n\\n## Impact\\n- ...\\n\" > openspec/changes/$CHANGE/proposal.md\nprintf \"## 1. Implementation\\n- [ ] 1.1 ...\\n\" > openspec/changes/$CHANGE/tasks.md\n\n# 3) Add deltas (example)\ncat > openspec/changes/$CHANGE/specs/auth/spec.md << 'EOF'\n## ADDED Requirements\n### Requirement: Two-Factor Authentication\nUsers MUST provide a second factor during login.\n\n#### Scenario: OTP required\n- **WHEN** valid credentials are provided\n- **THEN** an OTP challenge is required\nEOF\n\n# 4) Validate\nopenspec validate $CHANGE --strict\n```\n\n## Multi-Capability Example", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "880", "text": "# 3) Add deltas (example)\ncat > openspec/changes/$CHANGE/specs/auth/spec.md << 'EOF'\n## ADDED Requirements\n### Requirement: Two-Factor Authentication\nUsers MUST provide a second factor during login.\n\n#### Scenario: OTP required\n- **WHEN** valid credentials are provided\n- **THEN** an OTP challenge is required\nEOF\n\n# 4) Validate\nopenspec validate $CHANGE --strict\n```\n\n## Multi-Capability Example\n\n```\nopenspec/changes/add-2fa-notify/\n├── proposal.md\n├── tasks.md\n└── specs/\n    ├── auth/\n    │   └── spec.md   # ADDED: Two-Factor Authentication\n    └── notifications/\n        └── spec.md   # ADDED: OTP email notification\n```\n\nauth/spec.md\n```markdown\n## ADDED Requirements\n### Requirement: Two-Factor Authentication\n...\n```\n\nnotifications/spec.md\n```markdown\n## ADDED Requirements\n### Requirement: OTP Email Notification\n...\n```\n\n## Best Practices", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "881", "text": "```\nopenspec/changes/add-2fa-notify/\n├── proposal.md\n├── tasks.md\n└── specs/\n    ├── auth/\n    │   └── spec.md   # ADDED: Two-Factor Authentication\n    └── notifications/\n        └── spec.md   # ADDED: OTP email notification\n```\n\nauth/spec.md\n```markdown\n## ADDED Requirements\n### Requirement: Two-Factor Authentication\n...\n```\n\nnotifications/spec.md\n```markdown\n## ADDED Requirements\n### Requirement: OTP Email Notification\n...\n```\n\n## Best Practices\n\n### Simplicity First\n- Default to <100 lines of new code\n- Single-file implementations until proven insufficient\n- Avoid frameworks without clear justification\n- Choose boring, proven patterns\n\n### Complexity Triggers\nOnly add complexity with:\n- Performance data showing current solution too slow\n- Concrete scale requirements (>1000 users, >100MB data)\n- Multiple proven use cases requiring abstraction\n\n### Clear References\n- Use `file.ts:42` format for code locations\n- Reference specs as `specs/auth/spec.md`\n- Link related changes and PRs", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "882", "text": "## Best Practices\n\n### Simplicity First\n- Default to <100 lines of new code\n- Single-file implementations until proven insufficient\n- Avoid frameworks without clear justification\n- Choose boring, proven patterns\n\n### Complexity Triggers\nOnly add complexity with:\n- Performance data showing current solution too slow\n- Concrete scale requirements (>1000 users, >100MB data)\n- Multiple proven use cases requiring abstraction\n\n### Clear References\n- Use `file.ts:42` format for code locations\n- Reference specs as `specs/auth/spec.md`\n- Link related changes and PRs\n\n### Capability Naming\n- Use verb-noun: `user-auth`, `payment-capture`\n- Single purpose per capability\n- 10-minute understandability rule\n- Split if description needs \"AND\"\n\n### Change ID Naming\n- Use kebab-case, short and descriptive: `add-two-factor-auth`\n- Prefer verb-led prefixes: `add-`, `update-`, `remove-`, `refactor-`\n- Ensure uniqueness; if taken, append `-2`, `-3`, etc.\n\n## Tool Selection Guide", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "883", "text": "### Capability Naming\n- Use verb-noun: `user-auth`, `payment-capture`\n- Single purpose per capability\n- 10-minute understandability rule\n- Split if description needs \"AND\"\n\n### Change ID Naming\n- Use kebab-case, short and descriptive: `add-two-factor-auth`\n- Prefer verb-led prefixes: `add-`, `update-`, `remove-`, `refactor-`\n- Ensure uniqueness; if taken, append `-2`, `-3`, etc.\n\n## Tool Selection Guide\n\n| Task | Tool | Why |\n|------|------|-----|\n| Find files by pattern | Glob | Fast pattern matching |\n| Search code content | Grep | Optimized regex search |\n| Read specific files | Read | Direct file access |\n| Explore unknown scope | Task | Multi-step investigation |\n\n## Error Recovery\n\n### Change Conflicts\n1. Run `openspec list` to see active changes\n2. Check for overlapping specs\n3. Coordinate with change owners\n4. Consider combining proposals", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "884", "text": "## Tool Selection Guide\n\n| Task | Tool | Why |\n|------|------|-----|\n| Find files by pattern | Glob | Fast pattern matching |\n| Search code content | Grep | Optimized regex search |\n| Read specific files | Read | Direct file access |\n| Explore unknown scope | Task | Multi-step investigation |\n\n## Error Recovery\n\n### Change Conflicts\n1. Run `openspec list` to see active changes\n2. Check for overlapping specs\n3. Coordinate with change owners\n4. Consider combining proposals\n\n### Validation Failures\n1. Run with `--strict` flag\n2. Check JSON output for details\n3. Verify spec file format\n4. Ensure scenarios properly formatted\n\n### Missing Context\n1. Read project.md first\n2. Check related specs\n3. Review recent archives\n4. Ask for clarification\n\n## Quick Reference\n\n### Stage Indicators\n- `changes/` - Proposed, not yet built\n- `specs/` - Built and deployed\n- `archive/` - Completed changes", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "885", "text": "### Validation Failures\n1. Run with `--strict` flag\n2. Check JSON output for details\n3. Verify spec file format\n4. Ensure scenarios properly formatted\n\n### Missing Context\n1. Read project.md first\n2. Check related specs\n3. Review recent archives\n4. Ask for clarification\n\n## Quick Reference\n\n### Stage Indicators\n- `changes/` - Proposed, not yet built\n- `specs/` - Built and deployed\n- `archive/` - Completed changes\n\n### File Purposes\n- `proposal.md` - Why and what\n- `tasks.md` - Implementation steps\n- `design.md` - Technical decisions\n- `spec.md` - Requirements and behavior\n\n### CLI Essentials\n```bash\nopenspec list              # What's in progress?\nopenspec show [item]       # View details\nopenspec validate --strict # Is it correct?\nopenspec archive <change-id> [--yes|-y]  # Mark complete (add --yes for automation)\n```\n\nRemember: Specs are truth. Changes are proposals. Keep them in sync.\n\n## Backlog Task Creation Guide (OpenSpec 연동)", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "886", "text": "### CLI Essentials\n```bash\nopenspec list              # What's in progress?\nopenspec show [item]       # View details\nopenspec validate --strict # Is it correct?\nopenspec archive <change-id> [--yes|-y]  # Mark complete (add --yes for automation)\n```\n\nRemember: Specs are truth. Changes are proposals. Keep them in sync.\n\n## Backlog Task Creation Guide (OpenSpec 연동)\n\nOpenSpec tasks.md의 미완료 항목을 외부 백로그 시스템(Backlog.md, Kanban 등)으로 등록할 때 반드시 아래 구조를 따릅니다.\n\n### 필수 포함 요소\n\n1. **OpenSpec 참조 (🔗 OpenSpec 참조)**\n   ```markdown\n   - Change ID: `change-id-here`\n   - 파일 경로: `openspec/changes/change-id/tasks.md`\n   - 섹션: X.X (라인번호)\n   ```", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "887", "text": "### 필수 포함 요소\n\n1. **OpenSpec 참조 (🔗 OpenSpec 참조)**\n   ```markdown\n   - Change ID: `change-id-here`\n   - 파일 경로: `openspec/changes/change-id/tasks.md`\n   - 섹션: X.X (라인번호)\n   ```\n\n2. **상세 구현 내역 (📋 상세 작업 내역)**\n   - 각 하위 태스크별 상세 설명\n   - 입력/출력 예시\n   - 구현 위치 (파일 경로)\n\n3. **참고 파일 (📁 수정 대상 파일/참고 파일)**\n   - 수정할 파일 목록\n   - 관련 기존 코드 위치\n   - 참고 라이브러리/패턴", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "888", "text": "2. **상세 구현 내역 (📋 상세 작업 내역)**\n   - 각 하위 태스크별 상세 설명\n   - 입력/출력 예시\n   - 구현 위치 (파일 경로)\n\n3. **참고 파일 (📁 수정 대상 파일/참고 파일)**\n   - 수정할 파일 목록\n   - 관련 기존 코드 위치\n   - 참고 라이브러리/패턴\n\n4. **구체적 Acceptance Criteria**\n   - 테스트 가능한 검증 조건\n   - 구체적인 입출력 예시 포함\n   - 성공/실패 기준 명시\n\n### 태스크 템플릿\n\n```markdown\n## Description\n\nOpenSpec \"Change Title\"의 **섹션 X.X 기능명** 미완성 작업입니다.", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "889", "text": "4. **구체적 Acceptance Criteria**\n   - 테스트 가능한 검증 조건\n   - 구체적인 입출력 예시 포함\n   - 성공/실패 기준 명시\n\n### 태스크 템플릿\n\n```markdown\n## Description\n\nOpenSpec \"Change Title\"의 **섹션 X.X 기능명** 미완성 작업입니다.\n\n**🔗 OpenSpec 참조:**\n- Change ID: `change-id`\n- 파일 경로: `openspec/changes/change-id/tasks.md`\n- 섹션: X.X (YYY~ZZZ라인)\n\n**📋 현재 구현 상태:**\n- ✅ 완료된 항목\n- ❌ **미구현 항목** ← 이 태스크의 목표\n\n**📋 상세 구현 내역:**", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "890", "text": "**🔗 OpenSpec 참조:**\n- Change ID: `change-id`\n- 파일 경로: `openspec/changes/change-id/tasks.md`\n- 섹션: X.X (YYY~ZZZ라인)\n\n**📋 현재 구현 상태:**\n- ✅ 완료된 항목\n- ❌ **미구현 항목** ← 이 태스크의 목표\n\n**📋 상세 구현 내역:**\n\n### X.X.1 첫 번째 하위 태스크\n- 입력: \"예시 입력\"\n- 출력: { expected: \"output\" }\n- 구현 위치: `src/path/to/file.ts` (신규/수정)\n\n### X.X.2 두 번째 하위 태스크\n```typescript\n// 구현 예시 코드 스니펫\ninterface ExpectedInterface {\n  field: string\n}\n```", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "891", "text": "**📋 상세 구현 내역:**\n\n### X.X.1 첫 번째 하위 태스크\n- 입력: \"예시 입력\"\n- 출력: { expected: \"output\" }\n- 구현 위치: `src/path/to/file.ts` (신규/수정)\n\n### X.X.2 두 번째 하위 태스크\n```typescript\n// 구현 예시 코드 스니펫\ninterface ExpectedInterface {\n  field: string\n}\n```\n\n**📁 수정 대상 파일:**\n- `src/path/file1.ts` - 설명\n- `src/path/file2.ts` - 설명\n\n**🔧 참고:**\n- 기존 코드: `src/existing/code.ts` → `functionName()`\n- 라이브러리: `package-name`\n- 패턴: 기존 XYZ 패턴 참고\n\n## Acceptance Criteria", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "892", "text": "**📁 수정 대상 파일:**\n- `src/path/file1.ts` - 설명\n- `src/path/file2.ts` - 설명\n\n**🔧 참고:**\n- 기존 코드: `src/existing/code.ts` → `functionName()`\n- 라이브러리: `package-name`\n- 패턴: 기존 XYZ 패턴 참고\n\n## Acceptance Criteria\n\n- [ ] #1 구체적인 검증 조건 (입력 → 출력 예시 포함)\n- [ ] #2 엣지 케이스 처리\n- [ ] #3 테스트 작성\n```\n\n### Labels 규칙\n\nOpenSpec 연동 태스크는 반드시 `openspec-{change-id}` 라벨을 포함합니다.\n예: `openspec-2`, `openspec-add-2fa-notify`\n\n### 예시: 좋은 태스크 vs 나쁜 태스크", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "893", "text": "### Labels 규칙\n\nOpenSpec 연동 태스크는 반드시 `openspec-{change-id}` 라벨을 포함합니다.\n예: `openspec-2`, `openspec-add-2fa-notify`\n\n### 예시: 좋은 태스크 vs 나쁜 태스크\n\n**❌ 나쁜 예 (부실한 내용):**\n```markdown\n## Description\n자연어 명령 시스템 도메인별 파라미터 파서 구현\n\n## Acceptance Criteria\n- [ ] 파서 구현\n- [ ] 테스트\n```\n\n**✅ 좋은 예 (구현 가이드 포함):**\n```markdown\n## Description\n\nOpenSpec 2 \"자연어 명령 실행 시스템\"의 **섹션 4.2 도메인별 파라미터 파서** 미완성 작업입니다.", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "894", "text": "## Acceptance Criteria\n- [ ] 파서 구현\n- [ ] 테스트\n```\n\n**✅ 좋은 예 (구현 가이드 포함):**\n```markdown\n## Description\n\nOpenSpec 2 \"자연어 명령 실행 시스템\"의 **섹션 4.2 도메인별 파라미터 파서** 미완성 작업입니다.\n\n**🔗 OpenSpec 참조:**\n- Change ID: `2-add-natural-language-commands`\n- 파일 경로: `openspec/changes/2-add-natural-language-commands/tasks.md`\n- 섹션: 4.2 (118~122라인)\n\n**📋 상세 구현 내역:**", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "895", "text": "**🔗 OpenSpec 참조:**\n- Change ID: `2-add-natural-language-commands`\n- 파일 경로: `openspec/changes/2-add-natural-language-commands/tasks.md`\n- 섹션: 4.2 (118~122라인)\n\n**📋 상세 구현 내역:**\n\n### 4.2.1 예산 파라미터 파서\n- 입력: \"식비 예산 20만원\", \"이번 달 외식비 50만원으로\"\n- 추출 대상: 카테고리명, 금액(KRW), 기간(month/year)\n- 구현 위치: `src/services/ai/parsers/BudgetParser.ts` (신규)\n\n**📁 수정 대상 파일:**\n- `src/services/ai/parsers/BudgetParser.ts` (신규)\n- `src/services/ai/ActionExecutor.ts` - 파서 연동", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "896", "text": "**📁 수정 대상 파일:**\n- `src/services/ai/parsers/BudgetParser.ts` (신규)\n- `src/services/ai/ActionExecutor.ts` - 파서 연동\n\n**🔧 참고:**\n- 기존 금액 파싱: `src/schemas/financial-actions.ts` → `parseKoreanAmount()`\n- ActionExecutor: `src/services/ai/ActionExecutor.ts`\n\n## Acceptance Criteria\n\n- [ ] #1 예산 파서: \"식비 30만원\" → { category: \"식비\", amount: 300000 } 정확 추출\n- [ ] #2 기존 AI 파싱 대비 정확도 테스트: 최소 90% 이상\n- [ ] #3 단위 테스트: 최소 10개 케이스\n```", "metadata": {"file_path": "openspec/AGENTS.md", "file_name": "AGENTS.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "897", "text": "# Project Context\n\n## Purpose\n\nzyflow는 **OpenSpec 워크플로우 전용 로컬 대시보드**입니다.\n\n주요 목표:\n- OpenSpec 변경 제안의 tasks.md를 칸반 형태로 시각화\n- 태스크별 세부 계획 관리 (Claude가 생성)\n- 테스트 상태 연동 (TDD)\n- zywiki 문서 통합\n- 개발자 본인을 위한 개인 개발 대시보드 (SaaS 아님)\n\n**핵심 워크플로우**:\n```\nOpenSpec proposal → tasks.md 생성\n    → zyflow에서 시각화\n    → 태스크 선택 → Claude에게 세부 계획 요청\n    → 구현 → 테스트 → 완료 체크\n    → 모든 태스크 완료 → archive\n```\n\n## Tech Stack", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "898", "text": "**핵심 워크플로우**:\n```\nOpenSpec proposal → tasks.md 생성\n    → zyflow에서 시각화\n    → 태스크 선택 → Claude에게 세부 계획 요청\n    → 구현 → 테스트 → 완료 체크\n    → 모든 태스크 완료 → archive\n```\n\n## Tech Stack\n\n### Frontend\n- **React 19** - UI 라이브러리\n- **Vite 6** - 빌드 도구\n- **TypeScript** - 타입 시스템\n- **ShadcnUI** - UI 컴포넌트 (Radix UI 기반)\n- **TailwindCSS 4** - 스타일링\n- **TanStack Query** - 서버 상태 관리\n- **@dnd-kit** - 드래그앤드롭", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "899", "text": "### Frontend\n- **React 19** - UI 라이브러리\n- **Vite 6** - 빌드 도구\n- **TypeScript** - 타입 시스템\n- **ShadcnUI** - UI 컴포넌트 (Radix UI 기반)\n- **TailwindCSS 4** - 스타일링\n- **TanStack Query** - 서버 상태 관리\n- **@dnd-kit** - 드래그앤드롭\n\n### Backend (로컬)\n- **Node.js + Express** 또는 **Vite dev server API** - 파일 시스템 접근\n- 파일 기반 데이터 (backlog/*.md, openspec/*.md)\n\n### 참고 템플릿\n- **shadcn-admin** (satnaing/shadcn-admin) - UI 레이아웃/패턴 참고\n\n## Project Conventions", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "900", "text": "### Backend (로컬)\n- **Node.js + Express** 또는 **Vite dev server API** - 파일 시스템 접근\n- 파일 기반 데이터 (backlog/*.md, openspec/*.md)\n\n### 참고 템플릿\n- **shadcn-admin** (satnaing/shadcn-admin) - UI 레이아웃/패턴 참고\n\n## Project Conventions\n\n### Code Style\n- ESLint + Prettier 사용\n- 파일명: kebab-case (`task-card.tsx`)\n- 컴포넌트명: PascalCase (`TaskCard`)\n- 함수/변수명: camelCase (`handleDrop`)\n- 타입명: PascalCase with suffix (`TaskProps`, `TaskState`)\n- 절대 경로 import: `@/` prefix 사용", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "901", "text": "## Project Conventions\n\n### Code Style\n- ESLint + Prettier 사용\n- 파일명: kebab-case (`task-card.tsx`)\n- 컴포넌트명: PascalCase (`TaskCard`)\n- 함수/변수명: camelCase (`handleDrop`)\n- 타입명: PascalCase with suffix (`TaskProps`, `TaskState`)\n- 절대 경로 import: `@/` prefix 사용\n\n### Architecture Patterns\n- **Feature-based 폴더 구조**: `src/features/tasks/`, `src/features/specs/`\n- **Container/Presentational 분리**: 로직은 hooks, UI는 컴포넌트\n- **Colocation**: 관련 파일은 같은 폴더에 배치\n- **Barrel exports**: `index.ts`로 public API 노출", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "902", "text": "### Architecture Patterns\n- **Feature-based 폴더 구조**: `src/features/tasks/`, `src/features/specs/`\n- **Container/Presentational 분리**: 로직은 hooks, UI는 컴포넌트\n- **Colocation**: 관련 파일은 같은 폴더에 배치\n- **Barrel exports**: `index.ts`로 public API 노출\n\n### Testing Strategy\n- **Vitest** - 단위 테스트\n- **React Testing Library** - 컴포넌트 테스트\n- **Playwright** - E2E 테스트 (필요시)\n- 커버리지 목표: 주요 비즈니스 로직 80%+", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "903", "text": "### Testing Strategy\n- **Vitest** - 단위 테스트\n- **React Testing Library** - 컴포넌트 테스트\n- **Playwright** - E2E 테스트 (필요시)\n- 커버리지 목표: 주요 비즈니스 로직 80%+\n\n### Git Workflow\n- **main** 브랜치: 안정 버전\n- **feature/** 브랜치: 기능 개발\n- 커밋 메시지: Conventional Commits (`feat:`, `fix:`, `chore:`)\n- PR 머지 전 테스트 통과 필수\n\n## Domain Context", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "904", "text": "### Git Workflow\n- **main** 브랜치: 안정 버전\n- **feature/** 브랜치: 기능 개발\n- 커밋 메시지: Conventional Commits (`feat:`, `fix:`, `chore:`)\n- PR 머지 전 테스트 통과 필수\n\n## Domain Context\n\n### 핵심 개념\n- **Change**: OpenSpec 변경 제안 (`openspec/changes/*/`)\n- **Task**: 변경 제안의 tasks.md 체크리스트 항목\n- **Plan**: 태스크별 세부 구현 계획 (`.zyflow/plans/`)\n- **Spec**: 구현된 기능 명세 (`openspec/specs/`)", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "905", "text": "## Domain Context\n\n### 핵심 개념\n- **Change**: OpenSpec 변경 제안 (`openspec/changes/*/`)\n- **Task**: 변경 제안의 tasks.md 체크리스트 항목\n- **Plan**: 태스크별 세부 구현 계획 (`.zyflow/plans/`)\n- **Spec**: 구현된 기능 명세 (`openspec/specs/`)\n\n### 워크플로우\n```\n1. OpenSpec proposal 작성 → tasks.md 생성\n2. zyflow에서 태스크 목록 확인\n3. 태스크 선택 → Claude에게 세부 계획 요청\n4. Claude가 구현 → 테스트 실행\n5. 테스트 통과 → 체크박스 완료\n6. 모든 태스크 완료 → openspec archive\n```", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "906", "text": "### 워크플로우\n```\n1. OpenSpec proposal 작성 → tasks.md 생성\n2. zyflow에서 태스크 목록 확인\n3. 태스크 선택 → Claude에게 세부 계획 요청\n4. Claude가 구현 → 테스트 실행\n5. 테스트 통과 → 체크박스 완료\n6. 모든 태스크 완료 → openspec archive\n```\n\n### 데이터 소스\n- `openspec/changes/*/tasks.md` - 태스크 체크리스트\n- `openspec/changes/*/proposal.md` - 변경 제안 요약\n- `.zyflow/plans/*.md` - 세부 구현 계획\n\n## Important Constraints", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "907", "text": "### 데이터 소스\n- `openspec/changes/*/tasks.md` - 태스크 체크리스트\n- `openspec/changes/*/proposal.md` - 변경 제안 요약\n- `.zyflow/plans/*.md` - 세부 구현 계획\n\n## Important Constraints\n\n### 기술적 제약\n- **로컬 전용**: 서버 배포 없음, localhost에서만 동작\n- **파일 시스템 의존**: Node.js fs 모듈 필요\n- **브라우저 보안**: 브라우저에서 직접 파일 접근 불가 → 로컬 API 서버 필요", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "908", "text": "## Important Constraints\n\n### 기술적 제약\n- **로컬 전용**: 서버 배포 없음, localhost에서만 동작\n- **파일 시스템 의존**: Node.js fs 모듈 필요\n- **브라우저 보안**: 브라우저에서 직접 파일 접근 불가 → 로컬 API 서버 필요\n\n### 개발 원칙\n- **점진적 개발**: v0.1부터 작은 기능씩 추가\n- **과도한 추상화 금지**: 필요할 때만 리팩토링\n- **상업화 목표 없음**: 개인 사용 + 오픈소스\n\n## External Dependencies\n\n### 파일 포맷\n- **OpenSpec**: 스펙 변경 제안 포맷 (tasks.md, proposal.md)\n- **zywiki**: AI 생성 코드 문서 포맷 (v0.2+)", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "909", "text": "## External Dependencies\n\n### 파일 포맷\n- **OpenSpec**: 스펙 변경 제안 포맷 (tasks.md, proposal.md)\n- **zywiki**: AI 생성 코드 문서 포맷 (v0.2+)\n\n### 연동 도구 (선택적)\n- **Claude Code**: AI 코딩 어시스턴트\n- **Cursor**: AI 코드 에디터\n- **VS Code**: 에디터", "metadata": {"file_path": "openspec/project.md", "file_name": "project.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "910", "text": "# claude-flow-execution Specification\n\n## Purpose\nTBD - created by archiving change integrate-claude-flow. Update Purpose after archive.\n## Requirements\n### Requirement: 작업 실행 API\n\nzyflow 서버는 claude-flow swarm을 실행하는 API 엔드포인트를 제공해야 합니다(MUST).\n\n#### Scenario: Change 전체 실행 요청\n\nGiven 사용자가 특정 프로젝트의 Change를 선택한 상태\nWhen POST /api/claude-flow/execute 요청을 보내면\n  ```json\n  {\n    \"projectPath\": \"/path/to/project\",\n    \"changeId\": \"feature-name\",\n    \"mode\": \"full\"\n  }\n  ```\nThen 새로운 실행 ID가 생성되고\nAnd claude-flow swarm 프로세스가 시작되며\nAnd 실행 ID와 초기 상태가 반환됩니다\n  ```json\n  {\n    \"id\": \"exec-uuid\",\n    \"status\": \"running\",\n    \"startedAt\": \"2024-12-18T...\"\n  }\n  ```", "metadata": {"file_path": "openspec/archive/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "911", "text": "#### Scenario: 단일 태스크 실행 요청\n\nGiven 사용자가 특정 태스크를 선택한 상태\nWhen POST /api/claude-flow/execute 요청에 taskId를 포함하면\nThen 해당 태스크만 실행 대상으로 프롬프트가 생성됩니다\n\n#### Scenario: 분석 모드 실행\n\nGiven 사용자가 코드 변경 없이 분석만 원하는 경우\nWhen mode를 \"analysis\"로 설정하면\nThen claude-flow에 --analysis 플래그가 전달되어\nAnd 읽기 전용으로 실행됩니다\n\n### Requirement: 실시간 진행 상황 스트리밍\n\n시스템은 실행 중인 작업의 진행 상황을 SSE로 클라이언트에 전달해야 합니다(MUST).\n\n#### Scenario: SSE 스트림 연결", "metadata": {"file_path": "openspec/archive/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "912", "text": "### Requirement: 실시간 진행 상황 스트리밍\n\n시스템은 실행 중인 작업의 진행 상황을 SSE로 클라이언트에 전달해야 합니다(MUST).\n\n#### Scenario: SSE 스트림 연결\n\nGiven 실행이 시작된 상태\nWhen GET /api/claude-flow/stream/:id 에 연결하면\nThen SSE 이벤트로 로그가 실시간 전달됩니다\n  ```\n  event: log\n  data: {\"type\":\"assistant\",\"content\":\"태스크 분석 중...\"}\n\n  event: log\n  data: {\"type\":\"tool_use\",\"name\":\"Read\",\"input\":{...}}\n  ```\n\n#### Scenario: 실행 완료 이벤트\n\nGiven 실행이 진행 중인 상태\nWhen claude-flow 프로세스가 종료되면\nThen SSE로 complete 이벤트가 전송되고\nAnd 연결이 종료됩니다", "metadata": {"file_path": "openspec/archive/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "913", "text": "event: log\n  data: {\"type\":\"tool_use\",\"name\":\"Read\",\"input\":{...}}\n  ```\n\n#### Scenario: 실행 완료 이벤트\n\nGiven 실행이 진행 중인 상태\nWhen claude-flow 프로세스가 종료되면\nThen SSE로 complete 이벤트가 전송되고\nAnd 연결이 종료됩니다\n\n### Requirement: 프롬프트 빌더\n\n시스템은 OpenSpec 문서를 기반으로 claude-flow에 전달할 프롬프트를 생성해야 합니다(MUST).\n\n#### Scenario: 기본 프롬프트 생성", "metadata": {"file_path": "openspec/archive/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "914", "text": "Given 실행이 진행 중인 상태\nWhen claude-flow 프로세스가 종료되면\nThen SSE로 complete 이벤트가 전송되고\nAnd 연결이 종료됩니다\n\n### Requirement: 프롬프트 빌더\n\n시스템은 OpenSpec 문서를 기반으로 claude-flow에 전달할 프롬프트를 생성해야 합니다(MUST).\n\n#### Scenario: 기본 프롬프트 생성\n\nGiven Change 디렉토리에 proposal.md와 tasks.md가 있을 때\nWhen 프롬프트 빌더가 실행되면\nThen 다음 섹션이 포함된 프롬프트가 생성됩니다:\n  - 프로젝트 맥락 (CLAUDE.md 기반)\n  - Change 정보 (proposal.md)\n  - 현재 미완료 태스크 목록\n  - 작업 지시사항", "metadata": {"file_path": "openspec/archive/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "915", "text": "Given Change 디렉토리에 proposal.md와 tasks.md가 있을 때\nWhen 프롬프트 빌더가 실행되면\nThen 다음 섹션이 포함된 프롬프트가 생성됩니다:\n  - 프로젝트 맥락 (CLAUDE.md 기반)\n  - Change 정보 (proposal.md)\n  - 현재 미완료 태스크 목록\n  - 작업 지시사항\n\n#### Scenario: 설계 문서 포함\n\nGiven Change 디렉토리에 design.md가 존재할 때\nWhen 프롬프트가 생성되면\nThen 설계 문서 섹션이 프롬프트에 포함됩니다\n\n### Requirement: 실행 상태 관리\n\n시스템은 실행 중인 작업의 상태를 조회하고 관리할 수 있어야 합니다(MUST).\n\n#### Scenario: 상태 조회", "metadata": {"file_path": "openspec/archive/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "916", "text": "#### Scenario: 설계 문서 포함\n\nGiven Change 디렉토리에 design.md가 존재할 때\nWhen 프롬프트가 생성되면\nThen 설계 문서 섹션이 프롬프트에 포함됩니다\n\n### Requirement: 실행 상태 관리\n\n시스템은 실행 중인 작업의 상태를 조회하고 관리할 수 있어야 합니다(MUST).\n\n#### Scenario: 상태 조회\n\nGiven 실행 ID가 존재할 때\nWhen GET /api/claude-flow/status/:id 요청을 보내면\nThen 현재 실행 상태가 반환됩니다\n  ```json\n  {\n    \"id\": \"exec-uuid\",\n    \"status\": \"running\",\n    \"progress\": 45,\n    \"currentTask\": \"API 엔드포인트 구현\"\n  }\n  ```\n\n#### Scenario: 실행 중지", "metadata": {"file_path": "openspec/archive/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "917", "text": "#### Scenario: 상태 조회\n\nGiven 실행 ID가 존재할 때\nWhen GET /api/claude-flow/status/:id 요청을 보내면\nThen 현재 실행 상태가 반환됩니다\n  ```json\n  {\n    \"id\": \"exec-uuid\",\n    \"status\": \"running\",\n    \"progress\": 45,\n    \"currentTask\": \"API 엔드포인트 구현\"\n  }\n  ```\n\n#### Scenario: 실행 중지\n\nGiven 실행이 진행 중일 때\nWhen POST /api/claude-flow/stop/:id 요청을 보내면\nThen claude-flow 프로세스가 종료되고\nAnd 상태가 \"stopped\"로 변경됩니다\n\n#### Scenario: 타임아웃 처리", "metadata": {"file_path": "openspec/archive/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "918", "text": "#### Scenario: 실행 중지\n\nGiven 실행이 진행 중일 때\nWhen POST /api/claude-flow/stop/:id 요청을 보내면\nThen claude-flow 프로세스가 종료되고\nAnd 상태가 \"stopped\"로 변경됩니다\n\n#### Scenario: 타임아웃 처리\n\nGiven 실행이 30분 이상 지속될 때\nWhen 타임아웃이 발생하면\nThen 프로세스가 자동 종료되고\nAnd 상태가 \"failed\"로 변경되며\nAnd 타임아웃 에러가 기록됩니다\n\n### Requirement: 실행 히스토리\n\n시스템은 과거 실행 기록을 저장하고 조회할 수 있어야 합니다(SHALL).\n\n#### Scenario: 히스토리 조회", "metadata": {"file_path": "openspec/archive/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "919", "text": "Given 실행이 30분 이상 지속될 때\nWhen 타임아웃이 발생하면\nThen 프로세스가 자동 종료되고\nAnd 상태가 \"failed\"로 변경되며\nAnd 타임아웃 에러가 기록됩니다\n\n### Requirement: 실행 히스토리\n\n시스템은 과거 실행 기록을 저장하고 조회할 수 있어야 합니다(SHALL).\n\n#### Scenario: 히스토리 조회\n\nGiven 이전에 여러 실행이 완료된 상태\nWhen GET /api/claude-flow/history 요청을 보내면\nThen 최근 실행 목록이 반환됩니다\n  ```json\n  {\n    \"executions\": [\n      {\n        \"id\": \"exec-1\",\n        \"changeId\": \"feature-a\",\n        \"status\": \"completed\",\n        \"startedAt\": \"...\",\n        \"completedAt\": \"...\"\n      }\n    ]\n  }\n  ```", "metadata": {"file_path": "openspec/archive/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "920", "text": "# Backlog System 설계 문서\n\n## 개요\n\nBacklog.md 패턴을 ZyFlow에 통합하여 Git-native 태스크 관리를 구현합니다.\n\n## 데이터 흐름\n\n```\n┌─────────────────────────────────────────────────────────────────────────┐\n│                          backlog/*.md (소스)                             │\n│  ┌─────────────────────────────────────────────────────────────────┐    │\n│  │ ---                                                              │    │\n│  │ id: task-007", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "921", "text": "│\n│  │ ---                                                              │    │\n│  │ id: task-007                                                     │    │\n│  │ title: OAuth2 인증 구현                                          │    │\n│  │ status: in-progress", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "922", "text": "│    │\n│  │ title: OAuth2 인증 구현                                          │    │\n│  │ status: in-progress                                              │    │\n│  │ priority: high                                                   │    │\n│  │ blocked_by: [task-003]", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "923", "text": "│    │\n│  │ priority: high                                                   │    │\n│  │ blocked_by: [task-003]                                           │    │\n│  │ parent: task-001                                                 │    │\n│  │ ---", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "924", "text": "│    │\n│  │ parent: task-001                                                 │    │\n│  │ ---                                                              │    │\n│  │ ## Description                                                   │    │\n│  │ ## Plan", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "925", "text": "│    │\n│  │ ## Description                                                   │    │\n│  │ ## Plan                                                          │    │\n│  │ ## Acceptance Criteria                                           │    │\n│  │ ## Notes", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "926", "text": "│ ## Plan                                                          │    │\n│  │ ## Acceptance Criteria                                           │    │\n│  │ ## Notes                                                         │    │\n│  └─────────────────────────────────────────────────────────────────┘    │\n└──────────────────────────────┬──────────────────────────────────────────┘", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "927", "text": "│    │\n│  │ ## Notes                                                         │    │\n│  └─────────────────────────────────────────────────────────────────┘    │\n└──────────────────────────────┬──────────────────────────────────────────┘\n                               │\n                               ▼\n┌─────────────────────────────────────────────────────────────────────────┐\n│                        Backlog Parser", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "928", "text": "│\n                               ▼\n┌─────────────────────────────────────────────────────────────────────────┐\n│                        Backlog Parser                                    │\n│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────┐  │\n│  │ parseYamlFront  │→ │ parseMarkdown   │→ │ normalizeStatus/        │  │\n│  │ matter()        │  │ Sections()      │  │ Priority()              │", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "929", "text": "│\n│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────┐  │\n│  │ parseYamlFront  │→ │ parseMarkdown   │→ │ normalizeStatus/        │  │\n│  │ matter()        │  │ Sections()      │  │ Priority()              │  │\n│  └─────────────────┘  └─────────────────┘  └─────────────────────────┘  │\n└──────────────────────────────┬──────────────────────────────────────────┘\n                               │", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "930", "text": "Priority()              │  │\n│  └─────────────────┘  └─────────────────┘  └─────────────────────────┘  │\n└──────────────────────────────┬──────────────────────────────────────────┘\n                               │\n                               ▼\n┌─────────────────────────────────────────────────────────────────────────┐\n│                        Sync Module                                       │\n│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────┐  │\n│", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "931", "text": "▼\n┌─────────────────────────────────────────────────────────────────────────┐\n│                        Sync Module                                       │\n│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────┐  │\n│  │ scanBacklog     │→ │ syncBacklog     │→ │ syncBacklogTask         │  │\n│  │ Directory()     │  │ ToDb()          │  │ ToDb()                  │  │\n│  └─────────────────┘  └─────────────────┘  └─────────────────────────┘", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "932", "text": "┌─────────────────────────┐  │\n│  │ scanBacklog     │→ │ syncBacklog     │→ │ syncBacklogTask         │  │\n│  │ Directory()     │  │ ToDb()          │  │ ToDb()                  │  │\n│  └─────────────────┘  └─────────────────┘  └─────────────────────────┘  │\n└──────────────────────────────┬──────────────────────────────────────────┘\n                               │\n                               ▼\n┌─────────────────────────────────────────────────────────────────────────┐\n│", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "933", "text": "└─────────────────────────┘  │\n└──────────────────────────────┬──────────────────────────────────────────┘\n                               │\n                               ▼\n┌─────────────────────────────────────────────────────────────────────────┐\n│                     SQLite DB (캐시)                                     │\n│  ┌─────────────────────────────────────────────────────────────────┐    │\n│  │ tasks 테이블", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "934", "text": "SQLite DB (캐시)                                     │\n│  ┌─────────────────────────────────────────────────────────────────┐    │\n│  │ tasks 테이블                                                     │    │\n│  │  - origin = 'backlog'                                            │    │\n│  │  - backlogFileId = 'task-007'", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "935", "text": "│    │\n│  │  - origin = 'backlog'                                            │    │\n│  │  - backlogFileId = 'task-007'                                    │    │\n│  │  - parentTaskId, blockedBy (확장 필드)                           │    │\n│  │  - plan, acceptanceCriteria, notes                               │    │\n│  └─────────────────────────────────────────────────────────────────┘", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "936", "text": "│    │\n│  │  - parentTaskId, blockedBy (확장 필드)                           │    │\n│  │  - plan, acceptanceCriteria, notes                               │    │\n│  └─────────────────────────────────────────────────────────────────┘    │\n└──────────────────────────────┬──────────────────────────────────────────┘\n                               │\n                               ▼\n┌─────────────────────────────────────────────────────────────────────────┐\n│", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "937", "text": "│\n└──────────────────────────────┬──────────────────────────────────────────┘\n                               │\n                               ▼\n┌─────────────────────────────────────────────────────────────────────────┐\n│                        REST API                                          │\n│  GET /api/flow/tasks?origin=backlog                                      │\n│  GET /api/flow/backlog/tasks/:id", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "938", "text": "REST API                                          │\n│  GET /api/flow/tasks?origin=backlog                                      │\n│  GET /api/flow/backlog/tasks/:id                                         │\n│  PUT /api/flow/backlog/tasks/:id                                         │\n│  POST /api/flow/backlog/sync", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "939", "text": "│\n│  PUT /api/flow/backlog/tasks/:id                                         │\n│  POST /api/flow/backlog/sync                                             │\n│  GET /api/flow/backlog/migration/preview                                 │\n│  POST /api/flow/backlog/migration", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "940", "text": "│\n│  GET /api/flow/backlog/migration/preview                                 │\n│  POST /api/flow/backlog/migration                                        │\n└──────────────────────────────┬──────────────────────────────────────────┘\n                               │\n                               ▼\n┌─────────────────────────────────────────────────────────────────────────┐\n│", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "941", "text": "│\n└──────────────────────────────┬──────────────────────────────────────────┘\n                               │\n                               ▼\n┌─────────────────────────────────────────────────────────────────────────┐\n│                        ZyFlow UI                                         │\n│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────────────┐ │\n│  │ BacklogView│  │ KanbanBoard│  │ TaskDetail │  │ MigrationDialog", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "942", "text": "ZyFlow UI                                         │\n│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────────────┐ │\n│  │ BacklogView│  │ KanbanBoard│  │ TaskDetail │  │ MigrationDialog    │ │\n│  │            │  │ (재사용)   │  │ Dialog     │  │                    │ │\n│  └────────────┘  └────────────┘  └────────────┘  └────────────────────┘ │\n└─────────────────────────────────────────────────────────────────────────┘\n```", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "943", "text": "│ KanbanBoard│  │ TaskDetail │  │ MigrationDialog    │ │\n│  │            │  │ (재사용)   │  │ Dialog     │  │                    │ │\n│  └────────────┘  └────────────┘  └────────────┘  └────────────────────┘ │\n└─────────────────────────────────────────────────────────────────────────┘\n```\n\n## DB 스키마 확장", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "944", "text": "│                    │ │\n│  └────────────┘  └────────────┘  └────────────┘  └────────────────────┘ │\n└─────────────────────────────────────────────────────────────────────────┘\n```\n\n## DB 스키마 확장\n\n```sql\n-- tasks 테이블 확장 필드\nALTER TABLE tasks ADD COLUMN backlogFileId TEXT;       -- task-007\nALTER TABLE tasks ADD COLUMN parentTaskId INTEGER;     -- 서브태스크 관계\nALTER TABLE tasks ADD COLUMN blockedBy TEXT;           -- JSON: [\"task-003\"]\nALTER TABLE tasks ADD COLUMN plan TEXT;                -- 계획 섹션\nALTER TABLE tasks ADD COLUMN acceptanceCriteria TEXT;  -- 완료 조건\nALTER TABLE tasks ADD COLUMN notes TEXT;               -- 메모/노트\nALTER TABLE tasks ADD COLUMN dueDate INTEGER;          -- 마감일 (timestamp)\nALTER TABLE tasks ADD COLUMN milestone TEXT;           -- 마일스톤", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "945", "text": "-- 인덱스\nCREATE INDEX idx_tasks_backlog_file_id ON tasks(backlogFileId);\nCREATE INDEX idx_tasks_parent_task_id ON tasks(parentTaskId);\nCREATE INDEX idx_tasks_origin ON tasks(origin);\n```\n\n## 파서 구현\n\n### BacklogTask 인터페이스\n\n```typescript\ninterface BacklogTask {\n  // YAML frontmatter 필드\n  backlogFileId: string      // task-007\n  title: string\n  status: 'todo' | 'in-progress' | 'review' | 'done' | 'archived'\n  assignees?: string[]       // [@alice, @bob]\n  labels?: string[]          // [auth, backend]\n  priority: 'low' | 'medium' | 'high'\n  blockedBy?: string[]       // [task-003]\n  parent?: string            // task-001\n  dueDate?: string           // ISO 8601\n  milestone?: string         // Sprint 3\n\n  // 마크다운 섹션\n  description?: string\n  plan?: string\n  acceptanceCriteria?: string\n  notes?: string", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "946", "text": "// 마크다운 섹션\n  description?: string\n  plan?: string\n  acceptanceCriteria?: string\n  notes?: string\n\n  // 파일 메타데이터\n  filePath: string\n  fileModifiedAt?: string\n}\n```\n\n### 상태 정규화\n\n```typescript\nfunction normalizeStatus(status: string): TaskStatus {\n  const normalized = status.toLowerCase().replace(/\\s+/g, '-')\n  switch (normalized) {\n    case 'to-do':\n    case 'todo':\n    case 'backlog':\n    case 'new':\n      return 'todo'\n    case 'in-progress':\n    case 'in_progress':\n    case 'doing':\n      return 'in-progress'\n    case 'review':\n    case 'reviewing':\n    case 'testing':\n      return 'review'\n    case 'done':\n    case 'completed':\n      return 'done'\n    case 'archived':\n    case 'closed':\n      return 'archived'\n    default:\n      return 'todo'\n  }\n}\n```\n\n## 동기화 전략\n\n### 단방향 동기화 (파일 → DB)", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "947", "text": "## 동기화 전략\n\n### 단방향 동기화 (파일 → DB)\n\n1. **프로젝트 활성화 시**: `syncBacklogToDb()` 호출\n2. **파일 변경 감지 시**: `chokidar` 와처가 변경된 파일 동기화\n3. **수동 동기화**: `POST /api/flow/backlog/sync` API\n\n### 충돌 방지\n\n- **마크다운이 항상 우선**: DB는 캐시일 뿐\n- **UI 수정 시**: 마크다운 파일 업데이트 → DB 자동 동기화\n- **파일 삭제 시**: DB 레코드도 삭제\n\n## 마이그레이션 도구\n\n### Inbox → Backlog 변환", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "948", "text": "### 충돌 방지\n\n- **마크다운이 항상 우선**: DB는 캐시일 뿐\n- **UI 수정 시**: 마크다운 파일 업데이트 → DB 자동 동기화\n- **파일 삭제 시**: DB 레코드도 삭제\n\n## 마이그레이션 도구\n\n### Inbox → Backlog 변환\n\n```typescript\nasync function migrateInboxToBacklog(\n  projectId: string,\n  projectPath: string\n): Promise<MigrationResult> {\n  // 1. origin='inbox', changeId=null인 태스크 조회\n  const inboxTasks = getInboxTasksForMigration(projectId)\n\n  // 2. 각 태스크를 backlog/*.md 파일로 생성\n  for (const task of inboxTasks) {\n    const backlogFileId = await generateNewBacklogTaskId(projectPath)\n    const backlogTask = convertToBacklogTask(task, backlogFileId)\n    await saveTaskToBacklogFile(projectPath, backlogTask)", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "949", "text": "// 2. 각 태스크를 backlog/*.md 파일로 생성\n  for (const task of inboxTasks) {\n    const backlogFileId = await generateNewBacklogTaskId(projectPath)\n    const backlogTask = convertToBacklogTask(task, backlogFileId)\n    await saveTaskToBacklogFile(projectPath, backlogTask)\n\n    // 3. DB 업데이트: origin='backlog', backlogFileId 설정\n    updateTaskOrigin(task.id, 'backlog', backlogFileId)\n  }\n\n  return { migratedCount, errors }\n}\n```\n\n## UI 컴포넌트\n\n### BacklogView\n\n- 기존 `StandaloneTasks` Kanban 컴포넌트 재사용\n- `origin='backlog'` 필터로 데이터 조회\n- 서브태스크/의존성 배지 표시\n\n### TaskDetailDialog", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "950", "text": "// 3. DB 업데이트: origin='backlog', backlogFileId 설정\n    updateTaskOrigin(task.id, 'backlog', backlogFileId)\n  }\n\n  return { migratedCount, errors }\n}\n```\n\n## UI 컴포넌트\n\n### BacklogView\n\n- 기존 `StandaloneTasks` Kanban 컴포넌트 재사용\n- `origin='backlog'` 필터로 데이터 조회\n- 서브태스크/의존성 배지 표시\n\n### TaskDetailDialog\n\n- Plan, Acceptance Criteria, Notes 섹션 표시\n- 서브태스크 목록 표시\n- Blocked By 의존성 표시\n\n### MigrationDialog\n\n- 마이그레이션 미리보기 (대상 태스크 목록)\n- 일괄/선택 마이그레이션 옵션\n- 진행 상황 및 결과 표시", "metadata": {"file_path": "openspec/changes/add-backlog-system/design.md", "file_name": "design.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "951", "text": "# Backlog.md 기반 태스크 관리 시스템\n\n## Summary\n\nBacklog.md 패턴을 도입하여 Git-native, human-readable 태스크 저장소를 구현합니다. 마크다운 파일이 소스 오브 트루스(SSOT)이고, SQLite DB는 캐시로 동작합니다.\n\n## Motivation\n\n### 현재 Inbox의 한계점", "metadata": {"file_path": "openspec/changes/add-backlog-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "952", "text": "| 부족한 기능 | 현재 상태 | 영향 |\n|------------|----------|------|\n| **서브태스크** | 미구현 | 복잡한 작업 분해 불가 |\n| **의존성** | 미구현 | 작업 간 관계 표현 불가 |\n| **Acceptance Criteria** | 미구현 | \"완료\" 정의 불명확 |\n| **계획 섹션** | 미구현 | 구현 방법 기록 불가 |\n| **노트 섹션** | 미구현 | 진행 상황/논의 기록 불가 |\n| **마감일** | 미구현 | 데드라인 추적 불가 |\n| **Git 히스토리** | 없음 | 변경 이력 추적 불가 |", "metadata": {"file_path": "openspec/changes/add-backlog-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "953", "text": "### Backlog.md의 장점\n\n1. **Git 네이티브**: 모든 변경이 Git 히스토리로 보존\n2. **AI 에이전트 친화적**: Claude가 직접 파일 읽기/쓰기 가능\n3. **Human-readable**: 에디터에서 직접 편집 가능\n4. **풍부한 메타데이터**: Plan, Acceptance Criteria, Notes 섹션\n\n## Proposed Solution\n\n### 아키텍처\n\n```\nbacklog/*.md  →  Server Parser  →  SQLite (캐시)  →  REST API  →  ZyFlow UI\n    (소스)           ↑                  ↑              ↑\n               파일 와처가         React Query가    기존 Kanban\n               변경 감지시         자동 리페치       컴포넌트 재사용\n               자동 동기화\n```\n\n### 태스크 파일 구조", "metadata": {"file_path": "openspec/changes/add-backlog-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "954", "text": "## Proposed Solution\n\n### 아키텍처\n\n```\nbacklog/*.md  →  Server Parser  →  SQLite (캐시)  →  REST API  →  ZyFlow UI\n    (소스)           ↑                  ↑              ↑\n               파일 와처가         React Query가    기존 Kanban\n               변경 감지시         자동 리페치       컴포넌트 재사용\n               자동 동기화\n```\n\n### 태스크 파일 구조\n\n```yaml\n---\nid: task-007\ntitle: OAuth2 인증 구현\nstatus: In Progress\nassignees: [@alice]\nlabels: [auth, backend, security]\npriority: high\nblocked_by: [task-003]\nparent: task-001\ndue_date: 2024-01-15\nmilestone: Sprint 3\n---\n\n## Description\nOAuth2 기반 소셜 로그인 구현", "metadata": {"file_path": "openspec/changes/add-backlog-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "955", "text": "### 태스크 파일 구조\n\n```yaml\n---\nid: task-007\ntitle: OAuth2 인증 구현\nstatus: In Progress\nassignees: [@alice]\nlabels: [auth, backend, security]\npriority: high\nblocked_by: [task-003]\nparent: task-001\ndue_date: 2024-01-15\nmilestone: Sprint 3\n---\n\n## Description\nOAuth2 기반 소셜 로그인 구현\n\n## Plan\n1. Google OAuth 설정\n2. 토큰 관리 로직\n3. 세션 연동\n\n## Acceptance Criteria\n- [ ] Google 로그인 동작\n- [ ] 토큰 갱신 자동화\n- [ ] 에러 처리 완료\n\n## Notes\n- 2024-01-03: API 키 발급 완료\n- 2024-01-04: 토큰 로직 50% 완료\n```\n\n### 핵심 기능", "metadata": {"file_path": "openspec/changes/add-backlog-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "956", "text": "## Acceptance Criteria\n- [ ] Google 로그인 동작\n- [ ] 토큰 갱신 자동화\n- [ ] 에러 처리 완료\n\n## Notes\n- 2024-01-03: API 키 발급 완료\n- 2024-01-04: 토큰 로직 50% 완료\n```\n\n### 핵심 기능\n\n1. **YAML Frontmatter 파싱**: 태스크 메타데이터 추출\n2. **마크다운 섹션 파싱**: Description, Plan, AC, Notes 추출\n3. **단방향 동기화**: `backlog/*.md → DB` (마크다운이 진실의 소스)\n4. **Origin 분리**: `origin='backlog'`로 Inbox와 구분\n5. **Inbox 마이그레이션**: 기존 태스크를 backlog 파일로 변환\n\n## Design Decisions", "metadata": {"file_path": "openspec/changes/add-backlog-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "957", "text": "## Design Decisions\n\n| 항목 | 결정 | 이유 |\n|------|------|------|\n| 동기화 방향 | 단방향 (파일→DB) | 마크다운이 SSOT, 충돌 방지 |\n| ID 형식 | `task-NNN` | 파일명에 사용, 순차 증가 |\n| origin 값 | `'backlog'` | Inbox(`'inbox'`)와 분리 |\n| 상태 매핑 | 5단계 정규화 | 다양한 표현 수용 |\n\n## Related Specs\n\n- [backlog-system spec](specs/backlog-system/spec.md)\n\n## References\n\n- [Backlog.md Project](https://github.com/backlog-md/backlog)\n- [YAML Frontmatter Spec](https://jekyllrb.com/docs/front-matter/)", "metadata": {"file_path": "openspec/changes/add-backlog-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "958", "text": "# Backlog System 구현 작업\n\n## Phase 1: Foundation ✅ COMPLETED\n\n### Database & Schema\n- [x] tasks 테이블에 Backlog 관련 컬럼 추가 (backlogFileId, parentTaskId, blockedBy, plan, acceptanceCriteria, notes, dueDate, milestone)\n- [x] Backlog 컬럼 인덱스 생성 (idx_tasks_backlog_file_id, idx_tasks_parent_task_id, idx_tasks_milestone)\n\n### Backlog Parser\n- [x] YAML frontmatter 파싱 (id, title, status, priority, assignees, labels, blocked_by, parent, due_date, milestone)\n- [x] 마크다운 섹션 파싱 (Description, Plan, Acceptance Criteria, Notes)\n- [x] 상태/우선순위 정규화 함수 (normalizeStatus, normalizePriority)", "metadata": {"file_path": "openspec/changes/add-backlog-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "959", "text": "### Backlog Parser\n- [x] YAML frontmatter 파싱 (id, title, status, priority, assignees, labels, blocked_by, parent, due_date, milestone)\n- [x] 마크다운 섹션 파싱 (Description, Plan, Acceptance Criteria, Notes)\n- [x] 상태/우선순위 정규화 함수 (normalizeStatus, normalizePriority)\n\n### Sync Module\n- [x] scanBacklogDirectory() - backlog/*.md 파일 검색\n- [x] syncBacklogToDb() - 전체 동기화\n- [x] syncBacklogTaskToDb() - 개별 태스크 동기화", "metadata": {"file_path": "openspec/changes/add-backlog-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "960", "text": "### Sync Module\n- [x] scanBacklogDirectory() - backlog/*.md 파일 검색\n- [x] syncBacklogToDb() - 전체 동기화\n- [x] syncBacklogTaskToDb() - 개별 태스크 동기화\n\n### API Endpoints\n- [x] GET /api/flow/tasks?origin=backlog - Backlog 태스크 목록\n- [x] GET /api/flow/backlog/tasks/:id - 상세 조회\n- [x] PUT /api/flow/backlog/tasks/:id - 태스크 수정\n- [x] POST /api/flow/backlog/sync - 수동 동기화\n- [x] GET /api/flow/backlog/stats - 통계 조회\n\n---\n\n## Phase 2: UI Implementation ✅ COMPLETED", "metadata": {"file_path": "openspec/changes/add-backlog-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "961", "text": "### API Endpoints\n- [x] GET /api/flow/tasks?origin=backlog - Backlog 태스크 목록\n- [x] GET /api/flow/backlog/tasks/:id - 상세 조회\n- [x] PUT /api/flow/backlog/tasks/:id - 태스크 수정\n- [x] POST /api/flow/backlog/sync - 수동 동기화\n- [x] GET /api/flow/backlog/stats - 통계 조회\n\n---\n\n## Phase 2: UI Implementation ✅ COMPLETED\n\n### Components\n- [x] BacklogView.tsx - Kanban 보드 메인 컴포넌트\n- [x] TaskDetailDialog - 상세 보기 다이얼로그 (Plan, AC, Notes, Dependencies)\n- [x] 서브태스크/의존성 배지 표시", "metadata": {"file_path": "openspec/changes/add-backlog-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "962", "text": "---\n\n## Phase 2: UI Implementation ✅ COMPLETED\n\n### Components\n- [x] BacklogView.tsx - Kanban 보드 메인 컴포넌트\n- [x] TaskDetailDialog - 상세 보기 다이얼로그 (Plan, AC, Notes, Dependencies)\n- [x] 서브태스크/의존성 배지 표시\n\n### Navigation\n- [x] MenuBar.tsx에 Backlog 버튼 추가\n- [x] FlowContent.tsx 라우팅 연결\n- [x] App.tsx SelectedItem 타입 확장\n\n### React Hooks\n- [x] useBacklogTasks() - 목록 조회\n- [x] useBacklogTaskDetail() - 상세 조회\n- [x] useUpdateBacklogTask() - 수정\n- [x] useSyncBacklog() - 동기화\n\n---\n\n## Phase 3: Migration Tool ✅ COMPLETED", "metadata": {"file_path": "openspec/changes/add-backlog-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "963", "text": "### Navigation\n- [x] MenuBar.tsx에 Backlog 버튼 추가\n- [x] FlowContent.tsx 라우팅 연결\n- [x] App.tsx SelectedItem 타입 확장\n\n### React Hooks\n- [x] useBacklogTasks() - 목록 조회\n- [x] useBacklogTaskDetail() - 상세 조회\n- [x] useUpdateBacklogTask() - 수정\n- [x] useSyncBacklog() - 동기화\n\n---\n\n## Phase 3: Migration Tool ✅ COMPLETED\n\n### Migration API\n- [x] GET /api/flow/backlog/migration/preview - 마이그레이션 미리보기\n- [x] POST /api/flow/backlog/migration - 전체 마이그레이션\n- [x] POST /api/flow/backlog/migration/selected - 선택 마이그레이션", "metadata": {"file_path": "openspec/changes/add-backlog-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "964", "text": "---\n\n## Phase 3: Migration Tool ✅ COMPLETED\n\n### Migration API\n- [x] GET /api/flow/backlog/migration/preview - 마이그레이션 미리보기\n- [x] POST /api/flow/backlog/migration - 전체 마이그레이션\n- [x] POST /api/flow/backlog/migration/selected - 선택 마이그레이션\n\n### Migration Logic\n- [x] getInboxTasksForMigration() - 대상 태스크 조회\n- [x] generateNewBacklogTaskId() - 새 ID 생성 (task-NNN)\n- [x] convertToBacklogTask() - Inbox → Backlog 변환\n- [x] saveTaskToBacklogFile() - 마크다운 파일 저장", "metadata": {"file_path": "openspec/changes/add-backlog-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "965", "text": "### Migration Logic\n- [x] getInboxTasksForMigration() - 대상 태스크 조회\n- [x] generateNewBacklogTaskId() - 새 ID 생성 (task-NNN)\n- [x] convertToBacklogTask() - Inbox → Backlog 변환\n- [x] saveTaskToBacklogFile() - 마크다운 파일 저장\n\n### UI\n- [x] MigrationDialog - 미리보기 및 실행 UI\n- [x] StandaloneTasks에 \"Migrate to Backlog\" 버튼 추가\n- [x] useMigrationPreview(), useMigrateAllToBacklog(), useMigrateSelectedToBacklog() 훅\n\n---\n\n## Phase 4: Cleanup 🔲 PENDING\n\n### Legacy Code\n- [ ] Inbox 전용 코드 정리 (Backlog와 통합)\n- [ ] 중복 컴포넌트 정리\n\n---\n\n## Files Created/Modified\n\n### Created (Phase 1)\n- server/backlog/parser.ts\n- server/backlog/sync.ts\n- server/backlog/index.ts", "metadata": {"file_path": "openspec/changes/add-backlog-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "966", "text": "---\n\n## Phase 4: Cleanup 🔲 PENDING\n\n### Legacy Code\n- [ ] Inbox 전용 코드 정리 (Backlog와 통합)\n- [ ] 중복 컴포넌트 정리\n\n---\n\n## Files Created/Modified\n\n### Created (Phase 1)\n- server/backlog/parser.ts\n- server/backlog/sync.ts\n- server/backlog/index.ts\n\n### Created (Phase 2)\n- src/components/flow/BacklogView.tsx\n\n### Created (Phase 3)\n- server/backlog/migration.ts\n\n### Modified\n- server/tasks/db/client.ts - Backlog 컬럼 마이그레이션\n- server/routes/flow.ts - Backlog API 엔드포인트\n- src/hooks/useFlowChanges.ts - Backlog 훅\n- src/components/layout/MenuBar.tsx - Backlog 버튼\n- src/components/flow/FlowContent.tsx - 라우팅\n- src/components/flow/StandaloneTasks.tsx - Migration 버튼\n\n---\n\n## Test Checklist", "metadata": {"file_path": "openspec/changes/add-backlog-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "967", "text": "### Created (Phase 3)\n- server/backlog/migration.ts\n\n### Modified\n- server/tasks/db/client.ts - Backlog 컬럼 마이그레이션\n- server/routes/flow.ts - Backlog API 엔드포인트\n- src/hooks/useFlowChanges.ts - Backlog 훅\n- src/components/layout/MenuBar.tsx - Backlog 버튼\n- src/components/flow/FlowContent.tsx - 라우팅\n- src/components/flow/StandaloneTasks.tsx - Migration 버튼\n\n---\n\n## Test Checklist\n\n### Build & Type Check\n- [x] TypeScript 컴파일 성공\n- [x] Vite 빌드 성공\n\n### API Tests\n- [x] Backlog stats API 동작 확인\n- [x] Tasks API origin=backlog 필터 동작\n\n### UI Tests\n- [x] BacklogView Kanban 렌더링\n- [x] TaskDetailDialog 상세 정보 표시\n- [x] Migration 버튼 및 다이얼로그", "metadata": {"file_path": "openspec/changes/add-backlog-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "968", "text": "# Backlog System Specification\n\n## Overview\n\nZyFlow의 Backlog.md 기반 태스크 관리 시스템 스펙입니다.\n\n## 핵심 원칙\n\n1. **마크다운이 진실의 소스 (SSOT)**: `backlog/*.md` 파일이 원본\n2. **DB는 캐시**: SQLite는 빠른 조회를 위한 캐시\n3. **단방향 동기화**: 파일 → DB (충돌 방지)\n4. **Git 네이티브**: 모든 변경이 Git 히스토리로 보존\n\n## 파일 형식\n\n### 위치\n\n```\nproject-root/\n└── backlog/\n    ├── task-001-oauth-implementation.md\n    ├── task-002-payment-integration.md\n    └── task-003-user-dashboard.md\n```\n\n### 파일명 규칙", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "969", "text": "## 파일 형식\n\n### 위치\n\n```\nproject-root/\n└── backlog/\n    ├── task-001-oauth-implementation.md\n    ├── task-002-payment-integration.md\n    └── task-003-user-dashboard.md\n```\n\n### 파일명 규칙\n\n```\n{task-id}-{slugified-title}.md\n```\n\n- `task-id`: `task-NNN` 형식 (순차 증가)\n- `slugified-title`: 소문자, 특수문자 → 하이픈, 최대 50자\n\n### 파일 구조\n\n```yaml\n---\nid: task-007\ntitle: OAuth2 인증 구현\nstatus: in-progress\nassignees: [@alice, @bob]\nlabels: [auth, backend, security]\npriority: high\nblocked_by: [task-003, task-005]\nparent: task-001\ndue_date: 2024-01-15\nmilestone: Sprint 3\n---", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "970", "text": "### 파일 구조\n\n```yaml\n---\nid: task-007\ntitle: OAuth2 인증 구현\nstatus: in-progress\nassignees: [@alice, @bob]\nlabels: [auth, backend, security]\npriority: high\nblocked_by: [task-003, task-005]\nparent: task-001\ndue_date: 2024-01-15\nmilestone: Sprint 3\n---\n\n## Description\nOAuth2 기반 소셜 로그인 구현\n\n## Plan\n1. Google OAuth 클라이언트 설정\n2. 토큰 관리 로직 구현\n3. 세션 연동\n\n## Acceptance Criteria\n- [ ] Google 로그인 정상 동작\n- [ ] 토큰 갱신 자동화\n- [ ] 에러 처리 완료", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "971", "text": "## Description\nOAuth2 기반 소셜 로그인 구현\n\n## Plan\n1. Google OAuth 클라이언트 설정\n2. 토큰 관리 로직 구현\n3. 세션 연동\n\n## Acceptance Criteria\n- [ ] Google 로그인 정상 동작\n- [ ] 토큰 갱신 자동화\n- [ ] 에러 처리 완료\n\n## Notes\n- 2024-01-03: API 키 발급 완료\n- 2024-01-04: 토큰 로직 50% 완료\n```\n\n## YAML Frontmatter 필드\n\n| 필드 | 타입 | 필수 | 설명 |\n|------|------|------|------|\n| `id` | string | ✅ | 고유 식별자 (task-NNN) |\n| `title` | string | ✅ | 태스크 제목 |\n| `status` | string | ❌ | 상태", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "972", "text": "## YAML Frontmatter 필드\n\n| 필드 | 타입 | 필수 | 설명 |\n|------|------|------|------|\n| `id` | string | ✅ | 고유 식별자 (task-NNN) |\n| `title` | string | ✅ | 태스크 제목 |\n| `status` | string | ❌ | 상태 (기본: todo) |\n| `assignees` | string[] | ❌ | 담당자 목록 [@user] |\n| `labels` | string[] | ❌ | 라벨/태그 |\n| `priority` | string | ❌ | 우선순위 (기본: medium) |\n| `blocked_by` | string[] | ❌ | 의존성 (차단하는 태스크 ID) |\n| `parent` | string | ❌ | 부모 태스크 ID (서브태스크) |\n| `due_date` | string | ❌ | 마감일 (ISO", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "973", "text": "목록 [@user] |\n| `labels` | string[] | ❌ | 라벨/태그 |\n| `priority` | string | ❌ | 우선순위 (기본: medium) |\n| `blocked_by` | string[] | ❌ | 의존성 (차단하는 태스크 ID) |\n| `parent` | string | ❌ | 부모 태스크 ID (서브태스크) |\n| `due_date` | string | ❌ | 마감일 (ISO 8601) |\n| `milestone` | string | ❌ | 마일스톤/스프린트 |\n\n### 상태 값 매핑", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "974", "text": "(기본: medium) |\n| `blocked_by` | string[] | ❌ | 의존성 (차단하는 태스크 ID) |\n| `parent` | string | ❌ | 부모 태스크 ID (서브태스크) |\n| `due_date` | string | ❌ | 마감일 (ISO 8601) |\n| `milestone` | string | ❌ | 마일스톤/스프린트 |\n\n### 상태 값 매핑\n\n| 입력 값 | 정규화 결과 |\n|---------|-------------|\n| `todo`, `to-do`, `backlog`, `new` | `todo` |\n| `in-progress`, `in_progress`, `doing`, `started` | `in-progress` |\n| `review`, `reviewing`, `testing` | `review` |\n| `done`, `completed`, `finished` | `done` |\n| `archived`, `closed` | `archived` |\n\n### 우선순위 값 매핑", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "975", "text": "|\n\n### 상태 값 매핑\n\n| 입력 값 | 정규화 결과 |\n|---------|-------------|\n| `todo`, `to-do`, `backlog`, `new` | `todo` |\n| `in-progress`, `in_progress`, `doing`, `started` | `in-progress` |\n| `review`, `reviewing`, `testing` | `review` |\n| `done`, `completed`, `finished` | `done` |\n| `archived`, `closed` | `archived` |\n\n### 우선순위 값 매핑\n\n| 입력 값 | 정규화 결과 |\n|---------|-------------|\n| `high`, `critical`, `urgent` | `high` |\n| `medium`, `normal`, `default` | `medium` |\n| `low`, `minor` | `low` |\n\n## 마크다운 섹션", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "976", "text": "### 우선순위 값 매핑\n\n| 입력 값 | 정규화 결과 |\n|---------|-------------|\n| `high`, `critical`, `urgent` | `high` |\n| `medium`, `normal`, `default` | `medium` |\n| `low`, `minor` | `low` |\n\n## 마크다운 섹션\n\n| 섹션 | 용도 |\n|------|------|\n| `## Description` | 태스크 상세 설명 |\n| `## Plan` | 구현 계획/단계 |\n| `## Acceptance Criteria` | 완료 조건 체크리스트 |\n| `## Notes` | 진행 메모, 논의 내용 |\n\n## API Endpoints\n\n### Backlog Tasks\n\n```\nGET  /api/flow/tasks?origin=backlog&projectId={id}\nGET  /api/flow/backlog/tasks/:id\nPUT  /api/flow/backlog/tasks/:id\nPOST /api/flow/backlog/sync\n```", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "977", "text": "## API Endpoints\n\n### Backlog Tasks\n\n```\nGET  /api/flow/tasks?origin=backlog&projectId={id}\nGET  /api/flow/backlog/tasks/:id\nPUT  /api/flow/backlog/tasks/:id\nPOST /api/flow/backlog/sync\n```\n\n### Migration\n\n```\nGET  /api/flow/backlog/migration/preview\nPOST /api/flow/backlog/migration\nPOST /api/flow/backlog/migration/selected\n```\n\n## 동기화 동작\n\n### 트리거\n\n1. **프로젝트 활성화**: 자동 동기화\n2. **파일 변경 감지**: chokidar 와처\n3. **수동 요청**: sync API 호출\n\n### 동기화 로직", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "978", "text": "### Migration\n\n```\nGET  /api/flow/backlog/migration/preview\nPOST /api/flow/backlog/migration\nPOST /api/flow/backlog/migration/selected\n```\n\n## 동기화 동작\n\n### 트리거\n\n1. **프로젝트 활성화**: 자동 동기화\n2. **파일 변경 감지**: chokidar 와처\n3. **수동 요청**: sync API 호출\n\n### 동기화 로직\n\n```\n파일 발견\n    │\n    ▼\n기존 DB 레코드 존재?\n    │\n    ├─ Yes → 업데이트 (fileModifiedAt 비교)\n    │\n    └─ No → 새 레코드 생성\n```\n\n### 삭제 처리\n\n- 파일 삭제 시: DB 레코드도 삭제 (또는 archived 처리)\n\n## 마이그레이션\n\n### 대상 조건", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "979", "text": "### 동기화 로직\n\n```\n파일 발견\n    │\n    ▼\n기존 DB 레코드 존재?\n    │\n    ├─ Yes → 업데이트 (fileModifiedAt 비교)\n    │\n    └─ No → 새 레코드 생성\n```\n\n### 삭제 처리\n\n- 파일 삭제 시: DB 레코드도 삭제 (또는 archived 처리)\n\n## 마이그레이션\n\n### 대상 조건\n\n```sql\nWHERE origin = 'inbox'\n  AND changeId IS NULL\n  AND status != 'archived'\n```\n\n### 변환 과정\n\n1. Inbox 태스크 조회\n2. 새 backlogFileId 생성 (task-NNN)\n3. 마크다운 파일 생성\n4. DB origin='backlog' 업데이트\n\n## React Hooks\n\n```typescript\n// 목록 조회\nconst { data: tasks } = useBacklogTasks(projectId)", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "980", "text": "## 마이그레이션\n\n### 대상 조건\n\n```sql\nWHERE origin = 'inbox'\n  AND changeId IS NULL\n  AND status != 'archived'\n```\n\n### 변환 과정\n\n1. Inbox 태스크 조회\n2. 새 backlogFileId 생성 (task-NNN)\n3. 마크다운 파일 생성\n4. DB origin='backlog' 업데이트\n\n## React Hooks\n\n```typescript\n// 목록 조회\nconst { data: tasks } = useBacklogTasks(projectId)\n\n// 상세 조회\nconst { data: task } = useBacklogTaskDetail(taskId)\n\n// 수정\nconst updateTask = useUpdateBacklogTask()\n\n// 동기화\nconst syncBacklog = useSyncBacklog()\n\n// 마이그레이션\nconst { data: preview } = useMigrationPreview()\nconst migrateAll = useMigrateAllToBacklog()\nconst migrateSelected = useMigrateSelectedToBacklog()\n```\n\n## UI 컴포넌트\n\n### BacklogView", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "981", "text": "// 상세 조회\nconst { data: task } = useBacklogTaskDetail(taskId)\n\n// 수정\nconst updateTask = useUpdateBacklogTask()\n\n// 동기화\nconst syncBacklog = useSyncBacklog()\n\n// 마이그레이션\nconst { data: preview } = useMigrationPreview()\nconst migrateAll = useMigrateAllToBacklog()\nconst migrateSelected = useMigrateSelectedToBacklog()\n```\n\n## UI 컴포넌트\n\n### BacklogView\n\n- Kanban 보드 (Todo, In Progress, Review, Done)\n- 드래그앤드롭 상태 변경\n- 필터링 (status, priority)\n- 서브태스크/의존성 배지 표시\n\n### TaskDetailDialog\n\n- YAML 필드 표시\n- Plan, Acceptance Criteria, Notes 섹션\n- 서브태스크 목록\n- Blocked By 의존성 링크\n\n### MigrationDialog", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "982", "text": "## UI 컴포넌트\n\n### BacklogView\n\n- Kanban 보드 (Todo, In Progress, Review, Done)\n- 드래그앤드롭 상태 변경\n- 필터링 (status, priority)\n- 서브태스크/의존성 배지 표시\n\n### TaskDetailDialog\n\n- YAML 필드 표시\n- Plan, Acceptance Criteria, Notes 섹션\n- 서브태스크 목록\n- Blocked By 의존성 링크\n\n### MigrationDialog\n\n- 미리보기 목록\n- 마이그레이션 실행 버튼\n- 진행 상황 및 결과\n\n## DB 스키마", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "983", "text": "- YAML 필드 표시\n- Plan, Acceptance Criteria, Notes 섹션\n- 서브태스크 목록\n- Blocked By 의존성 링크\n\n### MigrationDialog\n\n- 미리보기 목록\n- 마이그레이션 실행 버튼\n- 진행 상황 및 결과\n\n## DB 스키마\n\n```typescript\n// tasks 테이블 확장 필드\ninterface BacklogTaskFields {\n  backlogFileId: string | null   // task-007\n  parentTaskId: number | null    // 서브태스크 관계\n  blockedBy: string | null       // JSON: [\"task-003\"]\n  plan: string | null            // 계획 섹션\n  acceptanceCriteria: string | null  // 완료 조건\n  notes: string | null           // 메모\n  dueDate: Date | null           // 마감일\n  milestone: string | null       // 마일스톤\n}\n```", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "984", "text": "## 에러 처리\n\n| 에러 상황 | 처리 |\n|----------|------|\n| YAML 파싱 실패 | 파일 스킵, 로그 경고 |\n| 필수 필드 누락 | 파일 스킵, 로그 경고 |\n| 파일 읽기 실패 | 파일 스킵, 로그 에러 |\n| DB 쓰기 실패 | 롤백, 에러 반환 |", "metadata": {"file_path": "openspec/changes/add-backlog-system/specs/backlog-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "985", "text": "# Post-Task Agent 설계\n\n## Architecture Overview\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                    Post-Task Agent System                    │\n├─────────────────────────────────────────────────────────────┤\n│                                                             │\n│  ┌─────────────┐    ┌──────────────┐    ┌───────────────┐  │\n│  │ MCP Tools   │───▶│ Task Runner  │───▶│ Report Gen    │  │\n│  │             │    │              │    │               │  │\n│  │ post_task_* │    │ - lint-fix   │    │ - JSON        │  │\n│  │             │    │ - type-check │    │ - Markdown    │  │\n│  └─────────────┘    │ - dead-code  │    └───────────────┘  │\n│                     │ - ci-fix     │            │          │\n│                     │ - ...", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "986", "text": "..        │            ▼          │\n│                     └──────────────┘    ┌───────────────┐  │\n│                            │            │ .zyflow/      │  │\n│                            ▼            │ reports/      │  │\n│                     ┌──────────────┐    └───────────────┘  │\n│                     │ Quarantine   │                       │\n│                     │ Manager      │                       │\n│                     │              │                       │\n│                     │ .quarantine/ │                       │\n│                     └──────────────┘                       │\n│                                                             │\n└─────────────────────────────────────────────────────────────┘\n```\n\n## Key Design Decisions\n\n### Decision 0: 트리거 시스템 아키텍처", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "987", "text": "quarantine/ │                       │\n│                     └──────────────┘                       │\n│                                                             │\n└─────────────────────────────────────────────────────────────┘\n```\n\n## Key Design Decisions\n\n### Decision 0: 트리거 시스템 아키텍처\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│                     Trigger System                               │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                  │\n│  ┌──────────────┐   ┌──────────────┐   ┌──────────────────────┐ │\n│  │  Git Hooks   │   │  Scheduler   │   │  Event Listener      │ │\n│  │              │   │              │   │                      │ │\n│  │ .git/hooks/  │   │ node-cron    │   │ polling (gh,", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "988", "text": "sentry) │ │\n│  │ husky        │   │ or pm2       │   │ file watcher         │ │\n│  └──────┬───────┘   └──────┬───────┘   └──────────┬───────────┘ │\n│         │                  │                      │              │\n│         └──────────────────┼──────────────────────┘              │\n│                            ▼                                     │\n│                   ┌────────────────┐                             │\n│                   │ Trigger Router │                             │\n│                   │                │                             │\n│                   │ - task mapping │                             │\n│                   │ - dedup check  │                             │\n│                   │ - queue        │                             │\n│                   └────────┬───────┘                             │\n│                            ▼                                     │\n│                   ┌────────────────┐                             │\n│                   │  Task Runner   │                             │\n│                   └────────────────┘                             │\n│                                                                  │\n└─────────────────────────────────────────────────────────────────┘\n```", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "989", "text": "**트리거 설정 파일 (`.zyflow/triggers.json`):**\n```json\n{\n  \"hooks\": {\n    \"pre-commit\": [\"lint-fix\", \"type-check\"],\n    \"pre-push\": [\"test-fix\"],\n    \"post-commit\": [\"test-gen\"],\n    \"post-merge\": [\"dep-audit\", \"dead-code\"]\n  },\n  \"schedule\": [\n    { \"cron\": \"0 9 * * *\", \"tasks\": [\"sentry-triage\", \"security-audit\"] },\n    { \"cron\": \"0 9 * * 1\", \"tasks\": [\"dead-code\", \"e2e-expand\"] },\n    { \"cron\": \"0 9 1 * *\", \"tasks\": [\"refactor-suggest\"] }\n  ],\n  \"events\": {\n    \"ci-failure\": [\"ci-fix\", \"test-fix\"],\n    \"pr-created\": [\"lint-fix\", \"type-check\", \"test-gen\"],\n    \"pr-merged\": [\"dead-code\", \"coverage-check\"],\n    \"deploy-complete\": [\"e2e-expand\", \"api-validate\"],", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "990", "text": "{ \"cron\": \"0 9 * * 1\", \"tasks\": [\"dead-code\", \"e2e-expand\"] },\n    { \"cron\": \"0 9 1 * *\", \"tasks\": [\"refactor-suggest\"] }\n  ],\n  \"events\": {\n    \"ci-failure\": [\"ci-fix\", \"test-fix\"],\n    \"pr-created\": [\"lint-fix\", \"type-check\", \"test-gen\"],\n    \"pr-merged\": [\"dead-code\", \"coverage-check\"],\n    \"deploy-complete\": [\"e2e-expand\", \"api-validate\"],\n    \"sentry-issue\": [\"sentry-triage\"]\n  },\n  \"polling\": {\n    \"github-ci\": { \"interval\": \"5m\", \"enabled\": true },\n    \"sentry\": { \"interval\": \"15m\", \"enabled\": true }\n  }\n}\n```\n\n### Decision 1: Task 카테고리별 자동화 수준\n\n각 카테고리는 위험도에 따라 다른 자동화 수준을 가집니다:", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "991", "text": "\"enabled\": true },\n    \"sentry\": { \"interval\": \"15m\", \"enabled\": true }\n  }\n}\n```\n\n### Decision 1: Task 카테고리별 자동화 수준\n\n각 카테고리는 위험도에 따라 다른 자동화 수준을 가집니다:\n\n| 카테고리 | 자동화 수준 | 이유 |\n|----------|------------|------|\n| Code Quality | **자동 수정 + 커밋** | 기계적이고 안전함 |\n| Testing | **생성 + 확인 후 적용** | 테스트 품질 검증 필요 |\n| CI/CD | **분석 + 수정 시도** | 환경 차이로 실패 가능 |\n| Production | **분석 + 보고만** | 프로덕션 변경은 위험 |\n| Maintenance | **리마인드만** | 사람의 판단 필요 |", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "992", "text": "### Decision 2: Dead Code 격리 전략\n\n**Why Quarantine?**\n- 즉시 삭제는 동적 import, 테스트 전용 코드 등을 잘못 삭제할 위험\n- Git history에서 복구 가능하지만 불편함\n- 격리 폴더로 옮기면 빠른 복구 + 검토 용이\n\n**Quarantine 구조:**\n```\n.quarantine/\n├── 2024-12-13/\n│   ├── manifest.json\n│   └── [original-path-structure]/\n│       └── file.ts\n```\n\n**manifest.json 스키마:**\n```typescript\ninterface QuarantineManifest {\n  date: string;              // ISO date\n  reason: string;            // 격리 사유 (예: \"dead-code-cleanup\")\n  items: QuarantineItem[];\n}", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "993", "text": "**Quarantine 구조:**\n```\n.quarantine/\n├── 2024-12-13/\n│   ├── manifest.json\n│   └── [original-path-structure]/\n│       └── file.ts\n```\n\n**manifest.json 스키마:**\n```typescript\ninterface QuarantineManifest {\n  date: string;              // ISO date\n  reason: string;            // 격리 사유 (예: \"dead-code-cleanup\")\n  items: QuarantineItem[];\n}\n\ninterface QuarantineItem {\n  id: string;                // UUID\n  original: string;          // 원본 경로\n  reason: string;            // 상세 사유\n  detectedBy: string;        // 감지 도구 (예: \"ts-prune\", \"eslint\")\n  confidence: 'high' | 'medium' | 'low';\n  lastUsed?: string;         // 마지막 사용일 (git log 기반)\n  restoredAt?: string;       // 복구된 경우 날짜\n}\n```", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "994", "text": "interface QuarantineItem {\n  id: string;                // UUID\n  original: string;          // 원본 경로\n  reason: string;            // 상세 사유\n  detectedBy: string;        // 감지 도구 (예: \"ts-prune\", \"eslint\")\n  confidence: 'high' | 'medium' | 'low';\n  lastUsed?: string;         // 마지막 사용일 (git log 기반)\n  restoredAt?: string;       // 복구된 경우 날짜\n}\n```\n\n### Decision 3: 리포트 저장 구조\n\n모든 실행 결과는 `.zyflow/reports/`에 저장됩니다:", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "995", "text": "### Decision 3: 리포트 저장 구조\n\n모든 실행 결과는 `.zyflow/reports/`에 저장됩니다:\n\n```\n.zyflow/\n├── reports/\n│   ├── post-task/\n│   │   ├── 2024-12-13T10-30-00_lint-fix.json\n│   │   ├── 2024-12-13T10-30-00_lint-fix.md\n│   │   ├── 2024-12-13T11-00-00_ci-fix.json\n│   │   └── ...\n│   └── summary/\n│       ├── weekly-2024-W50.md\n│       └── ...\n```\n\n### Decision 4: 모델 선택 전략\n\n작업 복잡도에 따라 적절한 모델을 선택하여 비용과 속도를 최적화합니다:", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "996", "text": "### Decision 4: 모델 선택 전략\n\n작업 복잡도에 따라 적절한 모델을 선택하여 비용과 속도를 최적화합니다:\n\n| 작업 | 권장 모델 | 이유 |\n|------|----------|------|\n| lint-fix | haiku / qwen | 단순 패턴 수정, 빠른 처리 |\n| type-check | haiku / qwen | 타입 오류는 명확함 |\n| dead-code | sonnet | 의존성 분석 필요 |\n| todo-cleanup | haiku | 단순 텍스트 처리 |\n| ci-fix | sonnet | 복잡한 로그 분석 |\n| dep-audit | haiku | 버전 비교만 필요 |\n| sentry-triage | sonnet / opus | 스택트레이스 심층 분석 |\n| security-audit | opus | 보안 컨텍스트 이해", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "997", "text": "명확함 |\n| dead-code | sonnet | 의존성 분석 필요 |\n| todo-cleanup | haiku | 단순 텍스트 처리 |\n| ci-fix | sonnet | 복잡한 로그 분석 |\n| dep-audit | haiku | 버전 비교만 필요 |\n| sentry-triage | sonnet / opus | 스택트레이스 심층 분석 |\n| security-audit | opus | 보안 컨텍스트 이해 필요 |\n| refactor-suggest | sonnet | 코드 구조 이해 필요 |\n| test-fix | sonnet | 테스트 로직 이해 필요 |\n| test-gen | sonnet | 코드 분석 + 테스트 설계 |\n| e2e-expand | sonnet | 사용자 플로우 이해 필요 |\n| coverage-fix | balanced | 커버리지 분석 + 테스트 생성 |\n| snapshot-update | haiku | 단순 비교", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "998", "text": "| opus | 보안 컨텍스트 이해 필요 |\n| refactor-suggest | sonnet | 코드 구조 이해 필요 |\n| test-fix | sonnet | 테스트 로직 이해 필요 |\n| test-gen | sonnet | 코드 분석 + 테스트 설계 |\n| e2e-expand | sonnet | 사용자 플로우 이해 필요 |\n| coverage-fix | balanced | 커버리지 분석 + 테스트 생성 |\n| snapshot-update | haiku | 단순 비교 작업 |\n| flaky-detect | sonnet | 비결정적 패턴 분석 |\n\n**CLI별 모델 매핑:**\n```typescript\ntype ModelTier = 'fast' | 'balanced' | 'powerful';", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "999", "text": "분석 + 테스트 생성 |\n| snapshot-update | haiku | 단순 비교 작업 |\n| flaky-detect | sonnet | 비결정적 패턴 분석 |\n\n**CLI별 모델 매핑:**\n```typescript\ntype ModelTier = 'fast' | 'balanced' | 'powerful';\n\nconst CLI_MODELS: Record<string, Record<ModelTier, string>> = {\n  'claude': {\n    fast: 'claude-haiku',\n    balanced: 'claude-sonnet',\n    powerful: 'claude-opus'\n  },\n  'gemini': {\n    fast: 'gemini-flash',\n    balanced: 'gemini-pro',\n    powerful: 'gemini-ultra'\n  },\n  'qwen': {\n    fast: 'qwen-turbo',\n    balanced: 'qwen-plus',\n    powerful: 'qwen-max'\n  },\n  'openai': {\n    fast: 'gpt-4o-mini',\n    balanced: 'gpt-4o',\n    powerful: 'o1'\n  }\n};\n```", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1000", "text": "**사용자 오버라이드:**\n```typescript\n// 기본 모델로 실행\npost_task_run({ tasks: ['lint-fix'] })\n\n// 특정 모델 지정\npost_task_run({\n  tasks: ['sentry-triage'],\n  model: 'opus'  // 또는 'powerful'\n})\n\n// CLI 지정\npost_task_run({\n  tasks: ['lint-fix'],\n  cli: 'qwen',\n  model: 'fast'\n})\n```\n\n### Decision 5: MCP 도구 설계\n\n**단일 진입점 + 카테고리 필터:**\n```typescript\n// 전체 점검 실행\npost_task_run({ category: 'all' })\n\n// 특정 카테고리만\npost_task_run({ category: 'code-quality' })\n\n// 특정 작업만\npost_task_run({ tasks: ['lint-fix', 'type-check'] })", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1001", "text": "### Decision 5: MCP 도구 설계\n\n**단일 진입점 + 카테고리 필터:**\n```typescript\n// 전체 점검 실행\npost_task_run({ category: 'all' })\n\n// 특정 카테고리만\npost_task_run({ category: 'code-quality' })\n\n// 특정 작업만\npost_task_run({ tasks: ['lint-fix', 'type-check'] })\n\n// 모델/CLI 지정\npost_task_run({\n  tasks: ['lint-fix'],\n  cli: 'qwen',\n  model: 'fast'\n})\n```\n\n**개별 도구도 제공:**\n```typescript\npost_task_lint_fix({ model: 'haiku' })\npost_task_type_check({ cli: 'gemini' })\npost_task_dead_code()\n// ...\n```\n\n### Decision 6: 외부 서비스 연동", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1002", "text": "// 특정 작업만\npost_task_run({ tasks: ['lint-fix', 'type-check'] })\n\n// 모델/CLI 지정\npost_task_run({\n  tasks: ['lint-fix'],\n  cli: 'qwen',\n  model: 'fast'\n})\n```\n\n**개별 도구도 제공:**\n```typescript\npost_task_lint_fix({ model: 'haiku' })\npost_task_type_check({ cli: 'gemini' })\npost_task_dead_code()\n// ...\n```\n\n### Decision 6: 외부 서비스 연동\n\n| 서비스 | 연동 방식 | 필요 설정 |\n|--------|----------|----------|\n| GitHub | `gh` CLI | 로그인 필요 |\n| Sentry | REST API | SENTRY_AUTH_TOKEN |\n| Supabase | `supabase` CLI | 프로젝트 연결 |\n\n**Integration Hub 연동:**\n기존 `integration-tools.ts`의 계정 정보를 활용하여 토큰을 자동으로 가져옵니다.\n\n## Task Implementation Details", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1003", "text": "### Decision 6: 외부 서비스 연동\n\n| 서비스 | 연동 방식 | 필요 설정 |\n|--------|----------|----------|\n| GitHub | `gh` CLI | 로그인 필요 |\n| Sentry | REST API | SENTRY_AUTH_TOKEN |\n| Supabase | `supabase` CLI | 프로젝트 연결 |\n\n**Integration Hub 연동:**\n기존 `integration-tools.ts`의 계정 정보를 활용하여 토큰을 자동으로 가져옵니다.\n\n## Task Implementation Details\n\n### lint-fix\n```bash\n# 1. 린트 실행\nnpm run lint -- --format json > lint-result.json\n\n# 2. 자동 수정 가능한 것 수정\nnpm run lint -- --fix\n\n# 3. 수정 불가능한 것은 리포트에 포함\n```\n\n### type-check\n```bash\n# 1. 타입 체크\nnpx tsc --noEmit 2>&1 | tee type-errors.txt", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1004", "text": "## Task Implementation Details\n\n### lint-fix\n```bash\n# 1. 린트 실행\nnpm run lint -- --format json > lint-result.json\n\n# 2. 자동 수정 가능한 것 수정\nnpm run lint -- --fix\n\n# 3. 수정 불가능한 것은 리포트에 포함\n```\n\n### type-check\n```bash\n# 1. 타입 체크\nnpx tsc --noEmit 2>&1 | tee type-errors.txt\n\n# 2. 에러 분석 및 수정 시도\n# - missing import → 자동 추가\n# - type mismatch → 수정안 제시\n```\n\n### dead-code\n```bash\n# 1. 미사용 export 감지\nnpx ts-prune > unused-exports.txt\n\n# 2. 미사용 의존성 감지\nnpx depcheck", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1005", "text": "# 2. 에러 분석 및 수정 시도\n# - missing import → 자동 추가\n# - type mismatch → 수정안 제시\n```\n\n### dead-code\n```bash\n# 1. 미사용 export 감지\nnpx ts-prune > unused-exports.txt\n\n# 2. 미사용 의존성 감지\nnpx depcheck\n\n# 3. 신뢰도별 처리\n# - high confidence → .quarantine/로 이동\n# - low confidence → 리포트에만 포함\n```\n\n### ci-fix\n```bash\n# 1. 최근 실패한 workflow 확인\ngh run list --status failure --limit 5\n\n# 2. 실패 로그 분석\ngh run view <run-id> --log-failed\n\n# 3. 패턴 매칭으로 원인 분류\n# - dependency issue\n# - test failure\n# - build error\n# - environment issue\n```", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1006", "text": "### ci-fix\n```bash\n# 1. 최근 실패한 workflow 확인\ngh run list --status failure --limit 5\n\n# 2. 실패 로그 분석\ngh run view <run-id> --log-failed\n\n# 3. 패턴 매칭으로 원인 분류\n# - dependency issue\n# - test failure\n# - build error\n# - environment issue\n```\n\n### sentry-triage\n```bash\n# 1. 최근 이슈 조회\ncurl -H \"Authorization: Bearer $SENTRY_AUTH_TOKEN\" \\\n  \"https://sentry.io/api/0/projects/{org}/{project}/issues/\"\n\n# 2. 스택트레이스 분석\n# 3. 코드 위치 찾기\n# 4. 수정안 제시 (자동 수정 안 함)\n```\n\n## Testing Automation Details\n\n### test-fix\n```bash\n# 1. 테스트 실행 및 결과 수집\nnpm run test -- --json --outputFile=test-results.json", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1007", "text": "# 2. 스택트레이스 분석\n# 3. 코드 위치 찾기\n# 4. 수정안 제시 (자동 수정 안 함)\n```\n\n## Testing Automation Details\n\n### test-fix\n```bash\n# 1. 테스트 실행 및 결과 수집\nnpm run test -- --json --outputFile=test-results.json\n\n# 2. 실패 분석\n# - assertion 실패: 기대값 vs 실제값 비교\n# - 타입 에러: 테스트 코드 타입 수정\n# - mock 문제: mock 데이터 업데이트\n# - 환경 문제: 설정 확인\n\n# 3. 수정안 적용 (확인 후)\n```\n\n### test-gen\n```bash\n# 1. 최근 변경 파일 감지\ngit diff HEAD~1 --name-only --diff-filter=A  # 새로 추가된 파일\ngit diff HEAD~1 --name-only --diff-filter=M  # 수정된 파일", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1008", "text": "# 3. 수정안 적용 (확인 후)\n```\n\n### test-gen\n```bash\n# 1. 최근 변경 파일 감지\ngit diff HEAD~1 --name-only --diff-filter=A  # 새로 추가된 파일\ngit diff HEAD~1 --name-only --diff-filter=M  # 수정된 파일\n\n# 2. 테스트 없는 파일 식별\n# - src/utils/foo.ts → src/utils/__tests__/foo.test.ts 확인\n\n# 3. 테스트 자동 생성\n# - 함수 시그니처 분석\n# - 엣지 케이스 추론\n# - vitest/jest 템플릿 적용\n```\n\n### e2e-expand\n```bash\n# 1. 현재 E2E 커버리지 분석\nnpx playwright test --list  # 현재 테스트 목록", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1009", "text": "# 3. 테스트 자동 생성\n# - 함수 시그니처 분석\n# - 엣지 케이스 추론\n# - vitest/jest 템플릿 적용\n```\n\n### e2e-expand\n```bash\n# 1. 현재 E2E 커버리지 분석\nnpx playwright test --list  # 현재 테스트 목록\n\n# 2. 라우트/페이지 분석\n# - src/pages/, src/routes/ 스캔\n# - 커버되지 않은 페이지 식별\n\n# 3. E2E 테스트 생성\n# - Playwright 템플릿 적용\n# - 주요 사용자 플로우 커버\n```\n\n### coverage-fix\n```bash\n# 1. 커버리지 리포트 생성\nnpm run test -- --coverage --json", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1010", "text": "# 2. 라우트/페이지 분석\n# - src/pages/, src/routes/ 스캔\n# - 커버되지 않은 페이지 식별\n\n# 3. E2E 테스트 생성\n# - Playwright 템플릿 적용\n# - 주요 사용자 플로우 커버\n```\n\n### coverage-fix\n```bash\n# 1. 커버리지 리포트 생성\nnpm run test -- --coverage --json\n\n# 2. 커버리지 부족 영역 식별\n# - line coverage < 80%\n# - branch coverage < 70%\n# - 중요 함수 미테스트\n\n# 3. 타겟 테스트 생성\n```\n\n### snapshot-update\n```bash\n# 1. 스냅샷 테스트 실행\nnpm run test -- --testNamePattern=\"snapshot\"", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1011", "text": "# 2. 커버리지 부족 영역 식별\n# - line coverage < 80%\n# - branch coverage < 70%\n# - 중요 함수 미테스트\n\n# 3. 타겟 테스트 생성\n```\n\n### snapshot-update\n```bash\n# 1. 스냅샷 테스트 실행\nnpm run test -- --testNamePattern=\"snapshot\"\n\n# 2. 실패한 스냅샷 분석\n# - 의도된 변경: 스냅샷 업데이트\n# - 버그: 코드 수정 제안\n\n# 3. 업데이트 (확인 후)\nnpm run test -- -u\n```\n\n### flaky-detect\n```bash\n# 1. 테스트 반복 실행\nfor i in {1..10}; do npm run test -- --json >> flaky-results.json; done", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1012", "text": "# 2. 실패한 스냅샷 분석\n# - 의도된 변경: 스냅샷 업데이트\n# - 버그: 코드 수정 제안\n\n# 3. 업데이트 (확인 후)\nnpm run test -- -u\n```\n\n### flaky-detect\n```bash\n# 1. 테스트 반복 실행\nfor i in {1..10}; do npm run test -- --json >> flaky-results.json; done\n\n# 2. 불안정 패턴 감지\n# - 랜덤 실패\n# - 타이밍 의존성\n# - 상태 공유 문제\n\n# 3. 수정안 제시\n# - waitFor 추가\n# - mock 격리\n# - 병렬 실행 비활성화\n```\n\n## Error Handling", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1013", "text": "# 2. 불안정 패턴 감지\n# - 랜덤 실패\n# - 타이밍 의존성\n# - 상태 공유 문제\n\n# 3. 수정안 제시\n# - waitFor 추가\n# - mock 격리\n# - 병렬 실행 비활성화\n```\n\n## Error Handling\n\n### 복구 가능한 에러\n- 네트워크 타임아웃 → 재시도\n- 임시 파일 충돌 → 정리 후 재시도\n\n### 중단해야 하는 에러\n- 인증 실패 → 리포트에 기록, 사용자에게 알림\n- 파일 시스템 권한 에러 → 즉시 중단", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1014", "text": "## Error Handling\n\n### 복구 가능한 에러\n- 네트워크 타임아웃 → 재시도\n- 임시 파일 충돌 → 정리 후 재시도\n\n### 중단해야 하는 에러\n- 인증 실패 → 리포트에 기록, 사용자에게 알림\n- 파일 시스템 권한 에러 → 즉시 중단\n\n### 격리 복구\n```typescript\n// 잘못 격리된 파일 복구\nquarantine_restore({\n  date: '2024-12-13',\n  itemId: 'abc-123'\n})\n```\n\n## Future Considerations", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1015", "text": "### 중단해야 하는 에러\n- 인증 실패 → 리포트에 기록, 사용자에게 알림\n- 파일 시스템 권한 에러 → 즉시 중단\n\n### 격리 복구\n```typescript\n// 잘못 격리된 파일 복구\nquarantine_restore({\n  date: '2024-12-13',\n  itemId: 'abc-123'\n})\n```\n\n## Future Considerations\n\n1. **스케줄러**: cron 기반 정기 실행 (별도 제안)\n2. **Webhook**: GitHub/Sentry 이벤트 트리거 (별도 제안)\n3. **Dashboard**: 실행 히스토리 시각화 (기존 UI 확장)\n4. **Custom Rules**: 프로젝트별 점검 규칙 설정", "metadata": {"file_path": "openspec/changes/add-post-task-agent/design.md", "file_name": "design.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1016", "text": "# Post-Task Agent 자동화\n\n## Summary\n\n작업 완료 후 자동으로 코드 품질 점검, CI/CD 오류 수정, 프로덕션 모니터링을 수행하는 Post-Task Agent 시스템을 추가합니다.\n\n## Motivation\n\n현재 개발 워크플로우에서 작업 완료 후 수동으로 수행해야 하는 반복적인 점검 작업들이 있습니다:\n- 린트/타입 오류 확인 및 수정\n- GitHub Actions 실패 분석\n- Sentry 에러 확인\n- 보안 취약점 점검\n\n이러한 작업들을 AI Agent에게 위임하여 개발자의 부담을 줄이고, 코드 품질을 일관되게 유지할 수 있습니다.\n\n## Proposed Solution\n\n### Post-Task Agent 시스템", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1017", "text": "이러한 작업들을 AI Agent에게 위임하여 개발자의 부담을 줄이고, 코드 품질을 일관되게 유지할 수 있습니다.\n\n## Proposed Solution\n\n### Post-Task Agent 시스템\n\n작업 유형별로 분류된 자동화 Agent를 제공합니다:\n\n```\n┌──────────────────────────────────────────────────────┐\n│  Post-Task Agent                                     │\n├──────────────────────────────────────────────────────┤\n│  Trigger                                             │\n│  ├─ Manual: 사용자가 \"점검 실행\" 요청                  │\n│  ├─ Scheduled: 정기 실행 (cron)                      │\n│  ├─ Hook: git commit, git push 시                   │\n│  └─ Event: PR merge, deploy 완료, CI 실패 시         │\n├──────────────────────────────────────────────────────┤\n│  Category: Code Quality (자동 수정)", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1018", "text": "git push 시                   │\n│  └─ Event: PR merge, deploy 완료, CI 실패 시         │\n├──────────────────────────────────────────────────────┤\n│  Category: Code Quality (자동 수정)                   │\n│  ├─ lint-fix       → ESLint 오류 자동 수정            │\n│  ├─ type-check     → TypeScript 오류 수정            │\n│  ├─ dead-code      → 미사용 코드 격리/정리            │\n│  ├─ todo-cleanup   → 해결된 TODO 제거                │\n│  └─ refactor-suggest → 리팩토링 제안 리포트", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1019", "text": "├─ type-check     → TypeScript 오류 수정            │\n│  ├─ dead-code      → 미사용 코드 격리/정리            │\n│  ├─ todo-cleanup   → 해결된 TODO 제거                │\n│  └─ refactor-suggest → 리팩토링 제안 리포트          │\n├──────────────────────────────────────────────────────┤\n│  Category: Testing (테스트 자동화)                    │\n│  ├─ test-fix       → 실패한 테스트 분석/수정          │\n│  ├─ test-gen       → 새 코드에 테스트 자동 생성", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1020", "text": "리포트          │\n├──────────────────────────────────────────────────────┤\n│  Category: Testing (테스트 자동화)                    │\n│  ├─ test-fix       → 실패한 테스트 분석/수정          │\n│  ├─ test-gen       → 새 코드에 테스트 자동 생성       │\n│  ├─ e2e-expand     → E2E 테스트 커버리지 확장         │\n│  ├─ coverage-fix   → 커버리지 부족 영역 테스트 추가   │\n│  ├─ snapshot-update→ 깨진 스냅샷 분석/업데이트        │\n│  └─", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1021", "text": "새 코드에 테스트 자동 생성       │\n│  ├─ e2e-expand     → E2E 테스트 커버리지 확장         │\n│  ├─ coverage-fix   → 커버리지 부족 영역 테스트 추가   │\n│  ├─ snapshot-update→ 깨진 스냅샷 분석/업데이트        │\n│  └─ flaky-detect   → 불안정한 테스트 감지/수정        │\n├──────────────────────────────────────────────────────┤\n│  Category: CI/CD (분석 + 수정 시도)                   │\n│  ├─ ci-fix         → GitHub Actions 실패 분석/수정    │\n│", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1022", "text": "│\n│  └─ flaky-detect   → 불안정한 테스트 감지/수정        │\n├──────────────────────────────────────────────────────┤\n│  Category: CI/CD (분석 + 수정 시도)                   │\n│  ├─ ci-fix         → GitHub Actions 실패 분석/수정    │\n│  ├─ dep-audit      → npm audit 취약점 패치           │\n│  └─ bundle-check   → 번들 사이즈 이상 감지            │\n├──────────────────────────────────────────────────────┤\n│  Category: Production (분석 + 보고)                   │\n│", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1023", "text": "│\n│  ├─ dep-audit      → npm audit 취약점 패치           │\n│  └─ bundle-check   → 번들 사이즈 이상 감지            │\n├──────────────────────────────────────────────────────┤\n│  Category: Production (분석 + 보고)                   │\n│  ├─ sentry-triage  → 에러 분석 및 수정안 제시         │\n│  ├─ security-audit → Supabase 보안 로그 분석         │\n│  └─ api-validate   → API 스키마 불일치 감지           │\n├──────────────────────────────────────────────────────┤\n│  Category: Maintenance", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1024", "text": "│\n│  ├─ sentry-triage  → 에러 분석 및 수정안 제시         │\n│  ├─ security-audit → Supabase 보안 로그 분석         │\n│  └─ api-validate   → API 스키마 불일치 감지           │\n├──────────────────────────────────────────────────────┤\n│  Category: Maintenance (리마인드)                     │\n│  ├─ todo-remind    → 오래된 TODO 알림                │\n│  └─ coverage-check → 테스트 커버리지 모니터링         │\n└──────────────────────────────────────────────────────┘\n```", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1025", "text": "Category: Maintenance (리마인드)                     │\n│  ├─ todo-remind    → 오래된 TODO 알림                │\n│  └─ coverage-check → 테스트 커버리지 모니터링         │\n└──────────────────────────────────────────────────────┘\n```\n\n### 실행 트리거 시스템\n\n다양한 시점에 자동으로 점검 작업을 실행할 수 있습니다:\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│  Trigger System                                             │\n├─────────────────────────────────────────────────────────────┤\n│                                                             │\n│  1.", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1026", "text": "│\n└──────────────────────────────────────────────────────┘\n```\n\n### 실행 트리거 시스템\n\n다양한 시점에 자동으로 점검 작업을 실행할 수 있습니다:\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│  Trigger System                                             │\n├─────────────────────────────────────────────────────────────┤\n│                                                             │\n│  1. Git Hooks (로컬)                                        │\n│  ┌─────────────┬────────────────────────────────────────┐  │\n│  │ pre-commit  │ lint-fix, type-check                   │  │\n│  │ pre-push    │ test-fix, coverage-check               │  │\n│  │ post-commit │ test-gen (새 코드에 테스트 생성)        │  │\n│  │ post-merge  │ dep-audit, dead-code                   │  │\n│  └─────────────┴────────────────────────────────────────┘  │\n│                                                             │\n│  2.", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1027", "text": "Scheduled (cron)                                        │\n│  ┌─────────────┬────────────────────────────────────────┐  │\n│  │ 매일 오전 9시│ sentry-triage, security-audit          │  │\n│  │ 매주 월요일 │ dead-code, dep-audit, e2e-expand       │  │\n│  │ 매월 1일    │ refactor-suggest, coverage-fix         │  │\n│  └─────────────┴────────────────────────────────────────┘  │\n│                                                             │\n│  3.", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1028", "text": "Event-driven (webhook/polling)                          │\n│  ┌─────────────┬────────────────────────────────────────┐  │\n│  │ CI 실패     │ ci-fix, test-fix                       │  │\n│  │ PR 생성     │ lint-fix, type-check, test-gen         │  │\n│  │ PR 머지     │ dead-code, coverage-check              │  │\n│  │ 배포 완료   │ e2e-expand, api-validate               │  │\n│  │ Sentry 알림 │ sentry-triage                          │  │\n│  └─────────────┴────────────────────────────────────────┘  │\n│                                                             │\n│  4.", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1029", "text": "Manual (MCP/CLI)                                        │\n│  ┌─────────────────────────────────────────────────────┐   │\n│  │ post_task_run({ category: 'all' })                  │   │\n│  │ post_task_run({ tasks: ['lint-fix', 'test-gen'] })  │   │\n│  └─────────────────────────────────────────────────────┘   │\n│                                                             │\n└─────────────────────────────────────────────────────────────┘\n```\n\n### Dead Code 격리 시스템\n\n삭제가 애매한 코드는 바로 삭제하지 않고 `.quarantine/` 폴더로 격리합니다:", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1030", "text": "### Dead Code 격리 시스템\n\n삭제가 애매한 코드는 바로 삭제하지 않고 `.quarantine/` 폴더로 격리합니다:\n\n```\nproject/\n├── src/\n│   └── ... (정상 코드)\n├── .quarantine/\n│   ├── 2024-12-13/\n│   │   ├── manifest.json     # 원본 위치, 격리 사유 기록\n│   │   ├── utils/\n│   │   │   └── oldHelper.ts\n│   │   └── components/\n│   │       └── UnusedModal.tsx\n│   └── 2024-12-10/\n│       └── ...\n```", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1031", "text": "```\nproject/\n├── src/\n│   └── ... (정상 코드)\n├── .quarantine/\n│   ├── 2024-12-13/\n│   │   ├── manifest.json     # 원본 위치, 격리 사유 기록\n│   │   ├── utils/\n│   │   │   └── oldHelper.ts\n│   │   └── components/\n│   │       └── UnusedModal.tsx\n│   └── 2024-12-10/\n│       └── ...\n```\n\n**격리 정책:**\n| 상태 | 기간 | 액션 |\n|------|------|------|\n| 격리됨 | 0~14일 | 문제 발생 시 즉시 복구 가능 |\n| 격리 유지 | 14~30일 | 문제 없으면 삭제 가능 표시 |\n| 최종 삭제 | 30일+ | Agent가 자동 삭제 또는 확인 요청 |\n\n## Scope", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1032", "text": "## Scope\n\n### In Scope\n- Post-Task Agent 타입 정의 및 MCP 도구\n- Code Quality 카테고리 구현 (lint-fix, type-check, dead-code, todo-cleanup, refactor-suggest)\n- Testing 카테고리 구현 (test-fix, test-gen, e2e-expand, coverage-fix, snapshot-update, flaky-detect)\n- CI/CD 카테고리 구현 (ci-fix, dep-audit, bundle-check)\n- Production 카테고리 구현 (sentry-triage, security-audit, api-validate)\n- Maintenance 카테고리 구현 (todo-remind, coverage-check)\n- .quarantine 격리 시스템\n- 트리거 시스템 (Git Hooks, Scheduled, Event-driven)\n- Agent 실행 결과 리포트 생성", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1033", "text": "### Out of Scope\n- 실시간 모니터링 대시보드 - 별도 제안으로 분리\n- Webhook 서버 (GitHub/Sentry 수신) - polling으로 대체\n- UI 대시보드 - 기존 Agent UI 재사용\n\n## Success Criteria", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1034", "text": "## Success Criteria\n\n1. `post_task_run` MCP 도구로 원하는 점검 작업을 실행할 수 있다\n2. lint/type 오류가 자동으로 수정되고 커밋된다\n3. 미사용 코드가 `.quarantine/`로 안전하게 격리된다\n4. GitHub Actions 실패 시 원인 분석 및 수정안이 제시된다\n5. 새 코드에 테스트가 자동 생성된다\n6. 실패한 테스트가 분석되고 수정안이 제시된다\n7. Git hook, cron, 이벤트 기반 트리거가 동작한다\n8. 각 실행 결과가 구조화된 리포트로 저장된다\n\n## Affected Components", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1035", "text": "## Affected Components\n\n- `mcp-server/` - 새로운 post-task 도구 추가\n- `server/` - 격리 시스템 API\n- 새 파일: `.quarantine/` 디렉토리 구조", "metadata": {"file_path": "openspec/changes/add-post-task-agent/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1036", "text": "# Tasks\n\n## Group 1: 기반 구조\n\n- [x] task-1-1: Post-Task 타입 정의 (`mcp-server/post-task-types.ts`)\n  - TaskCategory, TaskType, ModelTier, CLI 타입 정의\n  - PostTaskConfig, PostTaskResult 인터페이스\n  - TriggerType, TriggerConfig 타입 정의\n  - files: `mcp-server/post-task-types.ts`\n\n- [x] task-1-2: CLI 모델 매핑 설정 (`mcp-server/cli-models.ts`)\n  - claude, gemini, qwen, openai CLI별 모델 매핑\n  - 작업별 기본 모델 티어 정의\n  - files: `mcp-server/cli-models.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1037", "text": "- [x] task-1-2: CLI 모델 매핑 설정 (`mcp-server/cli-models.ts`)\n  - claude, gemini, qwen, openai CLI별 모델 매핑\n  - 작업별 기본 모델 티어 정의\n  - files: `mcp-server/cli-models.ts`\n\n- [x] task-1-3: Post-Task Runner 엔진 (`mcp-server/post-task-runner.ts`)\n  - 카테고리/개별 작업 실행 로직\n  - 모델 선택 로직\n  - 결과 수집 및 리포트 생성 호출\n  - files: `mcp-server/post-task-runner.ts`\n\n## Group 2: Code Quality 작업", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1038", "text": "- [x] task-1-3: Post-Task Runner 엔진 (`mcp-server/post-task-runner.ts`)\n  - 카테고리/개별 작업 실행 로직\n  - 모델 선택 로직\n  - 결과 수집 및 리포트 생성 호출\n  - files: `mcp-server/post-task-runner.ts`\n\n## Group 2: Code Quality 작업\n\n- [x] task-2-1: lint-fix 구현\n  - `npm run lint -- --format json` 실행 및 결과 파싱\n  - `eslint --fix` 자동 수정\n  - 수정 불가능한 오류 AI 분석\n  - files: `mcp-server/tasks/lint-fix.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1039", "text": "## Group 2: Code Quality 작업\n\n- [x] task-2-1: lint-fix 구현\n  - `npm run lint -- --format json` 실행 및 결과 파싱\n  - `eslint --fix` 자동 수정\n  - 수정 불가능한 오류 AI 분석\n  - files: `mcp-server/tasks/lint-fix.ts`\n\n- [x] task-2-2: type-check 구현\n  - `tsc --noEmit` 실행 및 오류 파싱\n  - 누락된 import 자동 추가\n  - 타입 불일치 수정안 제시\n  - files: `mcp-server/tasks/type-check.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1040", "text": "- [x] task-2-2: type-check 구현\n  - `tsc --noEmit` 실행 및 오류 파싱\n  - 누락된 import 자동 추가\n  - 타입 불일치 수정안 제시\n  - files: `mcp-server/tasks/type-check.ts`\n\n- [x] task-2-3: dead-code 감지 구현\n  - `ts-prune` 미사용 export 감지\n  - `depcheck` 미사용 의존성 감지\n  - 신뢰도 점수 계산\n  - files: `mcp-server/tasks/dead-code.ts`\n\n- [x] task-2-4: todo-cleanup 구현\n  - 코드 내 TODO/FIXME 스캔\n  - Git 히스토리로 해결 여부 판단\n  - 해결된 TODO 자동 제거\n  - files: `mcp-server/tasks/todo-cleanup.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1041", "text": "- [x] task-2-4: todo-cleanup 구현\n  - 코드 내 TODO/FIXME 스캔\n  - Git 히스토리로 해결 여부 판단\n  - 해결된 TODO 자동 제거\n  - files: `mcp-server/tasks/todo-cleanup.ts`\n\n- [x] task-2-5: refactor-suggest 구현\n  - 코드 복잡도 분석\n  - 중복 코드 감지\n  - 리팩토링 제안 리포트 생성\n  - files: `mcp-server/tasks/refactor-suggest.ts`\n\n## Group 3: Testing 작업\n\n- [x] task-3-1: test-fix 구현\n  - 테스트 실행 및 실패 수집\n  - 실패 원인 분류 (assertion, type, mock, environment)\n  - 수정안 제시 및 적용\n  - files: `mcp-server/tasks/test-fix.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1042", "text": "## Group 3: Testing 작업\n\n- [x] task-3-1: test-fix 구현\n  - 테스트 실행 및 실패 수집\n  - 실패 원인 분류 (assertion, type, mock, environment)\n  - 수정안 제시 및 적용\n  - files: `mcp-server/tasks/test-fix.ts`\n\n- [x] task-3-2: test-gen 구현\n  - 새/변경 파일 감지 (git diff)\n  - 테스트 없는 파일 식별\n  - 함수 시그니처 기반 테스트 자동 생성\n  - vitest/jest 프레임워크 자동 감지\n  - files: `mcp-server/tasks/test-gen.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1043", "text": "- [x] task-3-2: test-gen 구현\n  - 새/변경 파일 감지 (git diff)\n  - 테스트 없는 파일 식별\n  - 함수 시그니처 기반 테스트 자동 생성\n  - vitest/jest 프레임워크 자동 감지\n  - files: `mcp-server/tasks/test-gen.ts`\n\n- [x] task-3-3: e2e-expand 구현\n  - 현재 E2E 커버리지 분석\n  - 커버되지 않은 라우트/페이지 식별\n  - Playwright 테스트 자동 생성\n  - files: `mcp-server/tasks/e2e-expand.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1044", "text": "- [x] task-3-3: e2e-expand 구현\n  - 현재 E2E 커버리지 분석\n  - 커버되지 않은 라우트/페이지 식별\n  - Playwright 테스트 자동 생성\n  - files: `mcp-server/tasks/e2e-expand.ts`\n\n- [x] task-3-4: coverage-fix 구현\n  - 커버리지 리포트 분석\n  - 커버리지 부족 영역 식별\n  - 타겟 테스트 생성\n  - files: `mcp-server/tasks/coverage-fix.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1045", "text": "- [x] task-3-4: coverage-fix 구현\n  - 커버리지 리포트 분석\n  - 커버리지 부족 영역 식별\n  - 타겟 테스트 생성\n  - files: `mcp-server/tasks/coverage-fix.ts`\n\n- [x] task-3-5: snapshot-update 구현\n  - 스냅샷 실패 분석\n  - 이전/현재 차이 비교\n  - 의도된 변경 vs 버그 판단\n  - 확인 후 스냅샷 업데이트\n  - files: `mcp-server/tasks/snapshot-update.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1046", "text": "- [x] task-3-5: snapshot-update 구현\n  - 스냅샷 실패 분석\n  - 이전/현재 차이 비교\n  - 의도된 변경 vs 버그 판단\n  - 확인 후 스냅샷 업데이트\n  - files: `mcp-server/tasks/snapshot-update.ts`\n\n- [x] task-3-6: flaky-detect 구현\n  - 반복 실행으로 불안정 테스트 감지\n  - 실패 패턴 분석 (타이밍, 상태, 비결정성)\n  - 수정안 제시 (waitFor, mock 격리 등)\n  - files: `mcp-server/tasks/flaky-detect.ts`\n\n## Group 4: Quarantine 시스템", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1047", "text": "- [x] task-3-6: flaky-detect 구현\n  - 반복 실행으로 불안정 테스트 감지\n  - 실패 패턴 분석 (타이밍, 상태, 비결정성)\n  - 수정안 제시 (waitFor, mock 격리 등)\n  - files: `mcp-server/tasks/flaky-detect.ts`\n\n## Group 4: Quarantine 시스템\n\n- [x] task-4-1: Quarantine Manager 구현\n  - `.quarantine/{date}/` 디렉토리 관리\n  - manifest.json 생성/업데이트\n  - 파일 이동 로직\n  - files: `mcp-server/quarantine-manager.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1048", "text": "## Group 4: Quarantine 시스템\n\n- [x] task-4-1: Quarantine Manager 구현\n  - `.quarantine/{date}/` 디렉토리 관리\n  - manifest.json 생성/업데이트\n  - 파일 이동 로직\n  - files: `mcp-server/quarantine-manager.ts`\n\n- [x] task-4-2: 격리 복구 기능\n  - 원본 경로로 파일 복구\n  - manifest에 restoredAt 기록\n  - 충돌 시 처리 로직\n  - files: `mcp-server/quarantine-manager.ts`\n\n- [x] task-4-3: 격리 만료 정책\n  - 30일 이상 격리 파일 감지\n  - 삭제 확인 프롬프트\n  - 자동 정리 옵션\n  - files: `mcp-server/quarantine-manager.ts`\n\n## Group 5: CI/CD 작업", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1049", "text": "- [x] task-4-3: 격리 만료 정책\n  - 30일 이상 격리 파일 감지\n  - 삭제 확인 프롬프트\n  - 자동 정리 옵션\n  - files: `mcp-server/quarantine-manager.ts`\n\n## Group 5: CI/CD 작업\n\n- [x] task-5-1: ci-fix 구현\n  - `gh run list --status failure` 실패 워크플로우 조회\n  - `gh run view --log-failed` 로그 분석\n  - 실패 원인 분류 (dependency, test, build, environment)\n  - files: `mcp-server/tasks/ci-fix.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1050", "text": "## Group 5: CI/CD 작업\n\n- [x] task-5-1: ci-fix 구현\n  - `gh run list --status failure` 실패 워크플로우 조회\n  - `gh run view --log-failed` 로그 분석\n  - 실패 원인 분류 (dependency, test, build, environment)\n  - files: `mcp-server/tasks/ci-fix.ts`\n\n- [x] task-5-2: dep-audit 구현\n  - `npm audit --json` 실행\n  - 심각도별 분류\n  - `npm audit fix` 자동 패치 (non-breaking만)\n  - files: `mcp-server/tasks/dep-audit.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1051", "text": "- [x] task-5-2: dep-audit 구현\n  - `npm audit --json` 실행\n  - 심각도별 분류\n  - `npm audit fix` 자동 패치 (non-breaking만)\n  - files: `mcp-server/tasks/dep-audit.ts`\n\n- [x] task-5-3: bundle-check 구현\n  - 빌드 후 번들 크기 분석\n  - 이전 빌드와 비교\n  - 급격한 증가 시 원인 분석\n  - files: `mcp-server/tasks/bundle-check.ts`\n\n## Group 6: Production 작업", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1052", "text": "- [x] task-5-3: bundle-check 구현\n  - 빌드 후 번들 크기 분석\n  - 이전 빌드와 비교\n  - 급격한 증가 시 원인 분석\n  - files: `mcp-server/tasks/bundle-check.ts`\n\n## Group 6: Production 작업\n\n- [x] task-6-1: sentry-triage 구현\n  - Sentry API로 이슈 조회\n  - 스택트레이스 파싱 및 코드 위치 찾기\n  - 수정안 제시 (분석만, 자동 수정 안 함)\n  - files: `mcp-server/tasks/sentry-triage.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1053", "text": "## Group 6: Production 작업\n\n- [x] task-6-1: sentry-triage 구현\n  - Sentry API로 이슈 조회\n  - 스택트레이스 파싱 및 코드 위치 찾기\n  - 수정안 제시 (분석만, 자동 수정 안 함)\n  - files: `mcp-server/tasks/sentry-triage.ts`\n\n- [x] task-6-2: security-audit 구현\n  - Supabase CLI로 로그 조회\n  - 보안 패턴 분석 (인증 실패, 비정상 접근)\n  - 경고 리포트 생성\n  - files: `mcp-server/tasks/security-audit.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1054", "text": "- [x] task-6-2: security-audit 구현\n  - Supabase CLI로 로그 조회\n  - 보안 패턴 분석 (인증 실패, 비정상 접근)\n  - 경고 리포트 생성\n  - files: `mcp-server/tasks/security-audit.ts`\n\n- [x] task-6-3: api-validate 구현\n  - API 응답 스키마 검증\n  - TypeScript 타입과 실제 응답 비교\n  - 불일치 리포트 생성\n  - files: `mcp-server/tasks/api-validate.ts`\n\n## Group 7: Trigger 시스템\n\n- [x] task-7-1: Trigger 타입 및 설정 로더\n  - `.zyflow/triggers.json` 스키마 정의\n  - 설정 파일 로드/파싱\n  - 기본값 설정\n  - files: `mcp-server/trigger-config.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1055", "text": "## Group 7: Trigger 시스템\n\n- [x] task-7-1: Trigger 타입 및 설정 로더\n  - `.zyflow/triggers.json` 스키마 정의\n  - 설정 파일 로드/파싱\n  - 기본값 설정\n  - files: `mcp-server/trigger-config.ts`\n\n- [x] task-7-2: Git Hook 트리거 구현\n  - husky 또는 .git/hooks 스크립트 생성\n  - pre-commit, pre-push, post-commit, post-merge 지원\n  - 훅 설치/제거 명령\n  - files: `mcp-server/triggers/git-hooks.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1056", "text": "- [x] task-7-2: Git Hook 트리거 구현\n  - husky 또는 .git/hooks 스크립트 생성\n  - pre-commit, pre-push, post-commit, post-merge 지원\n  - 훅 설치/제거 명령\n  - files: `mcp-server/triggers/git-hooks.ts`\n\n- [x] task-7-3: Scheduler 트리거 구현\n  - node-cron 기반 스케줄러\n  - cron 표현식 파싱\n  - 스케줄러 시작/중지\n  - files: `mcp-server/triggers/scheduler.ts`\n\n- [x] task-7-4: Event 트리거 구현\n  - GitHub CI 상태 polling\n  - Sentry 이슈 polling\n  - 이벤트 감지 시 작업 실행\n  - files: `mcp-server/triggers/event-listener.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1057", "text": "- [x] task-7-4: Event 트리거 구현\n  - GitHub CI 상태 polling\n  - Sentry 이슈 polling\n  - 이벤트 감지 시 작업 실행\n  - files: `mcp-server/triggers/event-listener.ts`\n\n- [x] task-7-5: Trigger Router 구현\n  - 트리거 → 작업 매핑\n  - 중복 실행 방지 (dedup)\n  - 실행 큐 관리\n  - files: `mcp-server/trigger-router.ts`\n\n## Group 8: 리포트 시스템\n\n- [x] task-8-1: Report Generator 구현\n  - `.zyflow/reports/post-task/` 디렉토리 관리\n  - JSON 리포트 생성\n  - Markdown 리포트 생성\n  - files: `mcp-server/report-generator.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1058", "text": "## Group 8: 리포트 시스템\n\n- [x] task-8-1: Report Generator 구현\n  - `.zyflow/reports/post-task/` 디렉토리 관리\n  - JSON 리포트 생성\n  - Markdown 리포트 생성\n  - files: `mcp-server/report-generator.ts`\n\n- [x] task-8-2: 리포트 조회 API\n  - 리포트 목록 조회\n  - 특정 리포트 상세 조회\n  - files: `mcp-server/report-generator.ts` (MCP 도구로 통합)\n\n## Group 9: MCP 도구\n\n- [x] task-9-1: post_task_run MCP 도구\n  - 통합 실행 도구 구현\n  - 파라미터: category, tasks, cli, model\n  - files: `mcp-server/post-task-tools.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1059", "text": "## Group 9: MCP 도구\n\n- [x] task-9-1: post_task_run MCP 도구\n  - 통합 실행 도구 구현\n  - 파라미터: category, tasks, cli, model\n  - files: `mcp-server/post-task-tools.ts`\n\n- [x] task-9-2: quarantine MCP 도구들\n  - quarantine_list: 격리 파일 목록\n  - quarantine_restore: 격리 복구\n  - quarantine_delete: 격리 파일 삭제\n  - files: `mcp-server/post-task-tools.ts`\n\n- [x] task-9-3: trigger MCP 도구들\n  - post_task_setup_hooks: Git hook 설치\n  - post_task_start_scheduler: 스케줄러 시작\n  - post_task_trigger_status: 트리거 상태 조회\n  - files: `mcp-server/post-task-tools.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1060", "text": "- [x] task-9-3: trigger MCP 도구들\n  - post_task_setup_hooks: Git hook 설치\n  - post_task_start_scheduler: 스케줄러 시작\n  - post_task_trigger_status: 트리거 상태 조회\n  - files: `mcp-server/post-task-tools.ts`\n\n- [x] task-9-4: 기존 MCP 서버에 통합\n  - index.ts에 post-task 도구 등록\n  - files: `mcp-server/index.ts`\n\n## Group 10: 테스트 및 문서\n\n- [ ] task-10-1: Post-Task 작업 단위 테스트\n  - 각 작업별 테스트 케이스\n  - 모킹 전략 정의\n  - files: `mcp-server/__tests__/post-task.test.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1061", "text": "- [x] task-9-4: 기존 MCP 서버에 통합\n  - index.ts에 post-task 도구 등록\n  - files: `mcp-server/index.ts`\n\n## Group 10: 테스트 및 문서\n\n- [ ] task-10-1: Post-Task 작업 단위 테스트\n  - 각 작업별 테스트 케이스\n  - 모킹 전략 정의\n  - files: `mcp-server/__tests__/post-task.test.ts`\n\n- [ ] task-10-2: Testing 작업 단위 테스트\n  - test-fix, test-gen, e2e-expand 등 테스트\n  - files: `mcp-server/__tests__/testing-tasks.test.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1062", "text": "- [ ] task-10-1: Post-Task 작업 단위 테스트\n  - 각 작업별 테스트 케이스\n  - 모킹 전략 정의\n  - files: `mcp-server/__tests__/post-task.test.ts`\n\n- [ ] task-10-2: Testing 작업 단위 테스트\n  - test-fix, test-gen, e2e-expand 등 테스트\n  - files: `mcp-server/__tests__/testing-tasks.test.ts`\n\n- [ ] task-10-3: Quarantine 시스템 테스트\n  - 격리/복구/삭제 테스트\n  - 엣지 케이스 처리\n  - files: `mcp-server/__tests__/quarantine.test.ts`\n\n- [ ] task-10-4: Trigger 시스템 테스트\n  - Git hook, scheduler, event listener 테스트\n  - files: `mcp-server/__tests__/triggers.test.ts`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1063", "text": "- [ ] task-10-3: Quarantine 시스템 테스트\n  - 격리/복구/삭제 테스트\n  - 엣지 케이스 처리\n  - files: `mcp-server/__tests__/quarantine.test.ts`\n\n- [ ] task-10-4: Trigger 시스템 테스트\n  - Git hook, scheduler, event listener 테스트\n  - files: `mcp-server/__tests__/triggers.test.ts`\n\n- [x] task-10-5: CLAUDE.md 업데이트\n  - Post-Task Agent 사용법 추가\n  - MCP 도구 설명 추가\n  - 트리거 설정 가이드 추가\n  - files: `CLAUDE.md`", "metadata": {"file_path": "openspec/changes/add-post-task-agent/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1064", "text": "# post-task-automation Specification\n\n## Purpose\n\n작업 완료 후 자동으로 코드 품질 점검, CI/CD 오류 수정, 프로덕션 모니터링을 수행하는 Post-Task Agent 시스템을 제공합니다.\n\n## ADDED Requirements\n\n### Requirement: Post-Task Runner\n\n시스템은 카테고리별 점검 작업을 실행할 수 있어야 합니다(SHALL).\n\n#### Scenario: 전체 점검 실행\n- **GIVEN** 프로젝트에서 Post-Task Agent가 설정되어 있을 때\n- **WHEN** `post_task_run({ category: 'all' })`을 실행하면\n- **THEN** 모든 카테고리의 점검 작업이 순차적으로 실행됩니다\n- **AND** 각 작업의 결과가 리포트로 저장됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1065", "text": "#### Scenario: 전체 점검 실행\n- **GIVEN** 프로젝트에서 Post-Task Agent가 설정되어 있을 때\n- **WHEN** `post_task_run({ category: 'all' })`을 실행하면\n- **THEN** 모든 카테고리의 점검 작업이 순차적으로 실행됩니다\n- **AND** 각 작업의 결과가 리포트로 저장됩니다\n\n#### Scenario: 특정 카테고리 실행\n- **GIVEN** Post-Task Agent가 설정되어 있을 때\n- **WHEN** `post_task_run({ category: 'code-quality' })`를 실행하면\n- **THEN** code-quality 카테고리의 작업만 실행됩니다 (lint-fix, type-check, dead-code, todo-cleanup)", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1066", "text": "#### Scenario: 특정 카테고리 실행\n- **GIVEN** Post-Task Agent가 설정되어 있을 때\n- **WHEN** `post_task_run({ category: 'code-quality' })`를 실행하면\n- **THEN** code-quality 카테고리의 작업만 실행됩니다 (lint-fix, type-check, dead-code, todo-cleanup)\n\n#### Scenario: 개별 작업 실행\n- **GIVEN** Post-Task Agent가 설정되어 있을 때\n- **WHEN** `post_task_run({ tasks: ['lint-fix', 'type-check'] })`를 실행하면\n- **THEN** 지정된 작업만 실행됩니다\n\n---\n\n### Requirement: Model Selection\n\n시스템은 작업별로 적절한 AI 모델을 선택할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1067", "text": "#### Scenario: 개별 작업 실행\n- **GIVEN** Post-Task Agent가 설정되어 있을 때\n- **WHEN** `post_task_run({ tasks: ['lint-fix', 'type-check'] })`를 실행하면\n- **THEN** 지정된 작업만 실행됩니다\n\n---\n\n### Requirement: Model Selection\n\n시스템은 작업별로 적절한 AI 모델을 선택할 수 있어야 합니다(SHALL).\n\n#### Scenario: 기본 모델 사용\n- **GIVEN** 모델이 지정되지 않았을 때\n- **WHEN** 작업을 실행하면\n- **THEN** 작업 유형에 맞는 기본 모델이 사용됩니다 (lint-fix → fast, sentry-triage → powerful)", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1068", "text": "---\n\n### Requirement: Model Selection\n\n시스템은 작업별로 적절한 AI 모델을 선택할 수 있어야 합니다(SHALL).\n\n#### Scenario: 기본 모델 사용\n- **GIVEN** 모델이 지정되지 않았을 때\n- **WHEN** 작업을 실행하면\n- **THEN** 작업 유형에 맞는 기본 모델이 사용됩니다 (lint-fix → fast, sentry-triage → powerful)\n\n#### Scenario: 모델 티어 지정\n- **GIVEN** 사용자가 모델 티어를 지정했을 때\n- **WHEN** `post_task_run({ tasks: ['lint-fix'], model: 'powerful' })`를 실행하면\n- **THEN** 지정된 티어의 모델이 사용됩니다 (예: claude-opus)", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1069", "text": "#### Scenario: 모델 티어 지정\n- **GIVEN** 사용자가 모델 티어를 지정했을 때\n- **WHEN** `post_task_run({ tasks: ['lint-fix'], model: 'powerful' })`를 실행하면\n- **THEN** 지정된 티어의 모델이 사용됩니다 (예: claude-opus)\n\n#### Scenario: CLI와 모델 함께 지정\n- **GIVEN** 사용자가 CLI와 모델을 함께 지정했을 때\n- **WHEN** `post_task_run({ cli: 'qwen', model: 'fast' })`를 실행하면\n- **THEN** qwen CLI의 fast 모델(qwen-turbo)이 사용됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1070", "text": "#### Scenario: CLI와 모델 함께 지정\n- **GIVEN** 사용자가 CLI와 모델을 함께 지정했을 때\n- **WHEN** `post_task_run({ cli: 'qwen', model: 'fast' })`를 실행하면\n- **THEN** qwen CLI의 fast 모델(qwen-turbo)이 사용됩니다\n\n#### Scenario: 지원 CLI 목록\n- **GIVEN** 시스템이 초기화될 때\n- **WHEN** 지원되는 CLI를 확인하면\n- **THEN** claude, gemini, qwen, openai가 지원됩니다\n- **AND** 각 CLI별로 fast, balanced, powerful 티어가 정의되어 있습니다\n\n---\n\n### Requirement: Lint Fix Automation\n\n시스템은 ESLint 오류를 자동으로 수정할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1071", "text": "#### Scenario: 지원 CLI 목록\n- **GIVEN** 시스템이 초기화될 때\n- **WHEN** 지원되는 CLI를 확인하면\n- **THEN** claude, gemini, qwen, openai가 지원됩니다\n- **AND** 각 CLI별로 fast, balanced, powerful 티어가 정의되어 있습니다\n\n---\n\n### Requirement: Lint Fix Automation\n\n시스템은 ESLint 오류를 자동으로 수정할 수 있어야 합니다(SHALL).\n\n#### Scenario: 자동 수정 가능한 오류\n- **GIVEN** ESLint 자동 수정 가능한 오류가 있을 때\n- **WHEN** lint-fix 작업을 실행하면\n- **THEN** `eslint --fix`로 자동 수정됩니다\n- **AND** 수정된 파일 목록이 리포트에 포함됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1072", "text": "---\n\n### Requirement: Lint Fix Automation\n\n시스템은 ESLint 오류를 자동으로 수정할 수 있어야 합니다(SHALL).\n\n#### Scenario: 자동 수정 가능한 오류\n- **GIVEN** ESLint 자동 수정 가능한 오류가 있을 때\n- **WHEN** lint-fix 작업을 실행하면\n- **THEN** `eslint --fix`로 자동 수정됩니다\n- **AND** 수정된 파일 목록이 리포트에 포함됩니다\n\n#### Scenario: 자동 수정 불가능한 오류\n- **GIVEN** 자동 수정이 불가능한 ESLint 오류가 있을 때\n- **WHEN** lint-fix 작업을 실행하면\n- **THEN** AI가 수정안을 제시합니다\n- **AND** 사용자 확인 후 적용됩니다\n\n---\n\n### Requirement: Type Check Automation", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1073", "text": "#### Scenario: 자동 수정 불가능한 오류\n- **GIVEN** 자동 수정이 불가능한 ESLint 오류가 있을 때\n- **WHEN** lint-fix 작업을 실행하면\n- **THEN** AI가 수정안을 제시합니다\n- **AND** 사용자 확인 후 적용됩니다\n\n---\n\n### Requirement: Type Check Automation\n\n시스템은 TypeScript 타입 오류를 분석하고 수정할 수 있어야 합니다(SHALL).\n\n#### Scenario: 타입 오류 감지\n- **GIVEN** TypeScript 타입 오류가 있을 때\n- **WHEN** type-check 작업을 실행하면\n- **THEN** `tsc --noEmit` 결과가 분석됩니다\n- **AND** 오류별 수정안이 제시됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1074", "text": "---\n\n### Requirement: Type Check Automation\n\n시스템은 TypeScript 타입 오류를 분석하고 수정할 수 있어야 합니다(SHALL).\n\n#### Scenario: 타입 오류 감지\n- **GIVEN** TypeScript 타입 오류가 있을 때\n- **WHEN** type-check 작업을 실행하면\n- **THEN** `tsc --noEmit` 결과가 분석됩니다\n- **AND** 오류별 수정안이 제시됩니다\n\n#### Scenario: 누락된 import 자동 추가\n- **GIVEN** import가 누락되어 타입 오류가 발생했을 때\n- **WHEN** type-check 작업을 실행하면\n- **THEN** 필요한 import가 자동으로 추가됩니다\n\n---\n\n### Requirement: Dead Code Quarantine", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1075", "text": "#### Scenario: 누락된 import 자동 추가\n- **GIVEN** import가 누락되어 타입 오류가 발생했을 때\n- **WHEN** type-check 작업을 실행하면\n- **THEN** 필요한 import가 자동으로 추가됩니다\n\n---\n\n### Requirement: Dead Code Quarantine\n\n시스템은 미사용 코드를 안전하게 격리할 수 있어야 합니다(SHALL).\n\n#### Scenario: 미사용 export 감지\n- **GIVEN** 어디서도 import되지 않는 export가 있을 때\n- **WHEN** dead-code 작업을 실행하면\n- **THEN** ts-prune으로 미사용 export가 감지됩니다\n- **AND** 신뢰도가 high인 경우 `.quarantine/`로 이동됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1076", "text": "시스템은 미사용 코드를 안전하게 격리할 수 있어야 합니다(SHALL).\n\n#### Scenario: 미사용 export 감지\n- **GIVEN** 어디서도 import되지 않는 export가 있을 때\n- **WHEN** dead-code 작업을 실행하면\n- **THEN** ts-prune으로 미사용 export가 감지됩니다\n- **AND** 신뢰도가 high인 경우 `.quarantine/`로 이동됩니다\n\n#### Scenario: 미사용 파일 격리\n- **GIVEN** 어디서도 참조되지 않는 파일이 있을 때\n- **WHEN** dead-code 작업을 실행하면\n- **THEN** 해당 파일이 `.quarantine/{date}/` 폴더로 이동됩니다\n- **AND** manifest.json에 원본 경로와 격리 사유가 기록됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1077", "text": "#### Scenario: 미사용 파일 격리\n- **GIVEN** 어디서도 참조되지 않는 파일이 있을 때\n- **WHEN** dead-code 작업을 실행하면\n- **THEN** 해당 파일이 `.quarantine/{date}/` 폴더로 이동됩니다\n- **AND** manifest.json에 원본 경로와 격리 사유가 기록됩니다\n\n#### Scenario: 낮은 신뢰도 코드 처리\n- **GIVEN** 동적 import 가능성이 있는 미사용 코드가 감지되었을 때\n- **WHEN** dead-code 작업을 실행하면\n- **THEN** 코드를 이동하지 않고 리포트에만 포함됩니다\n- **AND** confidence: 'low'로 표시됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1078", "text": "#### Scenario: 낮은 신뢰도 코드 처리\n- **GIVEN** 동적 import 가능성이 있는 미사용 코드가 감지되었을 때\n- **WHEN** dead-code 작업을 실행하면\n- **THEN** 코드를 이동하지 않고 리포트에만 포함됩니다\n- **AND** confidence: 'low'로 표시됩니다\n\n#### Scenario: 격리된 코드 복구\n- **GIVEN** `.quarantine/`에 격리된 파일이 있을 때\n- **WHEN** `quarantine_restore({ date, itemId })`를 실행하면\n- **THEN** 파일이 원본 경로로 복구됩니다\n- **AND** manifest.json에 restoredAt이 기록됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1079", "text": "#### Scenario: 격리된 코드 복구\n- **GIVEN** `.quarantine/`에 격리된 파일이 있을 때\n- **WHEN** `quarantine_restore({ date, itemId })`를 실행하면\n- **THEN** 파일이 원본 경로로 복구됩니다\n- **AND** manifest.json에 restoredAt이 기록됩니다\n\n#### Scenario: 격리 기간 만료 삭제\n- **GIVEN** 30일 이상 격리된 high confidence 파일이 있을 때\n- **WHEN** dead-code 작업을 실행하면\n- **THEN** 해당 파일의 완전 삭제를 제안합니다\n- **AND** 사용자 확인 후 삭제됩니다\n\n---\n\n### Requirement: Test Fix Automation\n\n시스템은 실패한 테스트를 분석하고 수정할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1080", "text": "#### Scenario: 격리 기간 만료 삭제\n- **GIVEN** 30일 이상 격리된 high confidence 파일이 있을 때\n- **WHEN** dead-code 작업을 실행하면\n- **THEN** 해당 파일의 완전 삭제를 제안합니다\n- **AND** 사용자 확인 후 삭제됩니다\n\n---\n\n### Requirement: Test Fix Automation\n\n시스템은 실패한 테스트를 분석하고 수정할 수 있어야 합니다(SHALL).\n\n#### Scenario: 테스트 실패 분석\n- **GIVEN** 테스트가 실패했을 때\n- **WHEN** test-fix 작업을 실행하면\n- **THEN** 실패 원인이 분류됩니다 (assertion, type, mock, environment)\n- **AND** 각 실패에 대한 수정안이 제시됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1081", "text": "시스템은 실패한 테스트를 분석하고 수정할 수 있어야 합니다(SHALL).\n\n#### Scenario: 테스트 실패 분석\n- **GIVEN** 테스트가 실패했을 때\n- **WHEN** test-fix 작업을 실행하면\n- **THEN** 실패 원인이 분류됩니다 (assertion, type, mock, environment)\n- **AND** 각 실패에 대한 수정안이 제시됩니다\n\n#### Scenario: Assertion 실패 수정\n- **GIVEN** assertion 실패로 테스트가 실패했을 때\n- **WHEN** test-fix 작업을 실행하면\n- **THEN** 기대값과 실제값을 비교 분석합니다\n- **AND** 테스트 코드 또는 구현 코드 수정안을 제시합니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1082", "text": "#### Scenario: Assertion 실패 수정\n- **GIVEN** assertion 실패로 테스트가 실패했을 때\n- **WHEN** test-fix 작업을 실행하면\n- **THEN** 기대값과 실제값을 비교 분석합니다\n- **AND** 테스트 코드 또는 구현 코드 수정안을 제시합니다\n\n#### Scenario: Mock 문제 수정\n- **GIVEN** mock 데이터 불일치로 테스트가 실패했을 때\n- **WHEN** test-fix 작업을 실행하면\n- **THEN** mock 데이터 업데이트가 제안됩니다\n\n---\n\n### Requirement: Test Generation\n\n시스템은 새 코드에 테스트를 자동 생성할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1083", "text": "#### Scenario: Mock 문제 수정\n- **GIVEN** mock 데이터 불일치로 테스트가 실패했을 때\n- **WHEN** test-fix 작업을 실행하면\n- **THEN** mock 데이터 업데이트가 제안됩니다\n\n---\n\n### Requirement: Test Generation\n\n시스템은 새 코드에 테스트를 자동 생성할 수 있어야 합니다(SHALL).\n\n#### Scenario: 새 파일 테스트 생성\n- **GIVEN** 테스트가 없는 새 파일이 커밋되었을 때\n- **WHEN** test-gen 작업을 실행하면\n- **THEN** 해당 파일의 테스트 파일이 생성됩니다\n- **AND** 함수 시그니처 기반 테스트 케이스가 포함됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1084", "text": "시스템은 새 코드에 테스트를 자동 생성할 수 있어야 합니다(SHALL).\n\n#### Scenario: 새 파일 테스트 생성\n- **GIVEN** 테스트가 없는 새 파일이 커밋되었을 때\n- **WHEN** test-gen 작업을 실행하면\n- **THEN** 해당 파일의 테스트 파일이 생성됩니다\n- **AND** 함수 시그니처 기반 테스트 케이스가 포함됩니다\n\n#### Scenario: 변경된 파일 테스트 보강\n- **GIVEN** 기존 파일에 새 함수가 추가되었을 때\n- **WHEN** test-gen 작업을 실행하면\n- **THEN** 새 함수에 대한 테스트가 기존 테스트 파일에 추가됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1085", "text": "#### Scenario: 변경된 파일 테스트 보강\n- **GIVEN** 기존 파일에 새 함수가 추가되었을 때\n- **WHEN** test-gen 작업을 실행하면\n- **THEN** 새 함수에 대한 테스트가 기존 테스트 파일에 추가됩니다\n\n#### Scenario: 테스트 프레임워크 자동 감지\n- **GIVEN** 프로젝트에 vitest 또는 jest가 설정되어 있을 때\n- **WHEN** test-gen 작업을 실행하면\n- **THEN** 해당 프레임워크에 맞는 테스트 코드가 생성됩니다\n\n---\n\n### Requirement: E2E Test Expansion\n\n시스템은 E2E 테스트 커버리지를 확장할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1086", "text": "---\n\n### Requirement: E2E Test Expansion\n\n시스템은 E2E 테스트 커버리지를 확장할 수 있어야 합니다(SHALL).\n\n#### Scenario: 미커버 페이지 감지\n- **GIVEN** E2E 테스트가 없는 페이지가 있을 때\n- **WHEN** e2e-expand 작업을 실행하면\n- **THEN** 커버되지 않은 라우트/페이지 목록이 출력됩니다\n\n#### Scenario: E2E 테스트 생성\n- **GIVEN** 커버되지 않은 페이지가 식별되었을 때\n- **WHEN** e2e-expand 작업을 실행하면\n- **THEN** Playwright 테스트 코드가 생성됩니다\n- **AND** 주요 사용자 플로우가 커버됩니다\n\n---\n\n### Requirement: Coverage Fix", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1087", "text": "#### Scenario: E2E 테스트 생성\n- **GIVEN** 커버되지 않은 페이지가 식별되었을 때\n- **WHEN** e2e-expand 작업을 실행하면\n- **THEN** Playwright 테스트 코드가 생성됩니다\n- **AND** 주요 사용자 플로우가 커버됩니다\n\n---\n\n### Requirement: Coverage Fix\n\n시스템은 테스트 커버리지 부족 영역에 테스트를 추가할 수 있어야 합니다(SHALL).\n\n#### Scenario: 커버리지 부족 감지\n- **GIVEN** 테스트 커버리지가 임계값 미만일 때\n- **WHEN** coverage-fix 작업을 실행하면\n- **THEN** 커버리지가 부족한 파일/함수 목록이 출력됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1088", "text": "시스템은 테스트 커버리지 부족 영역에 테스트를 추가할 수 있어야 합니다(SHALL).\n\n#### Scenario: 커버리지 부족 감지\n- **GIVEN** 테스트 커버리지가 임계값 미만일 때\n- **WHEN** coverage-fix 작업을 실행하면\n- **THEN** 커버리지가 부족한 파일/함수 목록이 출력됩니다\n\n#### Scenario: 타겟 테스트 생성\n- **GIVEN** 커버리지 부족 영역이 식별되었을 때\n- **WHEN** coverage-fix 작업을 실행하면\n- **THEN** 해당 영역을 커버하는 테스트가 생성됩니다\n\n---\n\n### Requirement: Snapshot Update", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1089", "text": "#### Scenario: 타겟 테스트 생성\n- **GIVEN** 커버리지 부족 영역이 식별되었을 때\n- **WHEN** coverage-fix 작업을 실행하면\n- **THEN** 해당 영역을 커버하는 테스트가 생성됩니다\n\n---\n\n### Requirement: Snapshot Update\n\n시스템은 깨진 스냅샷을 분석하고 업데이트할 수 있어야 합니다(SHALL).\n\n#### Scenario: 스냅샷 실패 분석\n- **GIVEN** 스냅샷 테스트가 실패했을 때\n- **WHEN** snapshot-update 작업을 실행하면\n- **THEN** 이전/현재 스냅샷의 차이가 분석됩니다\n- **AND** 의도된 변경인지 버그인지 판단됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1090", "text": "#### Scenario: 스냅샷 실패 분석\n- **GIVEN** 스냅샷 테스트가 실패했을 때\n- **WHEN** snapshot-update 작업을 실행하면\n- **THEN** 이전/현재 스냅샷의 차이가 분석됩니다\n- **AND** 의도된 변경인지 버그인지 판단됩니다\n\n#### Scenario: 스냅샷 업데이트\n- **GIVEN** 의도된 UI 변경으로 스냅샷이 실패했을 때\n- **WHEN** snapshot-update 작업을 실행하고 확인하면\n- **THEN** 스냅샷이 업데이트됩니다\n\n---\n\n### Requirement: Flaky Test Detection\n\n시스템은 불안정한 테스트를 감지하고 수정할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1091", "text": "#### Scenario: 스냅샷 업데이트\n- **GIVEN** 의도된 UI 변경으로 스냅샷이 실패했을 때\n- **WHEN** snapshot-update 작업을 실행하고 확인하면\n- **THEN** 스냅샷이 업데이트됩니다\n\n---\n\n### Requirement: Flaky Test Detection\n\n시스템은 불안정한 테스트를 감지하고 수정할 수 있어야 합니다(SHALL).\n\n#### Scenario: 불안정 테스트 감지\n- **GIVEN** 테스트가 간헐적으로 실패할 때\n- **WHEN** flaky-detect 작업을 실행하면\n- **THEN** 반복 실행으로 불안정 테스트가 식별됩니다\n- **AND** 실패 패턴이 분석됩니다 (타이밍, 상태, 비결정성)", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1092", "text": "#### Scenario: 불안정 테스트 감지\n- **GIVEN** 테스트가 간헐적으로 실패할 때\n- **WHEN** flaky-detect 작업을 실행하면\n- **THEN** 반복 실행으로 불안정 테스트가 식별됩니다\n- **AND** 실패 패턴이 분석됩니다 (타이밍, 상태, 비결정성)\n\n#### Scenario: 불안정 테스트 수정\n- **GIVEN** 불안정 테스트가 식별되었을 때\n- **WHEN** flaky-detect 작업을 실행하면\n- **THEN** 수정안이 제시됩니다 (waitFor 추가, mock 격리 등)\n\n---\n\n### Requirement: CI/CD Failure Analysis\n\n시스템은 GitHub Actions 실패를 분석하고 수정안을 제시할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1093", "text": "#### Scenario: 불안정 테스트 수정\n- **GIVEN** 불안정 테스트가 식별되었을 때\n- **WHEN** flaky-detect 작업을 실행하면\n- **THEN** 수정안이 제시됩니다 (waitFor 추가, mock 격리 등)\n\n---\n\n### Requirement: CI/CD Failure Analysis\n\n시스템은 GitHub Actions 실패를 분석하고 수정안을 제시할 수 있어야 합니다(SHALL).\n\n#### Scenario: 실패 로그 분석\n- **GIVEN** GitHub Actions workflow가 실패했을 때\n- **WHEN** ci-fix 작업을 실행하면\n- **THEN** `gh run view --log-failed`로 실패 로그를 가져옵니다\n- **AND** 실패 원인을 분류합니다 (dependency, test, build, environment)", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1094", "text": "시스템은 GitHub Actions 실패를 분석하고 수정안을 제시할 수 있어야 합니다(SHALL).\n\n#### Scenario: 실패 로그 분석\n- **GIVEN** GitHub Actions workflow가 실패했을 때\n- **WHEN** ci-fix 작업을 실행하면\n- **THEN** `gh run view --log-failed`로 실패 로그를 가져옵니다\n- **AND** 실패 원인을 분류합니다 (dependency, test, build, environment)\n\n#### Scenario: 테스트 실패 수정\n- **GIVEN** CI에서 테스트가 실패했을 때\n- **WHEN** ci-fix 작업을 실행하면\n- **THEN** 실패한 테스트를 로컬에서 재현합니다\n- **AND** 수정안을 제시합니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1095", "text": "#### Scenario: 테스트 실패 수정\n- **GIVEN** CI에서 테스트가 실패했을 때\n- **WHEN** ci-fix 작업을 실행하면\n- **THEN** 실패한 테스트를 로컬에서 재현합니다\n- **AND** 수정안을 제시합니다\n\n#### Scenario: 의존성 문제 해결\n- **GIVEN** CI에서 의존성 설치가 실패했을 때\n- **WHEN** ci-fix 작업을 실행하면\n- **THEN** package-lock.json 동기화를 시도합니다\n- **AND** 필요시 의존성 버전을 조정합니다\n\n---\n\n### Requirement: Dependency Audit\n\n시스템은 npm 패키지 보안 취약점을 감지하고 패치할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1096", "text": "---\n\n### Requirement: Dependency Audit\n\n시스템은 npm 패키지 보안 취약점을 감지하고 패치할 수 있어야 합니다(SHALL).\n\n#### Scenario: 취약점 감지\n- **GIVEN** 프로젝트에 취약한 의존성이 있을 때\n- **WHEN** dep-audit 작업을 실행하면\n- **THEN** `npm audit`으로 취약점이 감지됩니다\n- **AND** 심각도별로 분류됩니다 (critical, high, moderate, low)\n\n#### Scenario: 자동 패치\n- **GIVEN** breaking change 없이 패치 가능한 취약점이 있을 때\n- **WHEN** dep-audit 작업을 실행하면\n- **THEN** `npm audit fix`로 자동 패치됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1097", "text": "#### Scenario: 자동 패치\n- **GIVEN** breaking change 없이 패치 가능한 취약점이 있을 때\n- **WHEN** dep-audit 작업을 실행하면\n- **THEN** `npm audit fix`로 자동 패치됩니다\n\n#### Scenario: 수동 개입 필요\n- **GIVEN** major 버전 업그레이드가 필요한 취약점이 있을 때\n- **WHEN** dep-audit 작업을 실행하면\n- **THEN** 리포트에 업그레이드 가이드가 포함됩니다\n- **AND** 자동 수정은 하지 않습니다\n\n---\n\n### Requirement: Sentry Error Triage\n\n시스템은 Sentry 에러를 분석하고 수정안을 제시할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1098", "text": "---\n\n### Requirement: Sentry Error Triage\n\n시스템은 Sentry 에러를 분석하고 수정안을 제시할 수 있어야 합니다(SHALL).\n\n#### Scenario: 에러 조회\n- **GIVEN** Sentry 인증 토큰이 설정되어 있을 때\n- **WHEN** sentry-triage 작업을 실행하면\n- **THEN** 최근 미해결 이슈 목록을 가져옵니다\n\n#### Scenario: 스택트레이스 분석\n- **GIVEN** Sentry 이슈가 있을 때\n- **WHEN** sentry-triage 작업을 실행하면\n- **THEN** 스택트레이스에서 관련 코드 위치를 찾습니다\n- **AND** 수정안을 제시합니다 (자동 수정 안 함)", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1099", "text": "#### Scenario: 스택트레이스 분석\n- **GIVEN** Sentry 이슈가 있을 때\n- **WHEN** sentry-triage 작업을 실행하면\n- **THEN** 스택트레이스에서 관련 코드 위치를 찾습니다\n- **AND** 수정안을 제시합니다 (자동 수정 안 함)\n\n#### Scenario: 인증 실패\n- **GIVEN** Sentry 인증 토큰이 없거나 유효하지 않을 때\n- **WHEN** sentry-triage 작업을 실행하면\n- **THEN** Integration Hub에서 토큰을 확인하라는 메시지가 표시됩니다\n\n---\n\n### Requirement: Security Log Audit\n\n시스템은 Supabase 보안 로그를 분석할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1100", "text": "#### Scenario: 인증 실패\n- **GIVEN** Sentry 인증 토큰이 없거나 유효하지 않을 때\n- **WHEN** sentry-triage 작업을 실행하면\n- **THEN** Integration Hub에서 토큰을 확인하라는 메시지가 표시됩니다\n\n---\n\n### Requirement: Security Log Audit\n\n시스템은 Supabase 보안 로그를 분석할 수 있어야 합니다(SHALL).\n\n#### Scenario: 보안 로그 조회\n- **GIVEN** Supabase 프로젝트가 연결되어 있을 때\n- **WHEN** security-audit 작업을 실행하면\n- **THEN** 인증 실패, 비정상 접근 시도 등의 로그를 분석합니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1101", "text": "---\n\n### Requirement: Security Log Audit\n\n시스템은 Supabase 보안 로그를 분석할 수 있어야 합니다(SHALL).\n\n#### Scenario: 보안 로그 조회\n- **GIVEN** Supabase 프로젝트가 연결되어 있을 때\n- **WHEN** security-audit 작업을 실행하면\n- **THEN** 인증 실패, 비정상 접근 시도 등의 로그를 분석합니다\n\n#### Scenario: 보안 이슈 감지\n- **GIVEN** 의심스러운 패턴이 감지되었을 때\n- **WHEN** security-audit 작업을 실행하면\n- **THEN** 리포트에 경고가 포함됩니다\n- **AND** 권장 조치 사항이 제시됩니다 (자동 수정 안 함)\n\n---\n\n### Requirement: Report Generation", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1102", "text": "#### Scenario: 보안 이슈 감지\n- **GIVEN** 의심스러운 패턴이 감지되었을 때\n- **WHEN** security-audit 작업을 실행하면\n- **THEN** 리포트에 경고가 포함됩니다\n- **AND** 권장 조치 사항이 제시됩니다 (자동 수정 안 함)\n\n---\n\n### Requirement: Report Generation\n\n시스템은 실행 결과를 구조화된 리포트로 저장해야 합니다(SHALL).\n\n#### Scenario: 리포트 저장\n- **GIVEN** 점검 작업이 완료되었을 때\n- **WHEN** 결과를 저장하면\n- **THEN** `.zyflow/reports/post-task/{timestamp}_{task}.json`에 저장됩니다\n- **AND** 마크다운 버전도 함께 저장됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1103", "text": "---\n\n### Requirement: Report Generation\n\n시스템은 실행 결과를 구조화된 리포트로 저장해야 합니다(SHALL).\n\n#### Scenario: 리포트 저장\n- **GIVEN** 점검 작업이 완료되었을 때\n- **WHEN** 결과를 저장하면\n- **THEN** `.zyflow/reports/post-task/{timestamp}_{task}.json`에 저장됩니다\n- **AND** 마크다운 버전도 함께 저장됩니다\n\n#### Scenario: 리포트 내용\n- **GIVEN** 리포트가 생성되었을 때\n- **WHEN** 리포트를 조회하면\n- **THEN** 실행 시간, 발견된 문제, 수정된 항목, 미해결 항목이 포함됩니다\n\n---\n\n### Requirement: Post-Task MCP Tools", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1104", "text": "#### Scenario: 리포트 내용\n- **GIVEN** 리포트가 생성되었을 때\n- **WHEN** 리포트를 조회하면\n- **THEN** 실행 시간, 발견된 문제, 수정된 항목, 미해결 항목이 포함됩니다\n\n---\n\n### Requirement: Post-Task MCP Tools\n\nClaude Code에서 Post-Task Agent를 제어할 수 있는 MCP 도구를 제공해야 합니다(SHALL).\n\n#### Scenario: 통합 실행 도구\n- **GIVEN** MCP 서버에 연결되어 있을 때\n- **WHEN** `post_task_run` 도구를 호출하면\n- **THEN** 지정된 카테고리/작업이 실행됩니다\n- **AND** 실행 결과 요약이 반환됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1105", "text": "---\n\n### Requirement: Post-Task MCP Tools\n\nClaude Code에서 Post-Task Agent를 제어할 수 있는 MCP 도구를 제공해야 합니다(SHALL).\n\n#### Scenario: 통합 실행 도구\n- **GIVEN** MCP 서버에 연결되어 있을 때\n- **WHEN** `post_task_run` 도구를 호출하면\n- **THEN** 지정된 카테고리/작업이 실행됩니다\n- **AND** 실행 결과 요약이 반환됩니다\n\n#### Scenario: 격리 관리 도구\n- **GIVEN** MCP 서버에 연결되어 있을 때\n- **WHEN** `quarantine_list` 도구를 호출하면\n- **THEN** 현재 격리된 파일 목록이 반환됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1106", "text": "#### Scenario: 격리 관리 도구\n- **GIVEN** MCP 서버에 연결되어 있을 때\n- **WHEN** `quarantine_list` 도구를 호출하면\n- **THEN** 현재 격리된 파일 목록이 반환됩니다\n\n#### Scenario: 격리 복구 도구\n- **GIVEN** 격리된 파일이 있을 때\n- **WHEN** `quarantine_restore` 도구를 호출하면\n- **THEN** 지정된 파일이 원본 위치로 복구됩니다\n\n---\n\n### Requirement: Trigger System\n\n시스템은 다양한 트리거 방식을 지원해야 합니다(SHALL).\n\n#### Scenario: Git Hook 트리거\n- **GIVEN** Git hook이 설정되어 있을 때\n- **WHEN** pre-commit 훅이 실행되면\n- **THEN** 설정된 작업(lint-fix, type-check)이 자동 실행됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1107", "text": "---\n\n### Requirement: Trigger System\n\n시스템은 다양한 트리거 방식을 지원해야 합니다(SHALL).\n\n#### Scenario: Git Hook 트리거\n- **GIVEN** Git hook이 설정되어 있을 때\n- **WHEN** pre-commit 훅이 실행되면\n- **THEN** 설정된 작업(lint-fix, type-check)이 자동 실행됩니다\n\n#### Scenario: 스케줄 트리거\n- **GIVEN** cron 스케줄이 설정되어 있을 때\n- **WHEN** 지정된 시간이 되면\n- **THEN** 설정된 작업이 자동 실행됩니다\n\n#### Scenario: 이벤트 트리거\n- **GIVEN** 이벤트 트리거가 설정되어 있을 때\n- **WHEN** CI 실패가 감지되면\n- **THEN** ci-fix, test-fix 작업이 자동 실행됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1108", "text": "#### Scenario: 이벤트 트리거\n- **GIVEN** 이벤트 트리거가 설정되어 있을 때\n- **WHEN** CI 실패가 감지되면\n- **THEN** ci-fix, test-fix 작업이 자동 실행됩니다\n\n#### Scenario: Polling 기반 감지\n- **GIVEN** GitHub CI polling이 활성화되어 있을 때\n- **WHEN** 5분마다 상태를 확인하면\n- **THEN** 새로운 실패가 감지되면 이벤트가 트리거됩니다\n\n---\n\n### Requirement: Trigger Configuration\n\n시스템은 트리거 설정을 관리할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1109", "text": "#### Scenario: Polling 기반 감지\n- **GIVEN** GitHub CI polling이 활성화되어 있을 때\n- **WHEN** 5분마다 상태를 확인하면\n- **THEN** 새로운 실패가 감지되면 이벤트가 트리거됩니다\n\n---\n\n### Requirement: Trigger Configuration\n\n시스템은 트리거 설정을 관리할 수 있어야 합니다(SHALL).\n\n#### Scenario: 트리거 설정 파일\n- **GIVEN** `.zyflow/triggers.json`이 있을 때\n- **WHEN** 시스템이 시작되면\n- **THEN** 설정된 트리거가 활성화됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1110", "text": "---\n\n### Requirement: Trigger Configuration\n\n시스템은 트리거 설정을 관리할 수 있어야 합니다(SHALL).\n\n#### Scenario: 트리거 설정 파일\n- **GIVEN** `.zyflow/triggers.json`이 있을 때\n- **WHEN** 시스템이 시작되면\n- **THEN** 설정된 트리거가 활성화됩니다\n\n#### Scenario: Hook 설치\n- **GIVEN** 트리거 설정에 hooks가 정의되어 있을 때\n- **WHEN** `post_task_setup_hooks` 도구를 실행하면\n- **THEN** husky 또는 .git/hooks에 스크립트가 설치됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1111", "text": "#### Scenario: Hook 설치\n- **GIVEN** 트리거 설정에 hooks가 정의되어 있을 때\n- **WHEN** `post_task_setup_hooks` 도구를 실행하면\n- **THEN** husky 또는 .git/hooks에 스크립트가 설치됩니다\n\n#### Scenario: 스케줄러 시작\n- **GIVEN** 트리거 설정에 schedule이 정의되어 있을 때\n- **WHEN** `post_task_start_scheduler` 도구를 실행하면\n- **THEN** node-cron 기반 스케줄러가 시작됩니다\n\n#### Scenario: 트리거 비활성화\n- **GIVEN** 특정 트리거가 활성화되어 있을 때\n- **WHEN** 설정에서 enabled: false로 변경하면\n- **THEN** 해당 트리거가 비활성화됩니다", "metadata": {"file_path": "openspec/changes/add-post-task-agent/specs/post-task-automation/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1112", "text": "# Change: Git 워크플로우 통합\n\n## Summary\n\nZyFlow에 Git 워크플로우를 통합하여 프로젝트 동기화, 브랜치 관리, 커밋/푸시 자동화를 지원합니다. 이를 통해 로컬과 원격 저장소 간의 일관성을 유지하고, Change 기반 개발 워크플로우를 Git과 연계합니다.\n\n## Motivation", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1113", "text": "## Motivation\n\n### 현재 문제점\n1. **수동 동기화 필요**: SSH 서버에서 작업 후 로컬에서 `git pull`을 수동으로 해야 함\n2. **상태 불일치**: 원격 저장소와 로컬 파일시스템 간의 불일치로 인한 404 에러 발생\n3. **워크플로우 단절**: Change 작업과 Git 작업이 분리되어 있음\n4. **협업 어려움**: 여러 환경(로컬, 원격 서버)에서 작업 시 동기화 문제", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1114", "text": "### 기대 효과\n- 프로젝트 전환 시 자동으로 최신 상태 유지\n- Change 완료 시 자동 커밋/푸시로 작업 결과 즉시 반영\n- Git 상태를 UI에서 실시간 확인\n- 충돌 발생 시 사전 알림으로 문제 예방\n\n## Proposed Solution\n\n### Phase 1: 기본 Git 동기화 (MVP)\n\n#### 1.1 프로젝트 활성화 시 자동 Pull\n```typescript\n// 프로젝트 활성화 API에서 git pull 실행\napp.put('/api/projects/:id/activate', async (req, res) => {\n  // ... setActiveProject", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1115", "text": "## Proposed Solution\n\n### Phase 1: 기본 Git 동기화 (MVP)\n\n#### 1.1 프로젝트 활성화 시 자동 Pull\n```typescript\n// 프로젝트 활성화 API에서 git pull 실행\napp.put('/api/projects/:id/activate', async (req, res) => {\n  // ... setActiveProject\n\n  // Git pull 실행 (sync 전에)\n  try {\n    await execAsync('git pull --ff-only', { cwd: project.path })\n    console.log(`[Git] Pulled latest changes for \"${project.name}\"`)\n  } catch (error) {\n    console.warn(`[Git] Pull failed: ${error.message}`)\n    // pull 실패해도 활성화는 진행 (uncommitted changes 등)\n  }\n\n  // ... OpenSpec sync\n})\n```", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1116", "text": "// Git pull 실행 (sync 전에)\n  try {\n    await execAsync('git pull --ff-only', { cwd: project.path })\n    console.log(`[Git] Pulled latest changes for \"${project.name}\"`)\n  } catch (error) {\n    console.warn(`[Git] Pull failed: ${error.message}`)\n    // pull 실패해도 활성화는 진행 (uncommitted changes 등)\n  }\n\n  // ... OpenSpec sync\n})\n```\n\n#### 1.2 Git 상태 API\n```typescript\n// GET /api/git/status - 현재 프로젝트의 Git 상태\ninterface GitStatus {\n  branch: string\n  ahead: number\n  behind: number\n  staged: string[]\n  modified: string[]\n  untracked: string[]\n  hasConflicts: boolean\n}\n```", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1117", "text": "// ... OpenSpec sync\n})\n```\n\n#### 1.2 Git 상태 API\n```typescript\n// GET /api/git/status - 현재 프로젝트의 Git 상태\ninterface GitStatus {\n  branch: string\n  ahead: number\n  behind: number\n  staged: string[]\n  modified: string[]\n  untracked: string[]\n  hasConflicts: boolean\n}\n```\n\n#### 1.3 수동 Git 명령 API\n```typescript\n// POST /api/git/pull - 수동 pull\n// POST /api/git/push - 수동 push\n// POST /api/git/fetch - 원격 상태 확인\n```\n\n### Phase 2: Change 연계 Git 워크플로우", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1118", "text": "#### 1.3 수동 Git 명령 API\n```typescript\n// POST /api/git/pull - 수동 pull\n// POST /api/git/push - 수동 push\n// POST /api/git/fetch - 원격 상태 확인\n```\n\n### Phase 2: Change 연계 Git 워크플로우\n\n#### 2.1 Change별 브랜치 관리\n- Change 시작 시 feature 브랜치 자동 생성: `change/{change-id}`\n- Change 완료 시 main 브랜치로 머지 옵션 제공\n- 브랜치 전환 시 uncommitted changes 경고", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1119", "text": "### Phase 2: Change 연계 Git 워크플로우\n\n#### 2.1 Change별 브랜치 관리\n- Change 시작 시 feature 브랜치 자동 생성: `change/{change-id}`\n- Change 완료 시 main 브랜치로 머지 옵션 제공\n- 브랜치 전환 시 uncommitted changes 경고\n\n#### 2.2 자동 커밋/푸시\n- Change의 각 Stage 완료 시 자동 커밋 옵션\n- 커밋 메시지 템플릿: `[{change-id}] {stage}: {description}`\n- 푸시 타이밍 설정 (즉시, 수동, Stage 완료 시)\n\n#### 2.3 PR 생성 자동화\n- Change 완료 시 GitHub/GitLab PR 자동 생성\n- Change의 proposal.md 내용을 PR 설명으로 활용", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1120", "text": "#### 2.3 PR 생성 자동화\n- Change 완료 시 GitHub/GitLab PR 자동 생성\n- Change의 proposal.md 내용을 PR 설명으로 활용\n\n### Phase 3: 협업 및 충돌 관리\n\n#### 3.1 실시간 원격 상태 모니터링\n- 주기적으로 `git fetch` 실행 (설정 가능)\n- 원격에 새 커밋이 있으면 UI에 알림 표시\n- 충돌 가능성 사전 감지\n\n#### 3.2 충돌 해결 지원\n- 충돌 발생 시 상세 정보 표시\n- 파일별 충돌 해결 UI\n- AI 기반 충돌 해결 제안\n\n## Technical Design", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1121", "text": "#### 3.2 충돌 해결 지원\n- 충돌 발생 시 상세 정보 표시\n- 파일별 충돌 해결 UI\n- AI 기반 충돌 해결 제안\n\n## Technical Design\n\n### 서버 구조\n```\nserver/\n├── git/\n│   ├── index.ts        # Git 서비스 메인 모듈\n│   ├── commands.ts     # Git 명령 래퍼 함수들\n│   ├── status.ts       # 상태 파싱 유틸리티\n│   └── hooks.ts        # Git 이벤트 훅 처리\n```", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1122", "text": "### API 엔드포인트\n| Method | Endpoint | 설명 |\n|--------|----------|------|\n| GET | /api/git/status | 현재 Git 상태 |\n| POST | /api/git/pull | Pull 실행 |\n| POST | /api/git/push | Push 실행 |\n| POST | /api/git/fetch | Fetch 실행 |\n| POST | /api/git/commit | 커밋 생성 |\n| GET | /api/git/branches | 브랜치 목록 |\n| POST | /api/git/checkout | 브랜치 전환 |\n| POST | /api/git/branch | 브랜치 생성 |", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1123", "text": "### 프론트엔드 컴포넌트\n```\nsrc/components/git/\n├── GitStatusBadge.tsx     # 상태 뱃지 (헤더/사이드바)\n├── GitBranchSelector.tsx  # 브랜치 선택 드롭다운\n├── GitSyncButton.tsx      # Pull/Push 버튼\n├── GitConflictDialog.tsx  # 충돌 해결 다이얼로그\n└── GitCommitDialog.tsx    # 커밋 다이얼로그\n```\n\n## Affected Specs\n\n- **NEW**: `git-integration` - Git 통합 기능 스펙\n- **MODIFIED**: `project-management` - 프로젝트 활성화에 Git pull 추가\n- **MODIFIED**: `change-workflow` - Change 완료 시 Git 커밋 연계\n\n## Implementation Plan", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1124", "text": "## Affected Specs\n\n- **NEW**: `git-integration` - Git 통합 기능 스펙\n- **MODIFIED**: `project-management` - 프로젝트 활성화에 Git pull 추가\n- **MODIFIED**: `change-workflow` - Change 완료 시 Git 커밋 연계\n\n## Implementation Plan\n\n### Phase 1 (1주)\n1. Git 서비스 모듈 생성\n2. 프로젝트 활성화 시 자동 pull 구현\n3. Git 상태 API 구현\n4. UI에 Git 상태 뱃지 추가\n\n### Phase 2 (2주)\n1. Change별 브랜치 관리 구현\n2. 자동 커밋/푸시 로직 구현\n3. GitCommitDialog 컴포넌트 개발\n4. 설정 UI 추가", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1125", "text": "### Phase 2 (2주)\n1. Change별 브랜치 관리 구현\n2. 자동 커밋/푸시 로직 구현\n3. GitCommitDialog 컴포넌트 개발\n4. 설정 UI 추가\n\n### Phase 3 (2주)\n1. 원격 상태 모니터링 구현\n2. 충돌 감지 및 알림 시스템\n3. 충돌 해결 UI 개발\n4. PR 생성 자동화 (GitHub API 연동)\n\n## Risks & Mitigations", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1126", "text": "### Phase 3 (2주)\n1. 원격 상태 모니터링 구현\n2. 충돌 감지 및 알림 시스템\n3. 충돌 해결 UI 개발\n4. PR 생성 자동화 (GitHub API 연동)\n\n## Risks & Mitigations\n\n| 리스크 | 영향 | 완화 방안 |\n|--------|------|----------|\n| Git 명령 실패 시 에러 처리 | 높음 | 상세 에러 메시지, 복구 가이드 제공 |\n| 대용량 저장소 성능 | 중간 | shallow clone, sparse checkout 옵션 |\n| 인증 정보 관리 | 높음 | 시스템 credential helper 활용 |\n| 충돌 자동 해결 실패 | 중간 | 수동 해결 폴백, 명확한 가이드 |\n\n## Success Metrics", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1127", "text": "## Success Metrics\n\n- 프로젝트 전환 시 404 에러 0건\n- Git 동기화 소요 시간 < 3초 (일반적인 저장소)\n- 사용자 수동 git 명령 실행 횟수 80% 감소", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}
{"id": "1128", "text": "# Tasks: Git 워크플로우 통합\n\n## 1. Phase 1: 기본 Git 동기화 (MVP)\n\n- [x] 1.1 Git 서비스 모듈 생성 (server/git/)\n- [x] 1.2 Git 명령 래퍼 함수 구현 (commands.ts)\n- [x] 1.3 Git 상태 파싱 유틸리티 구현 (status.ts)\n- [x] 1.4 프로젝트 활성화 시 자동 pull 구현\n- [x] 1.5 Git 상태 API 구현 (/api/git/status)\n- [x] 1.6 Git 명령 API 구현 (pull, push, fetch, commit)\n- [x] 1.7 Git 브랜치 API 구현 (branches, checkout, branch)\n- [x] 1.", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "1129", "text": "3 Git 상태 파싱 유틸리티 구현 (status.ts)\n- [x] 1.4 프로젝트 활성화 시 자동 pull 구현\n- [x] 1.5 Git 상태 API 구현 (/api/git/status)\n- [x] 1.6 Git 명령 API 구현 (pull, push, fetch, commit)\n- [x] 1.7 Git 브랜치 API 구현 (branches, checkout, branch)\n- [x] 1.8 프론트엔드 useGit 훅 생성\n- [x] 1.9 GitStatusBadge 컴포넌트 구현\n- [x] 1.10 GitSyncButton 컴포넌트 구현\n- [x] 1.11 GitBranchSelector 컴포넌트 구현\n- [x] 1.", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "1130", "text": "fetch, commit)\n- [x] 1.7 Git 브랜치 API 구현 (branches, checkout, branch)\n- [x] 1.8 프론트엔드 useGit 훅 생성\n- [x] 1.9 GitStatusBadge 컴포넌트 구현\n- [x] 1.10 GitSyncButton 컴포넌트 구현\n- [x] 1.11 GitBranchSelector 컴포넌트 구현\n- [x] 1.12 GitCommitDialog 컴포넌트 구현\n- [x] 1.13 File Watcher 구현 (tasks.md 변경 시 자동 DB 동기화)\n\n## 2. Phase 2: Change 연계 Git 워크플로우", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "1131", "text": "12 GitCommitDialog 컴포넌트 구현\n- [x] 1.13 File Watcher 구현 (tasks.md 변경 시 자동 DB 동기화)\n\n## 2. Phase 2: Change 연계 Git 워크플로우\n\n- [x] 2.1 Change별 브랜치 자동 생성 기능\n- [x] 2.2 Change 시작 시 feature 브랜치 생성 (change/{change-id})\n- [x] 2.3 브랜치 전환 시 uncommitted changes 경고\n- [x] 2.4 자동 커밋 옵션 구현\n- [x] 2.5 커밋 메시지 템플릿 적용 ([{change-id}] {stage}: {description})\n- [x] 2.6 푸시 타이밍 설정 UI 추가", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "1132", "text": "## 3. Phase 3: 협업 및 충돌 관리\n\n- [x] 3.1 실시간 원격 상태 모니터링 구현\n- [x] 3.2 주기적 git fetch 실행 (설정 가능)\n- [x] 3.3 원격 새 커밋 알림 UI 구현\n- [x] 3.4 충돌 가능성 사전 감지\n- [x] 3.5 충돌 해결 다이얼로그 UI 개발\n- [x] 3.6 PR 생성 자동화 (GitHub API 연동)", "metadata": {"file_path": "openspec/changes/archive/2025-11-30-integrate-git-workflow/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-30", "last_modified_date": "2025-11-30"}}
{"id": "1133", "text": "# Design: Integration Hub\n\n## Context\n\n개발자가 여러 프로젝트와 서비스를 동시에 사용할 때, 각 프로젝트별로 어떤 계정/환경/설정을 사용해야 하는지 추적하기 어렵습니다. 특히:\n\n- GitHub 계정이 여러 개 (개인/회사)\n- 각 프로젝트마다 다른 Supabase/Vercel/Sentry 프로젝트\n- staging/production 환경별로 다른 설정\n- AI 어시스턴트에게 매번 컨텍스트를 전달해야 함\n\n## Goals / Non-Goals", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1134", "text": "- GitHub 계정이 여러 개 (개인/회사)\n- 각 프로젝트마다 다른 Supabase/Vercel/Sentry 프로젝트\n- staging/production 환경별로 다른 설정\n- AI 어시스턴트에게 매번 컨텍스트를 전달해야 함\n\n## Goals / Non-Goals\n\n### Goals\n- 서비스 계정을 중앙에서 관리 (GitHub, Supabase, Vercel, Sentry 등)\n- 프로젝트별로 어떤 서비스/계정을 사용하는지 매핑\n- 환경별 (local/staging/production) 설정 관리\n- 테스트 계정 정보 저장 및 AI 컨텍스트 제공\n- 민감 정보 보안 저장", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1135", "text": "## Goals / Non-Goals\n\n### Goals\n- 서비스 계정을 중앙에서 관리 (GitHub, Supabase, Vercel, Sentry 등)\n- 프로젝트별로 어떤 서비스/계정을 사용하는지 매핑\n- 환경별 (local/staging/production) 설정 관리\n- 테스트 계정 정보 저장 및 AI 컨텍스트 제공\n- 민감 정보 보안 저장\n\n### Non-Goals\n- 자동 배포 기능 (Vercel/GitHub Actions 대체 아님)\n- 서비스 직접 제어 (API 호출로 리소스 생성/삭제 등)\n- 팀 협업 기능 (개인 사용 목적)\n\n## Data Model\n\n### 서비스 계정 (Service Account)", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1136", "text": "### Non-Goals\n- 자동 배포 기능 (Vercel/GitHub Actions 대체 아님)\n- 서비스 직접 제어 (API 호출로 리소스 생성/삭제 등)\n- 팀 협업 기능 (개인 사용 목적)\n\n## Data Model\n\n### 서비스 계정 (Service Account)\n\n```typescript\ninterface ServiceAccount {\n  id: string;                    // UUID\n  type: ServiceType;             // 'github' | 'supabase' | 'vercel' | 'sentry' | 'custom'\n  name: string;                  // 사용자가 지정한 이름 (예: \"hansooha\", \"zellycloud\")\n  credentials: EncryptedData;    // 암호화된 인증 정보\n  metadata: Record<string, string>; // 추가 정보 (org, team 등)\n  createdAt: string;\n  updatedAt: string;\n}", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1137", "text": "```typescript\ninterface ServiceAccount {\n  id: string;                    // UUID\n  type: ServiceType;             // 'github' | 'supabase' | 'vercel' | 'sentry' | 'custom'\n  name: string;                  // 사용자가 지정한 이름 (예: \"hansooha\", \"zellycloud\")\n  credentials: EncryptedData;    // 암호화된 인증 정보\n  metadata: Record<string, string>; // 추가 정보 (org, team 등)\n  createdAt: string;\n  updatedAt: string;\n}\n\n// 서비스별 credential 구조\ninterface GitHubCredentials {\n  username: string;\n  token: string;           // PAT\n  sshKeyPath?: string;     // SSH 키 파일 경로\n}\n\ninterface SupabaseCredentials {\n  projectUrl: string;\n  anonKey: string;\n  serviceRoleKey?: string;\n}\n\ninterface VercelCredentials {\n  token: string;\n  teamId?: string;\n}", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1138", "text": "// 서비스별 credential 구조\ninterface GitHubCredentials {\n  username: string;\n  token: string;           // PAT\n  sshKeyPath?: string;     // SSH 키 파일 경로\n}\n\ninterface SupabaseCredentials {\n  projectUrl: string;\n  anonKey: string;\n  serviceRoleKey?: string;\n}\n\ninterface VercelCredentials {\n  token: string;\n  teamId?: string;\n}\n\ninterface SentryCredentials {\n  dsn: string;\n  authToken?: string;\n  orgSlug: string;\n  projectSlug: string;\n}\n```\n\n### 환경 설정 (Environment Config)\n\n```typescript\ninterface EnvironmentConfig {\n  id: string;\n  projectId: string;             // 연결된 프로젝트\n  name: 'local' | 'staging' | 'production' | string;\n  variables: EncryptedData;      // 암호화된 환경 변수\n  serverUrl?: string;\n  databaseUrl?: string;\n  description?: string;\n}\n```\n\n### 테스트 계정 (Test Account)", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1139", "text": "### 환경 설정 (Environment Config)\n\n```typescript\ninterface EnvironmentConfig {\n  id: string;\n  projectId: string;             // 연결된 프로젝트\n  name: 'local' | 'staging' | 'production' | string;\n  variables: EncryptedData;      // 암호화된 환경 변수\n  serverUrl?: string;\n  databaseUrl?: string;\n  description?: string;\n}\n```\n\n### 테스트 계정 (Test Account)\n\n```typescript\ninterface TestAccount {\n  id: string;\n  projectId: string;\n  role: string;                  // 'admin' | 'user' | custom\n  email: string;\n  password: EncryptedData;\n  description?: string;\n}\n```\n\n### 프로젝트 연동 (Project Integration)", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1140", "text": "### 테스트 계정 (Test Account)\n\n```typescript\ninterface TestAccount {\n  id: string;\n  projectId: string;\n  role: string;                  // 'admin' | 'user' | custom\n  email: string;\n  password: EncryptedData;\n  description?: string;\n}\n```\n\n### 프로젝트 연동 (Project Integration)\n\n```typescript\ninterface ProjectIntegration {\n  projectId: string;             // zyflow 프로젝트 ID (경로 기반)\n  integrations: {\n    github?: string;             // ServiceAccount ID\n    supabase?: string;\n    vercel?: string;\n    sentry?: string;\n    [key: string]: string | undefined;\n  };\n  defaultEnvironment?: string;   // 기본 환경\n}\n```\n\n## Storage Strategy\n\n### Option A: SQLite + 암호화 (선택)", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1141", "text": "### 프로젝트 연동 (Project Integration)\n\n```typescript\ninterface ProjectIntegration {\n  projectId: string;             // zyflow 프로젝트 ID (경로 기반)\n  integrations: {\n    github?: string;             // ServiceAccount ID\n    supabase?: string;\n    vercel?: string;\n    sentry?: string;\n    [key: string]: string | undefined;\n  };\n  defaultEnvironment?: string;   // 기본 환경\n}\n```\n\n## Storage Strategy\n\n### Option A: SQLite + 암호화 (선택)\n\n```\n~/.zyflow/\n├── integrations.db          # SQLite DB (암호화된 필드)\n└── .encryption-key          # 마스터 키 (Keychain에서 가져오거나 파일)\n```\n\n**장점:**\n- 쿼리 용이\n- 관계형 데이터에 적합\n- 백업/마이그레이션 쉬움", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1142", "text": "## Storage Strategy\n\n### Option A: SQLite + 암호화 (선택)\n\n```\n~/.zyflow/\n├── integrations.db          # SQLite DB (암호화된 필드)\n└── .encryption-key          # 마스터 키 (Keychain에서 가져오거나 파일)\n```\n\n**장점:**\n- 쿼리 용이\n- 관계형 데이터에 적합\n- 백업/마이그레이션 쉬움\n\n### Option B: 암호화된 JSON 파일\n\n```\n~/.zyflow/\n├── integrations.json.enc    # 전체 암호화\n└── .key                     # 암호화 키\n```\n\n**장점:**\n- 구현 단순\n- 파일 하나로 관리\n\n### 결정: Option A (SQLite)", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1143", "text": "### Option B: 암호화된 JSON 파일\n\n```\n~/.zyflow/\n├── integrations.json.enc    # 전체 암호화\n└── .key                     # 암호화 키\n```\n\n**장점:**\n- 구현 단순\n- 파일 하나로 관리\n\n### 결정: Option A (SQLite)\n\n- 서비스/환경/계정 간의 관계 쿼리가 필요\n- 향후 확장성 고려\n- `better-sqlite3` 사용 (동기식, 빠름)\n\n## Security\n\n### 암호화 전략\n\n1. **마스터 키**\n   - 첫 실행 시 랜덤 생성\n   - macOS: Keychain에 저장\n   - Linux/Windows: 암호화된 파일", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1144", "text": "### 결정: Option A (SQLite)\n\n- 서비스/환경/계정 간의 관계 쿼리가 필요\n- 향후 확장성 고려\n- `better-sqlite3` 사용 (동기식, 빠름)\n\n## Security\n\n### 암호화 전략\n\n1. **마스터 키**\n   - 첫 실행 시 랜덤 생성\n   - macOS: Keychain에 저장\n   - Linux/Windows: 암호화된 파일\n\n2. **필드 레벨 암호화**\n   - 민감 필드만 암호화 (token, password, apiKey)\n   - AES-256-GCM 사용\n\n3. **UI 표시**\n   - 키 값은 마스킹 (`sk-...****`)\n   - 복사 버튼으로만 원본 접근\n\n### 예시: GitHub 토큰 저장", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1145", "text": "2. **필드 레벨 암호화**\n   - 민감 필드만 암호화 (token, password, apiKey)\n   - AES-256-GCM 사용\n\n3. **UI 표시**\n   - 키 값은 마스킹 (`sk-...****`)\n   - 복사 버튼으로만 원본 접근\n\n### 예시: GitHub 토큰 저장\n\n```typescript\n// 저장 시\nconst encrypted = encrypt(masterKey, {\n  username: 'hansooha',\n  token: 'ghp_xxxxxxxxxxxx'\n});\ndb.exec('INSERT INTO service_accounts (credentials) VALUES (?)', encrypted);\n\n// 조회 시\nconst row = db.get('SELECT credentials FROM service_accounts WHERE id = ?', id);\nconst { username, token } = decrypt(masterKey, row.credentials);\n```\n\n## API Design\n\n### REST Endpoints", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1146", "text": "### 예시: GitHub 토큰 저장\n\n```typescript\n// 저장 시\nconst encrypted = encrypt(masterKey, {\n  username: 'hansooha',\n  token: 'ghp_xxxxxxxxxxxx'\n});\ndb.exec('INSERT INTO service_accounts (credentials) VALUES (?)', encrypted);\n\n// 조회 시\nconst row = db.get('SELECT credentials FROM service_accounts WHERE id = ?', id);\nconst { username, token } = decrypt(masterKey, row.credentials);\n```\n\n## API Design\n\n### REST Endpoints\n\n```\n# 서비스 계정\nGET    /api/integrations/accounts\nPOST   /api/integrations/accounts\nPUT    /api/integrations/accounts/:id\nDELETE /api/integrations/accounts/:id\n\n# 프로젝트 연동\nGET    /api/integrations/projects/:projectId\nPUT    /api/integrations/projects/:projectId", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1147", "text": "// 조회 시\nconst row = db.get('SELECT credentials FROM service_accounts WHERE id = ?', id);\nconst { username, token } = decrypt(masterKey, row.credentials);\n```\n\n## API Design\n\n### REST Endpoints\n\n```\n# 서비스 계정\nGET    /api/integrations/accounts\nPOST   /api/integrations/accounts\nPUT    /api/integrations/accounts/:id\nDELETE /api/integrations/accounts/:id\n\n# 프로젝트 연동\nGET    /api/integrations/projects/:projectId\nPUT    /api/integrations/projects/:projectId\n\n# 환경 설정\nGET    /api/integrations/projects/:projectId/environments\nPOST   /api/integrations/projects/:projectId/environments\nPUT    /api/integrations/projects/:projectId/environments/:envId\nDELETE /api/integrations/projects/:projectId/environments/:envId", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1148", "text": "# 프로젝트 연동\nGET    /api/integrations/projects/:projectId\nPUT    /api/integrations/projects/:projectId\n\n# 환경 설정\nGET    /api/integrations/projects/:projectId/environments\nPOST   /api/integrations/projects/:projectId/environments\nPUT    /api/integrations/projects/:projectId/environments/:envId\nDELETE /api/integrations/projects/:projectId/environments/:envId\n\n# 테스트 계정\nGET    /api/integrations/projects/:projectId/test-accounts\nPOST   /api/integrations/projects/:projectId/test-accounts\nPUT    /api/integrations/projects/:projectId/test-accounts/:id\nDELETE /api/integrations/projects/:projectId/test-accounts/:id\n\n# 컨텍스트 조회 (AI용)\nGET    /api/integrations/projects/:projectId/context\n```\n\n### MCP 도구", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1149", "text": "# 테스트 계정\nGET    /api/integrations/projects/:projectId/test-accounts\nPOST   /api/integrations/projects/:projectId/test-accounts\nPUT    /api/integrations/projects/:projectId/test-accounts/:id\nDELETE /api/integrations/projects/:projectId/test-accounts/:id\n\n# 컨텍스트 조회 (AI용)\nGET    /api/integrations/projects/:projectId/context\n```\n\n### MCP 도구\n\n```typescript\n// AI가 프로젝트 컨텍스트 조회\nintegration_context(projectPath: string) => {\n  github: { username: 'hansooha', /* token 제외 */ },\n  supabase: { projectUrl: '...', /* keys 제외 */ },\n  environments: ['local', 'staging', 'production'],\n  currentEnvironment: 'local',\n  testAccounts: [{ role: 'admin', email: 'admin@test.com' }]\n}", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1150", "text": "### MCP 도구\n\n```typescript\n// AI가 프로젝트 컨텍스트 조회\nintegration_context(projectPath: string) => {\n  github: { username: 'hansooha', /* token 제외 */ },\n  supabase: { projectUrl: '...', /* keys 제외 */ },\n  environments: ['local', 'staging', 'production'],\n  currentEnvironment: 'local',\n  testAccounts: [{ role: 'admin', email: 'admin@test.com' }]\n}\n\n// Git 설정 적용 (프로젝트 디렉토리에)\nintegration_apply_git(projectPath: string) => {\n  // git config user.name, user.email 설정\n  // credential helper 설정\n}\n```\n\n## UI Design\n\n### Settings > Integrations 탭\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│ Settings", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1151", "text": "// Git 설정 적용 (프로젝트 디렉토리에)\nintegration_apply_git(projectPath: string) => {\n  // git config user.name, user.email 설정\n  // credential helper 설정\n}\n```\n\n## UI Design\n\n### Settings > Integrations 탭\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│ Settings                                                     │\n├─────────────────────────────────────────────────────────────┤\n│ [General] [Integrations] [Appearance]                       │\n├─────────────────────────────────────────────────────────────┤\n│", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1152", "text": "│\n├─────────────────────────────────────────────────────────────┤\n│ [General] [Integrations] [Appearance]                       │\n├─────────────────────────────────────────────────────────────┤\n│                                                             │\n│ Service Accounts                              [+ Add New]   │\n│ ┌─────────────────────────────────────────────────────────┐ │\n│ │ 🐙 GitHub", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1153", "text": "│\n│ Service Accounts                              [+ Add New]   │\n│ ┌─────────────────────────────────────────────────────────┐ │\n│ │ 🐙 GitHub                                               │ │\n│ │   ├─ hansooha (Personal)              [Edit] [Delete]   │ │\n│ │   └─ zellycloud (Work)                [Edit] [Delete]", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1154", "text": "│\n│ │ 🐙 GitHub                                               │ │\n│ │   ├─ hansooha (Personal)              [Edit] [Delete]   │ │\n│ │   └─ zellycloud (Work)                [Edit] [Delete]   │ │\n│ │                                                         │ │\n│ │ 🟢 Supabase", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1155", "text": "[Edit] [Delete]   │ │\n│ │                                                         │ │\n│ │ 🟢 Supabase                                             │ │\n│ │   ├─ zywiki-prod                      [Edit] [Delete]   │ │\n│ │   └─ zellyy-money-prod                [Edit] [Delete]   │ │\n│ │", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1156", "text": "│ │\n│ │   ├─ zywiki-prod                      [Edit] [Delete]   │ │\n│ │   └─ zellyy-money-prod                [Edit] [Delete]   │ │\n│ │                                                         │ │\n│ │ ▲ Vercel                                                │", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1157", "text": "[Edit] [Delete]   │ │\n│ │                                                         │ │\n│ │ ▲ Vercel                                                │ │\n│ │   └─ zellycloud-team                  [Edit] [Delete]   │ │\n│ └─────────────────────────────────────────────────────────┘ │\n│", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1158", "text": "│ │\n│ │   └─ zellycloud-team                  [Edit] [Delete]   │ │\n│ └─────────────────────────────────────────────────────────┘ │\n│                                                             │\n│ Project Mappings                                            │\n│ ┌─────────────────────────────────────────────────────────┐ │\n│ │ zywiki           GitHub: zellycloud | Supabase: zywiki", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1159", "text": "│\n│ Project Mappings                                            │\n│ ┌─────────────────────────────────────────────────────────┐ │\n│ │ zywiki           GitHub: zellycloud | Supabase: zywiki  │ │\n│ │ zellyy-money     GitHub: zellycloud | Supabase: zellyy  │ │\n│ │ admin-console    GitHub: hansooha   | Vercel: jayoo     │ │\n│ │ dev-convert      GitHub: hansooha   | -                 │ │\n│", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1160", "text": "│ zywiki           GitHub: zellycloud | Supabase: zywiki  │ │\n│ │ zellyy-money     GitHub: zellycloud | Supabase: zellyy  │ │\n│ │ admin-console    GitHub: hansooha   | Vercel: jayoo     │ │\n│ │ dev-convert      GitHub: hansooha   | -                 │ │\n│ └─────────────────────────────────────────────────────────┘ │\n│                                                             │\n└─────────────────────────────────────────────────────────────┘\n```\n\n### 프로젝트 상세 > Integrations 섹션", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1161", "text": "-                 │ │\n│ └─────────────────────────────────────────────────────────┘ │\n│                                                             │\n└─────────────────────────────────────────────────────────────┘\n```\n\n### 프로젝트 상세 > Integrations 섹션\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│ zywiki > Integrations                                       │\n├─────────────────────────────────────────────────────────────┤\n│", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1162", "text": "### 프로젝트 상세 > Integrations 섹션\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│ zywiki > Integrations                                       │\n├─────────────────────────────────────────────────────────────┤\n│                                                             │\n│ Connected Services                                          │\n│ ┌──────────────┬──────────────────────────────────────────┐ │\n│ │ GitHub       │ zellycloud", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1163", "text": "│\n│ Connected Services                                          │\n│ ┌──────────────┬──────────────────────────────────────────┐ │\n│ │ GitHub       │ zellycloud              [Change]         │ │\n│ │ Supabase     │ zywiki-prod             [Change]         │ │\n│ │ Vercel       │ Not connected           [Connect]        │ │\n│ │", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1164", "text": "│\n│ │ GitHub       │ zellycloud              [Change]         │ │\n│ │ Supabase     │ zywiki-prod             [Change]         │ │\n│ │ Vercel       │ Not connected           [Connect]        │ │\n│ │ Sentry       │ Not connected           [Connect]        │ │\n│ └──────────────┴──────────────────────────────────────────┘ │\n│", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1165", "text": "[Connect]        │ │\n│ │ Sentry       │ Not connected           [Connect]        │ │\n│ └──────────────┴──────────────────────────────────────────┘ │\n│                                                             │\n│ Environments                                    [+ Add]     │\n│ ┌─────────────────────────────────────────────────────────┐ │\n│ │ 🟢 local (active)", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1166", "text": "│\n│ Environments                                    [+ Add]     │\n│ ┌─────────────────────────────────────────────────────────┐ │\n│ │ 🟢 local (active)                                       │ │\n│ │    URL: http://localhost:3000                           │ │\n│ │    DB: postgresql://localhost:5432/zywiki_dev           │ │\n│ │", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1167", "text": "│ │\n│ │    URL: http://localhost:3000                           │ │\n│ │    DB: postgresql://localhost:5432/zywiki_dev           │ │\n│ │                                            [Edit]       │ │\n│ │                                                         │ │\n│ │ 🟡 staging", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1168", "text": "[Edit]       │ │\n│ │                                                         │ │\n│ │ 🟡 staging                                              │ │\n│ │    URL: https://staging.zywiki.com                      │ │\n│ │    DB: postgresql://staging-db...", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1169", "text": "│ │\n│ │ 🟡 staging                                              │ │\n│ │    URL: https://staging.zywiki.com                      │ │\n│ │    DB: postgresql://staging-db.../zywiki                │ │\n│ │                                            [Edit]       │ │\n│ │                                                         │ │\n│ │ 🔴 production                                           │ │\n│ │    URL: https://zywiki.com                              │ │\n│ │    DB: postgresql://prod-db...", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1170", "text": "│ │\n│ │    URL: https://staging.zywiki.com                      │ │\n│ │    DB: postgresql://staging-db.../zywiki                │ │\n│ │                                            [Edit]       │ │\n│ │                                                         │ │\n│ │ 🔴 production                                           │ │\n│ │    URL: https://zywiki.com                              │ │\n│ │    DB: postgresql://prod-db.../zywiki                   │ │\n│ │                                            [Edit]       │ │\n│ └─────────────────────────────────────────────────────────┘ │\n│                                                             │\n│ Test Accounts                                   [+ Add]     │\n│ ┌─────────────────────────────────────────────────────────┐ │\n│ │ admin    admin@test.com    ••••••••    [Copy] [Edit]    │ │\n│ │ user     user@test.", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1171", "text": "com                              │ │\n│ │    DB: postgresql://prod-db.../zywiki                   │ │\n│ │                                            [Edit]       │ │\n│ └─────────────────────────────────────────────────────────┘ │\n│                                                             │\n│ Test Accounts                                   [+ Add]     │\n│ ┌─────────────────────────────────────────────────────────┐ │\n│ │ admin    admin@test.com    ••••••••    [Copy] [Edit]    │ │\n│ │ user     user@test.com     ••••••••    [Copy] [Edit]    │ │\n│ └─────────────────────────────────────────────────────────┘ │\n│                                                             │\n└─────────────────────────────────────────────────────────────┘\n```\n\n## Risks / Trade-offs", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1172", "text": "com    ••••••••    [Copy] [Edit]    │ │\n│ │ user     user@test.com     ••••••••    [Copy] [Edit]    │ │\n│ └─────────────────────────────────────────────────────────┘ │\n│                                                             │\n└─────────────────────────────────────────────────────────────┘\n```\n\n## Risks / Trade-offs\n\n| Risk | Impact | Mitigation |\n|------|--------|------------|\n| 보안 키 유출 | 높음 | 암호화 + Keychain 연동 |\n| DB 파일 손상 | 중간 | 자동 백업 (일일) |\n| 복잡도 증가 | 중간 | 단계별 구현, 핵심 기능 우선 |\n\n## Migration Plan", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1173", "text": "## Risks / Trade-offs\n\n| Risk | Impact | Mitigation |\n|------|--------|------------|\n| 보안 키 유출 | 높음 | 암호화 + Keychain 연동 |\n| DB 파일 손상 | 중간 | 자동 백업 (일일) |\n| 복잡도 증가 | 중간 | 단계별 구현, 핵심 기능 우선 |\n\n## Migration Plan\n\n1. **Phase 1**: 서비스 계정 관리 (GitHub 우선)\n2. **Phase 2**: 프로젝트-서비스 매핑\n3. **Phase 3**: 환경별 설정\n4. **Phase 4**: 테스트 계정\n5. **Phase 5**: MCP 도구 연동\n\n기존 프로젝트 설정에는 영향 없음 (신규 기능 추가).\n\n## Open Questions", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1174", "text": "## Migration Plan\n\n1. **Phase 1**: 서비스 계정 관리 (GitHub 우선)\n2. **Phase 2**: 프로젝트-서비스 매핑\n3. **Phase 3**: 환경별 설정\n4. **Phase 4**: 테스트 계정\n5. **Phase 5**: MCP 도구 연동\n\n기존 프로젝트 설정에는 영향 없음 (신규 기능 추가).\n\n## Open Questions\n\n1. ~~암호화 키 관리: Keychain vs 파일?~~ → macOS는 Keychain, 나머지는 파일\n2. OAuth 연동 지원할지? (Vercel, GitHub 등) → Phase 2 이후 검토\n3. 팀 공유 기능 필요할지? → Non-goal로 명시, 개인 사용 목적", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1175", "text": "# Change: Integration Hub - 통합 서비스 및 환경 관리\n\n## Why\n\n개발자가 여러 프로젝트를 동시에 관리할 때 다음과 같은 고통이 발생합니다:", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1176", "text": "1. **계정 혼란**: GitHub 계정이 여러 개일 때 어느 프로젝트가 어느 계정인지 매번 헷갈림\n2. **환경별 설정 분산**: staging/production 서버, DB, API 키가 프로젝트마다 다르고 흩어져 있음\n3. **인증 정보 분산**: .env, keychain, MCP config, git config 등이 제각각\n4. **반복적인 컨텍스트 전달**: AI에게 매번 \"Supabase URL은 이거고, 테스트 계정은 이거야\" 설명\n5. **서비스 연동 관리**: Vercel, Sentry, Supabase 등 각 프로젝트별 연동 상태 파악 어려움\n\n## What Changes\n\n### 새로운 기능: Integration Hub", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1177", "text": "## What Changes\n\n### 새로운 기능: Integration Hub\n\n프로젝트별로 서비스 연동 및 환경 설정을 중앙 관리하는 시스템:\n\n1. **서비스 계정 관리**\n   - GitHub (멀티 계정 지원)\n   - Supabase (프로젝트별 URL, API 키)\n   - Vercel (팀/프로젝트 연결)\n   - Sentry (프로젝트 연결)\n   - 커스텀 서비스 추가 가능\n\n2. **환경별 설정 관리**\n   - local / staging / production 환경 구분\n   - 환경별 서버 URL, DB 연결 정보\n   - 환경별 API 키 및 인증 정보", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1178", "text": "2. **환경별 설정 관리**\n   - local / staging / production 환경 구분\n   - 환경별 서버 URL, DB 연결 정보\n   - 환경별 API 키 및 인증 정보\n\n3. **테스트 계정 관리**\n   - 프로젝트별 테스트 계정 정보 저장\n   - 역할별 계정 (admin, user 등)\n   - AI가 작업 시 자동으로 참조\n\n4. **프로젝트-서비스 매핑**\n   - 각 프로젝트가 어떤 서비스/계정을 사용하는지 연결\n   - 프로젝트 선택 시 관련 컨텍스트 자동 로드", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1179", "text": "3. **테스트 계정 관리**\n   - 프로젝트별 테스트 계정 정보 저장\n   - 역할별 계정 (admin, user 등)\n   - AI가 작업 시 자동으로 참조\n\n4. **프로젝트-서비스 매핑**\n   - 각 프로젝트가 어떤 서비스/계정을 사용하는지 연결\n   - 프로젝트 선택 시 관련 컨텍스트 자동 로드\n\n5. **보안**\n   - 민감 정보 암호화 저장 (macOS Keychain 연동 또는 암호화 파일)\n   - 마스킹된 표시 (UI에서 키 값 숨김)\n\n### UI 변경", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1180", "text": "5. **보안**\n   - 민감 정보 암호화 저장 (macOS Keychain 연동 또는 암호화 파일)\n   - 마스킹된 표시 (UI에서 키 값 숨김)\n\n### UI 변경\n\n- Settings 페이지에 \"Integrations\" 탭 추가\n- 서비스별 계정 목록 및 설정 화면\n- 프로젝트별 연동 현황 대시보드\n\n## Impact\n\n- Affected specs: 없음 (새로운 capability)\n- Affected code:\n  - `src/pages/Settings.tsx` - Integrations 탭 추가\n  - `server/` - 새로운 API 엔드포인트\n  - `mcp-server/` - 컨텍스트 제공 도구 추가\n  - 새로운 데이터 저장소 (SQLite 또는 암호화 JSON)", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1181", "text": "# Tasks: Integration Hub\n\n## 1. 데이터베이스 및 암호화 기반\n\n### 1.1 SQLite 및 암호화 설정\n\n- [x] 1.1.1 SQLite 데이터베이스 설정 (`~/.zyflow/integrations.db`)\n- [x] 1.1.2 암호화 유틸리티 구현 (AES-256-GCM)\n- [x] 1.1.3 마스터 키 관리 (macOS Keychain 연동)\n- [x] 1.1.4 스키마 정의 (service_accounts, environments, test_accounts, project_integrations)\n\n## 2. 서비스 계정 관리 API\n\n### 2.1 계정 CRUD 및 서비스 타입", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1182", "text": "## 2. 서비스 계정 관리 API\n\n### 2.1 계정 CRUD 및 서비스 타입\n\n- [x] 2.1.1 서비스 계정 CRUD API 엔드포인트\n- [x] 2.1.2 GitHub 계정 타입 지원 (username, PAT, SSH key path)\n- [x] 2.1.3 Supabase 계정 타입 지원 (project URL, anon key, service role key)\n- [x] 2.1.4 Vercel 계정 타입 지원 (token, team ID)\n- [x] 2.1.5 Sentry 계정 타입 지원 (DSN, auth token, org/project slug)\n- [x] 2.1.6 커스텀 서비스 타입 지원 (key-value 형식)\n\n## 3. 프로젝트 연동 관리 API", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1183", "text": "## 3. 프로젝트 연동 관리 API\n\n### 3.1 프로젝트 매핑 및 환경 설정\n\n- [x] 3.1.1 프로젝트-서비스 매핑 CRUD API\n- [x] 3.1.2 환경 설정 CRUD API (local/staging/production)\n- [x] 3.1.3 테스트 계정 CRUD API\n- [x] 3.1.4 프로젝트 컨텍스트 조회 API (AI용, 민감정보 제외)\n\n## 4. UI: Settings > Integrations\n\n### 4.1 서비스 계정 관리 UI", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1184", "text": "## 4. UI: Settings > Integrations\n\n### 4.1 서비스 계정 관리 UI\n\n- [x] 4.1.1 Settings 페이지에 Integrations 탭 추가\n- [x] 4.1.2 서비스 계정 목록 컴포넌트\n- [x] 4.1.3 서비스 계정 추가/수정 모달 (서비스 타입별 폼)\n- [x] 4.1.4 프로젝트 매핑 목록 컴포넌트\n- [x] 4.1.5 민감 정보 마스킹 및 복사 기능\n\n## 5. UI: 프로젝트 상세 > Integrations\n\n### 5.1 프로젝트별 연동 UI", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1185", "text": "## 5. UI: 프로젝트 상세 > Integrations\n\n### 5.1 프로젝트별 연동 UI\n\n- [x] 5.1.1 프로젝트 상세 페이지에 Integrations 섹션 추가\n- [x] 5.1.2 연결된 서비스 표시 및 변경 기능\n- [x] 5.1.3 환경 설정 목록 및 편집 UI\n- [x] 5.1.4 테스트 계정 목록 및 편집 UI\n- [x] 5.1.5 현재 환경 선택 기능\n\n## 6. MCP 도구 연동\n\n### 6.1 Integration MCP 도구", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1186", "text": "## 6. MCP 도구 연동\n\n### 6.1 Integration MCP 도구\n\n- [x] 6.1.1 `integration_context` 도구 - 프로젝트 컨텍스트 조회\n- [x] 6.1.2 `integration_apply_git` 도구 - Git 설정 자동 적용\n- [x] 6.1.3 `integration_list_accounts` 도구 - 등록된 계정 목록\n- [x] 6.1.4 `integration_get_env` 도구 - 환경 변수 조회\n- [x] 6.1.5 `integration_get_test_account` 도구 - 테스트 계정 조회\n\n## 7. Git 자동 설정\n\n### 7.1 Git 계정 자동 적용", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1187", "text": "## 7. Git 자동 설정\n\n### 7.1 Git 계정 자동 적용\n\n- [x] 7.1.1 프로젝트 열 때 해당 GitHub 계정의 git config 자동 적용\n- [x] 7.1.2 credential helper 연동 (OS 기본 credential manager 사용)\n- [x] 7.1.3 SSH 키 기반 인증 지원 (GitHub 계정에 SSH key path 저장)\n\n## 8. 테스트 및 문서화\n\n### 8.1 테스트 및 문서\n\n- [x] 8.1.1 암호화 유틸리티 단위 테스트\n- [x] 8.1.2 API 엔드포인트 통합 테스트 (기능 테스트로 대체)\n- [x] 8.1.3 사용자 가이드 작성 (docs/mcp-tools.md)", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1188", "text": "## 8. 테스트 및 문서화\n\n### 8.1 테스트 및 문서\n\n- [x] 8.1.1 암호화 유틸리티 단위 테스트\n- [x] 8.1.2 API 엔드포인트 통합 테스트 (기능 테스트로 대체)\n- [x] 8.1.3 사용자 가이드 작성 (docs/mcp-tools.md)\n\n<!-- All tasks completed: 2025-12-02 -->", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1189", "text": "## ADDED Requirements\n\n### Requirement: Service Account Management\n\n시스템은 다양한 외부 서비스의 계정 정보를 중앙에서 관리할 수 있어야 한다(SHALL).\n\n시스템은 다음 서비스 타입을 지원해야 한다(MUST):\n- GitHub (username, PAT, SSH key path)\n- Supabase (project URL, anon key, service role key)\n- Vercel (token, team ID)\n- Sentry (DSN, auth token, org slug, project slug)\n- Custom (사용자 정의 key-value)\n\n#### Scenario: GitHub 계정 등록\n\n- **GIVEN** 사용자가 Integrations 설정 페이지에 있다\n- **WHEN** GitHub 서비스 계정을 추가하고 username과 PAT를 입력한다\n- **THEN** 계정이 암호화되어 저장되고 목록에 표시된다\n\n#### Scenario: 서비스 계정 수정", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1190", "text": "#### Scenario: GitHub 계정 등록\n\n- **GIVEN** 사용자가 Integrations 설정 페이지에 있다\n- **WHEN** GitHub 서비스 계정을 추가하고 username과 PAT를 입력한다\n- **THEN** 계정이 암호화되어 저장되고 목록에 표시된다\n\n#### Scenario: 서비스 계정 수정\n\n- **GIVEN** 등록된 GitHub 계정 \"hansooha\"가 있다\n- **WHEN** 해당 계정의 PAT를 새 값으로 변경한다\n- **THEN** 새 토큰이 암호화되어 저장된다\n\n#### Scenario: 서비스 계정 삭제\n\n- **GIVEN** 등록된 계정이 프로젝트에 연결되어 있지 않다\n- **WHEN** 계정을 삭제한다\n- **THEN** 계정이 영구 삭제된다\n\n#### Scenario: 연결된 계정 삭제 시도", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1191", "text": "#### Scenario: 서비스 계정 삭제\n\n- **GIVEN** 등록된 계정이 프로젝트에 연결되어 있지 않다\n- **WHEN** 계정을 삭제한다\n- **THEN** 계정이 영구 삭제된다\n\n#### Scenario: 연결된 계정 삭제 시도\n\n- **GIVEN** 등록된 계정이 하나 이상의 프로젝트에 연결되어 있다\n- **WHEN** 계정을 삭제하려고 한다\n- **THEN** 경고 메시지가 표시되고 연결된 프로젝트 목록을 보여준다\n\n---\n\n### Requirement: Project Integration Mapping\n\n시스템은 각 프로젝트가 사용할 서비스 계정을 지정할 수 있어야 한다(SHALL).\n\n#### Scenario: 프로젝트에 GitHub 계정 연결", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1192", "text": "---\n\n### Requirement: Project Integration Mapping\n\n시스템은 각 프로젝트가 사용할 서비스 계정을 지정할 수 있어야 한다(SHALL).\n\n#### Scenario: 프로젝트에 GitHub 계정 연결\n\n- **GIVEN** 프로젝트 \"zywiki\"와 GitHub 계정 \"zellycloud\"가 있다\n- **WHEN** 프로젝트 설정에서 GitHub 연동을 \"zellycloud\"로 선택한다\n- **THEN** 해당 프로젝트는 zellycloud 계정을 사용하도록 매핑된다\n\n#### Scenario: 프로젝트 연동 현황 조회", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1193", "text": "#### Scenario: 프로젝트에 GitHub 계정 연결\n\n- **GIVEN** 프로젝트 \"zywiki\"와 GitHub 계정 \"zellycloud\"가 있다\n- **WHEN** 프로젝트 설정에서 GitHub 연동을 \"zellycloud\"로 선택한다\n- **THEN** 해당 프로젝트는 zellycloud 계정을 사용하도록 매핑된다\n\n#### Scenario: 프로젝트 연동 현황 조회\n\n- **GIVEN** 여러 프로젝트가 다양한 서비스에 연결되어 있다\n- **WHEN** Settings > Integrations의 Project Mappings 섹션을 본다\n- **THEN** 각 프로젝트별로 연결된 서비스 계정이 한눈에 표시된다\n\n---\n\n### Requirement: Environment Configuration", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1194", "text": "#### Scenario: 프로젝트 연동 현황 조회\n\n- **GIVEN** 여러 프로젝트가 다양한 서비스에 연결되어 있다\n- **WHEN** Settings > Integrations의 Project Mappings 섹션을 본다\n- **THEN** 각 프로젝트별로 연결된 서비스 계정이 한눈에 표시된다\n\n---\n\n### Requirement: Environment Configuration\n\n시스템은 프로젝트별로 환경(local, staging, production)에 따른 설정을 관리할 수 있어야 한다(SHALL).\n\n#### Scenario: 환경 설정 추가\n\n- **GIVEN** 프로젝트 \"zywiki\"가 있다\n- **WHEN** staging 환경을 추가하고 서버 URL과 DB URL을 입력한다\n- **THEN** 환경 설정이 암호화되어 저장된다\n\n#### Scenario: 현재 환경 선택", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1195", "text": "### Requirement: Environment Configuration\n\n시스템은 프로젝트별로 환경(local, staging, production)에 따른 설정을 관리할 수 있어야 한다(SHALL).\n\n#### Scenario: 환경 설정 추가\n\n- **GIVEN** 프로젝트 \"zywiki\"가 있다\n- **WHEN** staging 환경을 추가하고 서버 URL과 DB URL을 입력한다\n- **THEN** 환경 설정이 암호화되어 저장된다\n\n#### Scenario: 현재 환경 선택\n\n- **GIVEN** 프로젝트에 local, staging, production 환경이 설정되어 있다\n- **WHEN** 사용자가 \"staging\"을 현재 환경으로 선택한다\n- **THEN** 해당 환경의 설정이 활성화되고 컨텍스트에 반영된다\n\n#### Scenario: 환경 변수 조회", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1196", "text": "#### Scenario: 현재 환경 선택\n\n- **GIVEN** 프로젝트에 local, staging, production 환경이 설정되어 있다\n- **WHEN** 사용자가 \"staging\"을 현재 환경으로 선택한다\n- **THEN** 해당 환경의 설정이 활성화되고 컨텍스트에 반영된다\n\n#### Scenario: 환경 변수 조회\n\n- **GIVEN** staging 환경에 `DATABASE_URL`이 설정되어 있다\n- **WHEN** MCP 도구로 환경 변수를 조회한다\n- **THEN** 해당 환경의 변수 값이 반환된다\n\n---\n\n### Requirement: Test Account Management\n\n시스템은 프로젝트별 테스트 계정 정보를 저장하고 관리할 수 있어야 한다(SHALL).\n\n#### Scenario: 테스트 계정 등록", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1197", "text": "#### Scenario: 환경 변수 조회\n\n- **GIVEN** staging 환경에 `DATABASE_URL`이 설정되어 있다\n- **WHEN** MCP 도구로 환경 변수를 조회한다\n- **THEN** 해당 환경의 변수 값이 반환된다\n\n---\n\n### Requirement: Test Account Management\n\n시스템은 프로젝트별 테스트 계정 정보를 저장하고 관리할 수 있어야 한다(SHALL).\n\n#### Scenario: 테스트 계정 등록\n\n- **GIVEN** 프로젝트 \"zywiki\"가 있다\n- **WHEN** admin 역할의 테스트 계정 (email, password)을 등록한다\n- **THEN** 비밀번호가 암호화되어 저장된다\n\n#### Scenario: 테스트 계정 조회 (UI)", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1198", "text": "시스템은 프로젝트별 테스트 계정 정보를 저장하고 관리할 수 있어야 한다(SHALL).\n\n#### Scenario: 테스트 계정 등록\n\n- **GIVEN** 프로젝트 \"zywiki\"가 있다\n- **WHEN** admin 역할의 테스트 계정 (email, password)을 등록한다\n- **THEN** 비밀번호가 암호화되어 저장된다\n\n#### Scenario: 테스트 계정 조회 (UI)\n\n- **GIVEN** 테스트 계정이 등록되어 있다\n- **WHEN** 프로젝트 상세의 Test Accounts 섹션을 본다\n- **THEN** 이메일은 보이고 비밀번호는 마스킹(••••)되어 표시된다\n\n#### Scenario: 테스트 계정 비밀번호 복사", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1199", "text": "#### Scenario: 테스트 계정 조회 (UI)\n\n- **GIVEN** 테스트 계정이 등록되어 있다\n- **WHEN** 프로젝트 상세의 Test Accounts 섹션을 본다\n- **THEN** 이메일은 보이고 비밀번호는 마스킹(••••)되어 표시된다\n\n#### Scenario: 테스트 계정 비밀번호 복사\n\n- **GIVEN** 테스트 계정의 비밀번호가 마스킹되어 있다\n- **WHEN** 복사 버튼을 클릭한다\n- **THEN** 원본 비밀번호가 클립보드에 복사된다\n\n---\n\n### Requirement: Secure Credential Storage\n\n시스템은 모든 민감 정보를 암호화하여 저장해야 한다(MUST).\n\n#### Scenario: 토큰 암호화 저장", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1200", "text": "- **GIVEN** 테스트 계정의 비밀번호가 마스킹되어 있다\n- **WHEN** 복사 버튼을 클릭한다\n- **THEN** 원본 비밀번호가 클립보드에 복사된다\n\n---\n\n### Requirement: Secure Credential Storage\n\n시스템은 모든 민감 정보를 암호화하여 저장해야 한다(MUST).\n\n#### Scenario: 토큰 암호화 저장\n\n- **GIVEN** 사용자가 GitHub PAT를 입력한다\n- **WHEN** 저장 버튼을 클릭한다\n- **THEN** 토큰은 AES-256-GCM으로 암호화되어 데이터베이스에 저장된다\n\n#### Scenario: 마스터 키 관리 (macOS)", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1201", "text": "---\n\n### Requirement: Secure Credential Storage\n\n시스템은 모든 민감 정보를 암호화하여 저장해야 한다(MUST).\n\n#### Scenario: 토큰 암호화 저장\n\n- **GIVEN** 사용자가 GitHub PAT를 입력한다\n- **WHEN** 저장 버튼을 클릭한다\n- **THEN** 토큰은 AES-256-GCM으로 암호화되어 데이터베이스에 저장된다\n\n#### Scenario: 마스터 키 관리 (macOS)\n\n- **GIVEN** macOS 환경에서 앱을 처음 실행한다\n- **WHEN** 암호화가 필요한 데이터를 저장한다\n- **THEN** 마스터 키는 macOS Keychain에 안전하게 저장된다\n\n#### Scenario: 민감 정보 UI 표시", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1202", "text": "#### Scenario: 마스터 키 관리 (macOS)\n\n- **GIVEN** macOS 환경에서 앱을 처음 실행한다\n- **WHEN** 암호화가 필요한 데이터를 저장한다\n- **THEN** 마스터 키는 macOS Keychain에 안전하게 저장된다\n\n#### Scenario: 민감 정보 UI 표시\n\n- **GIVEN** 암호화된 API 키가 저장되어 있다\n- **WHEN** UI에서 해당 정보를 표시한다\n- **THEN** `sk-...****` 형태로 마스킹되어 표시된다\n\n---\n\n### Requirement: MCP Integration Tools\n\n시스템은 AI 어시스턴트가 프로젝트 컨텍스트를 자동으로 조회할 수 있는 MCP 도구를 제공해야 한다(SHALL).\n\n#### Scenario: 프로젝트 컨텍스트 조회", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1203", "text": "---\n\n### Requirement: MCP Integration Tools\n\n시스템은 AI 어시스턴트가 프로젝트 컨텍스트를 자동으로 조회할 수 있는 MCP 도구를 제공해야 한다(SHALL).\n\n#### Scenario: 프로젝트 컨텍스트 조회\n\n- **GIVEN** 프로젝트 \"zywiki\"에 GitHub, Supabase가 연결되어 있다\n- **WHEN** AI가 `integration_context` 도구를 호출한다\n- **THEN** 연결된 서비스 정보(토큰 제외), 환경 목록, 테스트 계정 이메일이 반환된다\n\n#### Scenario: Git 설정 자동 적용", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1204", "text": "#### Scenario: 프로젝트 컨텍스트 조회\n\n- **GIVEN** 프로젝트 \"zywiki\"에 GitHub, Supabase가 연결되어 있다\n- **WHEN** AI가 `integration_context` 도구를 호출한다\n- **THEN** 연결된 서비스 정보(토큰 제외), 환경 목록, 테스트 계정 이메일이 반환된다\n\n#### Scenario: Git 설정 자동 적용\n\n- **GIVEN** 프로젝트 \"admin-console\"이 GitHub \"hansooha\"에 연결되어 있다\n- **WHEN** AI가 `integration_apply_git` 도구를 호출한다\n- **THEN** 해당 디렉토리의 git config가 hansooha 계정으로 설정된다\n\n---\n\n### Requirement: Automatic Git Configuration", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1205", "text": "#### Scenario: Git 설정 자동 적용\n\n- **GIVEN** 프로젝트 \"admin-console\"이 GitHub \"hansooha\"에 연결되어 있다\n- **WHEN** AI가 `integration_apply_git` 도구를 호출한다\n- **THEN** 해당 디렉토리의 git config가 hansooha 계정으로 설정된다\n\n---\n\n### Requirement: Automatic Git Configuration\n\n시스템은 프로젝트 디렉토리에서 자동으로 올바른 Git 계정을 설정해야 한다(SHALL).\n\n#### Scenario: Git 계정 자동 감지\n\n- **GIVEN** 프로젝트 \"dev-convert\"가 GitHub \"hansooha\"에 연결되어 있다\n- **WHEN** 해당 프로젝트 디렉토리에서 git 작업을 수행한다\n- **THEN** hansooha 계정의 인증 정보가 사용된다", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1206", "text": "#### Scenario: Git 계정 자동 감지\n\n- **GIVEN** 프로젝트 \"dev-convert\"가 GitHub \"hansooha\"에 연결되어 있다\n- **WHEN** 해당 프로젝트 디렉토리에서 git 작업을 수행한다\n- **THEN** hansooha 계정의 인증 정보가 사용된다\n\n#### Scenario: 멀티 계정 충돌 방지\n\n- **GIVEN** \"zywiki\"는 zellycloud, \"admin-console\"은 hansooha에 연결되어 있다\n- **WHEN** 각 프로젝트 디렉토리에서 git push를 수행한다\n- **THEN** 각각 올바른 계정으로 인증된다", "metadata": {"file_path": "openspec/changes/archive/2025-12-02-add-integration-hub/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1207", "text": "# Change: 환경변수 자동 임포트\n\n## Summary\n\n프로젝트의 `.env` 파일을 자동으로 파싱하여 Integration Hub에 서비스 계정과 환경 설정을 자동 등록하는 기능을 추가한다.\n\n## Motivation\n\n현재 Integration Hub에서 서비스 계정과 환경변수를 수동으로 입력해야 한다. 대부분의 프로젝트는 이미 `.env` 파일에 필요한 정보가 있으므로, 이를 자동으로 감지하고 임포트하면 설정 시간을 크게 줄일 수 있다.\n\n## Scope", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1208", "text": "## Motivation\n\n현재 Integration Hub에서 서비스 계정과 환경변수를 수동으로 입력해야 한다. 대부분의 프로젝트는 이미 `.env` 파일에 필요한 정보가 있으므로, 이를 자동으로 감지하고 임포트하면 설정 시간을 크게 줄일 수 있다.\n\n## Scope\n\n### In Scope\n- `.env`, `.env.local`, `.env.development`, `.env.production` 파일 파싱\n- 알려진 서비스 패턴 자동 인식 (GitHub, Supabase, Vercel, Sentry 등 20+ 서비스)\n- UI에서 \"Import from .env\" 버튼 제공\n- MCP 도구 `integration_import_env` 추가\n- 임포트 전 미리보기 및 선택적 등록", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1209", "text": "## Scope\n\n### In Scope\n- `.env`, `.env.local`, `.env.development`, `.env.production` 파일 파싱\n- 알려진 서비스 패턴 자동 인식 (GitHub, Supabase, Vercel, Sentry 등 20+ 서비스)\n- UI에서 \"Import from .env\" 버튼 제공\n- MCP 도구 `integration_import_env` 추가\n- 임포트 전 미리보기 및 선택적 등록\n\n### Out of Scope\n- `.env` 파일 수정/생성\n- 원격 환경변수 동기화 (Vercel/Netlify 등에서 가져오기)\n\n## Design\n\n### 지원 서비스 및 환경변수 패턴\n\n| 서비스 | 환경변수 패턴 | 매핑 |\n|--------|--------------|------|\n| **GitHub** | `GITHUB_TOKEN`, `GH_TOKEN`,", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1210", "text": "### Out of Scope\n- `.env` 파일 수정/생성\n- 원격 환경변수 동기화 (Vercel/Netlify 등에서 가져오기)\n\n## Design\n\n### 지원 서비스 및 환경변수 패턴\n\n| 서비스 | 환경변수 패턴 | 매핑 |\n|--------|--------------|------|\n| **GitHub** | `GITHUB_TOKEN`, `GH_TOKEN`, `GITHUB_PAT` | token |\n| | `GITHUB_USERNAME`, `GH_USER` | username |\n| **Supabase** | `SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_URL` | projectUrl |\n| | `SUPABASE_ANON_KEY`, `NEXT_PUBLIC_SUPABASE_ANON_KEY` | anonKey |\n| | `SUPABASE_SERVICE_ROLE_KEY` | serviceRoleKey |\n| **Vercel** | `VERCEL_TOKEN` | token |\n| | `VERCEL_TEAM_ID`,", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1211", "text": "`GH_TOKEN`, `GITHUB_PAT` | token |\n| | `GITHUB_USERNAME`, `GH_USER` | username |\n| **Supabase** | `SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_URL` | projectUrl |\n| | `SUPABASE_ANON_KEY`, `NEXT_PUBLIC_SUPABASE_ANON_KEY` | anonKey |\n| | `SUPABASE_SERVICE_ROLE_KEY` | serviceRoleKey |\n| **Vercel** | `VERCEL_TOKEN` | token |\n| | `VERCEL_TEAM_ID`, `VERCEL_ORG_ID` | teamId |\n| **Sentry** | `SENTRY_DSN`,", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1212", "text": "`NEXT_PUBLIC_SUPABASE_URL` | projectUrl |\n| | `SUPABASE_ANON_KEY`, `NEXT_PUBLIC_SUPABASE_ANON_KEY` | anonKey |\n| | `SUPABASE_SERVICE_ROLE_KEY` | serviceRoleKey |\n| **Vercel** | `VERCEL_TOKEN` | token |\n| | `VERCEL_TEAM_ID`, `VERCEL_ORG_ID` | teamId |\n| **Sentry** | `SENTRY_DSN`, `NEXT_PUBLIC_SENTRY_DSN` | dsn |\n| | `SENTRY_AUTH_TOKEN` | authToken |\n| | `SENTRY_ORG` | orgSlug |\n| | `SENTRY_PROJECT` | projectSlug |\n| **Firebase** | `FIREBASE_API_KEY` | apiKey |\n| | `FIREBASE_AUTH_DOMAIN` | authDomain |\n| | `FIREBASE_PROJECT_ID` | projectId |\n| **AWS** | `AWS_ACCESS_KEY_ID` | accessKeyId |\n| | `AWS_SECRET_ACCESS_KEY` | secretAccessKey |\n| | `AWS_REGION` | region |\n| **Stripe** | `STRIPE_SECRET_KEY`,", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1213", "text": "`STRIPE_API_KEY` | secretKey |\n| | `STRIPE_PUBLISHABLE_KEY`, `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY` | publishableKey |\n| | `STRIPE_WEBHOOK_SECRET` | webhookSecret |\n| **OpenAI** | `OPENAI_API_KEY` | apiKey |\n| | `OPENAI_ORG_ID` | orgId |\n| **Anthropic** | `ANTHROPIC_API_KEY` | apiKey |\n| **MongoDB** | `MONGODB_URI`, `MONGO_URL`, `DATABASE_URL` (mongodb://) | uri |\n| **PostgreSQL** | `DATABASE_URL` (postgres://), `POSTGRES_URL` | uri |\n| **Redis** | `REDIS_URL`, `REDIS_URI` | uri |\n| **Cloudflare** | `CLOUDFLARE_API_TOKEN` | apiToken |\n| | `CLOUDFLARE_ACCOUNT_ID` | accountId |\n| **Twilio** | `TWILIO_ACCOUNT_SID` | accountSid |\n| | `TWILIO_AUTH_TOKEN` | authToken |\n| **SendGrid** | `SENDGRID_API_KEY`", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1214", "text": "`MONGO_URL`, `DATABASE_URL` (mongodb://) | uri |\n| **PostgreSQL** | `DATABASE_URL` (postgres://), `POSTGRES_URL` | uri |\n| **Redis** | `REDIS_URL`, `REDIS_URI` | uri |\n| **Cloudflare** | `CLOUDFLARE_API_TOKEN` | apiToken |\n| | `CLOUDFLARE_ACCOUNT_ID` | accountId |\n| **Twilio** | `TWILIO_ACCOUNT_SID` | accountSid |\n| | `TWILIO_AUTH_TOKEN` | authToken |\n| **SendGrid** | `SENDGRID_API_KEY` | apiKey |\n| **Resend** | `RESEND_API_KEY` | apiKey |\n| **Clerk** | `CLERK_SECRET_KEY` | secretKey |\n| | `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` | publishableKey |\n| **Auth0** | `AUTH0_SECRET` | secret |\n| | `AUTH0_CLIENT_ID` | clientId |\n| | `AUTH0_CLIENT_SECRET` | clientSecret |\n| | `AUTH0_ISSUER_BASE_URL` | issuerBaseUrl |\n|", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1215", "text": "| authToken |\n| **SendGrid** | `SENDGRID_API_KEY` | apiKey |\n| **Resend** | `RESEND_API_KEY` | apiKey |\n| **Clerk** | `CLERK_SECRET_KEY` | secretKey |\n| | `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` | publishableKey |\n| **Auth0** | `AUTH0_SECRET` | secret |\n| | `AUTH0_CLIENT_ID` | clientId |\n| | `AUTH0_CLIENT_SECRET` | clientSecret |\n| | `AUTH0_ISSUER_BASE_URL` | issuerBaseUrl |\n| **Google** | `GOOGLE_CLIENT_ID` | clientId |\n| | `GOOGLE_CLIENT_SECRET` | clientSecret |\n| **Prisma** | `DATABASE_URL` | databaseUrl |\n| **PlanetScale** | `DATABASE_URL` (mysql://) | uri |\n| **Neon** | `DATABASE_URL` (postgres://neon) | uri |\n| **Upstash** | `UPSTASH_REDIS_REST_URL` | restUrl |\n| | `UPSTASH_REDIS_REST_TOKEN` | restToken |", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1216", "text": "clientSecret |\n| | `AUTH0_ISSUER_BASE_URL` | issuerBaseUrl |\n| **Google** | `GOOGLE_CLIENT_ID` | clientId |\n| | `GOOGLE_CLIENT_SECRET` | clientSecret |\n| **Prisma** | `DATABASE_URL` | databaseUrl |\n| **PlanetScale** | `DATABASE_URL` (mysql://) | uri |\n| **Neon** | `DATABASE_URL` (postgres://neon) | uri |\n| **Upstash** | `UPSTASH_REDIS_REST_URL` | restUrl |\n| | `UPSTASH_REDIS_REST_TOKEN` | restToken |\n\n### 임포트 흐름", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1217", "text": "uri |\n| **Neon** | `DATABASE_URL` (postgres://neon) | uri |\n| **Upstash** | `UPSTASH_REDIS_REST_URL` | restUrl |\n| | `UPSTASH_REDIS_REST_TOKEN` | restToken |\n\n### 임포트 흐름\n\n```\n1. 사용자가 \"Import from .env\" 클릭\n2. 프로젝트 루트에서 .env* 파일 검색\n3. 환경변수 파싱 및 서비스 패턴 매칭\n4. 미리보기 화면 표시:\n   - 감지된 서비스 목록\n   - 각 서비스별 발견된 credential\n   - 기존 계정과 중복 여부 표시\n5. 사용자가 임포트할 항목 선택\n6. 선택된 항목 등록 (새 계정 또는 기존 계정 업데이트)\n```", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1218", "text": "## References\n\n- [Integration Hub Spec](../specs/integration-hub/spec.md)\n- [dotenv 파서](https://github.com/motdotla/dotenv)", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1219", "text": "# Tasks: 환경변수 자동 임포트\n\n## 1. 환경변수 파서 구현\n\n### 1.1 파서 코어\n- [x] 1.1.1 `.env` 파일 파싱 유틸리티 (`server/integrations/env-parser.ts`)\n- [x] 1.1.2 서비스 패턴 정의 및 매칭 로직 (`server/integrations/service-patterns.ts`)\n- [x] 1.1.3 여러 `.env*` 파일 스캔 (`.env`, `.env.local`, `.env.development`, `.env.production`)", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1220", "text": "### 1.1 파서 코어\n- [x] 1.1.1 `.env` 파일 파싱 유틸리티 (`server/integrations/env-parser.ts`)\n- [x] 1.1.2 서비스 패턴 정의 및 매칭 로직 (`server/integrations/service-patterns.ts`)\n- [x] 1.1.3 여러 `.env*` 파일 스캔 (`.env`, `.env.local`, `.env.development`, `.env.production`)\n\n### 1.2 서비스 타입 확장\n- [x] 1.2.1 새 서비스 타입 추가 (firebase, aws, stripe, openai, anthropic 등)\n- [x] 1.2.2 각 서비스별 Credential 인터페이스 정의\n- [x] 1.2.3 서비스별 검증 로직 추가\n\n## 2. API 엔드포인트", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1221", "text": "## 2. API 엔드포인트\n\n### 2.1 임포트 API\n- [x] 2.1.1 `GET /api/integrations/env/scan` - .env 파일 스캔 및 미리보기\n- [x] 2.1.2 `POST /api/integrations/env/import` - 선택한 항목 임포트\n- [x] 2.1.3 임포트 결과 응답 (생성/업데이트/스킵 카운트)\n\n## 3. MCP 도구\n\n### 3.1 Integration MCP 도구\n- [x] 3.1.1 `integration_scan_env` - 프로젝트 .env 스캔 및 감지된 서비스 반환\n- [x] 3.1.2 `integration_import_env` - 감지된 서비스 자동 임포트", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1222", "text": "## 3. MCP 도구\n\n### 3.1 Integration MCP 도구\n- [x] 3.1.1 `integration_scan_env` - 프로젝트 .env 스캔 및 감지된 서비스 반환\n- [x] 3.1.2 `integration_import_env` - 감지된 서비스 자동 임포트\n\n## 4. UI 구현\n\n### 4.1 임포트 버튼 및 모달\n- [x] 4.1.1 Settings > Integrations에 \"Import from .env\" 버튼 추가\n- [x] 4.1.2 임포트 미리보기 모달 컴포넌트\n- [x] 4.1.3 서비스별 체크박스 선택 UI\n- [x] 4.1.4 중복 계정 경고 표시", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1223", "text": "### 4.1 임포트 버튼 및 모달\n- [x] 4.1.1 Settings > Integrations에 \"Import from .env\" 버튼 추가\n- [x] 4.1.2 임포트 미리보기 모달 컴포넌트\n- [x] 4.1.3 서비스별 체크박스 선택 UI\n- [x] 4.1.4 중복 계정 경고 표시\n\n### 4.2 프로젝트 상세 페이지\n- [x] 4.2.1 프로젝트 Integrations 섹션에 \"Import\" 버튼 추가\n- [x] 4.2.2 환경별 .env 파일 선택 기능\n\n## 5. 테스트", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1224", "text": "### 4.2 프로젝트 상세 페이지\n- [x] 4.2.1 프로젝트 Integrations 섹션에 \"Import\" 버튼 추가\n- [x] 4.2.2 환경별 .env 파일 선택 기능\n\n## 5. 테스트\n\n### 5.1 단위 테스트\n- [x] 5.1.1 env-parser 파싱 테스트\n- [x] 5.1.2 service-patterns 매칭 테스트\n- [x] 5.1.3 다양한 .env 형식 테스트 (주석, 따옴표, 멀티라인 등)", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1225", "text": "# env-auto-import Specification\n\n## Purpose\n\n프로젝트의 `.env` 파일에서 서비스 계정과 환경변수를 자동으로 감지하고 Integration Hub에 등록하는 기능을 제공한다.\n\n## ADDED Requirements\n\n### Requirement: Environment Variable Scanning\n\n시스템은 프로젝트 디렉토리에서 환경변수 파일을 스캔하고 알려진 서비스 패턴을 감지할 수 있어야 한다(SHALL).\n\n지원하는 환경변수 파일:\n- `.env`\n- `.env.local`\n- `.env.development`\n- `.env.production`\n- `.env.*.local`\n\n#### Scenario: 단일 .env 파일 스캔", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1226", "text": "### Requirement: Environment Variable Scanning\n\n시스템은 프로젝트 디렉토리에서 환경변수 파일을 스캔하고 알려진 서비스 패턴을 감지할 수 있어야 한다(SHALL).\n\n지원하는 환경변수 파일:\n- `.env`\n- `.env.local`\n- `.env.development`\n- `.env.production`\n- `.env.*.local`\n\n#### Scenario: 단일 .env 파일 스캔\n\n- **GIVEN** 프로젝트 루트에 `.env` 파일이 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 파일이 파싱되고 알려진 서비스 패턴이 감지된다\n\n#### Scenario: 여러 .env 파일 스캔", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1227", "text": "#### Scenario: 단일 .env 파일 스캔\n\n- **GIVEN** 프로젝트 루트에 `.env` 파일이 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 파일이 파싱되고 알려진 서비스 패턴이 감지된다\n\n#### Scenario: 여러 .env 파일 스캔\n\n- **GIVEN** `.env`와 `.env.local` 파일이 모두 존재한다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 모든 파일이 스캔되고 결과가 파일별로 그룹화된다\n\n#### Scenario: .env 파일 없음", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1228", "text": "#### Scenario: 여러 .env 파일 스캔\n\n- **GIVEN** `.env`와 `.env.local` 파일이 모두 존재한다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 모든 파일이 스캔되고 결과가 파일별로 그룹화된다\n\n#### Scenario: .env 파일 없음\n\n- **GIVEN** 프로젝트에 `.env*` 파일이 없다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 빈 결과가 반환되고 적절한 메시지가 표시된다\n\n---\n\n### Requirement: Service Pattern Recognition\n\n시스템은 환경변수 이름과 값을 분석하여 알려진 서비스를 자동으로 인식해야 한다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1229", "text": "#### Scenario: .env 파일 없음\n\n- **GIVEN** 프로젝트에 `.env*` 파일이 없다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 빈 결과가 반환되고 적절한 메시지가 표시된다\n\n---\n\n### Requirement: Service Pattern Recognition\n\n시스템은 환경변수 이름과 값을 분석하여 알려진 서비스를 자동으로 인식해야 한다(SHALL).\n\n지원하는 서비스:\n- **인증/Git**: GitHub, GitLab, Bitbucket\n- **BaaS**: Supabase, Firebase, PocketBase, Appwrite\n- **배포**: Vercel, Netlify, Cloudflare, AWS, GCP, Azure\n- **모니터링**: Sentry, LogRocket, DataDog\n- **결제**: Stripe, PayPal,", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1230", "text": "지원하는 서비스:\n- **인증/Git**: GitHub, GitLab, Bitbucket\n- **BaaS**: Supabase, Firebase, PocketBase, Appwrite\n- **배포**: Vercel, Netlify, Cloudflare, AWS, GCP, Azure\n- **모니터링**: Sentry, LogRocket, DataDog\n- **결제**: Stripe, PayPal, Paddle\n- **AI/ML**: OpenAI, Anthropic, Cohere, Replicate, HuggingFace\n- **데이터베이스**: PostgreSQL, MySQL, MongoDB, Redis, PlanetScale, Neon, Upstash\n- **이메일**: SendGrid, Resend, Postmark, Mailgun\n- **인증 서비스**: Clerk, Auth0, NextAuth, Supabase Auth\n- **메시징**: Twilio, Vonage\n- **스토리지**: S3, Cloudflare R2, Uploadthing\n- **검색**: Algolia, Typesense,", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1231", "text": "Anthropic, Cohere, Replicate, HuggingFace\n- **데이터베이스**: PostgreSQL, MySQL, MongoDB, Redis, PlanetScale, Neon, Upstash\n- **이메일**: SendGrid, Resend, Postmark, Mailgun\n- **인증 서비스**: Clerk, Auth0, NextAuth, Supabase Auth\n- **메시징**: Twilio, Vonage\n- **스토리지**: S3, Cloudflare R2, Uploadthing\n- **검색**: Algolia, Typesense, Meilisearch\n\n#### Scenario: Supabase 자동 감지\n\n- **GIVEN** `.env` 파일에 `SUPABASE_URL`과 `SUPABASE_ANON_KEY`가 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** Supabase 서비스가 감지되고 해당 credential이 추출된다\n\n#### Scenario: Next.js 접두사 처리", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1232", "text": "Cloudflare R2, Uploadthing\n- **검색**: Algolia, Typesense, Meilisearch\n\n#### Scenario: Supabase 자동 감지\n\n- **GIVEN** `.env` 파일에 `SUPABASE_URL`과 `SUPABASE_ANON_KEY`가 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** Supabase 서비스가 감지되고 해당 credential이 추출된다\n\n#### Scenario: Next.js 접두사 처리\n\n- **GIVEN** `.env` 파일에 `NEXT_PUBLIC_SUPABASE_URL`이 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** `NEXT_PUBLIC_` 접두사를 제거하고 Supabase로 인식한다\n\n#### Scenario: 여러 서비스 동시 감지", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1233", "text": "#### Scenario: Next.js 접두사 처리\n\n- **GIVEN** `.env` 파일에 `NEXT_PUBLIC_SUPABASE_URL`이 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** `NEXT_PUBLIC_` 접두사를 제거하고 Supabase로 인식한다\n\n#### Scenario: 여러 서비스 동시 감지\n\n- **GIVEN** `.env` 파일에 GitHub, Supabase, Stripe 관련 변수가 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 세 서비스가 모두 개별적으로 감지된다\n\n#### Scenario: DATABASE_URL 자동 분류", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1234", "text": "#### Scenario: 여러 서비스 동시 감지\n\n- **GIVEN** `.env` 파일에 GitHub, Supabase, Stripe 관련 변수가 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 세 서비스가 모두 개별적으로 감지된다\n\n#### Scenario: DATABASE_URL 자동 분류\n\n- **GIVEN** `DATABASE_URL=postgres://...` 형식의 변수가 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** URL 스키마를 분석하여 PostgreSQL로 분류된다\n\n---\n\n### Requirement: Import Preview\n\n시스템은 임포트 전에 감지된 서비스 목록을 미리보기로 표시해야 한다(SHALL).\n\n#### Scenario: 미리보기 표시", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1235", "text": "---\n\n### Requirement: Import Preview\n\n시스템은 임포트 전에 감지된 서비스 목록을 미리보기로 표시해야 한다(SHALL).\n\n#### Scenario: 미리보기 표시\n\n- **GIVEN** 스캔 결과에 3개의 서비스가 감지되었다\n- **WHEN** 임포트 미리보기를 요청한다\n- **THEN** 각 서비스별로 감지된 credential과 등록 여부 선택 UI가 표시된다\n\n#### Scenario: 기존 계정 중복 감지", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1236", "text": "#### Scenario: 미리보기 표시\n\n- **GIVEN** 스캔 결과에 3개의 서비스가 감지되었다\n- **WHEN** 임포트 미리보기를 요청한다\n- **THEN** 각 서비스별로 감지된 credential과 등록 여부 선택 UI가 표시된다\n\n#### Scenario: 기존 계정 중복 감지\n\n- **GIVEN** 스캔 결과에 이미 등록된 GitHub 계정과 동일한 username이 감지되었다\n- **WHEN** 임포트 미리보기를 표시한다\n- **THEN** 해당 항목에 \"이미 등록됨\" 경고가 표시되고 업데이트 옵션이 제공된다\n\n#### Scenario: 민감 정보 마스킹", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1237", "text": "#### Scenario: 기존 계정 중복 감지\n\n- **GIVEN** 스캔 결과에 이미 등록된 GitHub 계정과 동일한 username이 감지되었다\n- **WHEN** 임포트 미리보기를 표시한다\n- **THEN** 해당 항목에 \"이미 등록됨\" 경고가 표시되고 업데이트 옵션이 제공된다\n\n#### Scenario: 민감 정보 마스킹\n\n- **GIVEN** 미리보기에 API 키가 포함되어 있다\n- **WHEN** 미리보기 화면을 표시한다\n- **THEN** 토큰과 키 값은 `sk-...****` 형태로 마스킹된다\n\n---\n\n### Requirement: Selective Import", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1238", "text": "#### Scenario: 민감 정보 마스킹\n\n- **GIVEN** 미리보기에 API 키가 포함되어 있다\n- **WHEN** 미리보기 화면을 표시한다\n- **THEN** 토큰과 키 값은 `sk-...****` 형태로 마스킹된다\n\n---\n\n### Requirement: Selective Import\n\n사용자는 감지된 서비스 중 원하는 항목만 선택하여 임포트할 수 있어야 한다(SHALL).\n\n#### Scenario: 부분 임포트\n\n- **GIVEN** 5개의 서비스가 감지되었다\n- **WHEN** 사용자가 2개만 선택하고 임포트한다\n- **THEN** 선택된 2개의 서비스만 등록되고 나머지는 무시된다", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1239", "text": "사용자는 감지된 서비스 중 원하는 항목만 선택하여 임포트할 수 있어야 한다(SHALL).\n\n#### Scenario: 부분 임포트\n\n- **GIVEN** 5개의 서비스가 감지되었다\n- **WHEN** 사용자가 2개만 선택하고 임포트한다\n- **THEN** 선택된 2개의 서비스만 등록되고 나머지는 무시된다\n\n#### Scenario: 기존 계정 업데이트\n\n- **GIVEN** 감지된 GitHub 계정이 이미 등록되어 있다\n- **WHEN** \"업데이트\" 옵션을 선택하고 임포트한다\n- **THEN** 기존 계정의 credential이 새 값으로 업데이트된다\n\n#### Scenario: 임포트 결과 표시", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1240", "text": "#### Scenario: 기존 계정 업데이트\n\n- **GIVEN** 감지된 GitHub 계정이 이미 등록되어 있다\n- **WHEN** \"업데이트\" 옵션을 선택하고 임포트한다\n- **THEN** 기존 계정의 credential이 새 값으로 업데이트된다\n\n#### Scenario: 임포트 결과 표시\n\n- **GIVEN** 임포트가 완료되었다\n- **WHEN** 결과를 확인한다\n- **THEN** 생성/업데이트/스킵된 항목 수가 표시된다\n\n---\n\n### Requirement: MCP Tool Integration\n\nAI 어시스턴트가 환경변수 스캔 및 임포트를 수행할 수 있는 MCP 도구를 제공해야 한다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1241", "text": "- **GIVEN** 임포트가 완료되었다\n- **WHEN** 결과를 확인한다\n- **THEN** 생성/업데이트/스킵된 항목 수가 표시된다\n\n---\n\n### Requirement: MCP Tool Integration\n\nAI 어시스턴트가 환경변수 스캔 및 임포트를 수행할 수 있는 MCP 도구를 제공해야 한다(SHALL).\n\n#### Scenario: MCP로 환경변수 스캔\n\n- **GIVEN** 프로젝트에 `.env` 파일이 있다\n- **WHEN** AI가 `integration_scan_env` 도구를 호출한다\n- **THEN** 감지된 서비스 목록이 반환된다 (credential 값은 마스킹)\n\n#### Scenario: MCP로 자동 임포트", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1242", "text": "#### Scenario: MCP로 환경변수 스캔\n\n- **GIVEN** 프로젝트에 `.env` 파일이 있다\n- **WHEN** AI가 `integration_scan_env` 도구를 호출한다\n- **THEN** 감지된 서비스 목록이 반환된다 (credential 값은 마스킹)\n\n#### Scenario: MCP로 자동 임포트\n\n- **GIVEN** 스캔 결과에 2개의 서비스가 감지되었다\n- **WHEN** AI가 `integration_import_env` 도구를 호출한다\n- **THEN** 감지된 서비스가 자동으로 등록되고 결과가 반환된다\n\n---\n\n### Requirement: Extended Service Types\n\n시스템은 기본 제공 서비스 타입 외에 확장된 서비스 타입을 지원해야 한다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1243", "text": "- **GIVEN** 스캔 결과에 2개의 서비스가 감지되었다\n- **WHEN** AI가 `integration_import_env` 도구를 호출한다\n- **THEN** 감지된 서비스가 자동으로 등록되고 결과가 반환된다\n\n---\n\n### Requirement: Extended Service Types\n\n시스템은 기본 제공 서비스 타입 외에 확장된 서비스 타입을 지원해야 한다(SHALL).\n\n기존 타입: `github`, `supabase`, `vercel`, `sentry`, `custom`\n\n확장 타입:\n- `firebase`, `aws`, `gcp`, `azure`\n- `stripe`, `openai`, `anthropic`\n- `mongodb`, `postgresql`, `redis`\n- `sendgrid`, `resend`, `twilio`\n- `clerk`, `auth0`\n\n#### Scenario: 새 서비스 타입 등록", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1244", "text": "기존 타입: `github`, `supabase`, `vercel`, `sentry`, `custom`\n\n확장 타입:\n- `firebase`, `aws`, `gcp`, `azure`\n- `stripe`, `openai`, `anthropic`\n- `mongodb`, `postgresql`, `redis`\n- `sendgrid`, `resend`, `twilio`\n- `clerk`, `auth0`\n\n#### Scenario: 새 서비스 타입 등록\n\n- **GIVEN** OpenAI API 키가 감지되었다\n- **WHEN** 임포트를 실행한다\n- **THEN** `openai` 타입의 서비스 계정이 생성된다\n\n#### Scenario: Custom 타입 폴백", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1245", "text": "#### Scenario: 새 서비스 타입 등록\n\n- **GIVEN** OpenAI API 키가 감지되었다\n- **WHEN** 임포트를 실행한다\n- **THEN** `openai` 타입의 서비스 계정이 생성된다\n\n#### Scenario: Custom 타입 폴백\n\n- **GIVEN** 알려지지 않은 패턴의 환경변수가 있다\n- **WHEN** 수동으로 임포트를 요청한다\n- **THEN** `custom` 타입으로 등록할 수 있다", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-env-auto-import/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1246", "text": "# Design: add-project-local-settings\n\n## Architecture Overview\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                        MCP Tools                            │\n│  integration_context, integration_get_env, ...              │\n└─────────────────────────────┬───────────────────────────────┘\n                              │\n                              ▼\n┌─────────────────────────────────────────────────────────────┐\n│                   Settings Resolver                         │\n│  1. Check project/.zyflow/ (local)                         │\n│  2.", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1247", "text": "Fallback to ~/.zyflow/integrations.db (global)         │\n└──────────────┬────────────────────────────┬─────────────────┘\n               │                            │\n               ▼                            ▼\n┌──────────────────────────┐  ┌──────────────────────────────┐\n│   Local Settings         │  │   Global Settings            │\n│   프로젝트/.zyflow/       │  │   ~/.zyflow/                 │\n│                          │  │                              │\n│   ├── settings.json      │  │   ├── integrations.db        │\n│   ├── environments/      │  │   │   ├── service_accounts   │\n│   │   ├── local.env      │  │   │   └── (legacy data)      │\n│   │   └── staging.env    │  │   └── .master-key            │\n│   └── test-accounts.json │  │                              │\n└──────────────────────────┘  └──────────────────────────────┘\n```\n\n## File Formats\n\n### settings.json", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1248", "text": "## File Formats\n\n### settings.json\n\n프로젝트가 어떤 전역 계정을 사용할지 매핑:\n\n```json\n{\n  \"version\": 1,\n  \"integrations\": {\n    \"github\": \"account-uuid-1\",\n    \"supabase\": \"account-uuid-2\"\n  },\n  \"defaultEnvironment\": \"local\",\n  \"createdAt\": \"2024-12-05T00:00:00Z\",\n  \"updatedAt\": \"2024-12-05T00:00:00Z\"\n}\n```\n\n### environments/*.env\n\n표준 dotenv 형식 (암호화 없음, .gitignore 권장):\n\n```env\n# local.env\nDATABASE_URL=postgresql://localhost:5432/mydb\nAPI_BASE_URL=http://localhost:3000\nDEBUG=true\n```\n\n### test-accounts.json\n\n테스트 계정 (비밀번호 암호화):", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1249", "text": "### environments/*.env\n\n표준 dotenv 형식 (암호화 없음, .gitignore 권장):\n\n```env\n# local.env\nDATABASE_URL=postgresql://localhost:5432/mydb\nAPI_BASE_URL=http://localhost:3000\nDEBUG=true\n```\n\n### test-accounts.json\n\n테스트 계정 (비밀번호 암호화):\n\n```json\n{\n  \"version\": 1,\n  \"accounts\": [\n    {\n      \"id\": \"uuid\",\n      \"role\": \"admin\",\n      \"email\": \"admin@test.com\",\n      \"password\": \"encrypted:...\",\n      \"description\": \"관리자 테스트 계정\"\n    }\n  ]\n}\n```\n\n## Settings Resolution Flow", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1250", "text": "### test-accounts.json\n\n테스트 계정 (비밀번호 암호화):\n\n```json\n{\n  \"version\": 1,\n  \"accounts\": [\n    {\n      \"id\": \"uuid\",\n      \"role\": \"admin\",\n      \"email\": \"admin@test.com\",\n      \"password\": \"encrypted:...\",\n      \"description\": \"관리자 테스트 계정\"\n    }\n  ]\n}\n```\n\n## Settings Resolution Flow\n\n```\n┌─────────────────────────────────────────────────────────┐\n│ Request: Get project integration context                │\n│ Input: projectPath = \"/Users/hansoo/project\"           │\n└─────────────────────────────┬───────────────────────────┘\n                              │\n                              ▼\n┌─────────────────────────────────────────────────────────┐\n│ Step 1: Check local settings                            │\n│ Path: /Users/hansoo/project/.zyflow/settings.", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1251", "text": "zyflow/settings.json      │\n└─────────────────────────────┬───────────────────────────┘\n                              │\n              ┌───────────────┴───────────────┐\n              │                               │\n              ▼                               ▼\n┌─────────────────────┐          ┌─────────────────────────┐\n│ File exists         │          │ File not found          │\n│ → Use local config  │          │ → Check global DB       │\n└─────────────────────┘          └─────────────────────────┘\n              │                               │\n              ▼                               ▼\n┌─────────────────────────────────────────────────────────┐\n│ Step 2: Resolve account references                      │\n│ Local settings.json has account UUIDs                   │\n│ → Fetch actual credentials from global integrations.db │\n└─────────────────────────────────────────────────────────┘\n              │\n              ▼\n┌─────────────────────────────────────────────────────────┐\n│ Step 3: Load environment variables                      │\n│ From: project/.", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1252", "text": "json has account UUIDs                   │\n│ → Fetch actual credentials from global integrations.db │\n└─────────────────────────────────────────────────────────┘\n              │\n              ▼\n┌─────────────────────────────────────────────────────────┐\n│ Step 3: Load environment variables                      │\n│ From: project/.zyflow/environments/{active}.env        │\n│ Fallback: global DB environments table                  │\n└─────────────────────────────────────────────────────────┘\n              │\n              ▼\n┌─────────────────────────────────────────────────────────┐\n│ Step 4: Load test accounts                              │\n│ From: project/.zyflow/test-accounts.json               │\n│ Fallback: global DB test_accounts table                │\n└─────────────────────────────────────────────────────────┘\n```\n\n## Migration Strategy\n\n### Phase 1: Read Support (이번 변경)\n\n- 로컬 설정 파일 읽기 지원\n- 전역 DB와 병행 사용 (fallback)\n- 기존 API 동작 유지", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1253", "text": "zyflow/test-accounts.json               │\n│ Fallback: global DB test_accounts table                │\n└─────────────────────────────────────────────────────────┘\n```\n\n## Migration Strategy\n\n### Phase 1: Read Support (이번 변경)\n\n- 로컬 설정 파일 읽기 지원\n- 전역 DB와 병행 사용 (fallback)\n- 기존 API 동작 유지\n\n### Phase 2: Write Support\n\n- UI에서 \"Export to Project\" 기능\n- 새 프로젝트 생성 시 로컬 설정 기본 사용\n- MCP 도구에서 로컬 설정 쓰기\n\n### Phase 3: Full Migration (선택적)\n\n- 전역 DB에서 프로젝트별 데이터 제거\n- 로컬 전용 모드 옵션\n\n## API Changes\n\n### Existing APIs (변경 없음)", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1254", "text": "### Phase 2: Write Support\n\n- UI에서 \"Export to Project\" 기능\n- 새 프로젝트 생성 시 로컬 설정 기본 사용\n- MCP 도구에서 로컬 설정 쓰기\n\n### Phase 3: Full Migration (선택적)\n\n- 전역 DB에서 프로젝트별 데이터 제거\n- 로컬 전용 모드 옵션\n\n## API Changes\n\n### Existing APIs (변경 없음)\n\n- `GET /api/integrations/projects/:projectId/context`\n- `GET /api/integrations/projects/:projectId/environments`\n- `GET /api/integrations/projects/:projectId/test-accounts`\n\n### Internal Changes\n\n```typescript\n// Before\nasync function getProjectContext(projectId: string) {\n  return await db.query('SELECT * FROM project_integrations WHERE project_id = ?', [projectId]);\n}", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1255", "text": "## API Changes\n\n### Existing APIs (변경 없음)\n\n- `GET /api/integrations/projects/:projectId/context`\n- `GET /api/integrations/projects/:projectId/environments`\n- `GET /api/integrations/projects/:projectId/test-accounts`\n\n### Internal Changes\n\n```typescript\n// Before\nasync function getProjectContext(projectId: string) {\n  return await db.query('SELECT * FROM project_integrations WHERE project_id = ?', [projectId]);\n}\n\n// After\nasync function getProjectContext(projectId: string) {\n  // 1. Try local settings first\n  const localSettings = await loadLocalSettings(projectId);\n  if (localSettings) {\n    return resolveLocalContext(localSettings);\n  }\n\n  // 2. Fallback to global DB\n  return await db.query('SELECT * FROM project_integrations WHERE project_id = ?', [projectId]);\n}\n```\n\n## Security Considerations\n\n### 암호화 전략", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1256", "text": "// After\nasync function getProjectContext(projectId: string) {\n  // 1. Try local settings first\n  const localSettings = await loadLocalSettings(projectId);\n  if (localSettings) {\n    return resolveLocalContext(localSettings);\n  }\n\n  // 2. Fallback to global DB\n  return await db.query('SELECT * FROM project_integrations WHERE project_id = ?', [projectId]);\n}\n```\n\n## Security Considerations\n\n### 암호화 전략\n\n| 데이터 | 암호화 방식 | 키 위치 |\n|--------|------------|--------|\n| 서비스 계정 토큰 | AES-256-GCM | ~/.zyflow/.master-key |\n| 테스트 계정 비밀번호 | AES-256-GCM | ~/.zyflow/.master-key |\n| 환경 변수 | 없음 (plaintext) | .gitignore 권장 |\n\n### .gitignore 권장 패턴", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1257", "text": "## Security Considerations\n\n### 암호화 전략\n\n| 데이터 | 암호화 방식 | 키 위치 |\n|--------|------------|--------|\n| 서비스 계정 토큰 | AES-256-GCM | ~/.zyflow/.master-key |\n| 테스트 계정 비밀번호 | AES-256-GCM | ~/.zyflow/.master-key |\n| 환경 변수 | 없음 (plaintext) | .gitignore 권장 |\n\n### .gitignore 권장 패턴\n\n```gitignore\n# .zyflow 민감 정보\n.zyflow/environments/*.env\n.zyflow/test-accounts.json\n\n# 설정 구조는 공유 가능\n!.zyflow/settings.json\n```\n\n## Error Handling", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1258", "text": "### .gitignore 권장 패턴\n\n```gitignore\n# .zyflow 민감 정보\n.zyflow/environments/*.env\n.zyflow/test-accounts.json\n\n# 설정 구조는 공유 가능\n!.zyflow/settings.json\n```\n\n## Error Handling\n\n| 상황 | 동작 |\n|------|------|\n| 로컬 설정 파일 손상 | 전역 DB로 fallback, 경고 로그 |\n| 참조된 계정 UUID 없음 | null 반환, 경고 메시지 |\n| 환경 파일 없음 | 빈 환경 변수 반환 |\n| 권한 오류 | 에러 반환 (fallback 없음) |", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1259", "text": "# Proposal: add-project-local-settings\n\n## Summary\n\nIntegration 설정을 전역(`~/.zyflow/`)에서 프로젝트 로컬(`.zyflow/`)로 분리하여 프로젝트별 독립적인 설정 관리를 지원한다.\n\n## Motivation\n\n현재 모든 Integration 설정이 `~/.zyflow/integrations.db`에 전역으로 저장됨:\n- 프로젝트를 다른 머신으로 이동하면 설정을 다시 구성해야 함\n- 프로젝트별 설정이 전역 DB에 projectId로만 구분되어 관리가 어려움\n- 팀원과 설정 구조(민감 정보 제외)를 공유할 수 없음\n\n## Goals", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1260", "text": "## Motivation\n\n현재 모든 Integration 설정이 `~/.zyflow/integrations.db`에 전역으로 저장됨:\n- 프로젝트를 다른 머신으로 이동하면 설정을 다시 구성해야 함\n- 프로젝트별 설정이 전역 DB에 projectId로만 구분되어 관리가 어려움\n- 팀원과 설정 구조(민감 정보 제외)를 공유할 수 없음\n\n## Goals\n\n1. **이식성**: 프로젝트 이동 시 설정이 함께 이동\n2. **격리성**: 프로젝트별 독립적인 설정 저장\n3. **공유 가능**: `.gitignore`로 민감 정보만 제외하고 구조 공유\n4. **하위 호환성**: 기존 전역 설정 유지, 점진적 마이그레이션", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1261", "text": "## Goals\n\n1. **이식성**: 프로젝트 이동 시 설정이 함께 이동\n2. **격리성**: 프로젝트별 독립적인 설정 저장\n3. **공유 가능**: `.gitignore`로 민감 정보만 제외하고 구조 공유\n4. **하위 호환성**: 기존 전역 설정 유지, 점진적 마이그레이션\n\n## Non-Goals\n\n- 전역 계정 저장소 제거 (계정은 여러 프로젝트에서 공유)\n- 실시간 동기화 기능\n- 원격 설정 저장소\n\n## Proposed Solution\n\n### 하이브리드 저장 구조\n\n```\n~/.zyflow/                          # 전역 (유지)\n├── integrations.db                  # 서비스 계정 (GitHub PAT 등)\n└── .master-key                      # 암호화 키", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1262", "text": "## Non-Goals\n\n- 전역 계정 저장소 제거 (계정은 여러 프로젝트에서 공유)\n- 실시간 동기화 기능\n- 원격 설정 저장소\n\n## Proposed Solution\n\n### 하이브리드 저장 구조\n\n```\n~/.zyflow/                          # 전역 (유지)\n├── integrations.db                  # 서비스 계정 (GitHub PAT 등)\n└── .master-key                      # 암호화 키\n\n프로젝트/.zyflow/                    # 로컬 (신규)\n├── settings.json                    # 프로젝트 설정 (어떤 계정 사용할지)\n├── environments/                    # 환경 변수\n│   ├── local.env                    # .gitignore\n│   ├── staging.env                  # .gitignore\n│   └── production.env               # .gitignore\n└── test-accounts.json               # 테스트 계정 (암호화)\n```", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1263", "text": "프로젝트/.zyflow/                    # 로컬 (신규)\n├── settings.json                    # 프로젝트 설정 (어떤 계정 사용할지)\n├── environments/                    # 환경 변수\n│   ├── local.env                    # .gitignore\n│   ├── staging.env                  # .gitignore\n│   └── production.env               # .gitignore\n└── test-accounts.json               # 테스트 계정 (암호화)\n```\n\n### 데이터 분리 원칙", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1264", "text": "### 데이터 분리 원칙\n\n| 데이터 | 저장 위치 | 이유 |\n|--------|----------|------|\n| 서비스 계정 (토큰) | 전역 | 여러 프로젝트에서 공유, 중앙 관리 |\n| 계정 매핑 | 로컬 | 프로젝트가 어떤 계정 쓸지 |\n| 환경 변수 | 로컬 | 프로젝트별 고유 설정 |\n| 테스트 계정 | 로컬 | 프로젝트별 고유 |\n\n### API 변경\n\n기존 API 유지하되, 로컬 설정 우선 조회:\n1. 프로젝트 `.zyflow/` 확인\n2. 없으면 전역 DB에서 조회 (하위 호환)\n\n### 마이그레이션", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1265", "text": "### API 변경\n\n기존 API 유지하되, 로컬 설정 우선 조회:\n1. 프로젝트 `.zyflow/` 확인\n2. 없으면 전역 DB에서 조회 (하위 호환)\n\n### 마이그레이션\n\n- 기존 전역 DB 데이터는 유지\n- UI에서 \"Export to Project\" 버튼으로 로컬로 내보내기\n- 새 프로젝트는 기본적으로 로컬 설정 사용\n\n## Risks & Mitigations\n\n| Risk | Impact | Mitigation |\n|------|--------|------------|\n| 설정 파일 충돌 (git merge) | Medium | JSON 대신 개별 파일로 분리 |\n| 암호화 키 관리 복잡성 | Medium | 전역 마스터 키 계속 사용 |\n| 기존 사용자 혼란 | Low | 명확한 마이그레이션 UI 제공 |", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1266", "text": "## Risks & Mitigations\n\n| Risk | Impact | Mitigation |\n|------|--------|------------|\n| 설정 파일 충돌 (git merge) | Medium | JSON 대신 개별 파일로 분리 |\n| 암호화 키 관리 복잡성 | Medium | 전역 마스터 키 계속 사용 |\n| 기존 사용자 혼란 | Low | 명확한 마이그레이션 UI 제공 |\n\n## Success Criteria\n\n- [ ] 프로젝트 로컬에 설정 저장/조회 가능\n- [ ] 기존 전역 설정과 하위 호환\n- [ ] MCP 도구에서 로컬 설정 우선 조회\n- [ ] UI에서 로컬/전역 구분 표시", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1267", "text": "# Tasks: add-project-local-settings\n\n## 1. 로컬 설정 파일 구조 정의\n\n### 1.1 타입 및 스키마 정의\n- [x] `LocalSettings` 타입 정의 (settings.json 구조)\n- [x] `LocalTestAccounts` 타입 정의\n- [x] 환경 변수 파일 파서 구현\n\n### 1.2 파일 유틸리티\n- [x] `getProjectZyflowPath(projectPath)` - .zyflow 경로 반환\n- [x] `ensureZyflowDir(projectPath)` - 디렉토리 생성\n- [x] `loadLocalSettings(projectPath)` - settings.json 읽기\n- [x] `loadLocalEnvironment(projectPath, envName)` - .env 파일 읽기\n- [x] `loadLocalTestAccounts(projectPath)` - test-accounts.json 읽기\n\n## 2. Settings Resolver 구현", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1268", "text": "## 2. Settings Resolver 구현\n\n### 2.1 통합 리졸버\n- [x] `SettingsResolver` 클래스 생성\n- [x] 로컬 → 전역 fallback 로직 구현\n- [x] 계정 UUID → 실제 credential 해석\n\n### 2.2 기존 서비스 통합\n- [x] `getProjectIntegration()` 수정 - 로컬 우선 조회\n- [x] `getProjectEnvironments()` 수정 - 로컬 환경 파일 지원\n- [x] `getProjectTestAccounts()` 수정 - 로컬 파일 지원\n\n## 3. MCP 도구 업데이트", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1269", "text": "### 2.2 기존 서비스 통합\n- [x] `getProjectIntegration()` 수정 - 로컬 우선 조회\n- [x] `getProjectEnvironments()` 수정 - 로컬 환경 파일 지원\n- [x] `getProjectTestAccounts()` 수정 - 로컬 파일 지원\n\n## 3. MCP 도구 업데이트\n\n### 3.1 컨텍스트 조회 수정\n- [x] `integration_context` - 로컬 설정 우선 조회\n- [x] `integration_get_env` - 로컬 환경 파일 지원\n- [x] `integration_get_test_account` - 로컬 파일 지원\n\n### 3.2 새 도구 추가\n- [x] `integration_init_local` - 프로젝트에 .zyflow 초기화\n- [x] `integration_export_to_local` - 전역에서 로컬로 내보내기", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1270", "text": "### 3.2 새 도구 추가\n- [x] `integration_init_local` - 프로젝트에 .zyflow 초기화\n- [x] `integration_export_to_local` - 전역에서 로컬로 내보내기\n\n## 4. API 라우트 수정\n\n### 4.1 조회 API 수정\n- [x] `GET /projects/:projectId/context` - 로컬 우선\n- [x] `GET /projects/:projectId/environments` - 로컬 환경 파일 포함\n- [x] `GET /projects/:projectId/test-accounts` - 로컬 파일 포함\n\n### 4.2 설정 소스 표시\n- [x] 응답에 `source: 'local' | 'global'` 필드 추가\n- [x] 하이브리드 상태 표시 (일부 로컬, 일부 전역)\n\n## 5. UI 업데이트", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1271", "text": "### 4.2 설정 소스 표시\n- [x] 응답에 `source: 'local' | 'global'` 필드 추가\n- [x] 하이브리드 상태 표시 (일부 로컬, 일부 전역)\n\n## 5. UI 업데이트\n\n### 5.1 설정 소스 표시\n- [x] 프로젝트 설정에서 로컬/전역 배지 표시\n- [x] 환경 목록에서 소스 구분\n\n### 5.2 내보내기 기능\n- [x] \"Export to Project\" 버튼 추가\n- [x] 내보내기 확인 다이얼로그\n- [x] 내보내기 결과 표시\n\n## 6. 테스트 및 문서", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1272", "text": "### 5.1 설정 소스 표시\n- [x] 프로젝트 설정에서 로컬/전역 배지 표시\n- [x] 환경 목록에서 소스 구분\n\n### 5.2 내보내기 기능\n- [x] \"Export to Project\" 버튼 추가\n- [x] 내보내기 확인 다이얼로그\n- [x] 내보내기 결과 표시\n\n## 6. 테스트 및 문서\n\n### 6.1 테스트\n- [x] 로컬 설정 파일 읽기 테스트\n- [x] Fallback 로직 테스트\n- [x] 마이그레이션 시나리오 테스트\n\n### 6.2 문서\n- [x] .zyflow 디렉토리 구조 문서화\n- [x] .gitignore 권장 패턴 문서화", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1273", "text": "# integration-hub Spec Delta\n\n## ADDED Requirements\n\n### Requirement: Project Local Settings\n\n시스템은 프로젝트 디렉토리 내 `.zyflow/` 폴더에 설정을 저장하고 조회할 수 있어야 한다(SHALL).\n\n로컬 설정은 다음 파일로 구성된다(MUST):\n- `settings.json` - 계정 매핑 및 기본 환경 설정\n- `environments/*.env` - 환경별 변수 파일\n- `test-accounts.json` - 테스트 계정 (암호화)\n\n#### Scenario: 로컬 설정 초기화", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1274", "text": "로컬 설정은 다음 파일로 구성된다(MUST):\n- `settings.json` - 계정 매핑 및 기본 환경 설정\n- `environments/*.env` - 환경별 변수 파일\n- `test-accounts.json` - 테스트 계정 (암호화)\n\n#### Scenario: 로컬 설정 초기화\n\n- **GIVEN** 프로젝트 \"/Users/hansoo/myproject\"가 있다\n- **WHEN** `integration_init_local` 도구를 호출한다\n- **THEN** `/Users/hansoo/myproject/.zyflow/` 디렉토리가 생성된다\n- **AND** 기본 `settings.json` 파일이 생성된다\n\n#### Scenario: 로컬 설정 우선 조회", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1275", "text": "#### Scenario: 로컬 설정 초기화\n\n- **GIVEN** 프로젝트 \"/Users/hansoo/myproject\"가 있다\n- **WHEN** `integration_init_local` 도구를 호출한다\n- **THEN** `/Users/hansoo/myproject/.zyflow/` 디렉토리가 생성된다\n- **AND** 기본 `settings.json` 파일이 생성된다\n\n#### Scenario: 로컬 설정 우선 조회\n\n- **GIVEN** 프로젝트에 `.zyflow/settings.json`이 있다\n- **AND** 전역 DB에도 해당 프로젝트 설정이 있다\n- **WHEN** `integration_context` 도구를 호출한다\n- **THEN** 로컬 설정이 우선적으로 반환된다\n- **AND** 응답에 `source: \"local\"` 필드가 포함된다\n\n#### Scenario: 전역 설정 Fallback", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1276", "text": "#### Scenario: 로컬 설정 우선 조회\n\n- **GIVEN** 프로젝트에 `.zyflow/settings.json`이 있다\n- **AND** 전역 DB에도 해당 프로젝트 설정이 있다\n- **WHEN** `integration_context` 도구를 호출한다\n- **THEN** 로컬 설정이 우선적으로 반환된다\n- **AND** 응답에 `source: \"local\"` 필드가 포함된다\n\n#### Scenario: 전역 설정 Fallback\n\n- **GIVEN** 프로젝트에 `.zyflow/` 폴더가 없다\n- **AND** 전역 DB에 해당 프로젝트 설정이 있다\n- **WHEN** `integration_context` 도구를 호출한다\n- **THEN** 전역 DB에서 설정이 반환된다\n- **AND** 응답에 `source: \"global\"` 필드가 포함된다\n\n---\n\n### Requirement: Local Environment Files", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1277", "text": "#### Scenario: 전역 설정 Fallback\n\n- **GIVEN** 프로젝트에 `.zyflow/` 폴더가 없다\n- **AND** 전역 DB에 해당 프로젝트 설정이 있다\n- **WHEN** `integration_context` 도구를 호출한다\n- **THEN** 전역 DB에서 설정이 반환된다\n- **AND** 응답에 `source: \"global\"` 필드가 포함된다\n\n---\n\n### Requirement: Local Environment Files\n\n시스템은 프로젝트 로컬의 `.env` 파일에서 환경 변수를 읽을 수 있어야 한다(SHALL).\n\n#### Scenario: 로컬 환경 변수 조회", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1278", "text": "---\n\n### Requirement: Local Environment Files\n\n시스템은 프로젝트 로컬의 `.env` 파일에서 환경 변수를 읽을 수 있어야 한다(SHALL).\n\n#### Scenario: 로컬 환경 변수 조회\n\n- **GIVEN** 프로젝트에 `.zyflow/environments/local.env` 파일이 있다\n- **AND** 파일에 `DATABASE_URL=postgres://localhost/db`가 정의되어 있다\n- **WHEN** `integration_get_env` 도구를 호출한다\n- **THEN** `DATABASE_URL` 변수가 반환된다\n\n#### Scenario: 환경 파일 선택\n\n- **GIVEN** 프로젝트에 `local.env`, `staging.env`, `production.env`가 있다\n- **AND** `settings.json`의 `defaultEnvironment`가 \"staging\"이다\n- **WHEN** envId 없이 `integration_get_env`를 호출한다\n- **THEN** `staging.env`의 변수가 반환된다", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1279", "text": "#### Scenario: 환경 파일 선택\n\n- **GIVEN** 프로젝트에 `local.env`, `staging.env`, `production.env`가 있다\n- **AND** `settings.json`의 `defaultEnvironment`가 \"staging\"이다\n- **WHEN** envId 없이 `integration_get_env`를 호출한다\n- **THEN** `staging.env`의 변수가 반환된다\n\n---\n\n### Requirement: Export to Local\n\n시스템은 전역 DB의 설정을 프로젝트 로컬로 내보낼 수 있어야 한다(SHALL).\n\n#### Scenario: 전역 설정 내보내기", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1280", "text": "---\n\n### Requirement: Export to Local\n\n시스템은 전역 DB의 설정을 프로젝트 로컬로 내보낼 수 있어야 한다(SHALL).\n\n#### Scenario: 전역 설정 내보내기\n\n- **GIVEN** 전역 DB에 프로젝트 \"myproject\"의 설정이 있다\n- **WHEN** UI에서 \"Export to Project\" 버튼을 클릭한다\n- **THEN** 프로젝트의 `.zyflow/` 폴더에 설정 파일이 생성된다\n- **AND** 환경 변수는 개별 `.env` 파일로 저장된다\n- **AND** 테스트 계정은 암호화되어 저장된다\n\n#### Scenario: MCP 도구로 내보내기", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1281", "text": "- **GIVEN** 전역 DB에 프로젝트 \"myproject\"의 설정이 있다\n- **WHEN** UI에서 \"Export to Project\" 버튼을 클릭한다\n- **THEN** 프로젝트의 `.zyflow/` 폴더에 설정 파일이 생성된다\n- **AND** 환경 변수는 개별 `.env` 파일로 저장된다\n- **AND** 테스트 계정은 암호화되어 저장된다\n\n#### Scenario: MCP 도구로 내보내기\n\n- **GIVEN** 전역 DB에 프로젝트 설정이 있다\n- **WHEN** `integration_export_to_local` 도구를 호출한다\n- **THEN** 로컬 설정 파일이 생성된다\n- **AND** 생성된 파일 목록이 반환된다\n\n## MODIFIED Requirements\n\n### Requirement: MCP Integration Tools", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1282", "text": "#### Scenario: MCP 도구로 내보내기\n\n- **GIVEN** 전역 DB에 프로젝트 설정이 있다\n- **WHEN** `integration_export_to_local` 도구를 호출한다\n- **THEN** 로컬 설정 파일이 생성된다\n- **AND** 생성된 파일 목록이 반환된다\n\n## MODIFIED Requirements\n\n### Requirement: MCP Integration Tools\n\n시스템은 AI 어시스턴트가 프로젝트 컨텍스트를 자동으로 조회할 수 있는 MCP 도구를 제공해야 한다(SHALL).\n\n기존 요구사항에 다음 시나리오를 추가한다:\n\n#### Scenario: 설정 소스 표시", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1283", "text": "## MODIFIED Requirements\n\n### Requirement: MCP Integration Tools\n\n시스템은 AI 어시스턴트가 프로젝트 컨텍스트를 자동으로 조회할 수 있는 MCP 도구를 제공해야 한다(SHALL).\n\n기존 요구사항에 다음 시나리오를 추가한다:\n\n#### Scenario: 설정 소스 표시\n\n- **GIVEN** 프로젝트에 로컬 설정이 있다\n- **WHEN** AI가 `integration_context` 도구를 호출한다\n- **THEN** 응답에 설정 소스(`local` 또는 `global`)가 포함된다\n\n#### Scenario: 하이브리드 설정 조회", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1284", "text": "기존 요구사항에 다음 시나리오를 추가한다:\n\n#### Scenario: 설정 소스 표시\n\n- **GIVEN** 프로젝트에 로컬 설정이 있다\n- **WHEN** AI가 `integration_context` 도구를 호출한다\n- **THEN** 응답에 설정 소스(`local` 또는 `global`)가 포함된다\n\n#### Scenario: 하이브리드 설정 조회\n\n- **GIVEN** 프로젝트의 계정 매핑은 로컬에 있다\n- **AND** 테스트 계정은 전역 DB에만 있다\n- **WHEN** `integration_context` 도구를 호출한다\n- **THEN** 두 소스의 데이터가 병합되어 반환된다\n- **AND** 각 섹션별 소스가 표시된다", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-local-settings/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1285", "text": "# Proposal: 프로젝트별 Settings 페이지 추가\n\n## 개요\n\n프로젝트별 Settings 페이지를 추가하여 프로젝트 고유 설정을 관리합니다. 기존 전역 Integrations 탭의 프로젝트별 기능을 이 페이지로 이동합니다.\n\n## 동기\n\n현재 Integrations는 전역 설정 페이지에 있어서:\n- 프로젝트별 설정과 전역 설정이 혼재\n- 프로젝트 로컬 설정(`.zyflow/`)과 전역 설정의 구분이 불명확\n- 향후 프로젝트별 추가 설정 확장이 어려움\n\n## 변경 사항\n\n### 1. 사이드바 구조 변경", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1286", "text": "## 동기\n\n현재 Integrations는 전역 설정 페이지에 있어서:\n- 프로젝트별 설정과 전역 설정이 혼재\n- 프로젝트 로컬 설정(`.zyflow/`)과 전역 설정의 구분이 불명확\n- 향후 프로젝트별 추가 설정 확장이 어려움\n\n## 변경 사항\n\n### 1. 사이드바 구조 변경\n\n프로젝트 확장 시 메뉴 순서:\n```\nProject Name (확장)\n├── Changes\n│   └── change-1\n│   └── change-2\n├── Inbox\n└── Settings ← 새로 추가\n```\n\n### 2. 프로젝트 Settings 페이지", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1287", "text": "프로젝트 확장 시 메뉴 순서:\n```\nProject Name (확장)\n├── Changes\n│   └── change-1\n│   └── change-2\n├── Inbox\n└── Settings ← 새로 추가\n```\n\n### 2. 프로젝트 Settings 페이지\n\nSettings 선택 시 표시되는 페이지:\n- **Integrations 섹션**: 기존 전역 Integrations의 프로젝트별 기능 이동\n  - GitHub, Supabase, Vercel, Sentry 연결 상태\n  - 프로젝트별 계정 매핑\n  - 환경 변수 (로컬 `.zyflow/environments/`)\n  - 테스트 계정\n  - 로컬/전역 설정 source 표시\n- 향후 확장: 프로젝트 메타데이터, 알림 설정 등", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1288", "text": "### 3. 전역 Settings 페이지 조정\n\n전역 Settings에서:\n- Projects 탭: 프로젝트 목록 및 경로 관리 (기존 유지)\n- Accounts 탭: 서비스 계정 관리 (새로 분리)\n  - GitHub, Supabase 등 계정 추가/삭제\n  - 전역 토큰 관리\n\n## 기술 스펙\n\n### 새 컴포넌트\n\n```typescript\n// src/components/settings/ProjectSettings.tsx\n// 프로젝트별 Settings 페이지\n\n// src/components/settings/ProjectIntegrations.tsx\n// 기존 Integrations 기능을 프로젝트 컨텍스트로 이동\n```\n\n### 상태 관리\n\n```typescript\n// useAppState에 selectedProjectSettings 추가\ntype AppState = {\n  // ... 기존 상태\n  selectedProjectSettings: string | null; // 프로젝트 ID\n};\n```", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1289", "text": "### 새 컴포넌트\n\n```typescript\n// src/components/settings/ProjectSettings.tsx\n// 프로젝트별 Settings 페이지\n\n// src/components/settings/ProjectIntegrations.tsx\n// 기존 Integrations 기능을 프로젝트 컨텍스트로 이동\n```\n\n### 상태 관리\n\n```typescript\n// useAppState에 selectedProjectSettings 추가\ntype AppState = {\n  // ... 기존 상태\n  selectedProjectSettings: string | null; // 프로젝트 ID\n};\n```\n\n### 라우팅\n\n사이드바에서 Settings 클릭 시:\n1. `selectedProjectSettings` 상태 설정\n2. StageContent에서 ProjectSettings 컴포넌트 렌더링\n\n## 마이그레이션", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1290", "text": "### 상태 관리\n\n```typescript\n// useAppState에 selectedProjectSettings 추가\ntype AppState = {\n  // ... 기존 상태\n  selectedProjectSettings: string | null; // 프로젝트 ID\n};\n```\n\n### 라우팅\n\n사이드바에서 Settings 클릭 시:\n1. `selectedProjectSettings` 상태 설정\n2. StageContent에서 ProjectSettings 컴포넌트 렌더링\n\n## 마이그레이션\n\n1. 기존 Integrations 탭의 프로젝트별 기능 → ProjectSettings로 이동\n2. 전역 Integrations → Accounts 탭으로 이름 변경\n3. 기존 API 엔드포인트 유지 (변경 없음)\n\n## UI/UX\n\n### 사이드바 아이콘\n- Settings: `Settings` 아이콘 (lucide-react)", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1291", "text": "## 마이그레이션\n\n1. 기존 Integrations 탭의 프로젝트별 기능 → ProjectSettings로 이동\n2. 전역 Integrations → Accounts 탭으로 이름 변경\n3. 기존 API 엔드포인트 유지 (변경 없음)\n\n## UI/UX\n\n### 사이드바 아이콘\n- Settings: `Settings` 아이콘 (lucide-react)\n\n### Settings 페이지 레이아웃\n```\n┌─────────────────────────────────────────────┐\n│ Project Settings: {project.name}            │\n├─────────────────────────────────────────────┤\n│ ▼ Integrations                              │\n│   ┌─────────────────────────────────────┐   │\n│   │ GitHub: connected (Local)           │   │\n│   │ Supabase: connected (Global)        │   │\n│   │ ...", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1292", "text": "### Settings 페이지 레이아웃\n```\n┌─────────────────────────────────────────────┐\n│ Project Settings: {project.name}            │\n├─────────────────────────────────────────────┤\n│ ▼ Integrations                              │\n│   ┌─────────────────────────────────────┐   │\n│   │ GitHub: connected (Local)           │   │\n│   │ Supabase: connected (Global)        │   │\n│   │ ...                                 │   │\n│   └─────────────────────────────────────┘   │\n│                                             │\n│   ▼ Environments                            │\n│   ┌─────────────────────────────────────┐   │\n│   │ local.env (3 variables)             │   │\n│   │ staging.", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1293", "text": "..                                 │   │\n│   └─────────────────────────────────────┘   │\n│                                             │\n│   ▼ Environments                            │\n│   ┌─────────────────────────────────────┐   │\n│   │ local.env (3 variables)             │   │\n│   │ staging.env (5 variables)           │   │\n│   └─────────────────────────────────────┘   │\n│                                             │\n│   ▼ Test Accounts                           │\n│   ┌─────────────────────────────────────┐   │\n│   │ admin@test.com (admin)              │   │\n│   │ user@test.com (user)                │   │\n│   └─────────────────────────────────────┘   │\n│                                             │\n│ ▶ More Settings (향후 확장)                  │\n└─────────────────────────────────────────────┘\n```\n\n## 영향 범위", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1294", "text": "com (admin)              │   │\n│   │ user@test.com (user)                │   │\n│   └─────────────────────────────────────┘   │\n│                                             │\n│ ▶ More Settings (향후 확장)                  │\n└─────────────────────────────────────────────┘\n```\n\n## 영향 범위\n\n### 수정 파일\n- `src/components/layout/FlowSidebar.tsx` - Settings 메뉴 추가\n- `src/components/flow/StageContent.tsx` - ProjectSettings 렌더링\n- `src/store/app-state.ts` - selectedProjectSettings 상태\n- `src/types/index.ts` - 타입 추가\n\n### 이동/리팩토링\n- `src/components/settings/ProjectsSettings.tsx` → 프로젝트 Integration 부분 분리\n\n### 새 파일\n- `src/components/settings/ProjectSettings.tsx`\n- `src/components/settings/ProjectIntegrations.tsx`\n\n## 제외 사항", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1295", "text": "### 이동/리팩토링\n- `src/components/settings/ProjectsSettings.tsx` → 프로젝트 Integration 부분 분리\n\n### 새 파일\n- `src/components/settings/ProjectSettings.tsx`\n- `src/components/settings/ProjectIntegrations.tsx`\n\n## 제외 사항\n\n- API 변경 없음 (기존 엔드포인트 재사용)\n- 데이터 구조 변경 없음\n- 전역 계정(Accounts) 페이지는 별도 제안으로 분리", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1296", "text": "# Tasks: add-project-settings-page\n\n## 1. 상태 관리 확장\n\n### 1.1 앱 상태 추가\n- [x] `SelectedItem` 타입에 `project-settings` 추가\n- [x] `FlowSidebar`에서 `handleSelectProjectSettings` 핸들러 추가\n\n## 2. 사이드바 수정\n\n### 2.1 Settings 메뉴 항목 추가\n- [x] `FlowSidebar.tsx`에 Settings 메뉴 항목 추가\n- [x] Inbox 아래에 Settings 배치 (순서: Changes → Inbox → Settings)\n- [x] Settings 아이콘 추가 (`Settings` from lucide-react)\n- [x] 클릭 시 `handleSelectProjectSettings(project.id)` 호출\n\n## 3. 프로젝트 Settings 페이지", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1297", "text": "## 2. 사이드바 수정\n\n### 2.1 Settings 메뉴 항목 추가\n- [x] `FlowSidebar.tsx`에 Settings 메뉴 항목 추가\n- [x] Inbox 아래에 Settings 배치 (순서: Changes → Inbox → Settings)\n- [x] Settings 아이콘 추가 (`Settings` from lucide-react)\n- [x] 클릭 시 `handleSelectProjectSettings(project.id)` 호출\n\n## 3. 프로젝트 Settings 페이지\n\n### 3.1 컴포넌트 생성\n- [x] `ProjectSettings.tsx` 생성 - 메인 Settings 페이지\n- [x] Integrations, Environments, Test Accounts 섹션 통합", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1298", "text": "## 3. 프로젝트 Settings 페이지\n\n### 3.1 컴포넌트 생성\n- [x] `ProjectSettings.tsx` 생성 - 메인 Settings 페이지\n- [x] Integrations, Environments, Test Accounts 섹션 통합\n\n### 3.2 Integrations 섹션 구현\n- [x] 서비스 연결 상태 표시 (GitHub, Supabase, Vercel, Sentry)\n- [x] 로컬/전역 source 배지 표시\n- [x] 계정 매핑 정보 표시\n\n### 3.3 Environments 섹션 구현\n- [x] 환경 목록 표시 (local, staging, production 등)\n- [x] 각 환경의 변수 유무 표시\n- [x] 로컬/전역 source 표시", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1299", "text": "### 3.3 Environments 섹션 구현\n- [x] 환경 목록 표시 (local, staging, production 등)\n- [x] 각 환경의 변수 유무 표시\n- [x] 로컬/전역 source 표시\n\n### 3.4 Test Accounts 섹션 구현\n- [x] 테스트 계정 목록 표시\n- [x] 역할별 표시 (admin, user 등)\n- [x] 로컬/전역 source 표시\n\n## 4. FlowContent 연동\n\n### 4.1 렌더링 조건 추가\n- [x] `selectedItem.type === 'project-settings'` 케이스 추가\n- [x] ProjectSettings 컴포넌트 렌더링", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1300", "text": "## 4. FlowContent 연동\n\n### 4.1 렌더링 조건 추가\n- [x] `selectedItem.type === 'project-settings'` 케이스 추가\n- [x] ProjectSettings 컴포넌트 렌더링\n\n### 4.2 상태 전환 처리\n- [x] 기존 프로젝트 전환 로직 활용 (activeProjectId 체크)\n\n## 5. 기존 코드 정리\n\n### 5.1 ProjectsSettings.tsx 리팩토링\n- [x] 프로젝트별 Integration 로직 분리 (선택적)\n- [x] 공통 컴포넌트 추출 (IntegrationBadges.tsx) (선택적)", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1301", "text": "### 4.2 상태 전환 처리\n- [x] 기존 프로젝트 전환 로직 활용 (activeProjectId 체크)\n\n## 5. 기존 코드 정리\n\n### 5.1 ProjectsSettings.tsx 리팩토링\n- [x] 프로젝트별 Integration 로직 분리 (선택적)\n- [x] 공통 컴포넌트 추출 (IntegrationBadges.tsx) (선택적)\n\n### 5.2 전역 Settings 탭 조정\n- [x] Integrations 탭 → Accounts 탭으로 이름 변경 (선택적)\n- [x] 프로젝트별 기능 안내 메시지 추가 (선택적)\n\n## 6. 타입 정의", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1302", "text": "### 5.2 전역 Settings 탭 조정\n- [x] Integrations 탭 → Accounts 탭으로 이름 변경 (선택적)\n- [x] 프로젝트별 기능 안내 메시지 추가 (선택적)\n\n## 6. 타입 정의\n\n### 6.1 타입 추가\n- [x] `SelectedItem` 타입에 `project-settings` 추가 (App.tsx)\n- [x] 기존 `SettingsSource`, `LocalSettingsStatus` 타입 재사용\n\n## 7. 테스트 및 검증\n\n### 7.1 기능 테스트\n- [x] TypeScript 타입 체크 통과\n- [x] ESLint 검사 통과 (새 파일)\n- [x] Settings 메뉴 클릭 동작 확인 (수동 테스트)\n- [x] 페이지 렌더링 확인 (수동 테스트)", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1303", "text": "## 7. 테스트 및 검증\n\n### 7.1 기능 테스트\n- [x] TypeScript 타입 체크 통과\n- [x] ESLint 검사 통과 (새 파일)\n- [x] Settings 메뉴 클릭 동작 확인 (수동 테스트)\n- [x] 페이지 렌더링 확인 (수동 테스트)\n\n### 7.2 UI 검증\n- [x] 로컬/전역 source 배지 표시 확인 (수동 테스트)\n- [x] 섹션 펼침/접힘 동작 확인 (수동 테스트)\n\n## 8. 추가 개선 (완료)", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1304", "text": "## 8. 추가 개선 (완료)\n\n### 8.1 서비스 계정 환경 선택 기능\n- [x] DB 스키마에 `service_accounts.environment` 컬럼 추가 (staging/production/null)\n- [x] 서버 API에 environment 필드 처리 추가 (create, update, list)\n- [x] 프론트엔드 타입 수정 (`AccountEnvironment` 타입, `ServiceAccount` 인터페이스)\n- [x] ServiceAccountDialog에 환경 선택 드롭다운 추가 (모든 환경/Staging/Production)\n- [x] ServiceAccountList에 환경 배지 표시 (Production: 빨간색, Staging: 노란색)", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1305", "text": "# UI Components Spec\n\n## ADDED Requirements\n\n### Requirement: 사이드바에 프로젝트 Settings 메뉴 추가\n\n시스템은 프로젝트 확장 시 Inbox 아래에 Settings 메뉴 항목을 추가해야 합니다(SHALL).\n\n**메뉴 순서**: Changes → Inbox → Settings\n\n#### Scenario: Settings 메뉴 클릭\n\n- Given: 프로젝트가 확장된 상태\n- When: Settings 메뉴 클릭\n- Then: 해당 프로젝트의 Settings 페이지가 StageContent에 표시됨\n\n#### Scenario: 다른 프로젝트 선택 시\n\n- Given: 프로젝트 A의 Settings 페이지가 표시된 상태\n- When: 프로젝트 B 선택\n- Then: Settings 상태가 초기화됨\n\n---\n\n### Requirement: ProjectSettings 페이지 컴포넌트", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/specs/ui-components/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1306", "text": "- Given: 프로젝트가 확장된 상태\n- When: Settings 메뉴 클릭\n- Then: 해당 프로젝트의 Settings 페이지가 StageContent에 표시됨\n\n#### Scenario: 다른 프로젝트 선택 시\n\n- Given: 프로젝트 A의 Settings 페이지가 표시된 상태\n- When: 프로젝트 B 선택\n- Then: Settings 상태가 초기화됨\n\n---\n\n### Requirement: ProjectSettings 페이지 컴포넌트\n\n시스템은 프로젝트별 설정을 관리하는 페이지 컴포넌트를 제공해야 합니다(SHALL).\n\n**구성 섹션**:\n- Integrations: 서비스 연결 상태\n- Environments: 환경 변수 파일\n- Test Accounts: 테스트 계정\n\n#### Scenario: Settings 페이지 렌더링", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/specs/ui-components/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1307", "text": "---\n\n### Requirement: ProjectSettings 페이지 컴포넌트\n\n시스템은 프로젝트별 설정을 관리하는 페이지 컴포넌트를 제공해야 합니다(SHALL).\n\n**구성 섹션**:\n- Integrations: 서비스 연결 상태\n- Environments: 환경 변수 파일\n- Test Accounts: 테스트 계정\n\n#### Scenario: Settings 페이지 렌더링\n\n- Given: 프로젝트 ID가 선택된 상태\n- When: ProjectSettings 컴포넌트 마운트\n- Then: 해당 프로젝트의 Integration 정보가 표시됨\n\n#### Scenario: 로컬/전역 source 표시", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/specs/ui-components/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1308", "text": "**구성 섹션**:\n- Integrations: 서비스 연결 상태\n- Environments: 환경 변수 파일\n- Test Accounts: 테스트 계정\n\n#### Scenario: Settings 페이지 렌더링\n\n- Given: 프로젝트 ID가 선택된 상태\n- When: ProjectSettings 컴포넌트 마운트\n- Then: 해당 프로젝트의 Integration 정보가 표시됨\n\n#### Scenario: 로컬/전역 source 표시\n\n- Given: 프로젝트에 로컬 설정(`.zyflow/`)이 있음\n- When: Settings 페이지 로드\n- Then: 각 항목에 \"Local\" 또는 \"Global\" 배지가 표시됨\n\n---\n\n### Requirement: Integrations 섹션\n\n시스템은 서비스별 연결 상태를 표시하는 섹션을 제공해야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/specs/ui-components/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1309", "text": "#### Scenario: 로컬/전역 source 표시\n\n- Given: 프로젝트에 로컬 설정(`.zyflow/`)이 있음\n- When: Settings 페이지 로드\n- Then: 각 항목에 \"Local\" 또는 \"Global\" 배지가 표시됨\n\n---\n\n### Requirement: Integrations 섹션\n\n시스템은 서비스별 연결 상태를 표시하는 섹션을 제공해야 합니다(SHALL).\n\n**표시 항목**:\n- GitHub 연결 상태\n- Supabase 연결 상태\n- Vercel 연결 상태\n- Sentry 연결 상태\n\n#### Scenario: 연결된 서비스 표시\n\n- Given: GitHub 계정이 프로젝트에 연결됨\n- When: Integrations 섹션 로드\n- Then: GitHub이 \"connected\" 상태로 표시됨", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/specs/ui-components/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1310", "text": "**표시 항목**:\n- GitHub 연결 상태\n- Supabase 연결 상태\n- Vercel 연결 상태\n- Sentry 연결 상태\n\n#### Scenario: 연결된 서비스 표시\n\n- Given: GitHub 계정이 프로젝트에 연결됨\n- When: Integrations 섹션 로드\n- Then: GitHub이 \"connected\" 상태로 표시됨\n\n#### Scenario: 미연결 서비스 표시\n\n- Given: Sentry 계정이 연결되지 않음\n- When: Integrations 섹션 로드\n- Then: Sentry가 \"not connected\" 상태로 표시됨\n\n---\n\n### Requirement: Environments 섹션\n\n시스템은 프로젝트 환경 변수 파일 목록을 표시하는 섹션을 제공해야 합니다(SHALL).\n\n#### Scenario: 환경 목록 표시", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/specs/ui-components/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1311", "text": "#### Scenario: 미연결 서비스 표시\n\n- Given: Sentry 계정이 연결되지 않음\n- When: Integrations 섹션 로드\n- Then: Sentry가 \"not connected\" 상태로 표시됨\n\n---\n\n### Requirement: Environments 섹션\n\n시스템은 프로젝트 환경 변수 파일 목록을 표시하는 섹션을 제공해야 합니다(SHALL).\n\n#### Scenario: 환경 목록 표시\n\n- Given: `.zyflow/environments/`에 local.env, staging.env 파일 존재\n- When: Environments 섹션 로드\n- Then: local, staging 환경이 목록에 표시됨\n\n#### Scenario: 환경 변수 개수 표시\n\n- Given: local.env에 5개의 변수 정의됨\n- When: Environments 섹션 로드\n- Then: \"local (5 variables)\"로 표시됨", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/specs/ui-components/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1312", "text": "#### Scenario: 환경 목록 표시\n\n- Given: `.zyflow/environments/`에 local.env, staging.env 파일 존재\n- When: Environments 섹션 로드\n- Then: local, staging 환경이 목록에 표시됨\n\n#### Scenario: 환경 변수 개수 표시\n\n- Given: local.env에 5개의 변수 정의됨\n- When: Environments 섹션 로드\n- Then: \"local (5 variables)\"로 표시됨\n\n---\n\n### Requirement: Test Accounts 섹션\n\n시스템은 테스트 계정 목록을 표시하는 섹션을 제공해야 합니다(SHALL).\n\n#### Scenario: 테스트 계정 목록 표시", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/specs/ui-components/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1313", "text": "#### Scenario: 환경 변수 개수 표시\n\n- Given: local.env에 5개의 변수 정의됨\n- When: Environments 섹션 로드\n- Then: \"local (5 variables)\"로 표시됨\n\n---\n\n### Requirement: Test Accounts 섹션\n\n시스템은 테스트 계정 목록을 표시하는 섹션을 제공해야 합니다(SHALL).\n\n#### Scenario: 테스트 계정 목록 표시\n\n- Given: test-accounts.json에 admin, user 계정 정의됨\n- When: Test Accounts 섹션 로드\n- Then: 두 계정이 역할과 함께 표시됨\n\n---\n\n## MODIFIED Requirements\n\n### Requirement: StageContent 렌더링 조건 추가\n\nStageContent는 selectedProjectSettings 상태에 따라 ProjectSettings 컴포넌트를 렌더링해야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/specs/ui-components/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1314", "text": "- Given: test-accounts.json에 admin, user 계정 정의됨\n- When: Test Accounts 섹션 로드\n- Then: 두 계정이 역할과 함께 표시됨\n\n---\n\n## MODIFIED Requirements\n\n### Requirement: StageContent 렌더링 조건 추가\n\nStageContent는 selectedProjectSettings 상태에 따라 ProjectSettings 컴포넌트를 렌더링해야 합니다(SHALL).\n\n#### Scenario: Settings 페이지 렌더링\n\n- Given: selectedProjectSettings가 설정됨\n- When: StageContent 렌더링\n- Then: ProjectSettings 컴포넌트가 표시됨\n\n#### Scenario: 다른 콘텐츠 선택 시\n\n- Given: Settings 페이지가 표시된 상태\n- When: Change 선택\n- Then: Change 페이지가 표시되고 Settings 상태 초기화됨\n\n---", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/specs/ui-components/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1315", "text": "#### Scenario: Settings 페이지 렌더링\n\n- Given: selectedProjectSettings가 설정됨\n- When: StageContent 렌더링\n- Then: ProjectSettings 컴포넌트가 표시됨\n\n#### Scenario: 다른 콘텐츠 선택 시\n\n- Given: Settings 페이지가 표시된 상태\n- When: Change 선택\n- Then: Change 페이지가 표시되고 Settings 상태 초기화됨\n\n---\n\n### Requirement: 앱 상태 확장\n\nAppState는 프로젝트 Settings 관련 상태를 포함해야 합니다(SHALL).\n\n#### Scenario: Settings 상태 설정\n\n- Given: 초기 상태 (selectedProjectSettings: null)\n- When: selectProjectSettings(\"project-123\") 호출\n- Then: selectedProjectSettings가 \"project-123\"으로 설정됨\n\n#### Scenario: Settings 상태 초기화", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/specs/ui-components/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1316", "text": "---\n\n### Requirement: 앱 상태 확장\n\nAppState는 프로젝트 Settings 관련 상태를 포함해야 합니다(SHALL).\n\n#### Scenario: Settings 상태 설정\n\n- Given: 초기 상태 (selectedProjectSettings: null)\n- When: selectProjectSettings(\"project-123\") 호출\n- Then: selectedProjectSettings가 \"project-123\"으로 설정됨\n\n#### Scenario: Settings 상태 초기화\n\n- Given: selectedProjectSettings가 설정된 상태\n- When: clearProjectSettings() 호출\n- Then: selectedProjectSettings가 null로 초기화됨", "metadata": {"file_path": "openspec/changes/archive/2025-12-06-add-project-settings-page/specs/ui-components/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1317", "text": "# Design: LangGraph + DeepAgents 통합\n\n## Context\n\nZyFlow는 현재 TypeScript 기반 MCP 서버로 OpenSpec 변경 관리를 지원합니다.\nLangGraph와 DeepAgents는 Python 생태계로, AI 에이전트 오케스트레이션에 특화되어 있습니다.\n두 시스템을 통합하여 OpenSpec 태스크를 자동 실행하는 에이전트 워크플로우를 구현합니다.\n\n### Stakeholders\n- 개발자: OpenSpec 태스크 자동 실행\n- AI 에이전트: 컨텍스트 인식 작업 수행\n- ZyFlow 시스템: 상태 동기화 및 모니터링\n\n## Goals / Non-Goals", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1318", "text": "### Stakeholders\n- 개발자: OpenSpec 태스크 자동 실행\n- AI 에이전트: 컨텍스트 인식 작업 수행\n- ZyFlow 시스템: 상태 동기화 및 모니터링\n\n## Goals / Non-Goals\n\n### Goals\n- OpenSpec 문서를 에이전트 컨텍스트로 활용\n- LangGraph StateGraph로 태스크 워크플로우 실행\n- 로컬 체크포인트로 실행 상태 영구 저장\n- ZyFlow UI에서 에이전트 상호작용\n\n### Non-Goals\n- LangSmith 클라우드 모니터링 연동\n- LangGraph Platform 클라우드 배포\n- 실시간 협업 기능 (단일 사용자 우선)\n\n## Architecture\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1319", "text": "### Non-Goals\n- LangSmith 클라우드 모니터링 연동\n- LangGraph Platform 클라우드 배포\n- 실시간 협업 기능 (단일 사용자 우선)\n\n## Architecture\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                     ZyFlow + LangGraph                       │\n├─────────────────────────────────────────────────────────────┤\n│                                                             │\n│  [ZyFlow React UI]", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1320", "text": "│\n├─────────────────────────────────────────────────────────────┤\n│                                                             │\n│  [ZyFlow React UI]                                          │\n│       │                                                     │\n│       ▼", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1321", "text": "React UI]                                          │\n│       │                                                     │\n│       ▼                                                     │\n│  [Express API Server]                                       │\n│       │", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1322", "text": "│\n│       ▼                                                     │\n│  [Express API Server]                                       │\n│       │                                                     │\n│       ├──────────────────┬──────────────────┐              │\n│       ▼", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1323", "text": "│\n│       │                                                     │\n│       ├──────────────────┬──────────────────┐              │\n│       ▼                  ▼                  ▼              │\n│  [MCP Server]      [FastAPI Bridge]    [WebSocket]         │\n│  (TypeScript)      (Python)", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1324", "text": "│\n│       ▼                  ▼                  ▼              │\n│  [MCP Server]      [FastAPI Bridge]    [WebSocket]         │\n│  (TypeScript)      (Python)            (실시간 업데이트)    │\n│       │                  │                                  │\n│       │", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1325", "text": "(TypeScript)      (Python)            (실시간 업데이트)    │\n│       │                  │                                  │\n│       │                  ▼                                  │\n│       │           ┌─────────────────────────┐              │\n│       │           │      LangGraph", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1326", "text": "│                  ▼                                  │\n│       │           ┌─────────────────────────┐              │\n│       │           │      LangGraph          │              │\n│       │           │  ┌─────────────────┐   │              │\n│       │           │  │   StateGraph    │   │", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1327", "text": "│           │      LangGraph          │              │\n│       │           │  ┌─────────────────┐   │              │\n│       │           │  │   StateGraph    │   │              │\n│       │           │  │  ┌───┐ ┌───┐   │   │              │\n│       │           │  │  │T1 │→│T2 │→...", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1328", "text": "│  │   StateGraph    │   │              │\n│       │           │  │  ┌───┐ ┌───┐   │   │              │\n│       │           │  │  │T1 │→│T2 │→...│   │              │\n│       │           │  │  └───┘ └───┘   │   │              │\n│       │           │  └─────────────────┘", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1329", "text": "│  │  │T1 │→│T2 │→...│   │              │\n│       │           │  │  └───┘ └───┘   │   │              │\n│       │           │  └─────────────────┘   │              │\n│       │           │         │              │              │\n│       │           │         ▼", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1330", "text": "│           │  └─────────────────┘   │              │\n│       │           │         │              │              │\n│       │           │         ▼              │              │\n│       │           │  ┌─────────────────┐   │              │\n│       │           │  │  DeepAgent      │", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1331", "text": "│           │         ▼              │              │\n│       │           │  ┌─────────────────┐   │              │\n│       │           │  │  DeepAgent      │   │              │\n│       │           │  │  - TodoList     │   │              │\n│       │           │  │  - Filesystem   │   │", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1332", "text": "│           │  │  DeepAgent      │   │              │\n│       │           │  │  - TodoList     │   │              │\n│       │           │  │  - Filesystem   │   │              │\n│       │           │  │  - SubAgents    │   │              │\n│       │           │  │  - OpenSpec MW  │   │              │\n│", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1333", "text": "│  │  - Filesystem   │   │              │\n│       │           │  │  - SubAgents    │   │              │\n│       │           │  │  - OpenSpec MW  │   │              │\n│       │           │  └─────────────────┘   │              │\n│       │           └─────────────────────────┘              │\n│       │", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1334", "text": "- OpenSpec MW  │   │              │\n│       │           │  └─────────────────┘   │              │\n│       │           └─────────────────────────┘              │\n│       │                  │                                  │\n│       │                  ▼", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1335", "text": "│\n│       │                  │                                  │\n│       │                  ▼                                  │\n│       │           [SqliteSaver]                             │\n│       │           (체크포인트)", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1336", "text": "│\n│       │           [SqliteSaver]                             │\n│       │           (체크포인트)                               │\n│       │                  │                                  │\n│       ▼                  ▼", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1337", "text": "│\n│       │                  │                                  │\n│       ▼                  ▼                                  │\n│  [OpenSpec Files]  [Agent State DB]                        │\n│  tasks.", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1338", "text": "│\n│       ▼                  ▼                                  │\n│  [OpenSpec Files]  [Agent State DB]                        │\n│  tasks.md 업데이트   상태 영구 저장                          │\n│                                                             │\n└─────────────────────────────────────────────────────────────┘\n```\n\n## Decisions\n\n### 1. Python 브릿지 방식: FastAPI HTTP 서버\n\n**선택**: FastAPI를 별도 프로세스로 실행, HTTP로 통신", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1339", "text": "│\n│  [OpenSpec Files]  [Agent State DB]                        │\n│  tasks.md 업데이트   상태 영구 저장                          │\n│                                                             │\n└─────────────────────────────────────────────────────────────┘\n```\n\n## Decisions\n\n### 1. Python 브릿지 방식: FastAPI HTTP 서버\n\n**선택**: FastAPI를 별도 프로세스로 실행, HTTP로 통신\n\n**대안 고려**:\n- subprocess 직접 호출: 매 호출마다 Python 시작 오버헤드\n- gRPC: 설정 복잡, 이 규모에서 과도함\n- 임베디드 Python (PyO3): Rust 필요, 복잡도 증가", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1340", "text": "## Decisions\n\n### 1. Python 브릿지 방식: FastAPI HTTP 서버\n\n**선택**: FastAPI를 별도 프로세스로 실행, HTTP로 통신\n\n**대안 고려**:\n- subprocess 직접 호출: 매 호출마다 Python 시작 오버헤드\n- gRPC: 설정 복잡, 이 규모에서 과도함\n- 임베디드 Python (PyO3): Rust 필요, 복잡도 증가\n\n**근거**: FastAPI는 가볍고 비동기 지원, 개발 편의성 높음\n\n### 2. 상태 저장: SqliteSaver (LangGraph 내장)\n\n**선택**: LangGraph의 SqliteSaver로 체크포인트 저장", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1341", "text": "**근거**: FastAPI는 가볍고 비동기 지원, 개발 편의성 높음\n\n### 2. 상태 저장: SqliteSaver (LangGraph 내장)\n\n**선택**: LangGraph의 SqliteSaver로 체크포인트 저장\n\n**대안 고려**:\n- Redis: 외부 의존성 추가\n- PostgreSQL: 과도한 설정\n- 메모리만: 재시작 시 손실\n\n**근거**: 이미 ZyFlow가 SQLite 사용 중, 추가 의존성 없음\n\n### 3. OpenSpec 연동: 커스텀 미들웨어\n\n**선택**: DeepAgents의 미들웨어 패턴으로 OpenSpecMiddleware 구현", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1342", "text": "**대안 고려**:\n- Redis: 외부 의존성 추가\n- PostgreSQL: 과도한 설정\n- 메모리만: 재시작 시 손실\n\n**근거**: 이미 ZyFlow가 SQLite 사용 중, 추가 의존성 없음\n\n### 3. OpenSpec 연동: 커스텀 미들웨어\n\n**선택**: DeepAgents의 미들웨어 패턴으로 OpenSpecMiddleware 구현\n\n**구현**:\n```python\nclass OpenSpecMiddleware(Middleware):\n    def __init__(self, change_id: str, project_path: str):\n        self.change_id = change_id\n        self.project_path = project_path\n\n    def get_system_prompt_addition(self) -> str:\n        # proposal.md, design.md, spec.md 내용 주입\n        pass\n\n    def on_task_complete(self, task_id: str):\n        # ZyFlow API 호출하여 tasks.md 업데이트\n        pass\n```", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1343", "text": "**구현**:\n```python\nclass OpenSpecMiddleware(Middleware):\n    def __init__(self, change_id: str, project_path: str):\n        self.change_id = change_id\n        self.project_path = project_path\n\n    def get_system_prompt_addition(self) -> str:\n        # proposal.md, design.md, spec.md 내용 주입\n        pass\n\n    def on_task_complete(self, task_id: str):\n        # ZyFlow API 호출하여 tasks.md 업데이트\n        pass\n```\n\n### 4. UI 통합: 컴포넌트 포팅\n\n**선택**: Deep Agents UI의 React 컴포넌트를 ZyFlow에 직접 포팅\n\n**대안 고려**:\n- iframe 임베딩: 스타일 불일치, 통신 복잡\n- 별도 앱: 사용자 경험 분리", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1344", "text": "### 4. UI 통합: 컴포넌트 포팅\n\n**선택**: Deep Agents UI의 React 컴포넌트를 ZyFlow에 직접 포팅\n\n**대안 고려**:\n- iframe 임베딩: 스타일 불일치, 통신 복잡\n- 별도 앱: 사용자 경험 분리\n\n**근거**: 동일 기술 스택 (React, TypeScript, Tailwind), 일관된 UX\n\n## Directory Structure\n\n```\nzyflow/\n├── py-agents/                    # Python 에이전트 모듈\n│   ├── pyproject.toml\n│   ├── src/\n│   │   └── zyflow_agents/\n│   │       ├── __init__.py\n│   │       ├── server.py         # FastAPI 서버\n│   │       ├── bridge.", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1345", "text": "**근거**: 동일 기술 스택 (React, TypeScript, Tailwind), 일관된 UX\n\n## Directory Structure\n\n```\nzyflow/\n├── py-agents/                    # Python 에이전트 모듈\n│   ├── pyproject.toml\n│   ├── src/\n│   │   └── zyflow_agents/\n│   │       ├── __init__.py\n│   │       ├── server.py         # FastAPI 서버\n│   │       ├── bridge.py         # MCP ↔ Python 브릿지\n│   │       ├── graph.py          # LangGraph StateGraph 빌더\n│   │       ├── agent.py          # DeepAgent 팩토리\n│   │       └── middleware/\n│   │           ├── __init__.py\n│   │           └── openspec.py   # OpenSpec 미들웨어\n│   └── tests/\n│       ├── test_graph.", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1346", "text": "py         # FastAPI 서버\n│   │       ├── bridge.py         # MCP ↔ Python 브릿지\n│   │       ├── graph.py          # LangGraph StateGraph 빌더\n│   │       ├── agent.py          # DeepAgent 팩토리\n│   │       └── middleware/\n│   │           ├── __init__.py\n│   │           └── openspec.py   # OpenSpec 미들웨어\n│   └── tests/\n│       ├── test_graph.py\n│       └── test_middleware.py\n├── mcp-server/\n│   └── index.ts                  # 새 MCP 도구 추가\n├── server/\n│   └── agents/                   # FastAPI 프록시 라우트\n│       └── routes.ts\n└── src/\n    └── components/\n        └── agent/                # Agent UI 컴포넌트\n            ├── AgentChat.", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1347", "text": "py\n│       └── test_middleware.py\n├── mcp-server/\n│   └── index.ts                  # 새 MCP 도구 추가\n├── server/\n│   └── agents/                   # FastAPI 프록시 라우트\n│       └── routes.ts\n└── src/\n    └── components/\n        └── agent/                # Agent UI 컴포넌트\n            ├── AgentChat.tsx\n            ├── AgentSidebar.tsx\n            ├── FileViewer.tsx\n            └── ExecutionLog.tsx\n```\n\n## API Design\n\n### FastAPI Endpoints\n\n```\nPOST /api/agents/execute\n  body: { change_id, model?, options? }\n  response: { session_id, status }\n\nGET /api/agents/sessions/{session_id}\n  response: { status, progress, current_task, logs }\n\nPOST /api/agents/sessions/{session_id}/stop\n  response: { status }", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1348", "text": "tsx\n            ├── AgentSidebar.tsx\n            ├── FileViewer.tsx\n            └── ExecutionLog.tsx\n```\n\n## API Design\n\n### FastAPI Endpoints\n\n```\nPOST /api/agents/execute\n  body: { change_id, model?, options? }\n  response: { session_id, status }\n\nGET /api/agents/sessions/{session_id}\n  response: { status, progress, current_task, logs }\n\nPOST /api/agents/sessions/{session_id}/stop\n  response: { status }\n\nPOST /api/agents/sessions/{session_id}/resume\n  response: { status }\n\nGET /api/agents/sessions/{session_id}/stream\n  response: SSE stream of execution events\n```\n\n### New MCP Tools\n\n```\nzyflow_execute_change\n  - changeId: string\n  - model?: string (default: claude-sonnet-4-20250514)\n  - options?: { stopOnError, humanApproval }\n\nzyflow_get_agent_status\n  - sessionId: string\n\nzyflow_stop_agent\n  - sessionId: string", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1349", "text": "POST /api/agents/sessions/{session_id}/resume\n  response: { status }\n\nGET /api/agents/sessions/{session_id}/stream\n  response: SSE stream of execution events\n```\n\n### New MCP Tools\n\n```\nzyflow_execute_change\n  - changeId: string\n  - model?: string (default: claude-sonnet-4-20250514)\n  - options?: { stopOnError, humanApproval }\n\nzyflow_get_agent_status\n  - sessionId: string\n\nzyflow_stop_agent\n  - sessionId: string\n\nzyflow_resume_agent\n  - sessionId: string\n  - fromCheckpoint?: string\n```\n\n## Risks / Trade-offs", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1350", "text": "zyflow_get_agent_status\n  - sessionId: string\n\nzyflow_stop_agent\n  - sessionId: string\n\nzyflow_resume_agent\n  - sessionId: string\n  - fromCheckpoint?: string\n```\n\n## Risks / Trade-offs\n\n| Risk | Impact | Mitigation |\n|------|--------|------------|\n| Python/Node 프로세스 관리 복잡 | 중간 | npm 스크립트로 동시 실행 관리 |\n| LangGraph API 변경 | 낮음 | 버전 고정, 추상화 레이어 |\n| 토큰 비용 증가 | 중간 | Haiku 우선 사용, 캐싱 적용 |\n| 디버깅 어려움 (두 언어) | 중간 | 상세 로깅, 에러 전파 체계화 |\n\n## Migration Plan", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1351", "text": "## Migration Plan\n\n1. **Phase 1**: Python 환경만 추가, 기존 기능 영향 없음\n2. **Phase 2**: 새 MCP 도구 추가, 기존 도구 유지\n3. **Phase 3**: UI에 새 탭 추가, 기존 UI 영향 없음\n4. **Rollback**: py-agents/ 폴더와 관련 라우트만 제거하면 원복\n\n## Open Questions\n\n1. ~~LangSmith 없이 디버깅 충분한가?~~ → 자체 로깅으로 해결\n2. 동시 실행 세션 제한? → MVP는 프로젝트당 1개로 제한\n3. 토큰 사용량 추적 방법? → 자체 카운터 구현", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1352", "text": "# Change: LangGraph + DeepAgents 통합\n\n## Why\n\nZyFlow의 OpenSpec 기반 변경 관리에 AI 에이전트 오케스트레이션 기능을 추가하여:\n- OpenSpec 태스크를 자동으로 실행하는 에이전트 워크플로우 구현\n- 상태 관리, 체크포인트, 서브에이전트 위임 등 고급 에이전트 패턴 활용\n- LLM Agnostic 아키텍처로 Claude, GPT, Gemini 등 다양한 모델 지원\n\n## What Changes\n\n### Phase 1: Python 환경 구축\n- Python 프로젝트 구조 추가 (`py-agents/`)\n- FastAPI 브릿지 서버 구현\n- ZyFlow MCP 서버와 Python 간 통신 레이어", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1353", "text": "## What Changes\n\n### Phase 1: Python 환경 구축\n- Python 프로젝트 구조 추가 (`py-agents/`)\n- FastAPI 브릿지 서버 구현\n- ZyFlow MCP 서버와 Python 간 통신 레이어\n\n### Phase 2: LangGraph 기본 통합\n- OpenSpec tasks.md → LangGraph StateGraph 변환\n- SqliteSaver 기반 로컬 체크포인트\n- 태스크 완료 시 ZyFlow 동기화\n\n### Phase 3: DeepAgents 통합\n- OpenSpec 문서를 DeepAgents 컨텍스트로 주입\n- 커스텀 OpenSpecMiddleware 구현\n- 서브에이전트를 통한 태스크 분할 실행", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1354", "text": "### Phase 3: DeepAgents 통합\n- OpenSpec 문서를 DeepAgents 컨텍스트로 주입\n- 커스텀 OpenSpecMiddleware 구현\n- 서브에이전트를 통한 태스크 분할 실행\n\n### Phase 4: MCP 도구 확장\n- 에이전트 제어용 MCP 도구 (execute, status, stop, resume)\n- Python FastAPI 호출 브릿지\n\n### Phase 5: Multi-CLI 지원\n- 다양한 CLI 에이전트 지원 (Claude Code, Gemini CLI, Qwen CLI, Kilo Code, OpenCode)\n- CLI 어댑터 아키텍처 및 프로세스 관리\n- CLI 선택 UI 및 커스텀 CLI 등록", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1355", "text": "### Phase 4: MCP 도구 확장\n- 에이전트 제어용 MCP 도구 (execute, status, stop, resume)\n- Python FastAPI 호출 브릿지\n\n### Phase 5: Multi-CLI 지원\n- 다양한 CLI 에이전트 지원 (Claude Code, Gemini CLI, Qwen CLI, Kilo Code, OpenCode)\n- CLI 어댑터 아키텍처 및 프로세스 관리\n- CLI 선택 UI 및 커스텀 CLI 등록\n\n### Phase 6: UI 통합\n- Deep Agents UI 컴포넌트를 ZyFlow에 포팅\n- 채팅 인터페이스, 파일 뷰어, Todo 뷰 통합\n- 실행 로그 및 상태 시각화\n\n## Impact", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1356", "text": "### Phase 6: UI 통합\n- Deep Agents UI 컴포넌트를 ZyFlow에 포팅\n- 채팅 인터페이스, 파일 뷰어, Todo 뷰 통합\n- 실행 로그 및 상태 시각화\n\n## Impact\n\n- Affected specs: 신규 `agent-orchestration` capability 추가\n- Affected code:\n  - `py-agents/` (신규 Python 모듈)\n  - `mcp-server/index.ts` (새 MCP 도구 추가)\n  - `server/` (FastAPI 프록시 엔드포인트)\n  - `src/components/` (Agent UI 컴포넌트)\n- Dependencies: `langgraph`, `deepagents`, `fastapi`, `langchain-anthropic`\n\n## Constraints", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1357", "text": "## Impact\n\n- Affected specs: 신규 `agent-orchestration` capability 추가\n- Affected code:\n  - `py-agents/` (신규 Python 모듈)\n  - `mcp-server/index.ts` (새 MCP 도구 추가)\n  - `server/` (FastAPI 프록시 엔드포인트)\n  - `src/components/` (Agent UI 컴포넌트)\n- Dependencies: `langgraph`, `deepagents`, `fastapi`, `langchain-anthropic`\n\n## Constraints\n\n- **유료 서비스 회피**: LangSmith, LangGraph Platform 사용 금지\n- **로컬 실행 전용**: 모든 에이전트 실행은 로컬에서 수행\n- **MIT 라이선스 준수**: 오픈소스 컴포넌트만 사용\n\n## Success Criteria", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1358", "text": "## Constraints\n\n- **유료 서비스 회피**: LangSmith, LangGraph Platform 사용 금지\n- **로컬 실행 전용**: 모든 에이전트 실행은 로컬에서 수행\n- **MIT 라이선스 준수**: 오픈소스 컴포넌트만 사용\n\n## Success Criteria\n\n1. OpenSpec change를 선택하면 LangGraph 에이전트가 자동 실행\n2. 각 태스크 완료 시 tasks.md가 자동 업데이트\n3. 에이전트 실행 중 중단/재개 가능 (체크포인트)\n4. UI에서 실시간 진행 상황 모니터링 가능\n5. Claude Code, Gemini CLI, Qwen CLI 등 다양한 CLI 에이전트 선택 가능", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1359", "text": "# Tasks: LangGraph + DeepAgents 통합\n\n## Phase 1: Python 환경 구축\n\n### 1.1 프로젝트 구조 설정\n- [x] py-agents/ 디렉토리 생성\n- [x] pyproject.toml 작성 (dependencies: langgraph, deepagents, fastapi, uvicorn, langchain-anthropic)\n- [x] src/zyflow_agents/ 패키지 구조 생성\n- [x] .gitignore에 Python 관련 항목 추가 (__pycache__, .venv, etc.)", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1360", "text": "### 1.2 FastAPI 브릿지 서버\n- [x] server.py 기본 구조 작성 (FastAPI app, CORS 설정)\n- [x] /health 엔드포인트 구현\n- [x] /api/agents/execute 엔드포인트 스텁 작성\n- [x] /api/agents/sessions/{id} 엔드포인트 스텁 작성\n- [x] /api/agents/sessions/{id}/stream SSE 엔드포인트 스텁 작성", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1361", "text": "### 1.3 개발 환경 통합\n- [x] package.json에 py:server 스크립트 추가 (uvicorn 실행)\n- [x] package.json에 dev:full 스크립트 추가 (Node + Python 동시 실행)\n- [x] Express 서버에 /api/agents 프록시 라우트 추가\n- [x] Python 서버 연결 상태 확인 API 추가\n\n### 1.4 테스트 환경\n- [x] pytest 설정 (pyproject.toml)\n- [x] 기본 테스트 파일 생성 (test_server.py)\n- [x] CI에 Python 테스트 추가 (선택)\n\n## Phase 2: LangGraph 기본 통합", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1362", "text": "### 1.4 테스트 환경\n- [x] pytest 설정 (pyproject.toml)\n- [x] 기본 테스트 파일 생성 (test_server.py)\n- [x] CI에 Python 테스트 추가 (선택)\n\n## Phase 2: LangGraph 기본 통합\n\n### 2.1 OpenSpec 파서\n- [x] openspec_parser.py 작성 - tasks.md 파싱\n- [x] proposal.md, design.md, spec.md 읽기 함수\n- [x] 태스크 구조체 정의 (TaskGroup, Task)\n- [x] 파서 단위 테스트", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1363", "text": "## Phase 2: LangGraph 기본 통합\n\n### 2.1 OpenSpec 파서\n- [x] openspec_parser.py 작성 - tasks.md 파싱\n- [x] proposal.md, design.md, spec.md 읽기 함수\n- [x] 태스크 구조체 정의 (TaskGroup, Task)\n- [x] 파서 단위 테스트\n\n### 2.2 LangGraph StateGraph 빌더\n- [x] graph.py 작성 - OpenSpecState TypedDict 정의\n- [x] create_openspec_graph() 함수 구현\n- [x] 태스크별 노드 동적 생성\n- [x] 순차 실행 엣지 연결\n- [x] 그래프 컴파일 및 체크포인터 연결", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1364", "text": "### 2.2 LangGraph StateGraph 빌더\n- [x] graph.py 작성 - OpenSpecState TypedDict 정의\n- [x] create_openspec_graph() 함수 구현\n- [x] 태스크별 노드 동적 생성\n- [x] 순차 실행 엣지 연결\n- [x] 그래프 컴파일 및 체크포인터 연결\n\n### 2.3 체크포인트 시스템\n- [x] SqliteSaver 설정 (zyflow-agents.db)\n- [x] 세션 ID 생성 및 관리\n- [x] 체크포인트 저장/로드 테스트\n- [x] 중단 지점에서 재개 기능", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1365", "text": "### 2.3 체크포인트 시스템\n- [x] SqliteSaver 설정 (zyflow-agents.db)\n- [x] 세션 ID 생성 및 관리\n- [x] 체크포인트 저장/로드 테스트\n- [x] 중단 지점에서 재개 기능\n\n### 2.4 ZyFlow 동기화\n- [x] 태스크 완료 시 ZyFlow API 호출 로직\n- [x] tasks.md 파일 직접 수정 (mark_complete 호출 또는 파일 수정)\n- [x] 진행률 업데이트 WebSocket 이벤트 발행\n- [x] 동기화 실패 시 재시도 로직", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1366", "text": "### 2.4 ZyFlow 동기화\n- [x] 태스크 완료 시 ZyFlow API 호출 로직\n- [x] tasks.md 파일 직접 수정 (mark_complete 호출 또는 파일 수정)\n- [x] 진행률 업데이트 WebSocket 이벤트 발행\n- [x] 동기화 실패 시 재시도 로직\n\n### 2.5 기본 실행 테스트\n- [x] 샘플 OpenSpec change로 그래프 실행 테스트\n- [x] 모든 태스크 순차 실행 확인\n- [x] 체크포인트 저장/복원 확인\n- [x] ZyFlow 태스크 상태 동기화 확인\n\n## Phase 3: DeepAgents 통합", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1367", "text": "### 2.5 기본 실행 테스트\n- [x] 샘플 OpenSpec change로 그래프 실행 테스트\n- [x] 모든 태스크 순차 실행 확인\n- [x] 체크포인트 저장/복원 확인\n- [x] ZyFlow 태스크 상태 동기화 확인\n\n## Phase 3: DeepAgents 통합\n\n### 3.1 OpenSpec 미들웨어\n- [x] middleware/openspec.py 작성\n- [x] get_system_prompt_addition() - proposal, design, spec 내용 주입\n- [x] get_initial_todos() - tasks.md에서 초기 Todo 목록 생성\n- [x] on_task_complete() - ZyFlow 동기화 콜백\n- [x] 미들웨어 단위 테스트", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1368", "text": "### 3.1 OpenSpec 미들웨어\n- [x] middleware/openspec.py 작성\n- [x] get_system_prompt_addition() - proposal, design, spec 내용 주입\n- [x] get_initial_todos() - tasks.md에서 초기 Todo 목록 생성\n- [x] on_task_complete() - ZyFlow 동기화 콜백\n- [x] 미들웨어 단위 테스트\n\n### 3.2 DeepAgent 팩토리\n- [x] agent.py 작성 - create_zyflow_agent() 함수\n- [x] 모델 선택 로직 (기본: Claude Sonnet, 옵션: Haiku, GPT 등)\n- [x] 미들웨어 스택 구성 (OpenSpec + 기본 미들웨어)\n- [x] 도구 연결 (ZyFlow MCP 도구들)", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1369", "text": "### 3.2 DeepAgent 팩토리\n- [x] agent.py 작성 - create_zyflow_agent() 함수\n- [x] 모델 선택 로직 (기본: Claude Sonnet, 옵션: Haiku, GPT 등)\n- [x] 미들웨어 스택 구성 (OpenSpec + 기본 미들웨어)\n- [x] 도구 연결 (ZyFlow MCP 도구들)\n\n### 3.3 실행 엔진\n- [x] /api/agents/execute 완전 구현\n- [x] 비동기 실행 (백그라운드 태스크)\n- [x] 실행 상태 추적 (pending, running, completed, failed, stopped)\n- [x] 에러 핸들링 및 로깅", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1370", "text": "### 3.3 실행 엔진\n- [x] /api/agents/execute 완전 구현\n- [x] 비동기 실행 (백그라운드 태스크)\n- [x] 실행 상태 추적 (pending, running, completed, failed, stopped)\n- [x] 에러 핸들링 및 로깅\n\n### 3.4 제어 API\n- [x] /api/agents/sessions/{id}/stop 구현 (그래프 인터럽트)\n- [x] /api/agents/sessions/{id}/resume 구현 (체크포인트에서 재개)\n- [x] 세션 목록 조회 API\n- [x] 세션 삭제 API", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1371", "text": "### 3.4 제어 API\n- [x] /api/agents/sessions/{id}/stop 구현 (그래프 인터럽트)\n- [x] /api/agents/sessions/{id}/resume 구현 (체크포인트에서 재개)\n- [x] 세션 목록 조회 API\n- [x] 세션 삭제 API\n\n### 3.5 스트리밍 출력\n- [x] SSE 스트림 구현 (/api/agents/sessions/{id}/stream)\n- [x] 실행 로그 이벤트 (task_start, task_complete, error, etc.)\n- [x] LLM 응답 스트리밍\n- [x] 연결 끊김 처리\n\n## Phase 4: MCP 도구 확장", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1372", "text": "### 3.5 스트리밍 출력\n- [x] SSE 스트림 구현 (/api/agents/sessions/{id}/stream)\n- [x] 실행 로그 이벤트 (task_start, task_complete, error, etc.)\n- [x] LLM 응답 스트리밍\n- [x] 연결 끊김 처리\n\n## Phase 4: MCP 도구 확장\n\n### 4.1 새 MCP 도구 정의\n- [x] zyflow_execute_change 도구 스키마 정의\n- [x] zyflow_get_agent_status 도구 스키마 정의\n- [x] zyflow_stop_agent 도구 스키마 정의\n- [x] zyflow_resume_agent 도구 스키마 정의", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1373", "text": "## Phase 4: MCP 도구 확장\n\n### 4.1 새 MCP 도구 정의\n- [x] zyflow_execute_change 도구 스키마 정의\n- [x] zyflow_get_agent_status 도구 스키마 정의\n- [x] zyflow_stop_agent 도구 스키마 정의\n- [x] zyflow_resume_agent 도구 스키마 정의\n\n### 4.2 MCP 핸들러 구현\n- [x] Python FastAPI 호출 브릿지 (fetch 또는 axios)\n- [x] execute_change 핸들러 - 세션 생성 및 실행 시작\n- [x] get_agent_status 핸들러 - 상태 조회\n- [x] stop_agent 핸들러 - 실행 중단\n- [x] resume_agent 핸들러 - 체크포인트에서 재개", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1374", "text": "### 4.2 MCP 핸들러 구현\n- [x] Python FastAPI 호출 브릿지 (fetch 또는 axios)\n- [x] execute_change 핸들러 - 세션 생성 및 실행 시작\n- [x] get_agent_status 핸들러 - 상태 조회\n- [x] stop_agent 핸들러 - 실행 중단\n- [x] resume_agent 핸들러 - 체크포인트에서 재개\n\n### 4.3 도구 테스트\n- [x] Claude Code에서 새 MCP 도구 테스트\n- [x] 에러 케이스 처리 확인\n- [x] 타임아웃 처리\n\n## Phase 5: Multi-CLI 지원", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1375", "text": "### 4.3 도구 테스트\n- [x] Claude Code에서 새 MCP 도구 테스트\n- [x] 에러 케이스 처리 확인\n- [x] 타임아웃 처리\n\n## Phase 5: Multi-CLI 지원\n\n### 5.1 CLI 어댑터 아키텍처\n- [x] CLI 설정 스키마 정의 (name, command, args, mcp_flag)\n- [x] CLIAdapter 인터페이스 설계\n- [x] 기본 CLI 프로필 추가 (claude, gemini, qwen, kilo, opencode)\n- [x] CLI 프로필 저장/로드 로직", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1376", "text": "## Phase 5: Multi-CLI 지원\n\n### 5.1 CLI 어댑터 아키텍처\n- [x] CLI 설정 스키마 정의 (name, command, args, mcp_flag)\n- [x] CLIAdapter 인터페이스 설계\n- [x] 기본 CLI 프로필 추가 (claude, gemini, qwen, kilo, opencode)\n- [x] CLI 프로필 저장/로드 로직\n\n### 5.2 CLI 프로세스 관리\n- [x] CLI 프로세스 스폰 (child_process)\n- [x] stdin/stdout/stderr 스트리밍\n- [x] MCP 서버 연결 전달 (--mcp-config 또는 환경변수)\n- [x] 프로세스 종료 및 정리", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1377", "text": "### 5.2 CLI 프로세스 관리\n- [x] CLI 프로세스 스폰 (child_process)\n- [x] stdin/stdout/stderr 스트리밍\n- [x] MCP 서버 연결 전달 (--mcp-config 또는 환경변수)\n- [x] 프로세스 종료 및 정리\n\n### 5.3 CLI 선택 UI\n- [x] CLI 선택 드롭다운 컴포넌트\n- [x] 커스텀 CLI 등록 다이얼로그\n- [x] CLI별 설정 (모델 선택, 추가 옵션)\n- [x] 기본 CLI 설정 저장 (localStorage)", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1378", "text": "### 5.3 CLI 선택 UI\n- [x] CLI 선택 드롭다운 컴포넌트\n- [x] 커스텀 CLI 등록 다이얼로그\n- [x] CLI별 설정 (모델 선택, 추가 옵션)\n- [x] 기본 CLI 설정 저장 (localStorage)\n\n### 5.4 CLI별 통합 테스트\n- [x] Claude Code 통합 테스트\n- [x] Gemini CLI 통합 테스트 (설치된 경우)\n- [x] Qwen Code CLI 통합 테스트 (설치된 경우)\n- [x] Kilo Code CLI 통합 테스트 (설치된 경우)\n\n## Phase 6: UI 통합", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1379", "text": "### 5.4 CLI별 통합 테스트\n- [x] Claude Code 통합 테스트\n- [x] Gemini CLI 통합 테스트 (설치된 경우)\n- [x] Qwen Code CLI 통합 테스트 (설치된 경우)\n- [x] Kilo Code CLI 통합 테스트 (설치된 경우)\n\n## Phase 6: UI 통합\n\n### 6.1 Agent 페이지 라우팅\n- [x] /agent 라우트 추가 (App.tsx)\n- [x] FlowSidebar에 Agent 메뉴 추가\n- [x] 네비게이션 상태 관리", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1380", "text": "## Phase 6: UI 통합\n\n### 6.1 Agent 페이지 라우팅\n- [x] /agent 라우트 추가 (App.tsx)\n- [x] FlowSidebar에 Agent 메뉴 추가\n- [x] 네비게이션 상태 관리\n\n### 6.2 Agent 채팅 컴포넌트\n- [x] AgentChat.tsx 작성 - 메시지 입력/표시\n- [x] useAgentChat 훅 - SSE 스트림 연결\n- [x] 메시지 타입별 렌더링 (user, agent, system, error)\n- [x] 마크다운 렌더링 지원", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1381", "text": "### 6.2 Agent 채팅 컴포넌트\n- [x] AgentChat.tsx 작성 - 메시지 입력/표시\n- [x] useAgentChat 훅 - SSE 스트림 연결\n- [x] 메시지 타입별 렌더링 (user, agent, system, error)\n- [x] 마크다운 렌더링 지원\n\n### 6.3 Agent 사이드바\n- [x] AgentSidebar.tsx 작성\n- [x] Todo 리스트 뷰 (상태별 그룹화)\n- [x] 파일 리스트 뷰 (에이전트가 생성/수정한 파일)\n- [x] OpenSpec 컨텍스트 요약 표시", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1382", "text": "### 6.3 Agent 사이드바\n- [x] AgentSidebar.tsx 작성\n- [x] Todo 리스트 뷰 (상태별 그룹화)\n- [x] 파일 리스트 뷰 (에이전트가 생성/수정한 파일)\n- [x] OpenSpec 컨텍스트 요약 표시\n\n### 6.4 파일 뷰어\n- [x] FileViewer.tsx 작성 (또는 기존 SpecContent 확장)\n- [x] 구문 강조 (react-syntax-highlighter 또는 기존 라이브러리)\n- [x] 파일 복사/다운로드 기능\n- [x] 마크다운 파일 렌더링", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1383", "text": "### 6.4 파일 뷰어\n- [x] FileViewer.tsx 작성 (또는 기존 SpecContent 확장)\n- [x] 구문 강조 (react-syntax-highlighter 또는 기존 라이브러리)\n- [x] 파일 복사/다운로드 기능\n- [x] 마크다운 파일 렌더링\n\n### 6.5 실행 제어 UI\n- [x] 실행 시작 버튼 (변경 선택 후)\n- [x] 중단/재개 버튼\n- [x] 진행률 표시 (PipelineBar 연동 또는 별도)\n- [x] 실행 로그 뷰어", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1384", "text": "### 6.5 실행 제어 UI\n- [x] 실행 시작 버튼 (변경 선택 후)\n- [x] 중단/재개 버튼\n- [x] 진행률 표시 (PipelineBar 연동 또는 별도)\n- [x] 실행 로그 뷰어\n\n### 6.6 상태 연동\n- [x] useAgentSession 훅 - 세션 상태 관리\n- [x] WebSocket 실시간 업데이트 연동\n- [x] 에러 상태 토스트 알림\n- [x] 완료 상태 알림\n\n## Phase 7: 통합 테스트 및 문서화", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1385", "text": "### 6.6 상태 연동\n- [x] useAgentSession 훅 - 세션 상태 관리\n- [x] WebSocket 실시간 업데이트 연동\n- [x] 에러 상태 토스트 알림\n- [x] 완료 상태 알림\n\n## Phase 7: 통합 테스트 및 문서화\n\n### 7.1 E2E 테스트\n- [x] AgentPage.test.tsx - UI 컴포넌트 테스트 (7개)\n- [x] useAgentSession.test.ts - 훅 테스트 (9개)\n- [x] scrollIntoView mock 추가로 테스트 오류 수정\n- [x] 전체 워크플로우 E2E 테스트 (선택 - Playwright)\n- [x] 동시 세션 제한 테스트 (선택)", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1386", "text": "### 7.1 E2E 테스트\n- [x] AgentPage.test.tsx - UI 컴포넌트 테스트 (7개)\n- [x] useAgentSession.test.ts - 훅 테스트 (9개)\n- [x] scrollIntoView mock 추가로 테스트 오류 수정\n- [x] 전체 워크플로우 E2E 테스트 (선택 - Playwright)\n- [x] 동시 세션 제한 테스트 (선택)\n\n### 7.2 문서화\n- [x] README 업데이트 - 새 기능 설명\n- [x] CLAUDE.md 업데이트 - 새 MCP 도구 설명\n- [x] py-agents/README.md 작성 - Python 모듈 사용법\n- [x] 아키텍처 다이어그램 추가\n- [x] CLI 설정 가이드 작성", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1387", "text": "### 7.2 문서화\n- [x] README 업데이트 - 새 기능 설명\n- [x] CLAUDE.md 업데이트 - 새 MCP 도구 설명\n- [x] py-agents/README.md 작성 - Python 모듈 사용법\n- [x] 아키텍처 다이어그램 추가\n- [x] CLI 설정 가이드 작성\n\n### 7.3 정리\n- [x] 불필요한 코드 정리 (Agent 관련 lint 오류 수정)\n- [x] 로깅 레벨 조정\n- [x] 성능 프로파일링 (선택)\n- [x] 토큰 사용량 추적 구현 (선택)", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-11"}}
{"id": "1388", "text": "## ADDED Requirements\n\n### Requirement: Agent Execution Engine\n\n시스템은 OpenSpec 변경 제안의 태스크를 LangGraph 기반 에이전트로 자동 실행할 수 있어야 합니다(SHALL).\n\n#### Scenario: 변경 제안 자동 실행\n- **GIVEN** 승인된 OpenSpec 변경 제안이 있을 때\n- **WHEN** 사용자가 에이전트 실행을 시작하면\n- **THEN** LangGraph StateGraph가 생성되어 태스크를 순차 실행합니다\n- **AND** 각 태스크 완료 시 tasks.md가 자동 업데이트됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1389", "text": "#### Scenario: 변경 제안 자동 실행\n- **GIVEN** 승인된 OpenSpec 변경 제안이 있을 때\n- **WHEN** 사용자가 에이전트 실행을 시작하면\n- **THEN** LangGraph StateGraph가 생성되어 태스크를 순차 실행합니다\n- **AND** 각 태스크 완료 시 tasks.md가 자동 업데이트됩니다\n\n#### Scenario: 실행 중단 및 재개\n- **GIVEN** 에이전트가 태스크를 실행 중일 때\n- **WHEN** 사용자가 실행을 중단하면\n- **THEN** 현재 상태가 체크포인트로 저장됩니다\n- **AND** 나중에 해당 체크포인트에서 재개할 수 있습니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1390", "text": "#### Scenario: 실행 중단 및 재개\n- **GIVEN** 에이전트가 태스크를 실행 중일 때\n- **WHEN** 사용자가 실행을 중단하면\n- **THEN** 현재 상태가 체크포인트로 저장됩니다\n- **AND** 나중에 해당 체크포인트에서 재개할 수 있습니다\n\n#### Scenario: 에러 복구\n- **GIVEN** 태스크 실행 중 에러가 발생했을 때\n- **WHEN** 에러가 감지되면\n- **THEN** 실행이 중단되고 에러 상태가 기록됩니다\n- **AND** 사용자는 에러를 확인하고 재시도하거나 건너뛸 수 있습니다\n\n---\n\n### Requirement: OpenSpec Context Injection", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1391", "text": "#### Scenario: 에러 복구\n- **GIVEN** 태스크 실행 중 에러가 발생했을 때\n- **WHEN** 에러가 감지되면\n- **THEN** 실행이 중단되고 에러 상태가 기록됩니다\n- **AND** 사용자는 에러를 확인하고 재시도하거나 건너뛸 수 있습니다\n\n---\n\n### Requirement: OpenSpec Context Injection\n\nDeepAgent는 OpenSpec 문서(proposal, design, spec)를 컨텍스트로 활용해야 합니다(MUST).", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1392", "text": "---\n\n### Requirement: OpenSpec Context Injection\n\nDeepAgent는 OpenSpec 문서(proposal, design, spec)를 컨텍스트로 활용해야 합니다(MUST).\n\n#### Scenario: 컨텍스트 자동 주입\n- **GIVEN** OpenSpec 변경 제안이 선택되었을 때\n- **WHEN** DeepAgent가 초기화되면\n- **THEN** proposal.md 내용이 시스템 프롬프트에 포함됩니다\n- **AND** design.md 결정사항이 참조 가능합니다\n- **AND** spec.md 시나리오가 검증 기준으로 활용됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1393", "text": "#### Scenario: 컨텍스트 자동 주입\n- **GIVEN** OpenSpec 변경 제안이 선택되었을 때\n- **WHEN** DeepAgent가 초기화되면\n- **THEN** proposal.md 내용이 시스템 프롬프트에 포함됩니다\n- **AND** design.md 결정사항이 참조 가능합니다\n- **AND** spec.md 시나리오가 검증 기준으로 활용됩니다\n\n#### Scenario: 태스크별 컨텍스트\n- **GIVEN** 특정 태스크를 실행할 때\n- **WHEN** 태스크에 관련 파일이 지정되어 있으면\n- **THEN** 해당 파일들이 에이전트 컨텍스트에 포함됩니다\n\n---\n\n### Requirement: Agent Session Management", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1394", "text": "#### Scenario: 태스크별 컨텍스트\n- **GIVEN** 특정 태스크를 실행할 때\n- **WHEN** 태스크에 관련 파일이 지정되어 있으면\n- **THEN** 해당 파일들이 에이전트 컨텍스트에 포함됩니다\n\n---\n\n### Requirement: Agent Session Management\n\n시스템은 에이전트 실행 세션을 관리해야 합니다(SHALL).\n\n#### Scenario: 세션 생성\n- **GIVEN** 사용자가 에이전트 실행을 요청할 때\n- **WHEN** 실행이 시작되면\n- **THEN** 고유한 세션 ID가 생성됩니다\n- **AND** 세션 상태가 \"running\"으로 설정됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1395", "text": "---\n\n### Requirement: Agent Session Management\n\n시스템은 에이전트 실행 세션을 관리해야 합니다(SHALL).\n\n#### Scenario: 세션 생성\n- **GIVEN** 사용자가 에이전트 실행을 요청할 때\n- **WHEN** 실행이 시작되면\n- **THEN** 고유한 세션 ID가 생성됩니다\n- **AND** 세션 상태가 \"running\"으로 설정됩니다\n\n#### Scenario: 세션 상태 조회\n- **GIVEN** 실행 중인 세션이 있을 때\n- **WHEN** 상태를 조회하면\n- **THEN** 현재 진행 중인 태스크, 완료된 태스크 수, 전체 진행률이 반환됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1396", "text": "#### Scenario: 세션 상태 조회\n- **GIVEN** 실행 중인 세션이 있을 때\n- **WHEN** 상태를 조회하면\n- **THEN** 현재 진행 중인 태스크, 완료된 태스크 수, 전체 진행률이 반환됩니다\n\n#### Scenario: 프로젝트당 세션 제한\n- **GIVEN** 프로젝트에 이미 실행 중인 세션이 있을 때\n- **WHEN** 새로운 실행을 시작하려고 하면\n- **THEN** 기존 세션을 중단하거나 대기할지 선택할 수 있습니다\n\n---\n\n### Requirement: Real-time Execution Streaming\n\n에이전트 실행 과정을 실시간으로 스트리밍해야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1397", "text": "#### Scenario: 프로젝트당 세션 제한\n- **GIVEN** 프로젝트에 이미 실행 중인 세션이 있을 때\n- **WHEN** 새로운 실행을 시작하려고 하면\n- **THEN** 기존 세션을 중단하거나 대기할지 선택할 수 있습니다\n\n---\n\n### Requirement: Real-time Execution Streaming\n\n에이전트 실행 과정을 실시간으로 스트리밍해야 합니다(SHALL).\n\n#### Scenario: SSE 스트리밍\n- **GIVEN** 에이전트가 실행 중일 때\n- **WHEN** 클라이언트가 스트림에 연결하면\n- **THEN** 실행 이벤트(task_start, task_complete, log, error)가 실시간으로 전송됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1398", "text": "---\n\n### Requirement: Real-time Execution Streaming\n\n에이전트 실행 과정을 실시간으로 스트리밍해야 합니다(SHALL).\n\n#### Scenario: SSE 스트리밍\n- **GIVEN** 에이전트가 실행 중일 때\n- **WHEN** 클라이언트가 스트림에 연결하면\n- **THEN** 실행 이벤트(task_start, task_complete, log, error)가 실시간으로 전송됩니다\n\n#### Scenario: LLM 응답 스트리밍\n- **GIVEN** 에이전트가 LLM에 요청 중일 때\n- **WHEN** LLM이 응답을 생성하면\n- **THEN** 토큰 단위로 응답이 스트리밍됩니다\n\n---\n\n### Requirement: Agent MCP Tools", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1399", "text": "#### Scenario: LLM 응답 스트리밍\n- **GIVEN** 에이전트가 LLM에 요청 중일 때\n- **WHEN** LLM이 응답을 생성하면\n- **THEN** 토큰 단위로 응답이 스트리밍됩니다\n\n---\n\n### Requirement: Agent MCP Tools\n\nClaude Code에서 에이전트를 제어할 수 있는 MCP 도구를 제공해야 합니다(SHALL).\n\n#### Scenario: MCP로 실행 시작\n- **GIVEN** Claude Code에서 ZyFlow MCP 서버에 연결되어 있을 때\n- **WHEN** zyflow_execute_change 도구를 호출하면\n- **THEN** 지정된 변경 제안의 에이전트 실행이 시작됩니다\n- **AND** 세션 ID가 반환됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1400", "text": "---\n\n### Requirement: Agent MCP Tools\n\nClaude Code에서 에이전트를 제어할 수 있는 MCP 도구를 제공해야 합니다(SHALL).\n\n#### Scenario: MCP로 실행 시작\n- **GIVEN** Claude Code에서 ZyFlow MCP 서버에 연결되어 있을 때\n- **WHEN** zyflow_execute_change 도구를 호출하면\n- **THEN** 지정된 변경 제안의 에이전트 실행이 시작됩니다\n- **AND** 세션 ID가 반환됩니다\n\n#### Scenario: MCP로 상태 조회\n- **GIVEN** 실행 중인 세션이 있을 때\n- **WHEN** zyflow_get_agent_status 도구를 호출하면\n- **THEN** 현재 세션의 상태와 진행률이 반환됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1401", "text": "#### Scenario: MCP로 상태 조회\n- **GIVEN** 실행 중인 세션이 있을 때\n- **WHEN** zyflow_get_agent_status 도구를 호출하면\n- **THEN** 현재 세션의 상태와 진행률이 반환됩니다\n\n#### Scenario: MCP로 실행 제어\n- **GIVEN** 실행 중인 세션이 있을 때\n- **WHEN** zyflow_stop_agent 또는 zyflow_resume_agent를 호출하면\n- **THEN** 세션이 중단되거나 재개됩니다\n\n---\n\n### Requirement: Agent UI Integration\n\nZyFlow UI에서 에이전트와 상호작용할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1402", "text": "#### Scenario: MCP로 실행 제어\n- **GIVEN** 실행 중인 세션이 있을 때\n- **WHEN** zyflow_stop_agent 또는 zyflow_resume_agent를 호출하면\n- **THEN** 세션이 중단되거나 재개됩니다\n\n---\n\n### Requirement: Agent UI Integration\n\nZyFlow UI에서 에이전트와 상호작용할 수 있어야 합니다(SHALL).\n\n#### Scenario: 채팅 인터페이스\n- **GIVEN** 에이전트 페이지에 접근했을 때\n- **WHEN** 사용자가 메시지를 입력하면\n- **THEN** 에이전트가 응답하고 대화 기록이 표시됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1403", "text": "---\n\n### Requirement: Agent UI Integration\n\nZyFlow UI에서 에이전트와 상호작용할 수 있어야 합니다(SHALL).\n\n#### Scenario: 채팅 인터페이스\n- **GIVEN** 에이전트 페이지에 접근했을 때\n- **WHEN** 사용자가 메시지를 입력하면\n- **THEN** 에이전트가 응답하고 대화 기록이 표시됩니다\n\n#### Scenario: 실행 상태 시각화\n- **GIVEN** 에이전트가 실행 중일 때\n- **WHEN** UI를 확인하면\n- **THEN** 현재 진행 중인 태스크, Todo 리스트, 생성된 파일 목록이 표시됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1404", "text": "#### Scenario: 실행 상태 시각화\n- **GIVEN** 에이전트가 실행 중일 때\n- **WHEN** UI를 확인하면\n- **THEN** 현재 진행 중인 태스크, Todo 리스트, 생성된 파일 목록이 표시됩니다\n\n#### Scenario: 파일 뷰어\n- **GIVEN** 에이전트가 파일을 생성/수정했을 때\n- **WHEN** 파일 목록에서 파일을 선택하면\n- **THEN** 구문 강조가 적용된 파일 내용이 표시됩니다\n\n---\n\n### Requirement: Multi-CLI Support\n\n시스템은 다양한 CLI 기반 에이전트를 지원해야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1405", "text": "#### Scenario: 파일 뷰어\n- **GIVEN** 에이전트가 파일을 생성/수정했을 때\n- **WHEN** 파일 목록에서 파일을 선택하면\n- **THEN** 구문 강조가 적용된 파일 내용이 표시됩니다\n\n---\n\n### Requirement: Multi-CLI Support\n\n시스템은 다양한 CLI 기반 에이전트를 지원해야 합니다(SHALL).\n\n#### Scenario: CLI 선택\n- **GIVEN** 에이전트 페이지에 접근했을 때\n- **WHEN** 사용자가 CLI를 선택하면\n- **THEN** Claude Code, Gemini CLI, Qwen CLI, Kilo Code, OpenCode 중 하나를 선택할 수 있습니다\n- **AND** 선택한 CLI가 기본값으로 저장됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1406", "text": "---\n\n### Requirement: Multi-CLI Support\n\n시스템은 다양한 CLI 기반 에이전트를 지원해야 합니다(SHALL).\n\n#### Scenario: CLI 선택\n- **GIVEN** 에이전트 페이지에 접근했을 때\n- **WHEN** 사용자가 CLI를 선택하면\n- **THEN** Claude Code, Gemini CLI, Qwen CLI, Kilo Code, OpenCode 중 하나를 선택할 수 있습니다\n- **AND** 선택한 CLI가 기본값으로 저장됩니다\n\n#### Scenario: CLI 프로세스 관리\n- **GIVEN** CLI가 선택되어 있을 때\n- **WHEN** 에이전트 실행이 시작되면\n- **THEN** 해당 CLI 프로세스가 스폰되어 MCP 서버에 연결됩니다\n- **AND** stdin/stdout 스트리밍이 UI에 표시됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1407", "text": "#### Scenario: CLI 프로세스 관리\n- **GIVEN** CLI가 선택되어 있을 때\n- **WHEN** 에이전트 실행이 시작되면\n- **THEN** 해당 CLI 프로세스가 스폰되어 MCP 서버에 연결됩니다\n- **AND** stdin/stdout 스트리밍이 UI에 표시됩니다\n\n#### Scenario: 커스텀 CLI 등록\n- **GIVEN** 사용자가 다른 MCP 호환 CLI를 사용하려고 할 때\n- **WHEN** 커스텀 CLI 등록 다이얼로그를 열면\n- **THEN** 명령어, 인자, MCP 플래그를 설정할 수 있습니다\n- **AND** 등록된 CLI가 선택 목록에 추가됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1408", "text": "#### Scenario: 커스텀 CLI 등록\n- **GIVEN** 사용자가 다른 MCP 호환 CLI를 사용하려고 할 때\n- **WHEN** 커스텀 CLI 등록 다이얼로그를 열면\n- **THEN** 명령어, 인자, MCP 플래그를 설정할 수 있습니다\n- **AND** 등록된 CLI가 선택 목록에 추가됩니다\n\n#### Scenario: CLI 전환\n- **GIVEN** 에이전트 세션이 종료된 상태에서\n- **WHEN** 다른 CLI를 선택하면\n- **THEN** 다음 실행부터 새로운 CLI가 사용됩니다\n- **AND** 기존 MCP 연결 설정은 그대로 유지됩니다", "metadata": {"file_path": "openspec/changes/archive/2025-12-11-add-langgraph-deepagents-integration/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1409", "text": "# Design: GitDiagram 통합 아키텍처\n\n## Context\n\nGitDiagram은 GitHub 저장소를 Mermaid.js 다이어그램으로 변환하는 오픈소스 도구다. Python(FastAPI) 백엔드와 Next.js 프론트엔드로 구성되어 있으며, OpenAI o4-mini를 사용한다.\n\nzyflow는 TypeScript/Express 기반이므로 Python 코드를 직접 사용할 수 없다. 핵심 로직(프롬프트 엔지니어링)만 TypeScript로 포팅하고, zyflow 환경에 맞게 최적화한다.\n\n**Stakeholders:**\n- Claude Code 사용자 (MCP 도구로 다이어그램 생성)\n- zyflow 웹 UI 사용자 (프로젝트 구조 시각화)\n\n## Goals / Non-Goals", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1410", "text": "**Stakeholders:**\n- Claude Code 사용자 (MCP 도구로 다이어그램 생성)\n- zyflow 웹 UI 사용자 (프로젝트 구조 시각화)\n\n## Goals / Non-Goals\n\n**Goals:**\n- GitDiagram의 3단계 프롬프트 로직을 TypeScript로 포팅\n- MCP 도구로 노출하여 Claude Code에서 사용 가능\n- 업스트림 변경을 쉽게 추적하고 반영할 수 있는 구조\n- zyflow 웹 UI에서 Mermaid 다이어그램 렌더링\n\n**Non-Goals:**\n- GitDiagram 전체를 submodule로 포함 (Python 의존성 피함)\n- 외부 gitdiagram.com API 사용 (자체 호스팅)\n- 실시간 스트리밍 생성 (v1에서는 일괄 생성)\n\n## Architecture", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1411", "text": "**Non-Goals:**\n- GitDiagram 전체를 submodule로 포함 (Python 의존성 피함)\n- 외부 gitdiagram.com API 사용 (자체 호스팅)\n- 실시간 스트리밍 생성 (v1에서는 일괄 생성)\n\n## Architecture\n\n```\nzyflow/\n├── packages/\n│   └── gitdiagram-core/           # 업스트림 로직 포팅\n│       ├── package.json           # upstream 버전 추적 메타데이터\n│       ├── UPSTREAM.md            # 동기화 가이드\n│       └── src/\n│           ├── prompts.ts         # 3단계 프롬프트 (prompts.py 포팅)\n│           ├── generator.ts       # 다이어그램 생성 로직\n│           ├── file-tree.ts       # 파일 트리 추출\n│           └── index.", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1412", "text": "json           # upstream 버전 추적 메타데이터\n│       ├── UPSTREAM.md            # 동기화 가이드\n│       └── src/\n│           ├── prompts.ts         # 3단계 프롬프트 (prompts.py 포팅)\n│           ├── generator.ts       # 다이어그램 생성 로직\n│           ├── file-tree.ts       # 파일 트리 추출\n│           └── index.ts           # 패키지 진입점\n├── mcp-server/\n│   ├── diagram-tools.ts           # MCP 도구 정의\n│   └── index.ts                   # 도구 등록\n└── src/\n    └── components/\n        └── diagram/\n            ├── MermaidRenderer.tsx # Mermaid 렌더링\n            └── DiagramViewer.tsx   # 다이어그램 뷰어\n```\n\n## Decisions", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1413", "text": "ts           # 패키지 진입점\n├── mcp-server/\n│   ├── diagram-tools.ts           # MCP 도구 정의\n│   └── index.ts                   # 도구 등록\n└── src/\n    └── components/\n        └── diagram/\n            ├── MermaidRenderer.tsx # Mermaid 렌더링\n            └── DiagramViewer.tsx   # 다이어그램 뷰어\n```\n\n## Decisions\n\n### D1: 포팅 방식 - TypeScript 재구현\n\n**결정:** GitDiagram의 프롬프트와 로직을 TypeScript로 재구현한다.", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1414", "text": "ts                   # 도구 등록\n└── src/\n    └── components/\n        └── diagram/\n            ├── MermaidRenderer.tsx # Mermaid 렌더링\n            └── DiagramViewer.tsx   # 다이어그램 뷰어\n```\n\n## Decisions\n\n### D1: 포팅 방식 - TypeScript 재구현\n\n**결정:** GitDiagram의 프롬프트와 로직을 TypeScript로 재구현한다.\n\n**대안 고려:**\n1. Git Submodule - Python 런타임 필요, 복잡도 증가\n2. API 호출 - 외부 의존성, 비용 발생\n3. TypeScript 포팅 - 자체 관리 가능, zyflow 환경 일치", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1415", "text": "## Decisions\n\n### D1: 포팅 방식 - TypeScript 재구현\n\n**결정:** GitDiagram의 프롬프트와 로직을 TypeScript로 재구현한다.\n\n**대안 고려:**\n1. Git Submodule - Python 런타임 필요, 복잡도 증가\n2. API 호출 - 외부 의존성, 비용 발생\n3. TypeScript 포팅 - 자체 관리 가능, zyflow 환경 일치\n\n**근거:** zyflow는 TypeScript 기반이므로 일관성 유지. 핵심 로직(프롬프트)은 언어 독립적이라 포팅 비용 낮음.\n\n### D2: LLM 선택 - Claude API 우선\n\n**결정:** Claude API를 기본으로 사용하고, OpenAI를 대체 옵션으로 지원한다.", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1416", "text": "**근거:** zyflow는 TypeScript 기반이므로 일관성 유지. 핵심 로직(프롬프트)은 언어 독립적이라 포팅 비용 낮음.\n\n### D2: LLM 선택 - Claude API 우선\n\n**결정:** Claude API를 기본으로 사용하고, OpenAI를 대체 옵션으로 지원한다.\n\n**근거:** zyflow는 Claude Code와 통합되어 있으므로 Claude API가 자연스러움. 단, GitDiagram 원본이 OpenAI를 사용하므로 호환성 유지.\n\n### D3: 패키지 분리 - packages/gitdiagram-core\n\n**결정:** 별도 패키지로 분리하여 업스트림 추적을 용이하게 한다.", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1417", "text": "**근거:** zyflow는 Claude Code와 통합되어 있으므로 Claude API가 자연스러움. 단, GitDiagram 원본이 OpenAI를 사용하므로 호환성 유지.\n\n### D3: 패키지 분리 - packages/gitdiagram-core\n\n**결정:** 별도 패키지로 분리하여 업스트림 추적을 용이하게 한다.\n\n**구조:**\n```json\n// packages/gitdiagram-core/package.json\n{\n  \"name\": \"@zyflow/gitdiagram-core\",\n  \"version\": \"1.0.0\",\n  \"upstream\": {\n    \"repo\": \"ahmedkhaleel2004/gitdiagram\",\n    \"commit\": \"abc123...\",\n    \"lastSync\": \"2025-12-03\",\n    \"files\": [\n      \"backend/app/prompts.py\",\n      \"backend/app/routers/generate.py\"\n    ]\n  }\n}\n```", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1418", "text": "**구조:**\n```json\n// packages/gitdiagram-core/package.json\n{\n  \"name\": \"@zyflow/gitdiagram-core\",\n  \"version\": \"1.0.0\",\n  \"upstream\": {\n    \"repo\": \"ahmedkhaleel2004/gitdiagram\",\n    \"commit\": \"abc123...\",\n    \"lastSync\": \"2025-12-03\",\n    \"files\": [\n      \"backend/app/prompts.py\",\n      \"backend/app/routers/generate.py\"\n    ]\n  }\n}\n```\n\n### D4: 업스트림 동기화 전략\n\n**워크플로우:**\n1. 포크 생성: `git fork ahmedkhaleel2004/gitdiagram`\n2. 주기적 동기화: `git fetch upstream && git merge upstream/main`\n3. 변경 감지 스크립트로 업데이트 알림\n4. 수동으로 TypeScript 코드 업데이트", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1419", "text": "### D4: 업스트림 동기화 전략\n\n**워크플로우:**\n1. 포크 생성: `git fork ahmedkhaleel2004/gitdiagram`\n2. 주기적 동기화: `git fetch upstream && git merge upstream/main`\n3. 변경 감지 스크립트로 업데이트 알림\n4. 수동으로 TypeScript 코드 업데이트\n\n**자동화 스크립트:**\n```bash\n#!/bin/bash\n# scripts/check-upstream.sh\nUPSTREAM_COMMIT=$(git ls-remote https://github.com/ahmedkhaleel2004/gitdiagram HEAD | cut -f1)\nLOCAL_COMMIT=$(jq -r '.upstream.commit' packages/gitdiagram-core/package.json)\n\nif [ \"$UPSTREAM_COMMIT\" != \"$LOCAL_COMMIT\" ]; then\n  echo \"::warning::GitDiagram upstream updated: $LOCAL_COMMIT -> $UPSTREAM_COMMIT\"\nfi\n```\n\n## Data Flow", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1420", "text": "**자동화 스크립트:**\n```bash\n#!/bin/bash\n# scripts/check-upstream.sh\nUPSTREAM_COMMIT=$(git ls-remote https://github.com/ahmedkhaleel2004/gitdiagram HEAD | cut -f1)\nLOCAL_COMMIT=$(jq -r '.upstream.commit' packages/gitdiagram-core/package.json)\n\nif [ \"$UPSTREAM_COMMIT\" != \"$LOCAL_COMMIT\" ]; then\n  echo \"::warning::GitDiagram upstream updated: $LOCAL_COMMIT -> $UPSTREAM_COMMIT\"\nfi\n```\n\n## Data Flow\n\n```\n1. 사용자 요청\n   └─> MCP: diagram_generate(path, options)\n\n2. 파일 트리 추출\n   └─> file-tree.ts: getFileTree(path)\n   └─> README.md 읽기", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1421", "text": "if [ \"$UPSTREAM_COMMIT\" != \"$LOCAL_COMMIT\" ]; then\n  echo \"::warning::GitDiagram upstream updated: $LOCAL_COMMIT -> $UPSTREAM_COMMIT\"\nfi\n```\n\n## Data Flow\n\n```\n1. 사용자 요청\n   └─> MCP: diagram_generate(path, options)\n\n2. 파일 트리 추출\n   └─> file-tree.ts: getFileTree(path)\n   └─> README.md 읽기\n\n3. 3단계 AI 처리\n   ├─> Stage 1: 아키텍처 설명 생성 (SYSTEM_FIRST_PROMPT)\n   ├─> Stage 2: 컴포넌트-파일 매핑 (SYSTEM_SECOND_PROMPT)\n   └─> Stage 3: Mermaid 코드 생성 (SYSTEM_THIRD_PROMPT)\n\n4. 결과 반환\n   └─> Mermaid 코드 + 메타데이터\n```\n\n## Risks / Trade-offs", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1422", "text": "4. 결과 반환\n   └─> Mermaid 코드 + 메타데이터\n```\n\n## Risks / Trade-offs\n\n| Risk | Impact | Mitigation |\n|------|--------|------------|\n| 프롬프트 포팅 시 품질 저하 | 다이어그램 품질 감소 | 원본 프롬프트 최대한 유지, 테스트 케이스 작성 |\n| 업스트림 대규모 변경 | 동기화 비용 증가 | 주요 변경만 선별 반영, 프롬프트 중심으로 추적 |\n| LLM 비용 | API 비용 발생 | 캐싱, 토큰 최적화, 사용량 제한 |\n| Mermaid 문법 오류 | 렌더링 실패 | GitDiagram의 문법 검증 로직 포함 |\n\n## Migration Plan", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1423", "text": "## Migration Plan\n\n1. **Phase 1: 패키지 생성** (이번 변경)\n   - `packages/gitdiagram-core/` 스캐폴딩\n   - 프롬프트 포팅\n   - 기본 생성 로직\n\n2. **Phase 2: MCP 통합**\n   - `diagram_generate` 도구 추가\n   - Claude Code에서 테스트\n\n3. **Phase 3: 프론트엔드**\n   - Mermaid 렌더러 컴포넌트\n   - 프로젝트 대시보드 연동\n\n4. **Phase 4: OpenSpec 연동** (후속 변경)\n   - 변경별 영향도 시각화\n   - Before/After 비교\n\n## Open Questions", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1424", "text": "3. **Phase 3: 프론트엔드**\n   - Mermaid 렌더러 컴포넌트\n   - 프로젝트 대시보드 연동\n\n4. **Phase 4: OpenSpec 연동** (후속 변경)\n   - 변경별 영향도 시각화\n   - Before/After 비교\n\n## Open Questions\n\n1. **Claude API vs OpenAI API**: 기본값을 어느 것으로 할지?\n   - 제안: Claude API 기본, 환경변수로 전환 가능\n\n2. **캐싱 전략**: 같은 프로젝트를 반복 분석할 때 캐싱할지?\n   - 제안: 파일 트리 해시 기반 캐싱", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1425", "text": "## Open Questions\n\n1. **Claude API vs OpenAI API**: 기본값을 어느 것으로 할지?\n   - 제안: Claude API 기본, 환경변수로 전환 가능\n\n2. **캐싱 전략**: 같은 프로젝트를 반복 분석할 때 캐싱할지?\n   - 제안: 파일 트리 해시 기반 캐싱\n\n3. **토큰 제한**: 대규모 저장소 처리 시 토큰 제한?\n   - 제안: GitDiagram과 동일하게 50k~195k 범위", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1426", "text": "# Change: GitDiagram 통합으로 프로젝트 아키텍처 시각화 기능 추가\n\n## Why\n\n대규모 코드베이스를 빠르게 이해하기 어렵다. GitDiagram의 접근법(파일 트리 + AI → Mermaid 다이어그램)을 zyflow에 통합하면:\n- 프로젝트 온보딩 시간 단축\n- OpenSpec 변경이 시스템에 미치는 영향 시각화\n- Claude Code에서 \"프로젝트 구조 보여줘\"로 즉시 다이어그램 생성\n\n## What Changes", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1427", "text": "## What Changes\n\n- GitDiagram의 핵심 로직(3단계 프롬프트)을 TypeScript로 포팅\n- `packages/gitdiagram-core/` 패키지로 분리하여 업스트림 추적 용이\n- MCP 도구 `diagram_generate` 추가\n- React 프론트엔드에 Mermaid 렌더링 컴포넌트 추가\n- OpenSpec 변경별 아키텍처 영향도 시각화 기능\n\n## Impact", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1428", "text": "## Impact\n\n- Affected specs: 신규 capability `diagram-generator` 추가\n- Affected code:\n  - `packages/gitdiagram-core/` (신규)\n  - `mcp-server/diagram-tools.ts` (신규)\n  - `mcp-server/index.ts` (수정 - 도구 등록)\n  - `src/components/diagram/` (신규)\n  - `package.json` (의존성 추가: mermaid)\n\n## Dependencies\n\n- Claude API 또는 OpenAI API (다이어그램 생성용 LLM)\n- mermaid.js (프론트엔드 렌더링)\n\n## Upstream Tracking", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1429", "text": "## Dependencies\n\n- Claude API 또는 OpenAI API (다이어그램 생성용 LLM)\n- mermaid.js (프론트엔드 렌더링)\n\n## Upstream Tracking\n\nGitDiagram 원본 저장소: `ahmedkhaleel2004/gitdiagram`\n- 포크 생성하여 업스트림 변경 추적\n- `packages/gitdiagram-core/package.json`에 upstream 커밋 해시 기록\n- 주기적으로 포크 동기화 후 변경 사항 반영", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1430", "text": "# Tasks: GitDiagram 통합\n\n## 1. 패키지 스캐폴딩\n\n- [x] 1.1 `packages/gitdiagram-core/` 디렉토리 구조 생성\n- [x] 1.2 `package.json` 작성 (upstream 메타데이터 포함)\n- [x] 1.3 TypeScript 설정 (`tsconfig.json`)\n- [x] 1.4 `UPSTREAM.md` 동기화 가이드 문서 작성\n\n## 2. 프롬프트 포팅", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1431", "text": "## 2. 프롬프트 포팅\n\n- [x] 2.1 GitDiagram `prompts.py` 분석 및 TypeScript 변환\n- [x] 2.2 `SYSTEM_FIRST_PROMPT` 포팅 (아키텍처 설명 생성)\n- [x] 2.3 `SYSTEM_SECOND_PROMPT` 포팅 (컴포넌트 매핑)\n- [x] 2.4 `SYSTEM_THIRD_PROMPT` 포팅 (Mermaid 생성)\n- [x] 2.5 추가 프롬프트 포팅 (사용자 지시사항, 수정 등)\n\n## 3. 핵심 로직 구현", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1432", "text": "## 3. 핵심 로직 구현\n\n- [x] 3.1 `file-tree.ts` - 디렉토리 구조 추출 함수\n- [x] 3.2 `generator.ts` - 3단계 AI 호출 로직\n- [x] 3.3 LLM 어댑터 (Claude API / OpenAI API 추상화)\n- [x] 3.4 Mermaid 문법 검증 및 클릭 이벤트 처리\n- [x] 3.5 `index.ts` - 패키지 public API\n\n## 4. MCP 도구 통합", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1433", "text": "## 4. MCP 도구 통합\n\n- [x] 4.1 `mcp-server/diagram-tools.ts` 생성\n- [x] 4.2 `diagram_generate` 도구 정의 (저장소 경로 → Mermaid)\n- [x] 4.3 `diagram_from_change` 도구 (OpenSpec 변경 영향도)\n- [x] 4.4 `mcp-server/index.ts`에 도구 등록\n- [x] 4.5 MCP 빌드 및 테스트\n\n## 5. 프론트엔드 컴포넌트", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1434", "text": "## 5. 프론트엔드 컴포넌트\n\n- [x] 5.1 `mermaid` 패키지 설치 및 설정\n- [x] 5.2 `MermaidRenderer.tsx` - Mermaid 코드 렌더링\n- [x] 5.3 `DiagramViewer.tsx` - 다이어그램 뷰어 (줌, 팬)\n- [x] 5.4 API 엔드포인트 (`/api/diagram/generate`)\n- [x] 5.5 프로젝트 대시보드에 다이어그램 탭 추가\n\n## 6. 테스트 및 문서화", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1435", "text": "## 6. 테스트 및 문서화\n\n- [x] 6.1 프롬프트 포팅 검증 테스트 (원본과 결과 비교)\n- [x] 6.2 MCP 도구 통합 테스트\n- [x] 6.3 프론트엔드 컴포넌트 테스트\n- [x] 6.4 사용 가이드 문서 작성\n\n## 7. 업스트림 동기화 인프라\n\n- [x] 7.1 GitDiagram 포크 생성 (스킵 - 직접 업스트림 모니터링)\n- [x] 7.2 `scripts/check-upstream.sh` 스크립트 작성\n- [x] 7.3 GitHub Actions 워크플로우 (주간 업스트림 체크)", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "1436", "text": "## ADDED Requirements\n\n### Requirement: Diagram Generation from Repository\n\n시스템은 로컬 저장소 경로를 입력받아 Mermaid.js 형식의 시스템 아키텍처 다이어그램을 생성해야 한다(SHALL).\n\n#### Scenario: 프로젝트 다이어그램 생성 성공\n\n- **GIVEN** 유효한 로컬 저장소 경로\n- **WHEN** `diagram_generate` MCP 도구가 호출되면\n- **THEN** 파일 트리와 README를 분석하여 Mermaid 다이어그램 코드를 반환한다\n- **AND** 다이어그램의 각 컴포넌트는 실제 파일/디렉토리 경로와 매핑된다\n\n#### Scenario: 대규모 저장소 토큰 제한", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1437", "text": "#### Scenario: 대규모 저장소 토큰 제한\n\n- **GIVEN** 파일 트리가 50,000 토큰을 초과하는 저장소\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** 주요 디렉토리만 포함하여 토큰 제한 내에서 처리한다\n- **AND** 제외된 항목에 대한 경고를 반환한다\n\n#### Scenario: README가 없는 저장소\n\n- **GIVEN** README.md 파일이 없는 저장소\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** 파일 트리만으로 다이어그램을 생성한다\n- **AND** 정확도가 낮을 수 있다는 경고를 포함한다\n\n---\n\n### Requirement: Three-Stage Prompt Pipeline", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1438", "text": "#### Scenario: README가 없는 저장소\n\n- **GIVEN** README.md 파일이 없는 저장소\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** 파일 트리만으로 다이어그램을 생성한다\n- **AND** 정확도가 낮을 수 있다는 경고를 포함한다\n\n---\n\n### Requirement: Three-Stage Prompt Pipeline\n\n다이어그램 생성은 3단계 프롬프트 파이프라인을 통해 수행되어야 한다(MUST).\n\n#### Scenario: Stage 1 - 아키텍처 설명 생성", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1439", "text": "---\n\n### Requirement: Three-Stage Prompt Pipeline\n\n다이어그램 생성은 3단계 프롬프트 파이프라인을 통해 수행되어야 한다(MUST).\n\n#### Scenario: Stage 1 - 아키텍처 설명 생성\n\n- **GIVEN** 파일 트리와 README 내용\n- **WHEN** 첫 번째 프롬프트가 실행되면\n- **THEN** 프로젝트 타입, 주요 컴포넌트, 상호작용을 텍스트로 설명한다\n\n#### Scenario: Stage 2 - 컴포넌트 매핑", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1440", "text": "#### Scenario: Stage 1 - 아키텍처 설명 생성\n\n- **GIVEN** 파일 트리와 README 내용\n- **WHEN** 첫 번째 프롬프트가 실행되면\n- **THEN** 프로젝트 타입, 주요 컴포넌트, 상호작용을 텍스트로 설명한다\n\n#### Scenario: Stage 2 - 컴포넌트 매핑\n\n- **GIVEN** Stage 1의 설명\n- **WHEN** 두 번째 프롬프트가 실행되면\n- **THEN** 설명된 컴포넌트를 실제 파일/디렉토리 경로에 매핑한다\n\n#### Scenario: Stage 3 - Mermaid 코드 생성", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1441", "text": "#### Scenario: Stage 2 - 컴포넌트 매핑\n\n- **GIVEN** Stage 1의 설명\n- **WHEN** 두 번째 프롬프트가 실행되면\n- **THEN** 설명된 컴포넌트를 실제 파일/디렉토리 경로에 매핑한다\n\n#### Scenario: Stage 3 - Mermaid 코드 생성\n\n- **GIVEN** Stage 1 설명과 Stage 2 매핑\n- **WHEN** 세 번째 프롬프트가 실행되면\n- **THEN** 유효한 Mermaid flowchart 코드를 생성한다\n- **AND** 클릭 이벤트로 파일 경로를 연결한다\n\n---\n\n### Requirement: LLM Provider Abstraction\n\n시스템은 여러 LLM 제공자를 지원하여 다이어그램을 생성해야 한다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1442", "text": "- **GIVEN** Stage 1 설명과 Stage 2 매핑\n- **WHEN** 세 번째 프롬프트가 실행되면\n- **THEN** 유효한 Mermaid flowchart 코드를 생성한다\n- **AND** 클릭 이벤트로 파일 경로를 연결한다\n\n---\n\n### Requirement: LLM Provider Abstraction\n\n시스템은 여러 LLM 제공자를 지원하여 다이어그램을 생성해야 한다(SHALL).\n\n#### Scenario: Claude API 사용 (기본값)\n\n- **GIVEN** `ANTHROPIC_API_KEY` 환경변수가 설정됨\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** Claude API를 사용하여 다이어그램을 생성한다\n\n#### Scenario: OpenAI API 사용 (대체)", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1443", "text": "시스템은 여러 LLM 제공자를 지원하여 다이어그램을 생성해야 한다(SHALL).\n\n#### Scenario: Claude API 사용 (기본값)\n\n- **GIVEN** `ANTHROPIC_API_KEY` 환경변수가 설정됨\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** Claude API를 사용하여 다이어그램을 생성한다\n\n#### Scenario: OpenAI API 사용 (대체)\n\n- **GIVEN** `OPENAI_API_KEY` 환경변수가 설정되고 Claude 키가 없음\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** OpenAI API (o4-mini)를 사용하여 다이어그램을 생성한다\n\n#### Scenario: API 키 미설정", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1444", "text": "#### Scenario: OpenAI API 사용 (대체)\n\n- **GIVEN** `OPENAI_API_KEY` 환경변수가 설정되고 Claude 키가 없음\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** OpenAI API (o4-mini)를 사용하여 다이어그램을 생성한다\n\n#### Scenario: API 키 미설정\n\n- **GIVEN** LLM API 키가 설정되지 않음\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** 적절한 에러 메시지와 함께 설정 가이드를 반환한다\n\n---\n\n### Requirement: MCP Tool Integration\n\nMCP 서버에 다이어그램 생성 도구가 노출되어야 한다(MUST).\n\n#### Scenario: diagram_generate 도구 호출", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1445", "text": "#### Scenario: API 키 미설정\n\n- **GIVEN** LLM API 키가 설정되지 않음\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** 적절한 에러 메시지와 함께 설정 가이드를 반환한다\n\n---\n\n### Requirement: MCP Tool Integration\n\nMCP 서버에 다이어그램 생성 도구가 노출되어야 한다(MUST).\n\n#### Scenario: diagram_generate 도구 호출\n\n- **GIVEN** MCP 클라이언트 (Claude Code)\n- **WHEN** `diagram_generate` 도구를 호출하면\n- **THEN** 저장소 경로를 입력받아 Mermaid 코드를 반환한다\n\n#### Scenario: diagram_from_change 도구 호출", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1446", "text": "---\n\n### Requirement: MCP Tool Integration\n\nMCP 서버에 다이어그램 생성 도구가 노출되어야 한다(MUST).\n\n#### Scenario: diagram_generate 도구 호출\n\n- **GIVEN** MCP 클라이언트 (Claude Code)\n- **WHEN** `diagram_generate` 도구를 호출하면\n- **THEN** 저장소 경로를 입력받아 Mermaid 코드를 반환한다\n\n#### Scenario: diagram_from_change 도구 호출\n\n- **GIVEN** OpenSpec 변경 ID\n- **WHEN** `diagram_from_change` 도구를 호출하면\n- **THEN** 변경에 영향받는 파일을 하이라이트한 다이어그램을 반환한다\n\n---\n\n### Requirement: Mermaid Rendering in Frontend\n\n프론트엔드에서 생성된 Mermaid 다이어그램을 렌더링해야 한다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1447", "text": "#### Scenario: diagram_from_change 도구 호출\n\n- **GIVEN** OpenSpec 변경 ID\n- **WHEN** `diagram_from_change` 도구를 호출하면\n- **THEN** 변경에 영향받는 파일을 하이라이트한 다이어그램을 반환한다\n\n---\n\n### Requirement: Mermaid Rendering in Frontend\n\n프론트엔드에서 생성된 Mermaid 다이어그램을 렌더링해야 한다(SHALL).\n\n#### Scenario: 다이어그램 렌더링\n\n- **GIVEN** 유효한 Mermaid 코드\n- **WHEN** DiagramViewer 컴포넌트에 전달되면\n- **THEN** SVG로 렌더링하여 화면에 표시한다\n\n#### Scenario: 인터랙티브 네비게이션", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1448", "text": "#### Scenario: 다이어그램 렌더링\n\n- **GIVEN** 유효한 Mermaid 코드\n- **WHEN** DiagramViewer 컴포넌트에 전달되면\n- **THEN** SVG로 렌더링하여 화면에 표시한다\n\n#### Scenario: 인터랙티브 네비게이션\n\n- **GIVEN** 렌더링된 다이어그램\n- **WHEN** 컴포넌트를 클릭하면\n- **THEN** 해당 파일/디렉토리로 네비게이션한다\n\n#### Scenario: 줌/팬 컨트롤", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1449", "text": "#### Scenario: 인터랙티브 네비게이션\n\n- **GIVEN** 렌더링된 다이어그램\n- **WHEN** 컴포넌트를 클릭하면\n- **THEN** 해당 파일/디렉토리로 네비게이션한다\n\n#### Scenario: 줌/팬 컨트롤\n\n- **GIVEN** 렌더링된 다이어그램\n- **WHEN** 마우스 휠 또는 드래그 조작 시\n- **THEN** 다이어그램을 줌인/줌아웃하거나 이동할 수 있다\n\n---\n\n### Requirement: Upstream Synchronization\n\nGitDiagram 업스트림 변경을 추적하고 반영할 수 있어야 한다(SHALL).\n\n#### Scenario: 업스트림 버전 추적", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1450", "text": "- **GIVEN** 렌더링된 다이어그램\n- **WHEN** 마우스 휠 또는 드래그 조작 시\n- **THEN** 다이어그램을 줌인/줌아웃하거나 이동할 수 있다\n\n---\n\n### Requirement: Upstream Synchronization\n\nGitDiagram 업스트림 변경을 추적하고 반영할 수 있어야 한다(SHALL).\n\n#### Scenario: 업스트림 버전 추적\n\n- **GIVEN** `packages/gitdiagram-core/package.json`\n- **WHEN** upstream 필드를 확인하면\n- **THEN** 포팅된 GitDiagram 커밋 해시와 동기화 날짜를 확인할 수 있다\n\n#### Scenario: 업스트림 변경 감지", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1451", "text": "---\n\n### Requirement: Upstream Synchronization\n\nGitDiagram 업스트림 변경을 추적하고 반영할 수 있어야 한다(SHALL).\n\n#### Scenario: 업스트림 버전 추적\n\n- **GIVEN** `packages/gitdiagram-core/package.json`\n- **WHEN** upstream 필드를 확인하면\n- **THEN** 포팅된 GitDiagram 커밋 해시와 동기화 날짜를 확인할 수 있다\n\n#### Scenario: 업스트림 변경 감지\n\n- **GIVEN** 동기화 체크 스크립트 실행\n- **WHEN** GitDiagram 저장소에 새 커밋이 있으면\n- **THEN** 경고 메시지로 업데이트가 필요함을 알린다", "metadata": {"file_path": "openspec/changes/archive/2025-12-13-add-gitdiagram-integration/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1452", "text": "# Alert System 설계\n\n## Overview\n\nAlert System은 외부 서비스(GitHub, Vercel, Sentry, Supabase)의 웹훅을 통합 수신하고, AI Agent가 자동 분석 및 해결을 시도하는 시스템입니다.\n\n## Architecture\n\n### Component Diagram\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│                         Zyflow Server                            │\n│                                                                  │\n│  ┌──────────────────────────────────────────────────────────┐", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1453", "text": "Zyflow Server                            │\n│                                                                  │\n│  ┌──────────────────────────────────────────────────────────┐   │\n│  │                    Webhook Gateway                        │   │\n│  │  /api/alerts/webhooks/github                              │   │\n│  │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1454", "text": "│\n│  ┌──────────────────────────────────────────────────────────┐   │\n│  │                    Webhook Gateway                        │   │\n│  │  /api/alerts/webhooks/github                              │   │\n│  │  /api/alerts/webhooks/vercel                              │   │\n│  │  /api/alerts/webhooks/sentry                              │   │\n│  │  /api/alerts/webhooks/supabase", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1455", "text": "│   │\n│  │  /api/alerts/webhooks/vercel                              │   │\n│  │  /api/alerts/webhooks/sentry                              │   │\n│  │  /api/alerts/webhooks/supabase                            │   │\n│  └───────────────────────┬──────────────────────────────────┘   │\n│                          │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1456", "text": "│  /api/alerts/webhooks/supabase                            │   │\n│  └───────────────────────┬──────────────────────────────────┘   │\n│                          │                                       │\n│                          ▼                                       │\n│  ┌──────────────────────────────────────────────────────────┐   │\n│  │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1457", "text": "│\n│                          ▼                                       │\n│  ┌──────────────────────────────────────────────────────────┐   │\n│  │                   Alert Processor                         │   │\n│  │  ┌────────────┐ ┌────────────┐ ┌────────────────────┐    │   │\n│  │  │   Parser   │ │  Analyzer  │ │  Risk Assessor     │    │   │\n│  │  │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1458", "text": "│\n│  │                   Alert Processor                         │   │\n│  │  ┌────────────┐ ┌────────────┐ ┌────────────────────┐    │   │\n│  │  │   Parser   │ │  Analyzer  │ │  Risk Assessor     │    │   │\n│  │  │            │→│ (AI Agent) │→│                    │    │   │\n│  │  └────────────┘ └────────────┘ └────────────────────┘    │   │\n│  │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1459", "text": "│    │   │\n│  │  │            │→│ (AI Agent) │→│                    │    │   │\n│  │  └────────────┘ └────────────┘ └────────────────────┘    │   │\n│  │                                        │                  │   │\n│  │                         ┌──────────────┼───────────┐      │   │\n│  │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1460", "text": "│                  │   │\n│  │                         ┌──────────────┼───────────┐      │   │\n│  │                         ▼              ▼           ▼      │   │\n│  │                  ┌──────────┐  ┌──────────┐ ┌──────────┐ │   │\n│  │                  │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1461", "text": "▼              ▼           ▼      │   │\n│  │                  ┌──────────┐  ┌──────────┐ ┌──────────┐ │   │\n│  │                  │ Auto-Fix │  │  Slack   │ │WebSocket │ │   │\n│  │                  │ Executor │  │ Notifier │ │Broadcast │ │   │\n│  │                  └──────────┘  └──────────┘ └──────────┘ │   │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1462", "text": "│   │\n│  │                  │ Auto-Fix │  │  Slack   │ │WebSocket │ │   │\n│  │                  │ Executor │  │ Notifier │ │Broadcast │ │   │\n│  │                  └──────────┘  └──────────┘ └──────────┘ │   │\n│  └──────────────────────────────────────────────────────────┘   │\n│                                                                  │\n│  ┌──────────────────────────────────────────────────────────┐   │\n│  │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1463", "text": "└──────────┘ └──────────┘ │   │\n│  └──────────────────────────────────────────────────────────┘   │\n│                                                                  │\n│  ┌──────────────────────────────────────────────────────────┐   │\n│  │                      SQLite DB                            │   │\n│  │  ┌──────────┐ ┌──────────────┐ ┌────────────────────┐    │   │\n│  │  │  alerts  │ │activity_logs │ │   webhook_configs  │    │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1464", "text": "│\n│  │                      SQLite DB                            │   │\n│  │  ┌──────────┐ ┌──────────────┐ ┌────────────────────┐    │   │\n│  │  │  alerts  │ │activity_logs │ │   webhook_configs  │    │   │\n│  │  └──────────┘ └──────────────┘ └────────────────────┘    │   │\n│  │  ┌─────────────────────────┐                              │   │\n│  │  │   notification_config   │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1465", "text": "webhook_configs  │    │   │\n│  │  └──────────┘ └──────────────┘ └────────────────────┘    │   │\n│  │  ┌─────────────────────────┐                              │   │\n│  │  │   notification_config   │                              │   │\n│  │  └─────────────────────────┘                              │   │\n│  └──────────────────────────────────────────────────────────┘   │\n└─────────────────────────────────────────────────────────────────┘\n```\n\n### Data Flow", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1466", "text": "│  │   notification_config   │                              │   │\n│  │  └─────────────────────────┘                              │   │\n│  └──────────────────────────────────────────────────────────┘   │\n└─────────────────────────────────────────────────────────────────┘\n```\n\n### Data Flow\n\n```\n1. Webhook 수신\n   External Service → Webhook Gateway → Parser\n\n2. Alert 생성 & 분석\n   Parser → DB Insert → Background Process → Agent Analyzer\n\n3. 위험도 평가 & 자동 수정\n   Analyzer → Risk Assessor → Auto-Fix Executor (조건부)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1467", "text": "│   │\n│  └──────────────────────────────────────────────────────────┘   │\n└─────────────────────────────────────────────────────────────────┘\n```\n\n### Data Flow\n\n```\n1. Webhook 수신\n   External Service → Webhook Gateway → Parser\n\n2. Alert 생성 & 분석\n   Parser → DB Insert → Background Process → Agent Analyzer\n\n3. 위험도 평가 & 자동 수정\n   Analyzer → Risk Assessor → Auto-Fix Executor (조건부)\n\n4. 알림 발송\n   Auto-Fix → Slack Notifier (조건부)\n           → WebSocket Broadcast (항상)\n```\n\n## Database Schema\n\n### alerts 테이블", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1468", "text": "### Data Flow\n\n```\n1. Webhook 수신\n   External Service → Webhook Gateway → Parser\n\n2. Alert 생성 & 분석\n   Parser → DB Insert → Background Process → Agent Analyzer\n\n3. 위험도 평가 & 자동 수정\n   Analyzer → Risk Assessor → Auto-Fix Executor (조건부)\n\n4. 알림 발송\n   Auto-Fix → Slack Notifier (조건부)\n           → WebSocket Broadcast (항상)\n```\n\n## Database Schema\n\n### alerts 테이블\n\n```sql\nCREATE TABLE alerts (\n  id TEXT PRIMARY KEY,\n  source TEXT NOT NULL,           -- 'github' | 'vercel' | 'sentry' | 'supabase'\n  type TEXT NOT NULL,             -- 'workflow.failure' | 'deployment.error' 등\n  severity TEXT NOT NULL,         -- 'critical' | 'warning' | 'info'\n  status TEXT NOT NULL DEFAULT 'pending',  -- 'pending' | 'processing' | 'resolved' | 'ignored'", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1469", "text": "## Database Schema\n\n### alerts 테이블\n\n```sql\nCREATE TABLE alerts (\n  id TEXT PRIMARY KEY,\n  source TEXT NOT NULL,           -- 'github' | 'vercel' | 'sentry' | 'supabase'\n  type TEXT NOT NULL,             -- 'workflow.failure' | 'deployment.error' 등\n  severity TEXT NOT NULL,         -- 'critical' | 'warning' | 'info'\n  status TEXT NOT NULL DEFAULT 'pending',  -- 'pending' | 'processing' | 'resolved' | 'ignored'\n\n  title TEXT NOT NULL,\n  summary TEXT,\n  external_url TEXT,\n\n  payload TEXT NOT NULL,          -- JSON: 원본 웹훅 데이터\n  metadata TEXT,                  -- JSON: { repo, branch, commit, environment }\n  analysis TEXT,                  -- JSON: AlertAnalysis\n  resolution TEXT,                -- JSON: { type, action, details, prUrl }", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1470", "text": "title TEXT NOT NULL,\n  summary TEXT,\n  external_url TEXT,\n\n  payload TEXT NOT NULL,          -- JSON: 원본 웹훅 데이터\n  metadata TEXT,                  -- JSON: { repo, branch, commit, environment }\n  analysis TEXT,                  -- JSON: AlertAnalysis\n  resolution TEXT,                -- JSON: { type, action, details, prUrl }\n\n  created_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now') * 1000),\n  updated_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now') * 1000),\n  resolved_at INTEGER,\n  expires_at INTEGER NOT NULL     -- created_at + 90일\n);\n```\n\n### activity_logs 테이블", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1471", "text": "created_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now') * 1000),\n  updated_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now') * 1000),\n  resolved_at INTEGER,\n  expires_at INTEGER NOT NULL     -- created_at + 90일\n);\n```\n\n### activity_logs 테이블\n\n```sql\nCREATE TABLE activity_logs (\n  id TEXT PRIMARY KEY,\n  alert_id TEXT,\n  actor TEXT NOT NULL,            -- 'system' | 'agent' | 'user'\n  action TEXT NOT NULL,\n  description TEXT NOT NULL,\n  metadata TEXT,                  -- JSON\n  created_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now') * 1000),\n  FOREIGN KEY (alert_id) REFERENCES alerts(id) ON DELETE CASCADE\n);\n```\n\n### webhook_configs 테이블", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1472", "text": "### activity_logs 테이블\n\n```sql\nCREATE TABLE activity_logs (\n  id TEXT PRIMARY KEY,\n  alert_id TEXT,\n  actor TEXT NOT NULL,            -- 'system' | 'agent' | 'user'\n  action TEXT NOT NULL,\n  description TEXT NOT NULL,\n  metadata TEXT,                  -- JSON\n  created_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now') * 1000),\n  FOREIGN KEY (alert_id) REFERENCES alerts(id) ON DELETE CASCADE\n);\n```\n\n### webhook_configs 테이블\n\n```sql\nCREATE TABLE webhook_configs (\n  id TEXT PRIMARY KEY,\n  source TEXT NOT NULL,\n  name TEXT NOT NULL,\n  endpoint TEXT NOT NULL,\n  secret TEXT,                    -- 암호화 저장\n  enabled INTEGER NOT NULL DEFAULT 1,\n  rules TEXT,                     -- JSON\n  project_ids TEXT,               -- JSON array\n  created_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now') * 1000),\n  updated_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now') * 1000)\n);\n```", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1473", "text": "### webhook_configs 테이블\n\n```sql\nCREATE TABLE webhook_configs (\n  id TEXT PRIMARY KEY,\n  source TEXT NOT NULL,\n  name TEXT NOT NULL,\n  endpoint TEXT NOT NULL,\n  secret TEXT,                    -- 암호화 저장\n  enabled INTEGER NOT NULL DEFAULT 1,\n  rules TEXT,                     -- JSON\n  project_ids TEXT,               -- JSON array\n  created_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now') * 1000),\n  updated_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now') * 1000)\n);\n```\n\n### notification_config 테이블", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1474", "text": "### notification_config 테이블\n\n```sql\nCREATE TABLE notification_config (\n  id TEXT PRIMARY KEY DEFAULT 'default',\n  slack_webhook_url TEXT,         -- 암호화 저장\n  slack_channel TEXT,\n  slack_enabled INTEGER NOT NULL DEFAULT 0,\n  rule_on_critical INTEGER NOT NULL DEFAULT 1,\n  rule_on_autofix INTEGER NOT NULL DEFAULT 1,\n  rule_on_all INTEGER NOT NULL DEFAULT 0,\n  created_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now') * 1000),\n  updated_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now') * 1000)\n);\n```\n\n## Agent Analysis\n\n### 분석 프로세스\n\n```typescript\nfunction analyzeAlert(alert: Alert): AlertAnalysis {\n  // 1. 소스별 패턴 매칭\n  const patterns = getPatterns(alert.source)\n\n  // 2. payload에서 에러 정보 추출\n  const errorInfo = extractErrorInfo(alert.payload, alert.source)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1475", "text": "## Agent Analysis\n\n### 분석 프로세스\n\n```typescript\nfunction analyzeAlert(alert: Alert): AlertAnalysis {\n  // 1. 소스별 패턴 매칭\n  const patterns = getPatterns(alert.source)\n\n  // 2. payload에서 에러 정보 추출\n  const errorInfo = extractErrorInfo(alert.payload, alert.source)\n\n  // 3. Root cause 추정\n  const rootCause = determineRootCause(errorInfo, patterns)\n\n  // 4. 자동 수정 가능 여부 판단\n  const autoFixable = checkAutoFixable(rootCause, patterns)\n\n  // 5. 신뢰도 계산\n  const confidence = calculateConfidence(rootCause, patterns)\n\n  return {\n    alertId: alert.id,\n    rootCause,\n    suggestedFix,\n    autoFixable,\n    autoFixAction,\n    confidence,\n    analyzedAt: new Date().toISOString()\n  }\n}\n```\n\n### 소스별 패턴", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1476", "text": "// 5. 신뢰도 계산\n  const confidence = calculateConfidence(rootCause, patterns)\n\n  return {\n    alertId: alert.id,\n    rootCause,\n    suggestedFix,\n    autoFixable,\n    autoFixAction,\n    confidence,\n    analyzedAt: new Date().toISOString()\n  }\n}\n```\n\n### 소스별 패턴\n\n| Source | 패턴 | Auto-fix Action |\n|--------|------|-----------------|\n| GitHub | Build failed | retry_workflow |\n| GitHub | Test failed | retry_workflow |\n| GitHub | Type error | lint_fix |\n| Vercel | Deployment error | redeploy |\n| Vercel | Build failed | - (수동 검토) |\n| Sentry | Fatal error | - (수동 검토) |\n| Sentry | Error | - (분석 제공) |\n| Supabase | Database error | - (수동 검토) |\n\n## Risk Assessment\n\n### 평가 기준", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1477", "text": "## Risk Assessment\n\n### 평가 기준\n\n```typescript\nfunction assessRisk(alert: Alert, analysis: AlertAnalysis): RiskAssessment {\n  let level: 'low' | 'medium' | 'high' = 'medium'\n\n  // High Risk 조건\n  if (alert.severity === 'critical') level = 'high'\n  if (metadata.environment === 'production') level = 'high'\n  if (analysis.confidence < 0.5) level = 'high'\n\n  // Low Risk 조건\n  if (alert.severity === 'info') level = 'low'\n  if (analysis.confidence >= 0.8 && lintPatterns.test(analysis.suggestedFix)) level = 'low'\n\n  // 권장 조치 결정\n  const recommendation = getRecommendation(level, analysis.autoFixable)\n\n  return { level, recommendation, shouldAutoFix }\n}\n```\n\n### 권장 조치 매트릭스", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1478", "text": "// Low Risk 조건\n  if (alert.severity === 'info') level = 'low'\n  if (analysis.confidence >= 0.8 && lintPatterns.test(analysis.suggestedFix)) level = 'low'\n\n  // 권장 조치 결정\n  const recommendation = getRecommendation(level, analysis.autoFixable)\n\n  return { level, recommendation, shouldAutoFix }\n}\n```\n\n### 권장 조치 매트릭스\n\n| 위험도 | autoFixable | 권장 조치 |\n|--------|-------------|-----------|\n| low | true | auto_approve |\n| low | false | pr_with_review |\n| medium | true | pr_with_review |\n| medium | false | pr_with_required_review |\n| high | * | manual_review |\n\n## WebSocket Integration\n\n### 함수 주입 패턴\n\n```typescript\n// server/routes/alerts.ts\nlet broadcastAlert: ((data: unknown) => void) | null = null", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1479", "text": "### 권장 조치 매트릭스\n\n| 위험도 | autoFixable | 권장 조치 |\n|--------|-------------|-----------|\n| low | true | auto_approve |\n| low | false | pr_with_review |\n| medium | true | pr_with_review |\n| medium | false | pr_with_required_review |\n| high | * | manual_review |\n\n## WebSocket Integration\n\n### 함수 주입 패턴\n\n```typescript\n// server/routes/alerts.ts\nlet broadcastAlert: ((data: unknown) => void) | null = null\n\nexport function setBroadcastAlert(fn: (data: unknown) => void): void {\n  broadcastAlert = fn\n}\n\n// server/app.ts\nimport { setBroadcastAlert } from './routes/alerts.js'\n\nsetBroadcastAlert((data) => {\n  emit('alert', data)  // WebSocket broadcast\n})\n```\n\n### 이벤트 타입\n\n```typescript\n// alert.created\n{ type: 'alert.created', alert: Alert }", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1480", "text": "```typescript\n// server/routes/alerts.ts\nlet broadcastAlert: ((data: unknown) => void) | null = null\n\nexport function setBroadcastAlert(fn: (data: unknown) => void): void {\n  broadcastAlert = fn\n}\n\n// server/app.ts\nimport { setBroadcastAlert } from './routes/alerts.js'\n\nsetBroadcastAlert((data) => {\n  emit('alert', data)  // WebSocket broadcast\n})\n```\n\n### 이벤트 타입\n\n```typescript\n// alert.created\n{ type: 'alert.created', alert: Alert }\n\n// alert.processed\n{ type: 'alert.processed', alert: Alert, result: ProcessingResult }\n```\n\n## UI Components\n\n### Component Tree", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1481", "text": "### 이벤트 타입\n\n```typescript\n// alert.created\n{ type: 'alert.created', alert: Alert }\n\n// alert.processed\n{ type: 'alert.processed', alert: Alert, result: ProcessingResult }\n```\n\n## UI Components\n\n### Component Tree\n\n```\nAlertCenter\n├── Header (title, stats, filters, settings button)\n├── AlertList\n│   └── AlertItem (반복)\n├── AlertDetail (선택 시)\n│   ├── Header (제목, 뒤로가기)\n│   ├── BasicInfo (severity, status, source)\n│   ├── Metadata (repo, branch, commit)\n│   ├── Analysis (rootCause, suggestedFix, confidence)\n│   ├── Resolution (해결 정보)\n│   ├── ActivityTimeline\n│   └── Actions (Analyze, Process, Ignore, Resolve)\n└── AlertSettings (설정 모드)\n    ├── WebhookSettings\n    └── NotificationSettings\n```\n\n### Hooks", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1482", "text": "### Hooks\n\n```typescript\n// 데이터 조회\nuseAlerts(filter?)       // Alert 목록\nuseAlert(alertId)        // Alert 상세\nuseAlertStats()          // 통계\nuseActivityLogs(filter?) // Activity 로그\nuseWebhookConfigs()      // Webhook 설정\nuseNotificationConfig()  // 알림 설정\n\n// 뮤테이션\nuseUpdateAlertStatus()   // 상태 변경\nuseIgnoreAlert()         // Alert 무시\nuseAnalyzeAlert()        // 분석 트리거\nuseProcessAlert()        // 전체 처리 트리거\nuseCreateWebhookConfig() // Webhook 생성\nuseUpdateWebhookConfig() // Webhook 수정\nuseDeleteWebhookConfig() // Webhook 삭제\nuseUpdateNotificationConfig() // 알림 설정 수정\nuseTestSlackNotification()    // Slack 테스트\n```\n\n## Security Considerations", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1483", "text": "// 뮤테이션\nuseUpdateAlertStatus()   // 상태 변경\nuseIgnoreAlert()         // Alert 무시\nuseAnalyzeAlert()        // 분석 트리거\nuseProcessAlert()        // 전체 처리 트리거\nuseCreateWebhookConfig() // Webhook 생성\nuseUpdateWebhookConfig() // Webhook 수정\nuseDeleteWebhookConfig() // Webhook 삭제\nuseUpdateNotificationConfig() // 알림 설정 수정\nuseTestSlackNotification()    // Slack 테스트\n```\n\n## Security Considerations\n\n1. **Webhook Secret 검증**: HMAC-SHA256 서명 검증 (GitHub, Vercel)\n2. **Secret 저장**: AES-256 암호화 후 DB 저장\n3. **Rate Limiting**: 소스당 100 req/min\n4. **Payload 크기**: 최대 1MB\n\n## Performance Considerations", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1484", "text": "## Security Considerations\n\n1. **Webhook Secret 검증**: HMAC-SHA256 서명 검증 (GitHub, Vercel)\n2. **Secret 저장**: AES-256 암호화 후 DB 저장\n3. **Rate Limiting**: 소스당 100 req/min\n4. **Payload 크기**: 최대 1MB\n\n## Performance Considerations\n\n1. **백그라운드 처리**: Webhook 응답 후 비동기 분석\n2. **인덱스**: status, source, severity, created_at에 인덱스\n3. **만료 정리**: 90일 이상 된 Alert 자동 삭제\n4. **캐싱**: React Query로 클라이언트 캐싱", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/design.md", "file_name": "design.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1485", "text": "# Alert System 통합\n\n## Summary\n\nGitHub Actions, Vercel, Sentry, Supabase 등 외부 서비스의 알림을 통합 수집하고, AI Agent가 자동 분석 및 해결을 시도하며, 처리 과정을 모니터링할 수 있는 Alert System을 추가합니다.\n\n## Motivation\n\n현재 개발자는 여러 서비스의 알림을 각각 확인해야 합니다:\n- GitHub Actions 실패 → 이메일/GitHub 알림\n- Vercel 배포 에러 → Vercel 대시보드\n- Sentry 에러 → Sentry 대시보드\n- Supabase 이벤트 → Supabase 대시보드", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1486", "text": "## Motivation\n\n현재 개발자는 여러 서비스의 알림을 각각 확인해야 합니다:\n- GitHub Actions 실패 → 이메일/GitHub 알림\n- Vercel 배포 에러 → Vercel 대시보드\n- Sentry 에러 → Sentry 대시보드\n- Supabase 이벤트 → Supabase 대시보드\n\n이러한 분산된 알림을 단일 인터페이스에서 통합 관리하고, AI가 자동으로 분석/해결을 시도하여 개발자의 알림 피로를 줄입니다.\n\n## Proposed Solution\n\n### Alert System Architecture\n\n```\n┌──────────────────────────────────────────────────────────────┐\n│                        External Services                      │\n├──────────────────────────────────────────────────────────────┤\n│  GitHub Actions  │  Vercel  │  Supabase  │  Sentry  │  ...", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1487", "text": "## Proposed Solution\n\n### Alert System Architecture\n\n```\n┌──────────────────────────────────────────────────────────────┐\n│                        External Services                      │\n├──────────────────────────────────────────────────────────────┤\n│  GitHub Actions  │  Vercel  │  Supabase  │  Sentry  │  ...  │\n└────────┬─────────┴────┬─────┴─────┬──────┴────┬─────┴───────┘\n         │              │           │           │\n         ▼              ▼           ▼           ▼\n┌──────────────────────────────────────────────────────────────┐\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1488", "text": "│              │           │           │\n         ▼              ▼           ▼           ▼\n┌──────────────────────────────────────────────────────────────┐\n│                    Webhook Gateway                            │\n│                   /api/alerts/webhooks/:source                │\n└────────────────────────────┬─────────────────────────────────┘", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1489", "text": "Webhook Gateway                            │\n│                   /api/alerts/webhooks/:source                │\n└────────────────────────────┬─────────────────────────────────┘\n                             │\n                             ▼\n┌──────────────────────────────────────────────────────────────┐\n│                    Alert Processor", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1490", "text": "│\n                             ▼\n┌──────────────────────────────────────────────────────────────┐\n│                    Alert Processor                            │\n│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐   │\n│  │   Parser    │→ │   Agent     │→ │  Action Dispatcher  │   │\n│  │             │  │  Analysis   │  │  (Risk Assessment)  │   │\n│  └─────────────┘", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1491", "text": "│\n│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐   │\n│  │   Parser    │→ │   Agent     │→ │  Action Dispatcher  │   │\n│  │             │  │  Analysis   │  │  (Risk Assessment)  │   │\n│  └─────────────┘  └─────────────┘  └─────────────────────┘   │\n└────────────────────────────┬─────────────────────────────────┘\n                             │\n              ┌──────────────┼──────────────┐\n              ▼", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1492", "text": "(Risk Assessment)  │   │\n│  └─────────────┘  └─────────────┘  └─────────────────────┘   │\n└────────────────────────────┬─────────────────────────────────┘\n                             │\n              ┌──────────────┼──────────────┐\n              ▼              ▼              ▼\n       ┌───────────┐  ┌───────────┐  ┌───────────┐\n       │  Storage  │  │ Auto-Fix  │  │  Notifier │\n       │ (SQLite)  │  │  Executor │  │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1493", "text": "▼              ▼              ▼\n       ┌───────────┐  ┌───────────┐  ┌───────────┐\n       │  Storage  │  │ Auto-Fix  │  │  Notifier │\n       │ (SQLite)  │  │  Executor │  │  (Slack)  │\n       └───────────┘  └───────────┘  └───────────┘\n                             │\n                             ▼", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1494", "text": "│ (SQLite)  │  │  Executor │  │  (Slack)  │\n       └───────────┘  └───────────┘  └───────────┘\n                             │\n                             ▼\n                    ┌───────────────┐\n                    │  WebSocket    │\n                    │  Broadcast    │\n                    └───────────────┘\n```\n\n### 핵심 기능", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1495", "text": "▼\n                    ┌───────────────┐\n                    │  WebSocket    │\n                    │  Broadcast    │\n                    └───────────────┘\n```\n\n### 핵심 기능\n\n1. **Webhook 수신 & 파싱**\n   - 소스별 파서 (GitHub, Vercel, Sentry, Supabase)\n   - 통일된 Alert 포맷으로 정규화\n   - 자동 severity 분류", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1496", "text": "│\n                    │  Broadcast    │\n                    └───────────────┘\n```\n\n### 핵심 기능\n\n1. **Webhook 수신 & 파싱**\n   - 소스별 파서 (GitHub, Vercel, Sentry, Supabase)\n   - 통일된 Alert 포맷으로 정규화\n   - 자동 severity 분류\n\n2. **Agent 분석**\n   - 패턴 기반 root cause 분석\n   - 자동 수정 가능 여부 판단\n   - 신뢰도 점수 계산\n\n3. **위험도 평가**\n   - Low/Medium/High 3단계 평가\n   - 환경(production) 고려\n   - 권장 조치 제안", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1497", "text": "2. **Agent 분석**\n   - 패턴 기반 root cause 분석\n   - 자동 수정 가능 여부 판단\n   - 신뢰도 점수 계산\n\n3. **위험도 평가**\n   - Low/Medium/High 3단계 평가\n   - 환경(production) 고려\n   - 권장 조치 제안\n\n4. **Auto-fix 실행**\n   - GitHub workflow 재시도\n   - Vercel 재배포\n   - 린트/포맷 수정\n\n5. **알림**\n   - Slack 통합\n   - WebSocket 실시간 브로드캐스트\n\n## Design Decisions", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1498", "text": "4. **Auto-fix 실행**\n   - GitHub workflow 재시도\n   - Vercel 재배포\n   - 린트/포맷 수정\n\n5. **알림**\n   - Slack 통합\n   - WebSocket 실시간 브로드캐스트\n\n## Design Decisions\n\n| 항목 | 결정 | 이유 |\n|------|------|------|\n| 알림 보관 기간 | 90일 | Slack 무료 플랜과 동일, 충분한 히스토리 |\n| Agent 분석 범위 | 모든 케이스 | 학습 데이터 축적, 점진적 개선 |\n| Auto-fix PR | 리뷰 대기 | 안전성 우선, 사용자 확인 필요 |\n| WebSocket | 함수 주입 패턴 | 순환 참조 방지 |\n\n## Related Specs", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1499", "text": "## Related Specs\n\n- [alert-system spec](specs/alert-system/spec.md)\n\n## References\n\n- [Alert System 상세 스펙](../../docs/specs/alert-system.md)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1500", "text": "# Alert System 구현 작업\n\n## Phase 1: Foundation ✅ COMPLETED\n\n### Database & Schema\n- [x] alerts 테이블 스키마 생성\n- [x] activity_logs 테이블 스키마 생성\n- [x] webhook_configs 테이블 스키마 생성\n- [x] notification_config 테이블 스키마 생성 (싱글톤)\n- [x] 인덱스 생성 (status, source, severity, created_at, expires_at)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1501", "text": "### Webhook Endpoints\n- [x] POST /api/alerts/webhooks/github - GitHub Actions 웹훅\n- [x] POST /api/alerts/webhooks/vercel - Vercel 배포 웹훅\n- [x] POST /api/alerts/webhooks/sentry - Sentry 이슈 웹훅\n- [x] POST /api/alerts/webhooks/supabase - Supabase 이벤트 웹훅\n- [x] 소스별 파서 구현 (parseGitHubWebhook, parseVercelWebhook 등)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1502", "text": "### Alert API\n- [x] GET /api/alerts - 목록 조회 (필터링 지원)\n- [x] GET /api/alerts/:id - 상세 조회\n- [x] PATCH /api/alerts/:id - 상태 변경\n- [x] POST /api/alerts/:id/ignore - Alert 무시\n- [x] GET /api/alerts/stats - 통계 조회\n- [x] GET /api/alerts/activities - Activity 로그 조회\n\n### Webhook Config API\n- [x] GET /api/alerts/webhook-configs - 설정 목록\n- [x] POST /api/alerts/webhook-configs - 설정 생성\n- [x] PATCH /api/alerts/webhook-configs/:id - 설정 수정\n- [x] DELETE /api/alerts/webhook-configs/:id - 설정 삭제\n- [x] POST /api/alerts/webhook-configs/:id/regenerate-secret - Secret 재생성", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1503", "text": "### Webhook Config API\n- [x] GET /api/alerts/webhook-configs - 설정 목록\n- [x] POST /api/alerts/webhook-configs - 설정 생성\n- [x] PATCH /api/alerts/webhook-configs/:id - 설정 수정\n- [x] DELETE /api/alerts/webhook-configs/:id - 설정 삭제\n- [x] POST /api/alerts/webhook-configs/:id/regenerate-secret - Secret 재생성\n\n### Notification Config API\n- [x] GET /api/alerts/notification-config - 알림 설정 조회\n- [x] PATCH /api/alerts/notification-config - 알림 설정 수정\n- [x] POST /api/alerts/notification-config/test - Slack 테스트", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1504", "text": "### Notification Config API\n- [x] GET /api/alerts/notification-config - 알림 설정 조회\n- [x] PATCH /api/alerts/notification-config - 알림 설정 수정\n- [x] POST /api/alerts/notification-config/test - Slack 테스트\n\n### UI Components\n- [x] AlertCenter.tsx - 메인 컨테이너\n- [x] AlertList.tsx - 알림 목록\n- [x] AlertDetail.tsx - 상세 뷰\n- [x] AlertSettings.tsx - 설정 패널 (Webhook, Notification)\n- [x] useAlerts.ts - React Query 훅\n\n---\n\n## Phase 2: Agent Integration ✅ COMPLETED\n\n### Alert Processor Service\n- [x] server/services/alertProcessor.ts 생성\n- [x] analyzeAlert() - 소스별 패턴 기반 분석\n  - GitHub: 빌드 실패, 테스트 실패,", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1505", "text": "---\n\n## Phase 2: Agent Integration ✅ COMPLETED\n\n### Alert Processor Service\n- [x] server/services/alertProcessor.ts 생성\n- [x] analyzeAlert() - 소스별 패턴 기반 분석\n  - GitHub: 빌드 실패, 테스트 실패, 타입 에러 패턴\n  - Vercel: 배포 에러 패턴\n  - Sentry: 에러 레벨 기반 분석\n  - Supabase: DB/Auth 이슈 패턴\n- [x] assessRisk() - 위험도 평가\n  - severity, environment, confidence 기반\n  - Low/Medium/High 3단계\n  - 권장 조치 (auto_approve,", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1506", "text": "테스트 실패, 타입 에러 패턴\n  - Vercel: 배포 에러 패턴\n  - Sentry: 에러 레벨 기반 분석\n  - Supabase: DB/Auth 이슈 패턴\n- [x] assessRisk() - 위험도 평가\n  - severity, environment, confidence 기반\n  - Low/Medium/High 3단계\n  - 권장 조치 (auto_approve, pr_with_review 등)\n- [x] executeAutoFix() - 자동 수정 실행\n  - retry_workflow: GitHub API workflow 재실행\n  - redeploy: Vercel API 재배포\n  - lint_fix,", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1507", "text": "environment, confidence 기반\n  - Low/Medium/High 3단계\n  - 권장 조치 (auto_approve, pr_with_review 등)\n- [x] executeAutoFix() - 자동 수정 실행\n  - retry_workflow: GitHub API workflow 재실행\n  - redeploy: Vercel API 재배포\n  - lint_fix, format_fix 지원\n- [x] sendSlackNotification() - Slack 알림\n  - Block Kit 기반 리치 메시지\n  - 심각도별 색상 구분\n- [x] processAlert() - 전체 워크플로우 통합\n\n### API Endpoints\n- [x] POST /api/alerts/:id/analyze - 수동 분석 트리거\n- [x] POST /api/alerts/:id/process - 전체 처리 워크플로우", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1508", "text": "format_fix 지원\n- [x] sendSlackNotification() - Slack 알림\n  - Block Kit 기반 리치 메시지\n  - 심각도별 색상 구분\n- [x] processAlert() - 전체 워크플로우 통합\n\n### API Endpoints\n- [x] POST /api/alerts/:id/analyze - 수동 분석 트리거\n- [x] POST /api/alerts/:id/process - 전체 처리 워크플로우\n\n### WebSocket Integration\n- [x] setBroadcastAlert() 함수 주입 패턴\n- [x] alert.created 이벤트 브로드캐스트\n- [x] alert.processed 이벤트 브로드캐스트\n- [x] 백그라운드 비동기 처리", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1509", "text": "### WebSocket Integration\n- [x] setBroadcastAlert() 함수 주입 패턴\n- [x] alert.created 이벤트 브로드캐스트\n- [x] alert.processed 이벤트 브로드캐스트\n- [x] 백그라운드 비동기 처리\n\n### UI Updates\n- [x] AlertDetail에 Analyze 버튼 추가\n- [x] AlertDetail에 Auto Process 버튼 추가\n- [x] 로딩 상태 표시 (스피너 애니메이션)\n- [x] useAnalyzeAlert, useProcessAlert 훅 추가\n\n---\n\n## Phase 3: Advanced Features ✅ COMPLETED\n\n### 유사 Alert 매칭\n- [x] 과거 Alert와 유사도 비교 (Jaccard similarity 알고리즘)\n- [x] 해결 패턴 학습 및 추천 (findSimilarAlerts, learnFromResolution)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1510", "text": "---\n\n## Phase 3: Advanced Features ✅ COMPLETED\n\n### 유사 Alert 매칭\n- [x] 과거 Alert와 유사도 비교 (Jaccard similarity 알고리즘)\n- [x] 해결 패턴 학습 및 추천 (findSimilarAlerts, learnFromResolution)\n\n### PR 생성 Auto-fix\n- [x] 코드 패치 생성 (patchContent 기반)\n- [x] GitHub PR API 연동 (createPullRequest)\n- [x] 위험도별 라벨 자동 추가\n\n### 통계 대시보드\n- [x] 소스별 알림 트렌드 (getTrends API)\n- [x] 해결 시간 분석 (avgResolutionTimeHours)\n- [x] Auto-fix 성공률 (autoFixRate)\n- [x] AlertDashboard UI 컴포넌트", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1511", "text": "### 통계 대시보드\n- [x] 소스별 알림 트렌드 (getTrends API)\n- [x] 해결 시간 분석 (avgResolutionTimeHours)\n- [x] Auto-fix 성공률 (autoFixRate)\n- [x] AlertDashboard UI 컴포넌트\n\n### Alert 패턴 학습\n- [x] 반복 패턴 감지 (pattern_signature 기반)\n- [x] alert_patterns 테이블 및 학습 로직\n- [x] 패턴별 성공률 및 추천 수정 저장\n\n---\n\n## Files Created/Modified", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1512", "text": "### Alert 패턴 학습\n- [x] 반복 패턴 감지 (pattern_signature 기반)\n- [x] alert_patterns 테이블 및 학습 로직\n- [x] 패턴별 성공률 및 추천 수정 저장\n\n---\n\n## Files Created/Modified\n\n### Created (Phase 1)\n- server/routes/alerts.ts\n- src/components/alerts/AlertCenter.tsx\n- src/components/alerts/AlertList.tsx\n- src/components/alerts/AlertDetail.tsx\n- src/components/alerts/AlertSettings.tsx\n- src/components/alerts/index.ts\n- src/hooks/useAlerts.ts\n- docs/specs/alert-system.md\n\n### Created (Phase 2)\n- server/services/alertProcessor.ts\n\n### Created (Phase 3)\n- src/components/alerts/AlertDashboard.tsx", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1513", "text": "### Created (Phase 1)\n- server/routes/alerts.ts\n- src/components/alerts/AlertCenter.tsx\n- src/components/alerts/AlertList.tsx\n- src/components/alerts/AlertDetail.tsx\n- src/components/alerts/AlertSettings.tsx\n- src/components/alerts/index.ts\n- src/hooks/useAlerts.ts\n- docs/specs/alert-system.md\n\n### Created (Phase 2)\n- server/services/alertProcessor.ts\n\n### Created (Phase 3)\n- src/components/alerts/AlertDashboard.tsx\n\n### Modified (Phase 2)\n- server/routes/alerts.ts - WebSocket & 처리 로직 통합\n- server/app.ts - setBroadcastAlert 연결\n- src/hooks/useAlerts.ts - useAnalyzeAlert, useProcessAlert 훅\n- src/components/alerts/AlertDetail.tsx - UI 버튼 추가\n- src/App.tsx - alerts SelectedItem 타입 추가\n- src/components/flow/FlowContent.tsx - AlertCenter 라우팅\n- src/components/layout/MenuBar.tsx - Alerts 메뉴 버튼", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1514", "text": "### Modified (Phase 3)\n- server/tasks/db/schema.ts - alert_patterns, alert_trends 테이블 추가\n- server/tasks/db/client.ts - 새 테이블 생성 SQL 추가\n- server/services/alertProcessor.ts - findSimilarAlerts, learnFromResolution, getTrends, createPullRequest 추가\n- server/routes/alerts.ts - /trends, /advanced-stats, /patterns, /similar/:id, /create-pr, /dashboard-stats 엔드포인트 추가\n- src/hooks/useAlerts.ts - useDashboardStats, useAlertTrends, useAlertPatterns, useSimilarAlerts, useCreatePR 훅 추가\n- src/components/alerts/AlertCenter.tsx - Dashboard 버튼 및 라우팅 추가\n- src/components/alerts/index.ts - AlertDashboard export 추가\n\n---\n\n## Test Checklist ✅ VERIFIED\n\n### Build & Type Check\n- [x] TypeScript 컴파일 성공\n- [x] Vite 빌드 성공", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1515", "text": "---\n\n## Test Checklist ✅ VERIFIED\n\n### Build & Type Check\n- [x] TypeScript 컴파일 성공\n- [x] Vite 빌드 성공\n\n### Webhook 수신\n- [x] GitHub workflow 완료 웹훅 수신 테스트 (구현 완료, 실제 테스트 필요)\n- [x] Vercel 배포 에러 웹훅 수신 테스트 (구현 완료, 실제 테스트 필요)\n- [x] Sentry 이슈 생성 웹훅 수신 테스트 (구현 완료, 실제 테스트 필요)\n- [x] Supabase 이벤트 웹훅 수신 테스트 (구현 완료, 실제 테스트 필요)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1516", "text": "### Agent 분석\n- [x] 빌드 실패 Alert 분석 결과 확인 (analyzeAlert 함수 구현)\n- [x] 위험도 평가 결과 확인 (assessRisk 함수 구현)\n- [x] Auto-fix 조건 판단 확인 (executeAutoFix 함수 구현)\n\n### 알림\n- [x] Slack 알림 발송 테스트 (sendSlackNotification 함수 구현)\n- [x] WebSocket 실시간 알림 테스트 (setBroadcastAlert 연동)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1517", "text": "### 알림\n- [x] Slack 알림 발송 테스트 (sendSlackNotification 함수 구현)\n- [x] WebSocket 실시간 알림 테스트 (setBroadcastAlert 연동)\n\n### UI\n- [x] Alert 목록 필터링 테스트 (source, severity, status 필터)\n- [x] Alert 상세 뷰 렌더링 테스트 (AlertDetail 컴포넌트)\n- [x] Analyze/Process 버튼 동작 테스트 (useAnalyzeAlert, useProcessAlert)\n- [x] Webhook 설정 CRUD 테스트 (AlertSettings 컴포넌트)\n- [x] Dashboard 통계 표시 테스트 (AlertDashboard 컴포넌트)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-28", "last_modified_date": "2025-12-28"}}
{"id": "1518", "text": "# alert-system Specification\n\n## Purpose\n\n외부 서비스(GitHub Actions, Vercel, Sentry, Supabase 등)의 알림을 통합 수집하고, AI Agent가 자동 분석 및 해결을 시도하며, 처리 과정을 모니터링할 수 있는 Alert System을 제공합니다.\n\n## ADDED Requirements\n\n### Requirement: Webhook 수신 및 파싱\n\n시스템은 외부 서비스의 Webhook을 수신하고 파싱할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1519", "text": "## ADDED Requirements\n\n### Requirement: Webhook 수신 및 파싱\n\n시스템은 외부 서비스의 Webhook을 수신하고 파싱할 수 있어야 합니다(SHALL).\n\n#### Scenario: GitHub Workflow 웹훅 수신\n- **GIVEN** GitHub Actions에서 workflow가 완료되었을 때\n- **WHEN** `/api/alerts/webhooks/github` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 workflow 실행 결과를 파싱하여 Alert로 저장합니다\n- **AND** 실패한 경우 severity를 `critical`로 설정합니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1520", "text": "#### Scenario: GitHub Workflow 웹훅 수신\n- **GIVEN** GitHub Actions에서 workflow가 완료되었을 때\n- **WHEN** `/api/alerts/webhooks/github` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 workflow 실행 결과를 파싱하여 Alert로 저장합니다\n- **AND** 실패한 경우 severity를 `critical`로 설정합니다\n\n#### Scenario: Vercel 배포 웹훅 수신\n- **GIVEN** Vercel에서 배포가 완료되었을 때\n- **WHEN** `/api/alerts/webhooks/vercel` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 배포 결과를 파싱하여 Alert로 저장합니다\n- **AND** 에러 배포는 severity를 `critical`로 설정합니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1521", "text": "#### Scenario: Sentry 이슈 웹훅 수신\n- **GIVEN** Sentry에서 새 이슈가 생성되었을 때\n- **WHEN** `/api/alerts/webhooks/sentry` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 이슈 정보를 파싱하여 Alert로 저장합니다\n- **AND** level에 따라 severity를 매핑합니다 (fatal→critical, error→warning)\n\n#### Scenario: Supabase 웹훅 수신\n- **GIVEN** Supabase에서 이벤트가 발생했을 때\n- **WHEN** `/api/alerts/webhooks/supabase` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 이벤트를 파싱하여 Alert로 저장합니다\n\n---\n\n### Requirement: Alert 관리 API", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1522", "text": "#### Scenario: Supabase 웹훅 수신\n- **GIVEN** Supabase에서 이벤트가 발생했을 때\n- **WHEN** `/api/alerts/webhooks/supabase` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 이벤트를 파싱하여 Alert로 저장합니다\n\n---\n\n### Requirement: Alert 관리 API\n\n시스템은 Alert를 조회, 필터링, 상태 변경할 수 있어야 합니다(SHALL).\n\n#### Scenario: Alert 목록 조회\n- **GIVEN** 시스템에 저장된 Alert가 있을 때\n- **WHEN** `GET /api/alerts`를 호출하면\n- **THEN** Alert 목록이 반환됩니다\n- **AND** source, severity, status로 필터링할 수 있습니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1523", "text": "---\n\n### Requirement: Alert 관리 API\n\n시스템은 Alert를 조회, 필터링, 상태 변경할 수 있어야 합니다(SHALL).\n\n#### Scenario: Alert 목록 조회\n- **GIVEN** 시스템에 저장된 Alert가 있을 때\n- **WHEN** `GET /api/alerts`를 호출하면\n- **THEN** Alert 목록이 반환됩니다\n- **AND** source, severity, status로 필터링할 수 있습니다\n\n#### Scenario: Alert 상세 조회\n- **GIVEN** 특정 Alert ID가 있을 때\n- **WHEN** `GET /api/alerts/:id`를 호출하면\n- **THEN** Alert 상세 정보가 반환됩니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1524", "text": "#### Scenario: Alert 상세 조회\n- **GIVEN** 특정 Alert ID가 있을 때\n- **WHEN** `GET /api/alerts/:id`를 호출하면\n- **THEN** Alert 상세 정보가 반환됩니다\n\n#### Scenario: Alert 상태 변경\n- **GIVEN** pending 상태의 Alert가 있을 때\n- **WHEN** `PATCH /api/alerts/:id`로 status를 `resolved`로 변경하면\n- **THEN** Alert 상태가 업데이트됩니다\n- **AND** resolved_at 타임스탬프가 기록됩니다\n\n#### Scenario: Alert 무시\n- **GIVEN** pending 상태의 Alert가 있을 때\n- **WHEN** `POST /api/alerts/:id/ignore`를 호출하면\n- **THEN** Alert 상태가 `ignored`로 변경됩니다\n\n---\n\n### Requirement: Agent 분석", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1525", "text": "#### Scenario: Alert 무시\n- **GIVEN** pending 상태의 Alert가 있을 때\n- **WHEN** `POST /api/alerts/:id/ignore`를 호출하면\n- **THEN** Alert 상태가 `ignored`로 변경됩니다\n\n---\n\n### Requirement: Agent 분석\n\n시스템은 AI Agent를 통해 Alert를 자동 분석할 수 있어야 합니다(SHALL).\n\n#### Scenario: 자동 분석 수행\n- **GIVEN** 새로운 Alert가 생성되었을 때\n- **WHEN** 백그라운드 처리 프로세스가 실행되면\n- **THEN** Agent가 Alert 패턴을 분석합니다\n- **AND** rootCause, suggestedFix, confidence 등이 analysis 필드에 저장됩니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1526", "text": "시스템은 AI Agent를 통해 Alert를 자동 분석할 수 있어야 합니다(SHALL).\n\n#### Scenario: 자동 분석 수행\n- **GIVEN** 새로운 Alert가 생성되었을 때\n- **WHEN** 백그라운드 처리 프로세스가 실행되면\n- **THEN** Agent가 Alert 패턴을 분석합니다\n- **AND** rootCause, suggestedFix, confidence 등이 analysis 필드에 저장됩니다\n\n#### Scenario: 수동 분석 트리거\n- **GIVEN** pending 상태의 Alert가 있을 때\n- **WHEN** `POST /api/alerts/:id/analyze`를 호출하면\n- **THEN** Agent 분석이 즉시 실행됩니다\n- **AND** 분석 결과가 반환됩니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1527", "text": "#### Scenario: 수동 분석 트리거\n- **GIVEN** pending 상태의 Alert가 있을 때\n- **WHEN** `POST /api/alerts/:id/analyze`를 호출하면\n- **THEN** Agent 분석이 즉시 실행됩니다\n- **AND** 분석 결과가 반환됩니다\n\n#### Scenario: 소스별 패턴 분석\n- **GIVEN** GitHub workflow 실패 Alert가 있을 때\n- **WHEN** 분석을 수행하면\n- **THEN** 빌드 실패, 테스트 실패, 타입 에러 등 패턴을 식별합니다\n- **AND** 자동 수정 가능 여부(autoFixable)를 판단합니다\n\n---\n\n### Requirement: 위험도 평가", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1528", "text": "#### Scenario: 소스별 패턴 분석\n- **GIVEN** GitHub workflow 실패 Alert가 있을 때\n- **WHEN** 분석을 수행하면\n- **THEN** 빌드 실패, 테스트 실패, 타입 에러 등 패턴을 식별합니다\n- **AND** 자동 수정 가능 여부(autoFixable)를 판단합니다\n\n---\n\n### Requirement: 위험도 평가\n\n시스템은 분석 결과를 바탕으로 위험도를 평가할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1529", "text": "---\n\n### Requirement: 위험도 평가\n\n시스템은 분석 결과를 바탕으로 위험도를 평가할 수 있어야 합니다(SHALL).\n\n#### Scenario: Low Risk 평가\n- **GIVEN** 린트 에러나 포맷팅 이슈 Alert일 때\n- **WHEN** 위험도를 평가하면\n- **THEN** `low` 위험도가 반환됩니다\n- **AND** `auto_approve` 권장 조치가 반환됩니다\n\n#### Scenario: Medium Risk 평가\n- **GIVEN** 일반적인 빌드 실패 Alert일 때\n- **WHEN** 위험도를 평가하면\n- **THEN** `medium` 위험도가 반환됩니다\n- **AND** `pr_with_review` 권장 조치가 반환됩니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1530", "text": "#### Scenario: Medium Risk 평가\n- **GIVEN** 일반적인 빌드 실패 Alert일 때\n- **WHEN** 위험도를 평가하면\n- **THEN** `medium` 위험도가 반환됩니다\n- **AND** `pr_with_review` 권장 조치가 반환됩니다\n\n#### Scenario: High Risk 평가\n- **GIVEN** 프로덕션 환경의 critical Alert일 때\n- **WHEN** 위험도를 평가하면\n- **THEN** `high` 위험도가 반환됩니다\n- **AND** `manual_review` 권장 조치가 반환됩니다\n\n---\n\n### Requirement: Auto-fix 실행\n\n시스템은 분석 결과에 따라 자동 수정을 시도할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1531", "text": "#### Scenario: High Risk 평가\n- **GIVEN** 프로덕션 환경의 critical Alert일 때\n- **WHEN** 위험도를 평가하면\n- **THEN** `high` 위험도가 반환됩니다\n- **AND** `manual_review` 권장 조치가 반환됩니다\n\n---\n\n### Requirement: Auto-fix 실행\n\n시스템은 분석 결과에 따라 자동 수정을 시도할 수 있어야 합니다(SHALL).\n\n#### Scenario: Workflow 재시도\n- **GIVEN** GitHub workflow 실패이고 autoFixAction이 `retry`일 때\n- **WHEN** auto-fix가 실행되면\n- **THEN** GitHub API를 통해 workflow를 재실행합니다\n- **AND** 결과가 resolution 필드에 기록됩니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1532", "text": "---\n\n### Requirement: Auto-fix 실행\n\n시스템은 분석 결과에 따라 자동 수정을 시도할 수 있어야 합니다(SHALL).\n\n#### Scenario: Workflow 재시도\n- **GIVEN** GitHub workflow 실패이고 autoFixAction이 `retry`일 때\n- **WHEN** auto-fix가 실행되면\n- **THEN** GitHub API를 통해 workflow를 재실행합니다\n- **AND** 결과가 resolution 필드에 기록됩니다\n\n#### Scenario: Vercel 재배포\n- **GIVEN** Vercel 배포 실패이고 autoFixAction이 `redeploy`일 때\n- **WHEN** auto-fix가 실행되면\n- **THEN** Vercel API를 통해 재배포를 트리거합니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1533", "text": "#### Scenario: Vercel 재배포\n- **GIVEN** Vercel 배포 실패이고 autoFixAction이 `redeploy`일 때\n- **WHEN** auto-fix가 실행되면\n- **THEN** Vercel API를 통해 재배포를 트리거합니다\n\n#### Scenario: Auto-fix 스킵\n- **GIVEN** 위험도가 `high`이거나 confidence가 낮을 때\n- **WHEN** auto-fix 판단을 수행하면\n- **THEN** auto-fix를 스킵하고 수동 검토를 권장합니다\n\n---\n\n### Requirement: Slack 알림\n\n시스템은 Slack으로 알림을 발송할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1534", "text": "#### Scenario: Auto-fix 스킵\n- **GIVEN** 위험도가 `high`이거나 confidence가 낮을 때\n- **WHEN** auto-fix 판단을 수행하면\n- **THEN** auto-fix를 스킵하고 수동 검토를 권장합니다\n\n---\n\n### Requirement: Slack 알림\n\n시스템은 Slack으로 알림을 발송할 수 있어야 합니다(SHALL).\n\n#### Scenario: Critical Alert 알림\n- **GIVEN** Slack 웹훅이 설정되어 있고 onCritical 규칙이 활성화되어 있을 때\n- **WHEN** critical severity Alert가 처리되면\n- **THEN** Slack으로 알림이 발송됩니다\n- **AND** Alert 상세 정보와 링크가 포함됩니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1535", "text": "시스템은 Slack으로 알림을 발송할 수 있어야 합니다(SHALL).\n\n#### Scenario: Critical Alert 알림\n- **GIVEN** Slack 웹훅이 설정되어 있고 onCritical 규칙이 활성화되어 있을 때\n- **WHEN** critical severity Alert가 처리되면\n- **THEN** Slack으로 알림이 발송됩니다\n- **AND** Alert 상세 정보와 링크가 포함됩니다\n\n#### Scenario: Auto-fix 완료 알림\n- **GIVEN** Slack 웹훅이 설정되어 있고 onAutofix 규칙이 활성화되어 있을 때\n- **WHEN** auto-fix가 성공적으로 완료되면\n- **THEN** Slack으로 완료 알림이 발송됩니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1536", "text": "#### Scenario: Auto-fix 완료 알림\n- **GIVEN** Slack 웹훅이 설정되어 있고 onAutofix 규칙이 활성화되어 있을 때\n- **WHEN** auto-fix가 성공적으로 완료되면\n- **THEN** Slack으로 완료 알림이 발송됩니다\n\n#### Scenario: 알림 테스트\n- **GIVEN** Slack 웹훅이 설정되어 있을 때\n- **WHEN** `POST /api/alerts/notification-config/test`를 호출하면\n- **THEN** 테스트 메시지가 Slack으로 발송됩니다\n\n---\n\n### Requirement: WebSocket 실시간 알림\n\n시스템은 WebSocket을 통해 실시간 알림을 전송할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1537", "text": "#### Scenario: 알림 테스트\n- **GIVEN** Slack 웹훅이 설정되어 있을 때\n- **WHEN** `POST /api/alerts/notification-config/test`를 호출하면\n- **THEN** 테스트 메시지가 Slack으로 발송됩니다\n\n---\n\n### Requirement: WebSocket 실시간 알림\n\n시스템은 WebSocket을 통해 실시간 알림을 전송할 수 있어야 합니다(SHALL).\n\n#### Scenario: Alert 생성 브로드캐스트\n- **GIVEN** WebSocket 연결이 활성화되어 있을 때\n- **WHEN** 새 Alert가 생성되면\n- **THEN** `alert.created` 이벤트가 브로드캐스트됩니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1538", "text": "---\n\n### Requirement: WebSocket 실시간 알림\n\n시스템은 WebSocket을 통해 실시간 알림을 전송할 수 있어야 합니다(SHALL).\n\n#### Scenario: Alert 생성 브로드캐스트\n- **GIVEN** WebSocket 연결이 활성화되어 있을 때\n- **WHEN** 새 Alert가 생성되면\n- **THEN** `alert.created` 이벤트가 브로드캐스트됩니다\n\n#### Scenario: Alert 처리 완료 브로드캐스트\n- **GIVEN** WebSocket 연결이 활성화되어 있을 때\n- **WHEN** Alert 처리가 완료되면\n- **THEN** `alert.processed` 이벤트가 브로드캐스트됩니다\n\n---\n\n### Requirement: Webhook 설정 관리", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1539", "text": "#### Scenario: Alert 처리 완료 브로드캐스트\n- **GIVEN** WebSocket 연결이 활성화되어 있을 때\n- **WHEN** Alert 처리가 완료되면\n- **THEN** `alert.processed` 이벤트가 브로드캐스트됩니다\n\n---\n\n### Requirement: Webhook 설정 관리\n\n시스템은 Webhook 엔드포인트 설정을 관리할 수 있어야 합니다(SHALL).\n\n#### Scenario: Webhook 생성\n- **GIVEN** 사용자가 새 Webhook을 추가하려고 할 때\n- **WHEN** `POST /api/alerts/webhook-configs`를 호출하면\n- **THEN** 고유한 endpoint URL과 secret이 생성됩니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1540", "text": "---\n\n### Requirement: Webhook 설정 관리\n\n시스템은 Webhook 엔드포인트 설정을 관리할 수 있어야 합니다(SHALL).\n\n#### Scenario: Webhook 생성\n- **GIVEN** 사용자가 새 Webhook을 추가하려고 할 때\n- **WHEN** `POST /api/alerts/webhook-configs`를 호출하면\n- **THEN** 고유한 endpoint URL과 secret이 생성됩니다\n\n#### Scenario: Webhook 활성화/비활성화\n- **GIVEN** 기존 Webhook 설정이 있을 때\n- **WHEN** enabled 상태를 변경하면\n- **THEN** 해당 Webhook의 수신이 활성화/비활성화됩니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1541", "text": "#### Scenario: Webhook 활성화/비활성화\n- **GIVEN** 기존 Webhook 설정이 있을 때\n- **WHEN** enabled 상태를 변경하면\n- **THEN** 해당 Webhook의 수신이 활성화/비활성화됩니다\n\n#### Scenario: Secret 재생성\n- **GIVEN** 기존 Webhook 설정이 있을 때\n- **WHEN** `POST /api/alerts/webhook-configs/:id/regenerate-secret`를 호출하면\n- **THEN** 새 secret이 생성되어 반환됩니다\n\n---\n\n### Requirement: UI 컴포넌트\n\n시스템은 Alert를 관리할 수 있는 UI를 제공해야 합니다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1542", "text": "#### Scenario: Secret 재생성\n- **GIVEN** 기존 Webhook 설정이 있을 때\n- **WHEN** `POST /api/alerts/webhook-configs/:id/regenerate-secret`를 호출하면\n- **THEN** 새 secret이 생성되어 반환됩니다\n\n---\n\n### Requirement: UI 컴포넌트\n\n시스템은 Alert를 관리할 수 있는 UI를 제공해야 합니다(SHALL).\n\n#### Scenario: AlertCenter 표시\n- **GIVEN** 사용자가 Alerts 메뉴를 클릭했을 때\n- **WHEN** AlertCenter 컴포넌트가 렌더링되면\n- **THEN** Alert 목록과 통계가 표시됩니다\n- **AND** 필터 옵션이 제공됩니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1543", "text": "시스템은 Alert를 관리할 수 있는 UI를 제공해야 합니다(SHALL).\n\n#### Scenario: AlertCenter 표시\n- **GIVEN** 사용자가 Alerts 메뉴를 클릭했을 때\n- **WHEN** AlertCenter 컴포넌트가 렌더링되면\n- **THEN** Alert 목록과 통계가 표시됩니다\n- **AND** 필터 옵션이 제공됩니다\n\n#### Scenario: AlertDetail 표시\n- **GIVEN** 사용자가 특정 Alert를 클릭했을 때\n- **WHEN** AlertDetail 컴포넌트가 렌더링되면\n- **THEN** Alert 상세 정보가 표시됩니다\n- **AND** Analyze, Auto Process 버튼이 제공됩니다", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1544", "text": "#### Scenario: AlertDetail 표시\n- **GIVEN** 사용자가 특정 Alert를 클릭했을 때\n- **WHEN** AlertDetail 컴포넌트가 렌더링되면\n- **THEN** Alert 상세 정보가 표시됩니다\n- **AND** Analyze, Auto Process 버튼이 제공됩니다\n\n#### Scenario: AlertSettings 표시\n- **GIVEN** 사용자가 Settings 버튼을 클릭했을 때\n- **WHEN** AlertSettings 컴포넌트가 렌더링되면\n- **THEN** Webhook 설정과 Notification 설정이 표시됩니다\n\n---\n\n## Data Models\n\n### Alert", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1545", "text": "---\n\n## Data Models\n\n### Alert\n\n```typescript\ninterface Alert {\n  id: string\n  source: 'github' | 'vercel' | 'sentry' | 'supabase' | 'custom'\n  type: string\n  severity: 'critical' | 'warning' | 'info'\n  status: 'pending' | 'processing' | 'resolved' | 'ignored'\n  title: string\n  summary?: string\n  external_url?: string\n  payload: string      // JSON\n  metadata?: string    // JSON: { repo, branch, commit, environment, projectId }\n  analysis?: string    // JSON: AlertAnalysis\n  resolution?: string  // JSON: { type, action, details, prUrl }\n  created_at: number\n  updated_at: number\n  resolved_at?: number\n  expires_at: number   // created_at + 90일\n}\n```\n\n### AlertAnalysis", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1546", "text": "### AlertAnalysis\n\n```typescript\ninterface AlertAnalysis {\n  alertId: string\n  rootCause?: string\n  relatedFiles?: string[]\n  suggestedFix?: string\n  autoFixable: boolean\n  autoFixAction?: 'retry' | 'rollback' | 'patch' | 'lint_fix' | 'format_fix' | 'redeploy'\n  confidence: number   // 0-1\n  similarAlerts?: string[]\n  documentation?: string\n  analyzedAt: string\n}\n```\n\n### RiskAssessment\n\n```typescript\ninterface RiskAssessment {\n  level: 'low' | 'medium' | 'high'\n  recommendation: 'auto_approve' | 'pr_with_review' | 'pr_with_required_review' | 'manual_review'\n  reason: string\n  shouldAutoFix: boolean\n}\n```\n\n---\n\n## API Endpoints", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1547", "text": "### RiskAssessment\n\n```typescript\ninterface RiskAssessment {\n  level: 'low' | 'medium' | 'high'\n  recommendation: 'auto_approve' | 'pr_with_review' | 'pr_with_required_review' | 'manual_review'\n  reason: string\n  shouldAutoFix: boolean\n}\n```\n\n---\n\n## API Endpoints\n\n### Webhooks\n- `POST /api/alerts/webhooks/github` - GitHub Actions 웹훅\n- `POST /api/alerts/webhooks/vercel` - Vercel 배포 웹훅\n- `POST /api/alerts/webhooks/sentry` - Sentry 이슈 웹훅\n- `POST /api/alerts/webhooks/supabase` - Supabase 이벤트 웹훅", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1548", "text": "### Alerts\n- `GET /api/alerts` - Alert 목록 조회 (필터: source, severity, status)\n- `GET /api/alerts/:id` - Alert 상세 조회\n- `PATCH /api/alerts/:id` - Alert 상태 변경\n- `POST /api/alerts/:id/ignore` - Alert 무시\n- `POST /api/alerts/:id/analyze` - 수동 분석 트리거\n- `POST /api/alerts/:id/process` - 전체 처리 워크플로우 실행\n- `GET /api/alerts/stats` - Alert 통계\n\n### Activities\n- `GET /api/alerts/activities` - Activity 로그 조회", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1549", "text": "### Activities\n- `GET /api/alerts/activities` - Activity 로그 조회\n\n### Webhook Configs\n- `GET /api/alerts/webhook-configs` - Webhook 설정 목록\n- `POST /api/alerts/webhook-configs` - Webhook 생성\n- `PATCH /api/alerts/webhook-configs/:id` - Webhook 수정\n- `DELETE /api/alerts/webhook-configs/:id` - Webhook 삭제\n- `POST /api/alerts/webhook-configs/:id/regenerate-secret` - Secret 재생성\n\n### Notification Config\n- `GET /api/alerts/notification-config` - 알림 설정 조회\n- `PATCH /api/alerts/notification-config` - 알림 설정 수정\n- `POST /api/alerts/notification-config/test` - Slack 알림 테스트\n\n---\n\n## Implementation Status", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1550", "text": "### Notification Config\n- `GET /api/alerts/notification-config` - 알림 설정 조회\n- `PATCH /api/alerts/notification-config` - 알림 설정 수정\n- `POST /api/alerts/notification-config/test` - Slack 알림 테스트\n\n---\n\n## Implementation Status\n\n### Phase 1: Foundation ✅ COMPLETED\n- [x] DB 스키마 마이그레이션\n- [x] Webhook 엔드포인트 구현\n- [x] GitHub, Vercel, Sentry, Supabase 파서 구현\n- [x] Alert CRUD API\n- [x] AlertCenter, AlertList, AlertDetail UI\n- [x] AlertSettings UI (Webhook, Notification 설정)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1551", "text": "### Phase 2: Agent Integration ✅ COMPLETED\n- [x] Agent 분석 서비스 (analyzeAlert)\n- [x] 위험도 평가 로직 (assessRisk)\n- [x] Auto-fix 액션 실행 로직\n- [x] Slack 알림 발송 서비스\n- [x] WebSocket 실시간 알림 통합\n- [x] Alert 처리 워크플로우 통합\n- [x] AlertDetail Analyze/Process 버튼\n\n### Phase 3: Advanced Features (Planned)\n- [ ] 유사 Alert 매칭 로직\n- [ ] PR 생성 auto-fix\n- [ ] 통계 대시보드\n- [ ] Alert 패턴 학습", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-alert-system/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2025-12-27", "last_modified_date": "2025-12-27"}}
{"id": "1552", "text": "# 멀티 AI Provider 설계 (Option 1: 실행 모드 분리)\n\n## 시스템 아키텍처\n\n### 전체 컴포넌트 다이어그램\n\n```\n┌─────────────────────────────────────────────────────────────────────────┐\n│                          Frontend (React)                                │\n├─────────────────────────────────────────────────────────────────────────┤\n│                                                                          │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1553", "text": "│\n├─────────────────────────────────────────────────────────────────────────┤\n│                                                                          │\n│  ┌─────────────────────────────────────────────────────────────────┐    │\n│  │                    TaskExecutionDialog                           │    │\n│  │  ┌─────────────────────┐    ┌─────────────────────┐", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1554", "text": "│\n│  ┌─────────────────────────────────────────────────────────────────┐    │\n│  │                    TaskExecutionDialog                           │    │\n│  │  ┌─────────────────────┐    ┌─────────────────────┐             │    │\n│  │  │  ⚡ 단일 실행        │    │  🐝 Swarm 실행       │             │    │\n│  │  │  (빠르고 저렴)      │    │  (멀티에이전트)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1555", "text": "┌─────────────────────┐             │    │\n│  │  │  ⚡ 단일 실행        │    │  🐝 Swarm 실행       │             │    │\n│  │  │  (빠르고 저렴)      │    │  (멀티에이전트)      │             │    │\n│  │  └──────────┬──────────┘    └──────────┬──────────┘             │    │\n│  │             │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1556", "text": "│    │  (멀티에이전트)      │             │    │\n│  │  └──────────┬──────────┘    └──────────┬──────────┘             │    │\n│  │             │                          │                        │    │\n│  │             ▼                          ▼                        │    │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1557", "text": "│                        │    │\n│  │             ▼                          ▼                        │    │\n│  │  Provider/Model 선택         Strategy/MaxAgents 설정            │    │\n│  └─────────────┬────────────────────────────┬──────────────────────┘    │\n│                │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1558", "text": "│    │\n│  │  Provider/Model 선택         Strategy/MaxAgents 설정            │    │\n│  └─────────────┬────────────────────────────┬──────────────────────┘    │\n│                │                            │                           │\n│                ▼                            ▼                           │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1559", "text": "│                           │\n│                ▼                            ▼                           │\n│  ┌──────────────────┐          ┌──────────────────┐                    │\n│  │     useAI        │          │    useSwarm      │                    │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1560", "text": "│\n│  ┌──────────────────┐          ┌──────────────────┐                    │\n│  │     useAI        │          │    useSwarm      │                    │\n│  │   (새 훅)        │          │  (리네임)        │                    │\n│  └────────┬─────────┘          └────────┬─────────┘", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1561", "text": "│\n│  │   (새 훅)        │          │  (리네임)        │                    │\n│  └────────┬─────────┘          └────────┬─────────┘                    │\n│           │                             │                              │\n│  ┌────────┴─────────┐", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1562", "text": "└────────┬─────────┘                    │\n│           │                             │                              │\n│  ┌────────┴─────────┐                   │                              │\n│  │   useClaude      │                   │                              │\n│  │ (하위", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1563", "text": "│                              │\n│  │   useClaude      │                   │                              │\n│  │ (하위 호환 래퍼) │                   │                              │\n│  └──────────────────┘                   │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1564", "text": "│\n│  │ (하위 호환 래퍼) │                   │                              │\n│  └──────────────────┘                   │                              │\n│           │                             │                              │\n└───────────┼─────────────────────────────┼──────────────────────────────┘", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1565", "text": "│\n│           │                             │                              │\n└───────────┼─────────────────────────────┼──────────────────────────────┘\n            │                             │\n            │ POST /api/ai/execute        │ POST /api/claude-flow/*\n            │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1566", "text": "│                             │\n            │ POST /api/ai/execute        │ POST /api/claude-flow/*\n            │                             │\n┌───────────┼─────────────────────────────┼──────────────────────────────┐\n│           ▼                             ▼            Backend (Express) │\n├────────────────────────────────────────────────────────────────────────┤\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1567", "text": "│\n┌───────────┼─────────────────────────────┼──────────────────────────────┐\n│           ▼                             ▼            Backend (Express) │\n├────────────────────────────────────────────────────────────────────────┤\n│                                                                         │\n│  ┌──────────────────────┐      ┌──────────────────────┐                │\n│  │ /api/ai/*", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1568", "text": "│\n│  ┌──────────────────────┐      ┌──────────────────────┐                │\n│  │ /api/ai/*            │      │ /api/claude-flow/*   │                │\n│  │                      │      │                      │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1569", "text": "│\n│  │ /api/ai/*            │      │ /api/claude-flow/*   │                │\n│  │                      │      │                      │                │\n│  │ - execute            │      │ - execute            │                │\n│  │ - stop/:runId        │      │ - status/:runId      │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1570", "text": "│                │\n│  │ - execute            │      │ - execute            │                │\n│  │ - stop/:runId        │      │ - status/:runId      │                │\n│  │ - providers          │      │ - stop/:runId        │                │\n│  └──────────┬───────────┘      └──────────┬───────────┘                │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1571", "text": "│                │\n│  │ - providers          │      │ - stop/:runId        │                │\n│  └──────────┬───────────┘      └──────────┬───────────┘                │\n│             │                             │                            │\n│             ▼", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1572", "text": "│\n│             │                             │                            │\n│             ▼                             ▼                            │\n│  ┌──────────────────────┐      ┌──────────────────────┐                │\n│  │ CLIProcessManager    │      │ ClaudeFlowExecutor   │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1573", "text": "▼                            │\n│  ┌──────────────────────┐      ┌──────────────────────┐                │\n│  │ CLIProcessManager    │      │ ClaudeFlowExecutor   │                │\n│  │ (기존 확장)          │      │ (기존)               │                │\n│  └──────────┬───────────┘      └──────────┬───────────┘", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1574", "text": "│ ClaudeFlowExecutor   │                │\n│  │ (기존 확장)          │      │ (기존)               │                │\n│  └──────────┬───────────┘      └──────────┬───────────┘                │\n│             │                             │                            │\n│             ▼", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1575", "text": "└──────────┬───────────┘                │\n│             │                             │                            │\n│             ▼                             ▼                            │\n│  claude | gemini | codex         npx claude-flow@alpha swarm           │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1576", "text": "▼                             ▼                            │\n│  claude | gemini | codex         npx claude-flow@alpha swarm           │\n│                                                                         │\n└─────────────────────────────────────────────────────────────────────────┘\n```\n\n### 단일 실행 흐름 (useAI)\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1577", "text": "│\n│                                                                         │\n└─────────────────────────────────────────────────────────────────────────┘\n```\n\n### 단일 실행 흐름 (useAI)\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│                        Frontend (React)                          │\n├─────────────────────────────────────────────────────────────────┤\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1578", "text": "```\n┌─────────────────────────────────────────────────────────────────┐\n│                        Frontend (React)                          │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                  │\n│  ┌──────────────────┐     ┌──────────────────┐                  │\n│  │ TaskExecution    │     │ useAI Hook       │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1579", "text": "│\n│  ┌──────────────────┐     ┌──────────────────┐                  │\n│  │ TaskExecution    │     │ useAI Hook       │                  │\n│  │ Dialog           │────▶│                  │                  │\n│  │                  │     │ - provider       │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1580", "text": "│                  │\n│  │ Dialog           │────▶│                  │                  │\n│  │                  │     │ - provider       │                  │\n│  │ - Provider 선택  │     │ - model          │                  │\n│  │ - Model 선택     │     │ - execute()      │                  │\n│  │ - 실행 로그", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1581", "text": "│ - provider       │                  │\n│  │ - Provider 선택  │     │ - model          │                  │\n│  │ - Model 선택     │     │ - execute()      │                  │\n│  │ - 실행 로그      │     │ - stop()         │                  │\n│  └──────────────────┘     └────────┬─────────┘                  │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1582", "text": "│\n│  │ - 실행 로그      │     │ - stop()         │                  │\n│  └──────────────────┘     └────────┬─────────┘                  │\n│                                    │                             │\n│  ┌──────────────────┐              │ POST /api/ai/execute       │\n│  │ useClaude        │◀─ wrapper ───┤", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1583", "text": "│                             │\n│  ┌──────────────────┐              │ POST /api/ai/execute       │\n│  │ useClaude        │◀─ wrapper ───┤                             │\n│  │ (하위 호환)      │              │                             │\n│  └──────────────────┘", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1584", "text": "│◀─ wrapper ───┤                             │\n│  │ (하위 호환)      │              │                             │\n│  └──────────────────┘              │                             │\n│                                    ▼", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1585", "text": "│\n│  └──────────────────┘              │                             │\n│                                    ▼                             │\n└────────────────────────────────────┼─────────────────────────────┘\n                                     │\n┌────────────────────────────────────┼─────────────────────────────┐\n│                        Backend (Express)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1586", "text": "│\n└────────────────────────────────────┼─────────────────────────────┘\n                                     │\n┌────────────────────────────────────┼─────────────────────────────┐\n│                        Backend (Express)                         │\n├────────────────────────────────────┼─────────────────────────────┤\n│                                    ▼", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1587", "text": "Backend (Express)                         │\n├────────────────────────────────────┼─────────────────────────────┤\n│                                    ▼                             │\n│  ┌──────────────────────────────────────────────────┐           │\n│  │ /api/ai/execute                                   │           │\n│  │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1588", "text": "│\n│  ┌──────────────────────────────────────────────────┐           │\n│  │ /api/ai/execute                                   │           │\n│  │                                                   │           │\n│  │ 1. provider, model 파라미터 검증                 │           │\n│  │ 2. CLIProcessManager.start() 호출               │           │\n│  │ 3.", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1589", "text": "│           │\n│  │                                                   │           │\n│  │ 1. provider, model 파라미터 검증                 │           │\n│  │ 2. CLIProcessManager.start() 호출               │           │\n│  │ 3. SSE 스트리밍 설정                             │           │\n│  └─────────────────────┬────────────────────────────┘           │\n│                        │                                         │\n│                        ▼                                         │\n│  ┌──────────────────────────────────────────────────┐           │\n│  │ CLIProcessManager (기존)                         │           │\n│  │                                                   │           │\n│  │ - getProfile(provider)                           │           │\n│  │ - buildArgs(profile,", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1590", "text": "CLIProcessManager.start() 호출               │           │\n│  │ 3. SSE 스트리밍 설정                             │           │\n│  └─────────────────────┬────────────────────────────┘           │\n│                        │                                         │\n│                        ▼                                         │\n│  ┌──────────────────────────────────────────────────┐           │\n│  │ CLIProcessManager (기존)                         │           │\n│  │                                                   │           │\n│  │ - getProfile(provider)                           │           │\n│  │ - buildArgs(profile, prompt, model)              │           │\n│  │ - spawn(profile.command, args)                   │           │\n│  │ - setupProcessHandlers()                         │           │\n│  └─────────────────────┬────────────────────────────┘           │\n│                        │                                         │\n│                        ▼                                         │\n│  ┌──────────────────────────────────────────────────┐           │\n│  │ CLI Profiles (types.", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1591", "text": "prompt, model)              │           │\n│  │ - spawn(profile.command, args)                   │           │\n│  │ - setupProcessHandlers()                         │           │\n│  └─────────────────────┬────────────────────────────┘           │\n│                        │                                         │\n│                        ▼                                         │\n│  ┌──────────────────────────────────────────────────┐           │\n│  │ CLI Profiles (types.ts)                          │           │\n│  │                                                   │           │\n│  │ claude  → claude -p \"prompt\" --model opus        │           │\n│  │ gemini  → gemini --prompt \"prompt\"               │           │\n│  │ codex   → codex write --task \"prompt\"            │           │\n│  │ qwen    → qwen --prompt \"prompt\"                 │           │\n│  └──────────────────────────────────────────────────┘           │\n│                                                                  │\n└──────────────────────────────────────────────────────────────────┘\n```", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1592", "text": "### Swarm 실행 흐름 (useSwarm)\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│                        Frontend (React)                          │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                  │\n│  ┌──────────────────┐     ┌──────────────────┐                  │\n│  │ TaskExecution    │     │ useSwarm Hook    │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1593", "text": "│\n│  ┌──────────────────┐     ┌──────────────────┐                  │\n│  │ TaskExecution    │     │ useSwarm Hook    │                  │\n│  │ Dialog           │────▶│ (리네임)         │                  │\n│  │                  │     │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1594", "text": "│     │ useSwarm Hook    │                  │\n│  │ Dialog           │────▶│ (리네임)         │                  │\n│  │                  │     │                  │                  │\n│  │ - Strategy 선택  │     │ - strategy       │                  │\n│  │ - MaxAgents 설정 │     │ - maxAgents      │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1595", "text": "│     │                  │                  │\n│  │ - Strategy 선택  │     │ - strategy       │                  │\n│  │ - MaxAgents 설정 │     │ - maxAgents      │                  │\n│  │ - Swarm 로그     │     │ - execute()      │                  │\n│  └──────────────────┘     │ - stop()         │                  │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1596", "text": "│                  │\n│  │ - Swarm 로그     │     │ - execute()      │                  │\n│  └──────────────────┘     │ - stop()         │                  │\n│                           └────────┬─────────┘                  │\n│                                    │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1597", "text": "│\n│                           └────────┬─────────┘                  │\n│                                    │                             │\n│                                    │ POST /api/claude-flow/*    │\n│                                    ▼", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1598", "text": "│\n│                                    │ POST /api/claude-flow/*    │\n│                                    ▼                             │\n└────────────────────────────────────┼─────────────────────────────┘\n                                     │\n┌────────────────────────────────────┼─────────────────────────────┐\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1599", "text": "▼                             │\n└────────────────────────────────────┼─────────────────────────────┘\n                                     │\n┌────────────────────────────────────┼─────────────────────────────┐\n│                        Backend (Express)                         │\n├────────────────────────────────────┼─────────────────────────────┤\n│                                    ▼", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1600", "text": "Backend (Express)                         │\n├────────────────────────────────────┼─────────────────────────────┤\n│                                    ▼                             │\n│  ┌──────────────────────────────────────────────────┐           │\n│  │ /api/claude-flow/execute                          │           │\n│  │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1601", "text": "▼                             │\n│  ┌──────────────────────────────────────────────────┐           │\n│  │ /api/claude-flow/execute                          │           │\n│  │                                                   │           │\n│  │ 1. strategy, maxAgents 파라미터 검증            │           │\n│  │ 2. ClaudeFlowExecutor 호출                       │           │\n│  │ 3.", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1602", "text": "│           │\n│  │ 1. strategy, maxAgents 파라미터 검증            │           │\n│  │ 2. ClaudeFlowExecutor 호출                       │           │\n│  │ 3. SSE 스트리밍 설정                             │           │\n│  └─────────────────────┬────────────────────────────┘           │\n│                        │                                         │\n│                        ▼                                         │\n│  ┌──────────────────────────────────────────────────┐           │\n│  │ npx claude-flow@alpha swarm \"{prompt}\"           │           │\n│  │                                                   │           │\n│  │ --strategy development                           │           │\n│  │ --max-agents 5                                   │           │\n│  │ --claude                                         │           │\n│  └──────────────────────────────────────────────────┘           │\n│                                                                  │\n└──────────────────────────────────────────────────────────────────┘\n```", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1603", "text": "## 데이터 흐름\n\n### 단일 실행 요청 흐름", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1604", "text": "```\nUser clicks \"단일 실행\"\n       │\n       ▼\nTaskExecutionDialog\n       │ { provider: 'gemini', model: 'gemini-2.5-pro', ... }\n       ▼\nuseAI.execute()\n       │ POST /api/ai/execute\n       ▼\nExpress Router\n       │ req.body 검증\n       ▼\nCLIProcessManager.start({\n  profileId: 'gemini',\n  model: 'gemini-2.5-pro',\n  initialPrompt: buildPrompt(changeId, taskId)\n})\n       │\n       ▼\nspawn('gemini', ['--prompt', prompt])\n       │\n       ├─▶ stdout ──▶ SSE 'output' ──▶ UI 로그 표시\n       │\n       ├─▶ stderr ──▶ SSE 'error' ──▶ UI 에러 표시\n       │\n       └─▶ close ──▶ SSE 'complete' ──▶ UI 완료 상태\n```", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1605", "text": "### Swarm 실행 요청 흐름\n\n```\nUser clicks \"Swarm 실행\"\n       │\n       ▼\nTaskExecutionDialog\n       │ { strategy: 'development', maxAgents: 5, ... }\n       ▼\nuseSwarm.execute()\n       │ POST /api/claude-flow/execute\n       ▼\nExpress Router\n       │ req.body 검증\n       ▼\nClaudeFlowExecutor.start({\n  changeId: 'add-auth',\n  mode: 'full',\n  strategy: 'development',\n  maxAgents: 5\n})\n       │\n       ▼\nspawn('npx', ['claude-flow@alpha', 'swarm', prompt, ...", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1606", "text": "maxAgents: 5, ... }\n       ▼\nuseSwarm.execute()\n       │ POST /api/claude-flow/execute\n       ▼\nExpress Router\n       │ req.body 검증\n       ▼\nClaudeFlowExecutor.start({\n  changeId: 'add-auth',\n  mode: 'full',\n  strategy: 'development',\n  maxAgents: 5\n})\n       │\n       ▼\nspawn('npx', ['claude-flow@alpha', 'swarm', prompt, ...args])\n       │\n       ├─▶ stream-json ──▶ SSE 'progress' ──▶ UI 진행 상황\n       │\n       ├─▶ agent logs ──▶ SSE 'agent' ──▶ UI 에이전트 로그\n       │\n       └─▶ close ──▶ SSE 'complete' ──▶ UI 완료 상태\n```\n\n### 설정 로드 흐름", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1607", "text": "['claude-flow@alpha', 'swarm', prompt, ...args])\n       │\n       ├─▶ stream-json ──▶ SSE 'progress' ──▶ UI 진행 상황\n       │\n       ├─▶ agent logs ──▶ SSE 'agent' ──▶ UI 에이전트 로그\n       │\n       └─▶ close ──▶ SSE 'complete' ──▶ UI 완료 상태\n```\n\n### 설정 로드 흐름\n\n```\nApp 시작\n    │\n    ▼\nloadCLISettings()\n    │ 읽기: .zyflow/cli-settings.json\n    ▼\n병합: DEFAULT_CLI_PROFILES + user settings\n    │\n    ▼\ncheckAvailability()\n    │ 각 CLI: which claude, which gemini, ...\n    ▼\nUI에 활성화된 Provider만 표시\n```\n\n## 상세 설계", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1608", "text": "### 설정 로드 흐름\n\n```\nApp 시작\n    │\n    ▼\nloadCLISettings()\n    │ 읽기: .zyflow/cli-settings.json\n    ▼\n병합: DEFAULT_CLI_PROFILES + user settings\n    │\n    ▼\ncheckAvailability()\n    │ 각 CLI: which claude, which gemini, ...\n    ▼\nUI에 활성화된 Provider만 표시\n```\n\n## 상세 설계\n\n### 1. API 엔드포인트\n\n#### POST /api/ai/execute (단일 실행)\n\n**Request:**\n```typescript\ninterface AIExecuteRequest {\n  provider: AIProvider      // 'claude' | 'gemini' | 'codex' | ...\n  model?: string            // 'sonnet' | 'gemini-2.5-pro' | ...\n  changeId: string\n  taskId: string\n  taskTitle: string\n  context?: string          // 추가 컨텍스트\n}\n```", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1609", "text": "## 상세 설계\n\n### 1. API 엔드포인트\n\n#### POST /api/ai/execute (단일 실행)\n\n**Request:**\n```typescript\ninterface AIExecuteRequest {\n  provider: AIProvider      // 'claude' | 'gemini' | 'codex' | ...\n  model?: string            // 'sonnet' | 'gemini-2.5-pro' | ...\n  changeId: string\n  taskId: string\n  taskTitle: string\n  context?: string          // 추가 컨텍스트\n}\n```\n\n**Response:** SSE Stream\n```\ndata: {\"type\":\"start\",\"provider\":\"gemini\",\"model\":\"gemini-2.5-pro\"}\n\ndata: {\"type\":\"output\",\"content\":\"분석을 시작합니다...\"}\n\ndata: {\"type\":\"output\",\"content\":\"파일을 수정합니다...\"}\n\ndata: {\"type\":\"complete\",\"status\":\"completed\",\"exitCode\":0}\n```\n\n#### POST /api/claude-flow/execute (Swarm 실행)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1610", "text": "**Response:** SSE Stream\n```\ndata: {\"type\":\"start\",\"provider\":\"gemini\",\"model\":\"gemini-2.5-pro\"}\n\ndata: {\"type\":\"output\",\"content\":\"분석을 시작합니다...\"}\n\ndata: {\"type\":\"output\",\"content\":\"파일을 수정합니다...\"}\n\ndata: {\"type\":\"complete\",\"status\":\"completed\",\"exitCode\":0}\n```\n\n#### POST /api/claude-flow/execute (Swarm 실행)\n\n**Request:**\n```typescript\ninterface SwarmExecuteRequest {\n  changeId: string\n  taskId?: string           // 특정 태스크만 실행\n  mode: 'full' | 'single' | 'analysis'\n  strategy: 'development' | 'research' | 'testing'\n  maxAgents: number         // 1-10\n}\n```\n\n**Response:** SSE Stream\n```\ndata: {\"type\":\"start\",\"strategy\":\"development\",\"maxAgents\":5}\n\ndata: {\"type\":\"agent\",\"name\":\"researcher\",\"status\":\"working\",\"message\":\"문서 분석 중...\"}", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1611", "text": "**Response:** SSE Stream\n```\ndata: {\"type\":\"start\",\"strategy\":\"development\",\"maxAgents\":5}\n\ndata: {\"type\":\"agent\",\"name\":\"researcher\",\"status\":\"working\",\"message\":\"문서 분석 중...\"}\n\ndata: {\"type\":\"progress\",\"phase\":\"implementation\",\"progress\":45}\n\ndata: {\"type\":\"complete\",\"status\":\"completed\",\"summary\":\"3개 파일 수정됨\"}\n```\n\n#### GET /api/ai/providers\n\n**Response:**\n```typescript\ninterface ProvidersResponse {\n  providers: Array<{\n    id: AIProvider\n    name: string\n    icon: string\n    enabled: boolean\n    available: boolean      // CLI 설치 여부\n    selectedModel: string\n    availableModels: string[]\n  }>\n}\n```\n\n### 2. CLI Adapter 확장\n\n#### buildArgs 수정 (process-manager.ts)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1612", "text": "data: {\"type\":\"complete\",\"status\":\"completed\",\"summary\":\"3개 파일 수정됨\"}\n```\n\n#### GET /api/ai/providers\n\n**Response:**\n```typescript\ninterface ProvidersResponse {\n  providers: Array<{\n    id: AIProvider\n    name: string\n    icon: string\n    enabled: boolean\n    available: boolean      // CLI 설치 여부\n    selectedModel: string\n    availableModels: string[]\n  }>\n}\n```\n\n### 2. CLI Adapter 확장\n\n#### buildArgs 수정 (process-manager.ts)\n\n```typescript\nprivate buildArgs(\n  profile: CLIProfile,\n  changeId: string,\n  initialPrompt?: string,\n  model?: string,          // 추가\n  extraArgs?: string[]\n): string[] {\n  const args = [...profile.args]", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1613", "text": "### 2. CLI Adapter 확장\n\n#### buildArgs 수정 (process-manager.ts)\n\n```typescript\nprivate buildArgs(\n  profile: CLIProfile,\n  changeId: string,\n  initialPrompt?: string,\n  model?: string,          // 추가\n  extraArgs?: string[]\n): string[] {\n  const args = [...profile.args]\n\n  // 모델 지정 (CLI별로 다름)\n  if (model) {\n    switch (profile.type) {\n      case 'claude':\n        args.push('--model', model)  // claude --model opus\n        break\n      case 'gemini':\n        args.push('--model', model)  // gemini --model gemini-2.5-pro\n        break\n      case 'codex':\n        args.push('--model', model)  // codex --model gpt-5-codex\n        break\n    }\n  }", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1614", "text": "// 모델 지정 (CLI별로 다름)\n  if (model) {\n    switch (profile.type) {\n      case 'claude':\n        args.push('--model', model)  // claude --model opus\n        break\n      case 'gemini':\n        args.push('--model', model)  // gemini --model gemini-2.5-pro\n        break\n      case 'codex':\n        args.push('--model', model)  // codex --model gpt-5-codex\n        break\n    }\n  }\n\n  // 프롬프트 전달\n  if (initialPrompt) {\n    switch (profile.type) {\n      case 'claude':\n        args.push('-p', initialPrompt)\n        break\n      case 'gemini':\n        args.push('--prompt', initialPrompt)\n        break\n      case 'codex':\n        args.push('write', '--task', initialPrompt)\n        break\n      case 'qwen':\n        args.push('--prompt', initialPrompt)\n        break\n    }\n  }\n\n  return args\n}\n```", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1615", "text": "// 프롬프트 전달\n  if (initialPrompt) {\n    switch (profile.type) {\n      case 'claude':\n        args.push('-p', initialPrompt)\n        break\n      case 'gemini':\n        args.push('--prompt', initialPrompt)\n        break\n      case 'codex':\n        args.push('write', '--task', initialPrompt)\n        break\n      case 'qwen':\n        args.push('--prompt', initialPrompt)\n        break\n    }\n  }\n\n  return args\n}\n```\n\n### 3. useAI 훅\n\n```typescript\n// src/hooks/useAI.ts\n\nexport type AIProvider = 'claude' | 'gemini' | 'codex' | 'qwen' | 'kilo' | 'opencode'\n\nexport interface AIExecution {\n  runId: string | null\n  provider: AIProvider | null\n  model: string | null\n  status: 'idle' | 'running' | 'completed' | 'error'\n  messages: AIMessage[]\n  error: string | null\n}", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1616", "text": "return args\n}\n```\n\n### 3. useAI 훅\n\n```typescript\n// src/hooks/useAI.ts\n\nexport type AIProvider = 'claude' | 'gemini' | 'codex' | 'qwen' | 'kilo' | 'opencode'\n\nexport interface AIExecution {\n  runId: string | null\n  provider: AIProvider | null\n  model: string | null\n  status: 'idle' | 'running' | 'completed' | 'error'\n  messages: AIMessage[]\n  error: string | null\n}\n\nexport interface AIMessage {\n  type: 'start' | 'output' | 'error' | 'complete'\n  provider?: AIProvider\n  model?: string\n  content?: string\n  status?: 'completed' | 'error'\n  exitCode?: number\n  timestamp: string\n}", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1617", "text": "export interface AIExecution {\n  runId: string | null\n  provider: AIProvider | null\n  model: string | null\n  status: 'idle' | 'running' | 'completed' | 'error'\n  messages: AIMessage[]\n  error: string | null\n}\n\nexport interface AIMessage {\n  type: 'start' | 'output' | 'error' | 'complete'\n  provider?: AIProvider\n  model?: string\n  content?: string\n  status?: 'completed' | 'error'\n  exitCode?: number\n  timestamp: string\n}\n\nexport function useAI() {\n  const [execution, setExecution] = useState<AIExecution>({\n    runId: null,\n    provider: null,\n    model: null,\n    status: 'idle',\n    messages: [],\n    error: null,\n  })", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1618", "text": "export interface AIMessage {\n  type: 'start' | 'output' | 'error' | 'complete'\n  provider?: AIProvider\n  model?: string\n  content?: string\n  status?: 'completed' | 'error'\n  exitCode?: number\n  timestamp: string\n}\n\nexport function useAI() {\n  const [execution, setExecution] = useState<AIExecution>({\n    runId: null,\n    provider: null,\n    model: null,\n    status: 'idle',\n    messages: [],\n    error: null,\n  })\n\n  const execute = useCallback(async (params: {\n    provider: AIProvider\n    model?: string\n    changeId: string\n    taskId: string\n    taskTitle: string\n    context?: string\n  }) => {\n    // ... SSE 스트리밍 로직\n    const response = await fetch('/api/ai/execute', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(params),\n    })\n    // ... 스트림 처리\n  }, [])", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1619", "text": "const execute = useCallback(async (params: {\n    provider: AIProvider\n    model?: string\n    changeId: string\n    taskId: string\n    taskTitle: string\n    context?: string\n  }) => {\n    // ... SSE 스트리밍 로직\n    const response = await fetch('/api/ai/execute', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(params),\n    })\n    // ... 스트림 처리\n  }, [])\n\n  const stop = useCallback(async () => {\n    // POST /api/ai/stop/{runId}\n  }, [execution.runId])\n\n  return { execution, execute, stop, reset }\n}\n```\n\n### 4. useSwarm 훅\n\n```typescript\n// src/hooks/useSwarm.ts (useClaudeFlowExecution 리네임)\n\nexport type SwarmStrategy = 'development' | 'research' | 'testing'", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1620", "text": "const stop = useCallback(async () => {\n    // POST /api/ai/stop/{runId}\n  }, [execution.runId])\n\n  return { execution, execute, stop, reset }\n}\n```\n\n### 4. useSwarm 훅\n\n```typescript\n// src/hooks/useSwarm.ts (useClaudeFlowExecution 리네임)\n\nexport type SwarmStrategy = 'development' | 'research' | 'testing'\n\nexport interface SwarmExecution {\n  runId: string | null\n  strategy: SwarmStrategy | null\n  maxAgents: number\n  status: 'idle' | 'running' | 'completed' | 'error'\n  agents: SwarmAgent[]\n  progress: number\n  logs: SwarmLog[]\n  error: string | null\n}\n\nexport interface SwarmAgent {\n  name: string\n  type: 'researcher' | 'coder' | 'tester' | 'reviewer'\n  status: 'idle' | 'working' | 'done'\n  currentTask?: string\n}", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1621", "text": "export interface SwarmExecution {\n  runId: string | null\n  strategy: SwarmStrategy | null\n  maxAgents: number\n  status: 'idle' | 'running' | 'completed' | 'error'\n  agents: SwarmAgent[]\n  progress: number\n  logs: SwarmLog[]\n  error: string | null\n}\n\nexport interface SwarmAgent {\n  name: string\n  type: 'researcher' | 'coder' | 'tester' | 'reviewer'\n  status: 'idle' | 'working' | 'done'\n  currentTask?: string\n}\n\nexport function useSwarm() {\n  const [execution, setExecution] = useState<SwarmExecution>({\n    runId: null,\n    strategy: null,\n    maxAgents: 5,\n    status: 'idle',\n    agents: [],\n    progress: 0,\n    logs: [],\n    error: null,\n  })", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1622", "text": "export interface SwarmAgent {\n  name: string\n  type: 'researcher' | 'coder' | 'tester' | 'reviewer'\n  status: 'idle' | 'working' | 'done'\n  currentTask?: string\n}\n\nexport function useSwarm() {\n  const [execution, setExecution] = useState<SwarmExecution>({\n    runId: null,\n    strategy: null,\n    maxAgents: 5,\n    status: 'idle',\n    agents: [],\n    progress: 0,\n    logs: [],\n    error: null,\n  })\n\n  const execute = useCallback(async (params: {\n    changeId: string\n    taskId?: string\n    mode: 'full' | 'single' | 'analysis'\n    strategy: SwarmStrategy\n    maxAgents: number\n  }) => {\n    // POST /api/claude-flow/execute\n    // SSE 스트리밍 처리\n  }, [])\n\n  return { execution, execute, stop, reset }\n}\n```\n\n### 5. useClaude 하위 호환", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1623", "text": "const execute = useCallback(async (params: {\n    changeId: string\n    taskId?: string\n    mode: 'full' | 'single' | 'analysis'\n    strategy: SwarmStrategy\n    maxAgents: number\n  }) => {\n    // POST /api/claude-flow/execute\n    // SSE 스트리밍 처리\n  }, [])\n\n  return { execution, execute, stop, reset }\n}\n```\n\n### 5. useClaude 하위 호환\n\n```typescript\n// src/hooks/useClaude.ts (수정)\n\nimport { useAI, type AIProvider } from './useAI'\n\n// 기존 타입 유지\nexport type ClaudeModel = 'haiku' | 'sonnet' | 'opus'\n\n// useAI 래퍼로 변경\nexport function useClaude() {\n  const ai = useAI()", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1624", "text": "return { execution, execute, stop, reset }\n}\n```\n\n### 5. useClaude 하위 호환\n\n```typescript\n// src/hooks/useClaude.ts (수정)\n\nimport { useAI, type AIProvider } from './useAI'\n\n// 기존 타입 유지\nexport type ClaudeModel = 'haiku' | 'sonnet' | 'opus'\n\n// useAI 래퍼로 변경\nexport function useClaude() {\n  const ai = useAI()\n\n  const execute = useCallback(async (params: {\n    changeId: string\n    taskId: string\n    taskTitle: string\n    context?: string\n    model?: ClaudeModel\n  }) => {\n    return ai.execute({\n      provider: 'claude',\n      model: params.model || 'sonnet',\n      ...params,\n    })\n  }, [ai])", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1625", "text": "// useAI 래퍼로 변경\nexport function useClaude() {\n  const ai = useAI()\n\n  const execute = useCallback(async (params: {\n    changeId: string\n    taskId: string\n    taskTitle: string\n    context?: string\n    model?: ClaudeModel\n  }) => {\n    return ai.execute({\n      provider: 'claude',\n      model: params.model || 'sonnet',\n      ...params,\n    })\n  }, [ai])\n\n  // 기존 인터페이스 유지\n  return {\n    execution: {\n      ...ai.execution,\n      // 하위 호환을 위한 매핑\n      runId: ai.execution.runId,\n      status: ai.execution.status,\n      messages: ai.execution.messages,\n      error: ai.execution.error,\n    },\n    execute,\n    stop: ai.stop,\n    reset: ai.reset,\n  }\n}\n```\n\n### 6. TaskExecutionDialog 수정", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1626", "text": "// 기존 인터페이스 유지\n  return {\n    execution: {\n      ...ai.execution,\n      // 하위 호환을 위한 매핑\n      runId: ai.execution.runId,\n      status: ai.execution.status,\n      messages: ai.execution.messages,\n      error: ai.execution.error,\n    },\n    execute,\n    stop: ai.stop,\n    reset: ai.reset,\n  }\n}\n```\n\n### 6. TaskExecutionDialog 수정\n\n```typescript\n// 실행 모드 상태\nconst [executionMode, setExecutionMode] = useState<'single' | 'swarm'>('single')\n\n// 단일 실행 상태\nconst [selectedProvider, setSelectedProvider] = useState<AIProvider>('claude')\nconst [selectedModel, setSelectedModel] = useState<string>('sonnet')\n\n// Swarm 실행 상태\nconst [strategy, setStrategy] = useState<SwarmStrategy>('development')\nconst [maxAgents, setMaxAgents] = useState<number>(5)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1627", "text": "### 6. TaskExecutionDialog 수정\n\n```typescript\n// 실행 모드 상태\nconst [executionMode, setExecutionMode] = useState<'single' | 'swarm'>('single')\n\n// 단일 실행 상태\nconst [selectedProvider, setSelectedProvider] = useState<AIProvider>('claude')\nconst [selectedModel, setSelectedModel] = useState<string>('sonnet')\n\n// Swarm 실행 상태\nconst [strategy, setStrategy] = useState<SwarmStrategy>('development')\nconst [maxAgents, setMaxAgents] = useState<number>(5)\n\n// Provider 옵션 (cli-settings.json 기반)\nconst [providers, setProviders] = useState<AIProviderConfig[]>([])\n\n// 초기 로드\nuseEffect(() => {\n  fetch('/api/ai/providers')\n    .then(res => res.json())\n    .then(data => {\n      setProviders(data.providers.filter(p => p.enabled && p.available))\n    })\n}, [])", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1628", "text": "// Swarm 실행 상태\nconst [strategy, setStrategy] = useState<SwarmStrategy>('development')\nconst [maxAgents, setMaxAgents] = useState<number>(5)\n\n// Provider 옵션 (cli-settings.json 기반)\nconst [providers, setProviders] = useState<AIProviderConfig[]>([])\n\n// 초기 로드\nuseEffect(() => {\n  fetch('/api/ai/providers')\n    .then(res => res.json())\n    .then(data => {\n      setProviders(data.providers.filter(p => p.enabled && p.available))\n    })\n}, [])\n\n// 실행 핸들러\nconst handleExecute = () => {\n  if (executionMode === 'single') {\n    executeAI({\n      provider: selectedProvider,\n      model: selectedModel,\n      changeId,\n      taskId,\n      taskTitle,\n    })\n  } else {\n    executeSwarm({\n      changeId,\n      taskId,\n      mode: 'single',\n      strategy,\n      maxAgents,\n    })\n  }\n}\n```\n\n## 파일 구조", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1629", "text": "// 실행 핸들러\nconst handleExecute = () => {\n  if (executionMode === 'single') {\n    executeAI({\n      provider: selectedProvider,\n      model: selectedModel,\n      changeId,\n      taskId,\n      taskTitle,\n    })\n  } else {\n    executeSwarm({\n      changeId,\n      taskId,\n      mode: 'single',\n      strategy,\n      maxAgents,\n    })\n  }\n}\n```\n\n## 파일 구조\n\n```\nsrc/\n├── hooks/\n│   ├── useAI.ts              # 새로 생성 (핵심 훅)\n│   ├── useSwarm.ts           # 새로 생성 (useClaudeFlowExecution 리네임)\n│   └── useClaude.ts          # 수정 (useAI 래퍼)\n├── types/\n│   └── ai.ts                 # 새로 생성 (AI 타입)\n├── components/\n│   └── flow/\n│       └── TaskExecutionDialog.tsx  # 수정 (실행 모드 탭)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1630", "text": "server/\n├── app.ts                    # 수정 (라우터 등록)\n├── ai/                       # 새로 생성\n│   ├── index.ts              # API 라우터\n│   └── executor.ts           # 실행 로직\n└── cli-adapter/\n    ├── types.ts              # 수정 (model 파라미터)\n    └── process-manager.ts    # 수정 (model 처리)\n```\n\n## 설정 파일\n\n### .zyflow/cli-settings.json (기존 형식 유지)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1631", "text": "## 설정 파일\n\n### .zyflow/cli-settings.json (기존 형식 유지)\n\n```json\n{\n  \"claude\": {\n    \"enabled\": true,\n    \"selectedModel\": \"sonnet\",\n    \"order\": 0\n  },\n  \"gemini\": {\n    \"enabled\": true,\n    \"selectedModel\": \"gemini-2.5-pro\",\n    \"order\": 1\n  },\n  \"codex\": {\n    \"enabled\": true,\n    \"selectedModel\": \"gpt-5.1-codex\",\n    \"order\": 2\n  },\n  \"qwen\": {\n    \"enabled\": false,\n    \"selectedModel\": \"qwen-coder-plus\",\n    \"order\": 3\n  }\n}\n```\n\n## 테스트 계획", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1632", "text": "## 테스트 계획\n\n### 단위 테스트\n- [ ] useAI 훅 - execute, stop, reset\n- [ ] useSwarm 훅 - execute, stop, reset\n- [ ] useClaude 하위 호환성\n- [ ] buildArgs - Provider별 인자 생성\n- [ ] Provider 설정 로드/병합\n\n### 통합 테스트\n- [ ] /api/ai/execute - Claude 실행\n- [ ] /api/ai/execute - Gemini 실행\n- [ ] /api/claude-flow/execute - Swarm 실행\n- [ ] /api/ai/providers - 목록 조회\n- [ ] SSE 스트리밍 - 실시간 로그", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1633", "text": "### 통합 테스트\n- [ ] /api/ai/execute - Claude 실행\n- [ ] /api/ai/execute - Gemini 실행\n- [ ] /api/claude-flow/execute - Swarm 실행\n- [ ] /api/ai/providers - 목록 조회\n- [ ] SSE 스트리밍 - 실시간 로그\n\n### E2E 테스트\n- [ ] UI에서 실행 모드 탭 전환\n- [ ] 단일 모드: Provider 선택 → 실행 → 완료\n- [ ] Swarm 모드: Strategy 선택 → 실행 → 완료\n- [ ] 미설치 CLI 비활성화 표시", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/design.md", "file_name": "design.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1634", "text": "# 멀티 AI Provider 지원 + 실행 모드 분리\n\n## Summary\n\nzyflow의 태스크 실행 시스템을 확장하여:\n1. **다중 AI Provider 지원**: Claude 외에 Gemini, Codex, Qwen 등 지원\n2. **실행 모드 분리**: 단일 실행(useAI)과 Swarm 실행(useSwarm)을 명확히 분리\n3. 기존 CLI Adapter 구조를 활용하여 충돌 없이 통합\n\n## Motivation", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1635", "text": "## Motivation\n\n### 현재 상황\n- **두 개의 실행 시스템 존재** (혼란 유발)\n  - `useClaude` → `/api/claude/execute` → 단일 태스크\n  - `useClaudeFlowExecution` → `/api/claude-flow/*` → Swarm 멀티에이전트\n- Claude Code CLI만 지원\n- `server/cli-adapter/`에 이미 6개 AI CLI 프로필 정의됨 (미사용)\n- 모든 태스크가 Claude로만 실행되어 비용/성능 최적화 불가", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1636", "text": "### 목표\n- **실행 모드 선택**: 단일 vs Swarm 명확히 구분\n- **다중 Provider 지원**: 태스크 실행 시 AI 선택 가능\n- **기존 구조 활용**: CLI Adapter 재사용\n- **하위 호환성 유지**: 기존 useClaude 코드 변경 없이 동작\n\n### 기대 효과\n- **명확한 UX**: 단일/Swarm 모드 선택으로 비용 예측 가능\n- **비용 절감**: 단순 태스크는 저렴한 모델 사용 (Gemini Flash, Haiku)\n- **성능 최적화**: 대용량 컨텍스트는 Gemini Pro 활용 (100만 토큰)\n- **확장성**: 새 AI CLI 추가 용이\n\n## Scope", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1637", "text": "## Scope\n\n### In Scope\n- **실행 모드 선택 UI**: 단일 실행 / Swarm 실행 탭\n- **useAI 훅**: 다중 Provider 지원 단일 실행 훅\n- **useSwarm 훅**: useClaudeFlowExecution 리네임 + 정리\n- **useClaude 하위 호환**: useAI 래퍼로 유지\n- **서버 API 확장**: `/api/ai/execute` 엔드포인트\n- **Provider별 모델 옵션**: 동적 로드\n- **CLI 가용성 체크**: 미설치 Provider 비활성화", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1638", "text": "### Out of Scope\n- MCP Server 기반 통합 (문서 방식)\n- 태스크 유형별 자동 라우팅 (v2)\n- Consensus 패턴 - 다중 AI 합의 (v2)\n- Swarm에 다중 Provider 지원 (v2)\n- 커스텀 CLI 추가 UI\n\n## Approach\n\n### 아키텍처 (옵션 1: 분리 유지)\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│                    TaskExecutionDialog                           │\n├─────────────────────────────────────────────────────────────────┤\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1639", "text": "```\n┌─────────────────────────────────────────────────────────────────┐\n│                    TaskExecutionDialog                           │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                  │\n│  ┌─────────────────────┐    ┌─────────────────────┐            │\n│  │  ⚡ 단일 실행        │    │  🐝 Swarm 실행       │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1640", "text": "│\n│  ┌─────────────────────┐    ┌─────────────────────┐            │\n│  │  ⚡ 단일 실행        │    │  🐝 Swarm 실행       │            │\n│  │  (빠르고 저렴)      │    │  (멀티에이전트)      │            │\n│  └──────────┬──────────┘    └──────────┬──────────┘            │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1641", "text": "🐝 Swarm 실행       │            │\n│  │  (빠르고 저렴)      │    │  (멀티에이전트)      │            │\n│  └──────────┬──────────┘    └──────────┬──────────┘            │\n│             │                          │                        │\n│             ▼                          ▼", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1642", "text": "│\n│             │                          │                        │\n│             ▼                          ▼                        │\n│  ┌─────────────────────┐    ┌─────────────────────┐            │\n│  │ Provider 선택        │    │ Strategy 선택       │            │\n│  │ Claude/Gemini/Codex │    │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1643", "text": "▼                        │\n│  ┌─────────────────────┐    ┌─────────────────────┐            │\n│  │ Provider 선택        │    │ Strategy 선택       │            │\n│  │ Claude/Gemini/Codex │    │ Dev/Research/Test   │            │\n│  └──────────┬──────────┘    └──────────┬──────────┘            │\n│             │                          │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1644", "text": "│\n│  │ Claude/Gemini/Codex │    │ Dev/Research/Test   │            │\n│  └──────────┬──────────┘    └──────────┬──────────┘            │\n│             │                          │                        │\n│             ▼                          ▼                        │\n│  ┌─────────────────────┐", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1645", "text": "│                        │\n│             ▼                          ▼                        │\n│  ┌─────────────────────┐    ┌─────────────────────┐            │\n│  │ Model 선택          │    │ Max Agents 설정     │            │\n│  │ Haiku/Sonnet/Opus   │    │ 1-10                │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1646", "text": "│\n│  ┌─────────────────────┐    ┌─────────────────────┐            │\n│  │ Model 선택          │    │ Max Agents 설정     │            │\n│  │ Haiku/Sonnet/Opus   │    │ 1-10                │            │\n│  └─────────────────────┘    └─────────────────────┘            │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1647", "text": "│            │\n│  └─────────────────────┘    └─────────────────────┘            │\n│                                                                  │\n└──────────────────────────────┬───────────────────────────────────┘\n                               │\n           ┌───────────────────┴───────────────────┐\n           │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1648", "text": "│\n└──────────────────────────────┬───────────────────────────────────┘\n                               │\n           ┌───────────────────┴───────────────────┐\n           │                                       │\n           ▼                                       ▼\n    ┌─────────────┐", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1649", "text": "│                                       │\n           ▼                                       ▼\n    ┌─────────────┐                        ┌─────────────┐\n    │   useAI     │                        │  useSwarm   │\n    │  (새 훅)    │                        │ (리네임)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1650", "text": "┌─────────────┐\n    │   useAI     │                        │  useSwarm   │\n    │  (새 훅)    │                        │ (리네임)    │\n    └──────┬──────┘                        └──────┬──────┘\n           │                                       │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1651", "text": "│ (리네임)    │\n    └──────┬──────┘                        └──────┬──────┘\n           │                                       │\n           ▼                                       ▼\n    /api/ai/execute                        /api/claude-flow/*\n           │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1652", "text": "│\n           ▼                                       ▼\n    /api/ai/execute                        /api/claude-flow/*\n           │                                       │\n           ▼                                       ▼\n    CLIProcessManager", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1653", "text": "│                                       │\n           ▼                                       ▼\n    CLIProcessManager                      claude-flow@alpha\n           │                                       │\n           ▼", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1654", "text": "CLIProcessManager                      claude-flow@alpha\n           │                                       │\n           ▼                                       ▼\n    claude | gemini | codex               npx claude-flow swarm\n```\n\n### 훅 구조", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1655", "text": "│\n           ▼                                       ▼\n    claude | gemini | codex               npx claude-flow swarm\n```\n\n### 훅 구조\n\n```typescript\n// useAI - 단일 CLI 실행 (다중 Provider)\nuseAI()\n├── provider: 'claude' | 'gemini' | 'codex' | 'qwen'\n├── model: string\n├── execute(params)\n├── stop()\n└── reset()", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1656", "text": "▼\n    claude | gemini | codex               npx claude-flow swarm\n```\n\n### 훅 구조\n\n```typescript\n// useAI - 단일 CLI 실행 (다중 Provider)\nuseAI()\n├── provider: 'claude' | 'gemini' | 'codex' | 'qwen'\n├── model: string\n├── execute(params)\n├── stop()\n└── reset()\n\n// useSwarm - Swarm 멀티에이전트 (Claude-Flow 전용)\nuseSwarm()\n├── strategy: 'development' | 'research' | 'testing'\n├── maxAgents: number\n├── execute(params)\n├── stop()\n└── logs, progress\n\n// useClaude - 하위 호환 래퍼\nuseClaude() = useAI({ provider: 'claude' })\n```", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1657", "text": "// useSwarm - Swarm 멀티에이전트 (Claude-Flow 전용)\nuseSwarm()\n├── strategy: 'development' | 'research' | 'testing'\n├── maxAgents: number\n├── execute(params)\n├── stop()\n└── logs, progress\n\n// useClaude - 하위 호환 래퍼\nuseClaude() = useAI({ provider: 'claude' })\n```\n\n### 구현 단계\n\n#### Phase 1: 훅 리팩토링\n1. `useAI` 훅 생성 - 다중 Provider 지원\n2. `useClaude` → useAI 래퍼로 변경 (하위 호환)\n3. `useClaudeFlowExecution` → `useSwarm` 리네임", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1658", "text": "// useClaude - 하위 호환 래퍼\nuseClaude() = useAI({ provider: 'claude' })\n```\n\n### 구현 단계\n\n#### Phase 1: 훅 리팩토링\n1. `useAI` 훅 생성 - 다중 Provider 지원\n2. `useClaude` → useAI 래퍼로 변경 (하위 호환)\n3. `useClaudeFlowExecution` → `useSwarm` 리네임\n\n#### Phase 2: 서버 API 확장\n1. `/api/ai/execute` 엔드포인트 생성\n2. CLI Adapter의 `CLIProcessManager` 연결\n3. Provider별 프롬프트 형식 처리", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1659", "text": "#### Phase 2: 서버 API 확장\n1. `/api/ai/execute` 엔드포인트 생성\n2. CLI Adapter의 `CLIProcessManager` 연결\n3. Provider별 프롬프트 형식 처리\n\n#### Phase 3: UI 수정\n1. TaskExecutionDialog에 실행 모드 탭 추가\n2. 단일 모드: Provider + Model 선택\n3. Swarm 모드: Strategy + MaxAgents 설정\n4. CLI 가용성 체크 및 비활성화 표시\n\n### 실행 모드 비교", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1660", "text": "### 실행 모드 비교\n\n| 구분 | 단일 실행 (useAI) | Swarm 실행 (useSwarm) |\n|------|-------------------|----------------------|\n| **용도** | 단일 파일 수정, 간단한 태스크 | 대규모 리팩토링, 복합 태스크 |\n| **토큰** | 15-65K (저렴) | 50-200K+ (고비용) |\n| **속도** | 빠름 (1-5분) | 느림 (10-30분) |\n| **Provider** | Claude/Gemini/Codex/Qwen | Claude-Flow 전용 |\n| **에이전트** | 1개 | 1-10개 |\n\n### UI 디자인\n\n```\n┌─────────────────────────────────────────────────────┐\n│ 태스크 실행", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1661", "text": "### UI 디자인\n\n```\n┌─────────────────────────────────────────────────────┐\n│ 태스크 실행                                          │\n├─────────────────────────────────────────────────────┤\n│                                                      │\n│  ┌──────────────────┐ ┌──────────────────┐          │\n│  │  ⚡ 단일 실행     │ │  🐝 Swarm 실행   │          │\n│  │  ━━━━━━━━━━━━━━  │ │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1662", "text": "│\n│  ┌──────────────────┐ ┌──────────────────┐          │\n│  │  ⚡ 단일 실행     │ │  🐝 Swarm 실행   │          │\n│  │  ━━━━━━━━━━━━━━  │ │                  │          │\n│  └──────────────────┘ └──────────────────┘          │\n│                                                      │\n│  ──", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1663", "text": "│ │                  │          │\n│  └──────────────────┘ └──────────────────┘          │\n│                                                      │\n│  ── AI Provider ──                                  │\n│                                                      │\n│  ┌─────────────────────────────────────────┐", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1664", "text": "│\n│  ── AI Provider ──                                  │\n│                                                      │\n│  ┌─────────────────────────────────────────┐       │\n│  │ 🤖 Claude                         [✓]   │       │\n│  │    Anthropic Claude Code CLI            │       │\n│  └─────────────────────────────────────────┘       │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1665", "text": "│\n│  ┌─────────────────────────────────────────┐       │\n│  │ 🤖 Claude                         [✓]   │       │\n│  │    Anthropic Claude Code CLI            │       │\n│  └─────────────────────────────────────────┘       │\n│                                                      │\n│  ┌─────────────────────────────────────────┐       │\n│  │ 💎 Gemini                         [ ]", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1666", "text": "└─────────────────────────────────────────┘       │\n│                                                      │\n│  ┌─────────────────────────────────────────┐       │\n│  │ 💎 Gemini                         [ ]   │       │\n│  │    Google Gemini CLI (100만 토큰)       │       │\n│  └─────────────────────────────────────────┘       │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1667", "text": "[ ]   │       │\n│  │    Google Gemini CLI (100만 토큰)       │       │\n│  └─────────────────────────────────────────┘       │\n│                                                      │\n│  ┌─────────────────────────────────────────┐       │\n│  │ 🧠 Codex                    [미설치]    │       │\n│  │    OpenAI Codex CLI", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1668", "text": "│\n│  ┌─────────────────────────────────────────┐       │\n│  │ 🧠 Codex                    [미설치]    │       │\n│  │    OpenAI Codex CLI                     │       │\n│  └─────────────────────────────────────────┘       │\n│                                                      │\n│  ── 모델 선택 (Claude) ──", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1669", "text": "OpenAI Codex CLI                     │       │\n│  └─────────────────────────────────────────┘       │\n│                                                      │\n│  ── 모델 선택 (Claude) ──                           │\n│                                                      │\n│  ○ Haiku   - 빠르고 저렴", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1670", "text": "│\n│  ── 모델 선택 (Claude) ──                           │\n│                                                      │\n│  ○ Haiku   - 빠르고 저렴 (단순 태스크)             │\n│  ● Sonnet  - 균형 잡힌 성능 (권장)                 │\n│  ○ Opus    - 최고 품질 (복잡한 태스크)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1671", "text": "│\n│  ○ Haiku   - 빠르고 저렴 (단순 태스크)             │\n│  ● Sonnet  - 균형 잡힌 성능 (권장)                 │\n│  ○ Opus    - 최고 품질 (복잡한 태스크)             │\n│                                                      │\n│                    [ 실행 시작 ]", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1672", "text": "(복잡한 태스크)             │\n│                                                      │\n│                    [ 실행 시작 ]                     │\n│                                                      │\n└─────────────────────────────────────────────────────┘\n```\n\n### 타입 정의\n\n```typescript\n// src/types/ai.ts\n\n// 실행 모드\nexport type ExecutionMode = 'single' | 'swarm'", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1673", "text": "│\n│                                                      │\n└─────────────────────────────────────────────────────┘\n```\n\n### 타입 정의\n\n```typescript\n// src/types/ai.ts\n\n// 실행 모드\nexport type ExecutionMode = 'single' | 'swarm'\n\n// AI Provider (단일 실행용)\nexport type AIProvider = 'claude' | 'gemini' | 'codex' | 'qwen' | 'kilo' | 'opencode'", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1674", "text": "│\n└─────────────────────────────────────────────────────┘\n```\n\n### 타입 정의\n\n```typescript\n// src/types/ai.ts\n\n// 실행 모드\nexport type ExecutionMode = 'single' | 'swarm'\n\n// AI Provider (단일 실행용)\nexport type AIProvider = 'claude' | 'gemini' | 'codex' | 'qwen' | 'kilo' | 'opencode'\n\n// Provider 설정\nexport interface AIProviderConfig {\n  id: AIProvider\n  name: string\n  icon: string\n  enabled: boolean\n  available: boolean  // CLI 설치 여부\n  selectedModel: string\n  availableModels: string[]\n  order: number\n}", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1675", "text": "// 실행 모드\nexport type ExecutionMode = 'single' | 'swarm'\n\n// AI Provider (단일 실행용)\nexport type AIProvider = 'claude' | 'gemini' | 'codex' | 'qwen' | 'kilo' | 'opencode'\n\n// Provider 설정\nexport interface AIProviderConfig {\n  id: AIProvider\n  name: string\n  icon: string\n  enabled: boolean\n  available: boolean  // CLI 설치 여부\n  selectedModel: string\n  availableModels: string[]\n  order: number\n}\n\n// 단일 실행 파라미터\nexport interface AIExecuteParams {\n  provider: AIProvider\n  model: string\n  changeId: string\n  taskId: string\n  taskTitle: string\n  context?: string\n}", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1676", "text": "// Provider 설정\nexport interface AIProviderConfig {\n  id: AIProvider\n  name: string\n  icon: string\n  enabled: boolean\n  available: boolean  // CLI 설치 여부\n  selectedModel: string\n  availableModels: string[]\n  order: number\n}\n\n// 단일 실행 파라미터\nexport interface AIExecuteParams {\n  provider: AIProvider\n  model: string\n  changeId: string\n  taskId: string\n  taskTitle: string\n  context?: string\n}\n\n// Swarm 실행 파라미터\nexport interface SwarmExecuteParams {\n  strategy: 'development' | 'research' | 'testing'\n  maxAgents: number\n  changeId: string\n  taskId?: string\n  mode: 'full' | 'single' | 'analysis'\n}\n```\n\n## Risks & Mitigations", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1677", "text": "## Risks & Mitigations\n\n| 리스크 | 완화 방안 |\n|--------|----------|\n| CLI 미설치 시 오류 | 실행 전 `which` 체크, 비활성 표시 |\n| Provider별 출력 형식 차이 | 공통 파서 인터페이스 정의 |\n| API 키 누락 | 환경변수 체크, 설정 안내 표시 |\n| 기존 useClaude 호환성 | useClaude는 useAI wrapper로 유지 |\n| 실행 모드 혼란 | 명확한 탭 UI + 비용 안내 표시 |\n| Swarm 비용 예측 어려움 | 예상 토큰 범위 표시 |\n\n## Dependencies", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1678", "text": "## Dependencies\n\n### 기존 코드 활용\n- `server/cli-adapter/types.ts` - CLIProfile, CLIType 정의\n- `server/cli-adapter/process-manager.ts` - CLIProcessManager\n- `server/claude-flow/` - Swarm 실행 로직\n- `.zyflow/cli-settings.json` - Provider 설정\n- `src/hooks/useClaude.ts` - 기존 실행 로직 참고\n- `src/hooks/useClaudeFlowExecution.ts` - Swarm 로직\n\n### 새로 필요한 것\n- Provider별 CLI 설치 (선택적)\n  - `npm install -g @anthropic/claude-code`\n  - `npm install -g @google/gemini-cli`\n  - `npm install -g @openai/codex`\n\n## Success Criteria", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1679", "text": "### 새로 필요한 것\n- Provider별 CLI 설치 (선택적)\n  - `npm install -g @anthropic/claude-code`\n  - `npm install -g @google/gemini-cli`\n  - `npm install -g @openai/codex`\n\n## Success Criteria\n\n- [ ] 실행 모드 선택 UI (단일/Swarm 탭) 동작\n- [ ] Claude 외 최소 1개 Provider (Gemini) 동작 확인\n- [ ] TaskExecutionDialog에서 Provider 선택 가능\n- [ ] Provider별 모델 선택 가능\n- [ ] CLI 미설치 시 비활성화 표시\n- [ ] cli-settings.json 기반 설정 반영\n- [ ] 기존 useClaude 코드 하위 호환\n- [ ] useSwarm으로 리네임 완료\n- [ ] 실행 로그에 Provider/Model/Mode 정보 표시", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1680", "text": "# Tasks (Option 1: 실행 모드 분리)\n\n## Phase 1: 서버 API 확장\n\n### 1.1 AI 실행 API (단일 실행)\n\n- [x] **AI 타입 정의** (`server/ai/types.ts`)\n  - AIProvider 타입 정의\n  - AIExecuteRequest/Response 인터페이스\n  - AIMessage 타입\n\n- [x] **AI 실행 API 라우터** (`server/ai/index.ts`)\n  - POST /api/ai/execute - 실행 시작\n  - POST /api/ai/stop/:runId - 실행 중지\n  - GET /api/ai/providers - Provider 목록 조회\n\n- [x] **CLI Adapter 확장** (`server/cli-adapter/process-manager.ts`)\n  - buildArgs에 model 파라미터 추가\n  - Provider별 모델 인자 처리 (--model)\n  - start() 메서드에 model 전달", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1681", "text": "- [x] **AI 실행 API 라우터** (`server/ai/index.ts`)\n  - POST /api/ai/execute - 실행 시작\n  - POST /api/ai/stop/:runId - 실행 중지\n  - GET /api/ai/providers - Provider 목록 조회\n\n- [x] **CLI Adapter 확장** (`server/cli-adapter/process-manager.ts`)\n  - buildArgs에 model 파라미터 추가\n  - Provider별 모델 인자 처리 (--model)\n  - start() 메서드에 model 전달\n\n- [x] **앱에 라우터 등록** (`server/app.ts`)\n  - aiRouter import 및 등록\n  - /api/ai/* 엔드포인트 활성화\n\n### 1.2 Claude-Flow API 정리 (Swarm 실행)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1682", "text": "- [x] **CLI Adapter 확장** (`server/cli-adapter/process-manager.ts`)\n  - buildArgs에 model 파라미터 추가\n  - Provider별 모델 인자 처리 (--model)\n  - start() 메서드에 model 전달\n\n- [x] **앱에 라우터 등록** (`server/app.ts`)\n  - aiRouter import 및 등록\n  - /api/ai/* 엔드포인트 활성화\n\n### 1.2 Claude-Flow API 정리 (Swarm 실행)\n\n- [x] **기존 API 검토** (`server/claude-flow/index.ts`)\n  - 현재 엔드포인트 구조 확인\n  - Strategy, maxAgents 파라미터 지원 확인\n\n- [x] **Swarm 타입 정의** (`server/claude-flow/types.ts`)\n  - SwarmStrategy 타입\n  - SwarmExecuteRequest/Response 인터페이스\n  - SwarmProgress, SwarmAgent 타입", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1683", "text": "### 1.2 Claude-Flow API 정리 (Swarm 실행)\n\n- [x] **기존 API 검토** (`server/claude-flow/index.ts`)\n  - 현재 엔드포인트 구조 확인\n  - Strategy, maxAgents 파라미터 지원 확인\n\n- [x] **Swarm 타입 정의** (`server/claude-flow/types.ts`)\n  - SwarmStrategy 타입\n  - SwarmExecuteRequest/Response 인터페이스\n  - SwarmProgress, SwarmAgent 타입\n\n## Phase 2: 클라이언트 훅 확장\n\n### 2.1 useAI 훅 (단일 실행)\n\n- [x] **AI 타입 정의** (`src/types/ai.ts`)\n  - AIProvider 타입 export\n  - AIExecution, AIMessage 인터페이스\n  - AIProviderConfig 인터페이스", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1684", "text": "## Phase 2: 클라이언트 훅 확장\n\n### 2.1 useAI 훅 (단일 실행)\n\n- [x] **AI 타입 정의** (`src/types/ai.ts`)\n  - AIProvider 타입 export\n  - AIExecution, AIMessage 인터페이스\n  - AIProviderConfig 인터페이스\n\n- [x] **useAI 훅 생성** (`src/hooks/useAI.ts`)\n  - execute() - provider, model 포함 실행\n  - stop() - 실행 중지\n  - reset() - 상태 초기화\n  - SSE 스트리밍 처리\n\n- [x] **useClaude 하위 호환** (`src/hooks/useClaude.ts`)\n  - useAI 래퍼로 리팩토링\n  - 기존 인터페이스 100% 유지\n  - 타입 export 유지 (ClaudeModel, ClaudeMessage)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1685", "text": "- [x] **useClaude 하위 호환** (`src/hooks/useClaude.ts`)\n  - useAI 래퍼로 리팩토링\n  - 기존 인터페이스 100% 유지\n  - 타입 export 유지 (ClaudeModel, ClaudeMessage)\n\n### 2.2 useSwarm 훅 (Swarm 실행)\n\n- [x] **useClaudeFlowExecution 리네임** (`src/hooks/useSwarm.ts`)\n  - 파일명 변경: useClaudeFlowExecution.ts → useSwarm.ts\n  - 훅 이름 변경: useClaudeFlowExecution → useSwarm\n  - 기존 import 업데이트\n\n- [x] **useSwarm 타입 추가**\n  - SwarmStrategy 타입\n  - SwarmExecution, SwarmAgent 인터페이스\n  - SwarmLog 타입", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1686", "text": "- [x] **useClaudeFlowExecution 리네임** (`src/hooks/useSwarm.ts`)\n  - 파일명 변경: useClaudeFlowExecution.ts → useSwarm.ts\n  - 훅 이름 변경: useClaudeFlowExecution → useSwarm\n  - 기존 import 업데이트\n\n- [x] **useSwarm 타입 추가**\n  - SwarmStrategy 타입\n  - SwarmExecution, SwarmAgent 인터페이스\n  - SwarmLog 타입\n\n- [x] **useClaudeFlowExecution 하위 호환**\n  - useSwarm re-export로 유지\n  - deprecated 주석 추가\n\n## Phase 3: UI 수정\n\n### 3.1 실행 모드 탭 추가", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1687", "text": "- [x] **useSwarm 타입 추가**\n  - SwarmStrategy 타입\n  - SwarmExecution, SwarmAgent 인터페이스\n  - SwarmLog 타입\n\n- [x] **useClaudeFlowExecution 하위 호환**\n  - useSwarm re-export로 유지\n  - deprecated 주석 추가\n\n## Phase 3: UI 수정\n\n### 3.1 실행 모드 탭 추가\n\n- [x] **실행 모드 탭 UI** (`src/components/flow/TaskExecutionDialog.tsx`)\n  - 단일 실행 / Swarm 실행 탭 추가\n  - 탭별 설정 영역 분리\n  - 탭 전환 시 상태 유지\n\n### 3.2 단일 실행 UI", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1688", "text": "## Phase 3: UI 수정\n\n### 3.1 실행 모드 탭 추가\n\n- [x] **실행 모드 탭 UI** (`src/components/flow/TaskExecutionDialog.tsx`)\n  - 단일 실행 / Swarm 실행 탭 추가\n  - 탭별 설정 영역 분리\n  - 탭 전환 시 상태 유지\n\n### 3.2 단일 실행 UI\n\n- [x] **Provider 선택 UI**\n  - Provider 목록 로드 (/api/ai/providers)\n  - Provider 선택 카드 UI\n  - 선택된 Provider의 모델 옵션 표시\n  - 비활성화된 Provider 표시 (미설치)\n\n- [x] **실행 로그 개선**\n  - Provider 아이콘 표시\n  - 선택된 모델 표시\n  - Provider별 색상 구분\n\n### 3.3 Swarm 실행 UI", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1689", "text": "- [x] **Provider 선택 UI**\n  - Provider 목록 로드 (/api/ai/providers)\n  - Provider 선택 카드 UI\n  - 선택된 Provider의 모델 옵션 표시\n  - 비활성화된 Provider 표시 (미설치)\n\n- [x] **실행 로그 개선**\n  - Provider 아이콘 표시\n  - 선택된 모델 표시\n  - Provider별 색상 구분\n\n### 3.3 Swarm 실행 UI\n\n- [x] **Strategy 선택 UI**\n  - Development / Research / Testing 옵션\n  - 각 Strategy 설명 표시\n  - 추천 사용 케이스 안내\n\n- [x] **MaxAgents 설정 UI**\n  - 슬라이더 또는 숫자 입력\n  - 1-10 범위 제한\n  - 예상 비용 안내", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1690", "text": "### 3.3 Swarm 실행 UI\n\n- [x] **Strategy 선택 UI**\n  - Development / Research / Testing 옵션\n  - 각 Strategy 설명 표시\n  - 추천 사용 케이스 안내\n\n- [x] **MaxAgents 설정 UI**\n  - 슬라이더 또는 숫자 입력\n  - 1-10 범위 제한\n  - 예상 비용 안내\n\n- [x] **Swarm 진행 상황 UI**\n  - 에이전트 상태 표시\n  - 전체 진행률 표시\n  - 에이전트별 로그 탭\n\n## Phase 4: 설정 및 테스트\n\n### 4.1 CLI 가용성 체크\n\n- [x] **which 명령어 체크**\n  - 각 CLI: which claude, which gemini, ...\n  - 결과를 Provider 목록에 반영", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1691", "text": "- [x] **Swarm 진행 상황 UI**\n  - 에이전트 상태 표시\n  - 전체 진행률 표시\n  - 에이전트별 로그 탭\n\n## Phase 4: 설정 및 테스트\n\n### 4.1 CLI 가용성 체크\n\n- [x] **which 명령어 체크**\n  - 각 CLI: which claude, which gemini, ...\n  - 결과를 Provider 목록에 반영\n\n- [x] **미설치 처리**\n  - UI에서 비활성화 표시\n  - 설치 안내 메시지 표시\n  - 설치 링크 제공\n\n### 4.2 단위 테스트", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1692", "text": "## Phase 4: 설정 및 테스트\n\n### 4.1 CLI 가용성 체크\n\n- [x] **which 명령어 체크**\n  - 각 CLI: which claude, which gemini, ...\n  - 결과를 Provider 목록에 반영\n\n- [x] **미설치 처리**\n  - UI에서 비활성화 표시\n  - 설치 안내 메시지 표시\n  - 설치 링크 제공\n\n### 4.2 단위 테스트\n\n- [x] **useAI 훅 테스트** (`src/hooks/useAI.test.ts`)\n  - execute, stop, reset 동작\n  - SSE 스트리밍 처리\n  - 에러 핸들링", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1693", "text": "- [x] **미설치 처리**\n  - UI에서 비활성화 표시\n  - 설치 안내 메시지 표시\n  - 설치 링크 제공\n\n### 4.2 단위 테스트\n\n- [x] **useAI 훅 테스트** (`src/hooks/useAI.test.ts`)\n  - execute, stop, reset 동작\n  - SSE 스트리밍 처리\n  - 에러 핸들링\n\n- [x] **useSwarm 훅 테스트** (`src/hooks/useSwarm.test.ts`)\n  - execute, stop, reset 동작\n  - 에이전트 상태 업데이트\n  - 진행률 계산\n\n- [x] **useClaude 하위 호환 테스트** (`src/hooks/useClaude.test.ts`)\n  - 기존 API 동작 확인\n  - 타입 호환성 확인", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1694", "text": "- [x] **useSwarm 훅 테스트** (`src/hooks/useSwarm.test.ts`)\n  - execute, stop, reset 동작\n  - 에이전트 상태 업데이트\n  - 진행률 계산\n\n- [x] **useClaude 하위 호환 테스트** (`src/hooks/useClaude.test.ts`)\n  - 기존 API 동작 확인\n  - 타입 호환성 확인\n\n- [x] **buildArgs Provider별 테스트** (`server/cli-adapter/process-manager.test.ts`)\n  - Claude 인자 생성\n  - Gemini 인자 생성\n  - Codex 인자 생성\n  - Qwen, Kilo, OpenCode 인자 생성\n\n### 4.3 통합 테스트\n\n- [x] **단일 실행 테스트** (`server/cli-adapter/integration.test.ts`)\n  - CLI Profiles 구성 테스트\n  - Session 관리 테스트\n  - Conversation History 구조 테스트", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1695", "text": "- [x] **buildArgs Provider별 테스트** (`server/cli-adapter/process-manager.test.ts`)\n  - Claude 인자 생성\n  - Gemini 인자 생성\n  - Codex 인자 생성\n  - Qwen, Kilo, OpenCode 인자 생성\n\n### 4.3 통합 테스트\n\n- [x] **단일 실행 테스트** (`server/cli-adapter/integration.test.ts`)\n  - CLI Profiles 구성 테스트\n  - Session 관리 테스트\n  - Conversation History 구조 테스트\n\n- [x] **Swarm 실행 테스트** (`server/cli-adapter/integration.test.ts`)\n  - 다중 Provider 지원 테스트\n  - Profile 가용성 테스트\n  - Multi-CLI 대화 추적 테스트\n\n### 4.4 E2E 테스트", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1696", "text": "- [x] **단일 실행 테스트** (`server/cli-adapter/integration.test.ts`)\n  - CLI Profiles 구성 테스트\n  - Session 관리 테스트\n  - Conversation History 구조 테스트\n\n- [x] **Swarm 실행 테스트** (`server/cli-adapter/integration.test.ts`)\n  - 다중 Provider 지원 테스트\n  - Profile 가용성 테스트\n  - Multi-CLI 대화 추적 테스트\n\n### 4.4 E2E 테스트\n\n- [x] **실행 모드 전환 테스트** (`src/components/flow/TaskExecutionDialog.e2e.test.tsx`)\n  - 탭 전환 동작\n  - 상태 유지 확인 (Provider 선택, Swarm 설정 등)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1697", "text": "- [x] **Swarm 실행 테스트** (`server/cli-adapter/integration.test.ts`)\n  - 다중 Provider 지원 테스트\n  - Profile 가용성 테스트\n  - Multi-CLI 대화 추적 테스트\n\n### 4.4 E2E 테스트\n\n- [x] **실행 모드 전환 테스트** (`src/components/flow/TaskExecutionDialog.e2e.test.tsx`)\n  - 탭 전환 동작\n  - 상태 유지 확인 (Provider 선택, Swarm 설정 등)\n\n- [x] **단일 실행 전체 흐름** (`src/components/flow/TaskExecutionDialog.e2e.test.tsx`)\n  - Provider 선택 → 모델 선택 → 실행 → 완료\n  - 에러 처리, 중지, 재실행", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1698", "text": "- [x] **실행 모드 전환 테스트** (`src/components/flow/TaskExecutionDialog.e2e.test.tsx`)\n  - 탭 전환 동작\n  - 상태 유지 확인 (Provider 선택, Swarm 설정 등)\n\n- [x] **단일 실행 전체 흐름** (`src/components/flow/TaskExecutionDialog.e2e.test.tsx`)\n  - Provider 선택 → 모델 선택 → 실행 → 완료\n  - 에러 처리, 중지, 재실행\n\n- [x] **Swarm 실행 전체 흐름** (`src/components/flow/TaskExecutionDialog.e2e.test.tsx`)\n  - Strategy 선택 → MaxAgents 설정 → 실행 → 완료\n  - 진행률, 로그 표시, 중지\n\n## 완료 기준\n\n### 필수 항목", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1699", "text": "- [x] **Swarm 실행 전체 흐름** (`src/components/flow/TaskExecutionDialog.e2e.test.tsx`)\n  - Strategy 선택 → MaxAgents 설정 → 실행 → 완료\n  - 진행률, 로그 표시, 중지\n\n## 완료 기준\n\n### 필수 항목\n\n- [x] 실행 모드 선택 UI (단일/Swarm 탭) 동작\n- [x] Claude 외 최소 1개 Provider (Gemini) 동작 확인\n- [x] TaskExecutionDialog에서 Provider 선택 가능\n- [x] Provider별 모델 선택 가능\n- [x] CLI 미설치 시 비활성화 표시\n- [x] cli-settings.json 기반 설정 반영\n- [x] 기존 useClaude 코드 하위 호환\n- [x] useSwarm으로 리네임 완료\n- [x] 실행 로그에 Provider/Model/Mode 정보 표시", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1700", "text": "### 선택 항목 (v2)\n\n- [x] Swarm에 다중 Provider 지원\n  - consensus.ts에 실제 CLI 실행 구현\n  - executor.ts에 consensus 모드 통합\n  - 다중 Provider 병렬 실행 지원\n\n- [x] 태스크 유형별 자동 라우팅\n  - task-routing.ts에 shouldUseConsensus, getAutoRouting 추가\n  - 태스크 복잡도 분석 (0-100점)\n  - 단일/Swarm/Consensus 모드 자동 선택\n\n- [x] Consensus 패턴 (다중 AI 합의)\n  - 4가지 전략 구현 (majority, weighted, unanimous, best-of-n)\n  - Jaccard 유사도 기반 결과 비교\n  - API 엔드포인트 추가 (/api/claude-flow/consensus, /providers)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1701", "text": "- [x] Consensus 패턴 (다중 AI 합의)\n  - 4가지 전략 구현 (majority, weighted, unanimous, best-of-n)\n  - Jaccard 유사도 기반 결과 비교\n  - API 엔드포인트 추가 (/api/claude-flow/consensus, /providers)\n\n- [x] 커스텀 CLI 추가 UI\n  - CustomCLIDialog에 템플릿 선택 기능 추가 (Ollama, LlamaCpp 등)\n  - CLISettings에 Consensus 설정 UI 추가\n  - 전략 선택, 임계값, 타임아웃 설정", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-add-multi-ai-provider/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-20", "last_modified_date": "2025-12-20"}}
{"id": "1702", "text": "# claude-flow 통합 설계\n\n## 시스템 아키텍처\n\n```\n┌─────────────────────────────────────────────────────────────────────┐\n│                        zyflow Dashboard                              │\n│  ┌────────────────────────────────────────────────────────────────┐ │\n│  │  ChangeDetail 컴포넌트                                          │ │\n│  │  ┌──────────────────────────────────────────────────────────┐  │ │\n│  │  │  [실행] 버튼  │  진행 상황 패널  │  로그 뷰어", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1703", "text": "│\n│  │  ChangeDetail 컴포넌트                                          │ │\n│  │  ┌──────────────────────────────────────────────────────────┐  │ │\n│  │  │  [실행] 버튼  │  진행 상황 패널  │  로그 뷰어             │  │ │\n│  │  └──────────────────────────────────────────────────────────┘  │ │\n│  └────────────────────────────────────────────────────────────────┘ │\n└───────────────────────────────┬─────────────────────────────────────┘\n                                │ HTTP/SSE", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1704", "text": "│  로그 뷰어             │  │ │\n│  │  └──────────────────────────────────────────────────────────┘  │ │\n│  └────────────────────────────────────────────────────────────────┘ │\n└───────────────────────────────┬─────────────────────────────────────┘\n                                │ HTTP/SSE\n                                ▼\n┌─────────────────────────────────────────────────────────────────────┐\n│                      zyflow Express Server                           │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1705", "text": "│ HTTP/SSE\n                                ▼\n┌─────────────────────────────────────────────────────────────────────┐\n│                      zyflow Express Server                           │\n│  ┌─────────────────────────────────────────────────────────────┐   │\n│  │  /api/claude-flow/                                           │   │\n│  │  ├── POST /execute      - 실행 시작", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1706", "text": "│\n│  ┌─────────────────────────────────────────────────────────────┐   │\n│  │  /api/claude-flow/                                           │   │\n│  │  ├── POST /execute      - 실행 시작                          │   │\n│  │  ├── GET  /status/:id   - 실행 상태 조회                     │   │\n│  │  ├── GET  /stream/:id   - SSE 스트림                         │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1707", "text": "- 실행 시작                          │   │\n│  │  ├── GET  /status/:id   - 실행 상태 조회                     │   │\n│  │  ├── GET  /stream/:id   - SSE 스트림                         │   │\n│  │  ├── POST /stop/:id     - 실행 중지                          │   │\n│  │  └── GET  /history      - 실행 히스토리                       │   │\n│", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1708", "text": "│   │\n│  │  ├── POST /stop/:id     - 실행 중지                          │   │\n│  │  └── GET  /history      - 실행 히스토리                       │   │\n│  └─────────────────────────────────────────────────────────────┘   │\n│  ┌─────────────────────────────────────────────────────────────┐   │\n│  │  ClaudeFlowExecutor                                          │   │\n│  │  ├── buildPrompt()      - OpenSpec", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1709", "text": "│   │\n│  └─────────────────────────────────────────────────────────────┘   │\n│  ┌─────────────────────────────────────────────────────────────┐   │\n│  │  ClaudeFlowExecutor                                          │   │\n│  │  ├── buildPrompt()      - OpenSpec → 프롬프트 변환           │   │\n│  │  ├── spawn()            - claude-flow 프로세스 실행          │   │\n│  │  ├── parseOutput()      - stream-json 파싱                   │", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1710", "text": "│   │\n│  │  ├── buildPrompt()      - OpenSpec → 프롬프트 변환           │   │\n│  │  ├── spawn()            - claude-flow 프로세스 실행          │   │\n│  │  ├── parseOutput()      - stream-json 파싱                   │   │\n│  │  └── handleComplete()   - 완료 처리, 태스크 업데이트         │   │\n│  └─────────────────────────────────────────────────────────────┘   │\n└───────────────────────────────┬─────────────────────────────────────┘\n                                │ child_process.", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1711", "text": "│  ├── parseOutput()      - stream-json 파싱                   │   │\n│  │  └── handleComplete()   - 완료 처리, 태스크 업데이트         │   │\n│  └─────────────────────────────────────────────────────────────┘   │\n└───────────────────────────────┬─────────────────────────────────────┘\n                                │ child_process.spawn\n                                ▼\n┌─────────────────────────────────────────────────────────────────────┐\n│                      claude-flow Process                             │\n│  npx claude-flow@alpha swarm \"{prompt}\" --claude                     │\n│  ├── 내부적으로 Claude Code CLI 호출                                │\n│  ├── stream-json 형식으로 진행 상황 출력                            │\n│  └── MCP 도구 사용 (zyflow_mark_complete 등)                        │\n└─────────────────────────────────────────────────────────────────────┘\n```", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1712", "text": "spawn\n                                ▼\n┌─────────────────────────────────────────────────────────────────────┐\n│                      claude-flow Process                             │\n│  npx claude-flow@alpha swarm \"{prompt}\" --claude                     │\n│  ├── 내부적으로 Claude Code CLI 호출                                │\n│  ├── stream-json 형식으로 진행 상황 출력                            │\n│  └── MCP 도구 사용 (zyflow_mark_complete 등)                        │\n└─────────────────────────────────────────────────────────────────────┘\n```\n\n## 컴포넌트 설계\n\n### 1. Backend: ClaudeFlowExecutor\n\n```typescript\n// server/claude-flow/executor.ts", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1713", "text": "## 컴포넌트 설계\n\n### 1. Backend: ClaudeFlowExecutor\n\n```typescript\n// server/claude-flow/executor.ts\n\ninterface ExecutionRequest {\n  projectPath: string\n  changeId: string\n  taskId?: string           // 특정 태스크만 실행\n  mode: 'full' | 'single' | 'analysis'\n  strategy?: 'development' | 'research' | 'testing'\n  maxAgents?: number        // 기본 5\n  timeout?: number          // 기본 30분 (ms)\n}\n\ninterface ExecutionStatus {\n  id: string\n  status: 'pending' | 'running' | 'completed' | 'failed' | 'stopped'\n  startedAt: string\n  completedAt?: string\n  progress: number          // 0-100\n  currentTask?: string\n  logs: LogEntry[]\n  result?: ExecutionResult\n}", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1714", "text": "interface ExecutionStatus {\n  id: string\n  status: 'pending' | 'running' | 'completed' | 'failed' | 'stopped'\n  startedAt: string\n  completedAt?: string\n  progress: number          // 0-100\n  currentTask?: string\n  logs: LogEntry[]\n  result?: ExecutionResult\n}\n\ninterface LogEntry {\n  timestamp: string\n  type: 'info' | 'tool_use' | 'tool_result' | 'error' | 'assistant'\n  content: string\n  metadata?: Record<string, unknown>\n}\n```\n\n### 2. 프롬프트 빌더\n\n```typescript\n// server/claude-flow/prompt-builder.ts\n\nclass OpenSpecPromptBuilder {\n  constructor(\n    private projectPath: string,\n    private changeId: string\n  ) {}\n\n  async build(): Promise<string> {\n    const sections: string[] = []\n\n    // 1. 프로젝트 맥락 (CLAUDE.md)\n    sections.push(await this.buildProjectContext())", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1715", "text": "### 2. 프롬프트 빌더\n\n```typescript\n// server/claude-flow/prompt-builder.ts\n\nclass OpenSpecPromptBuilder {\n  constructor(\n    private projectPath: string,\n    private changeId: string\n  ) {}\n\n  async build(): Promise<string> {\n    const sections: string[] = []\n\n    // 1. 프로젝트 맥락 (CLAUDE.md)\n    sections.push(await this.buildProjectContext())\n\n    // 2. Change 정보\n    sections.push(await this.buildChangeSection())\n\n    // 3. 설계 문서 (있으면)\n    const design = await this.buildDesignSection()\n    if (design) sections.push(design)\n\n    // 4. 현재 태스크\n    sections.push(await this.buildTasksSection())\n\n    // 5. 관련 스펙\n    sections.push(await this.buildSpecsSection())\n\n    // 6. 지시사항\n    sections.push(this.buildInstructions())", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1716", "text": "// 2. Change 정보\n    sections.push(await this.buildChangeSection())\n\n    // 3. 설계 문서 (있으면)\n    const design = await this.buildDesignSection()\n    if (design) sections.push(design)\n\n    // 4. 현재 태스크\n    sections.push(await this.buildTasksSection())\n\n    // 5. 관련 스펙\n    sections.push(await this.buildSpecsSection())\n\n    // 6. 지시사항\n    sections.push(this.buildInstructions())\n\n    return sections.join('\\n\\n---\\n\\n')\n  }\n}\n```\n\n### 3. Frontend: ExecutionPanel 컴포넌트\n\n```typescript\n// src/components/claude-flow/ExecutionPanel.tsx\n\ninterface ExecutionPanelProps {\n  changeId: string\n  projectPath: string\n}\n\n// 상태 관리\nconst [status, setStatus] = useState<ExecutionStatus | null>(null)\nconst [logs, setLogs] = useState<LogEntry[]>([])", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1717", "text": "// 6. 지시사항\n    sections.push(this.buildInstructions())\n\n    return sections.join('\\n\\n---\\n\\n')\n  }\n}\n```\n\n### 3. Frontend: ExecutionPanel 컴포넌트\n\n```typescript\n// src/components/claude-flow/ExecutionPanel.tsx\n\ninterface ExecutionPanelProps {\n  changeId: string\n  projectPath: string\n}\n\n// 상태 관리\nconst [status, setStatus] = useState<ExecutionStatus | null>(null)\nconst [logs, setLogs] = useState<LogEntry[]>([])\n\n// SSE 연결\nuseEffect(() => {\n  if (executionId) {\n    const eventSource = new EventSource(\n      `/api/claude-flow/stream/${executionId}`\n    )\n    eventSource.onmessage = (e) => {\n      const data = JSON.parse(e.data)\n      setLogs(prev => [...prev, data])\n    }\n    return () => eventSource.close()\n  }\n}, [executionId])\n```\n\n## 데이터 흐름\n\n### 실행 시작", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1718", "text": "## 데이터 흐름\n\n### 실행 시작\n\n```\n1. 사용자: \"실행\" 버튼 클릭\n2. Frontend → POST /api/claude-flow/execute\n   {\n     projectPath: \"/Users/hansoo./ZELLYY/zellyy-money\",\n     changeId: \"add-beta-tester-program\",\n     mode: \"full\"\n   }\n3. Server:\n   a. 실행 ID 생성 (uuid)\n   b. OpenSpec 문서 로드\n   c. 프롬프트 빌드\n   d. claude-flow spawn\n   e. 실행 ID 반환\n4. Frontend: SSE 연결 시작\n```\n\n### 실행 중\n\n```\n1. claude-flow 출력 (stream-json):\n   {\"type\":\"assistant\",\"message\":\"태스크 분석 중...\"}\n   {\"type\":\"tool_use\",\"name\":\"Read\",\"input\":{...}}\n   {\"type\":\"tool_result\",\"content\":\"...\"}\n\n2. Server: 출력 파싱 → SSE로 전송", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1719", "text": "### 실행 중\n\n```\n1. claude-flow 출력 (stream-json):\n   {\"type\":\"assistant\",\"message\":\"태스크 분석 중...\"}\n   {\"type\":\"tool_use\",\"name\":\"Read\",\"input\":{...}}\n   {\"type\":\"tool_result\",\"content\":\"...\"}\n\n2. Server: 출력 파싱 → SSE로 전송\n\n3. Frontend: 로그 업데이트, 진행률 표시\n```\n\n### 실행 완료\n\n```\n1. claude-flow 프로세스 종료\n2. Server:\n   a. 최종 상태 저장\n   b. 히스토리에 기록\n   c. SSE 'complete' 이벤트 전송\n3. Frontend:\n   a. 완료 상태 표시\n   b. 태스크 목록 새로고침 (React Query invalidate)\n```\n\n## 파일 구조", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1720", "text": "### 실행 완료\n\n```\n1. claude-flow 프로세스 종료\n2. Server:\n   a. 최종 상태 저장\n   b. 히스토리에 기록\n   c. SSE 'complete' 이벤트 전송\n3. Frontend:\n   a. 완료 상태 표시\n   b. 태스크 목록 새로고침 (React Query invalidate)\n```\n\n## 파일 구조\n\n```\nserver/\n├── claude-flow/\n│   ├── index.ts              # 라우터\n│   ├── executor.ts           # 프로세스 실행 관리\n│   ├── prompt-builder.ts     # OpenSpec → 프롬프트\n│   ├── output-parser.ts      # stream-json 파싱\n│   └── types.ts              # 타입 정의", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1721", "text": "## 파일 구조\n\n```\nserver/\n├── claude-flow/\n│   ├── index.ts              # 라우터\n│   ├── executor.ts           # 프로세스 실행 관리\n│   ├── prompt-builder.ts     # OpenSpec → 프롬프트\n│   ├── output-parser.ts      # stream-json 파싱\n│   └── types.ts              # 타입 정의\n\nsrc/\n├── components/\n│   └── claude-flow/\n│       ├── ExecutionPanel.tsx    # 실행 UI\n│       ├── LogViewer.tsx         # 로그 표시\n│       ├── ProgressIndicator.tsx # 진행률\n│       └── ExecutionHistory.tsx  # 히스토리\n├── hooks/\n│   └── useClaudeFlowExecution.ts # 실행 상태 관리\n└── types/\n    └── claude-flow.ts            # 타입 정의\n```\n\n## 보안 고려사항", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1722", "text": "## 보안 고려사항\n\n1. **프로세스 격리**: spawn된 프로세스는 별도 환경에서 실행\n2. **타임아웃**: 무한 실행 방지 (기본 30분)\n3. **동시 실행 제한**: 프로젝트당 1개 실행만 허용\n4. **로그 민감정보**: API 키 등 마스킹\n\n## 향후 확장\n\n1. **커스텀 에이전트 설정**: 사용자가 에이전트 구성 조정\n2. **워크플로우 템플릿**: 자주 사용하는 실행 패턴 저장\n3. **실행 비교**: 여러 실행 결과 비교 분석\n4. **비용 추적**: API 토큰 사용량 모니터링", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/design.md", "file_name": "design.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1723", "text": "# zyflow + claude-flow 통합\n\n## Summary\n\nzyflow에서 OpenSpec 작업을 claude-flow swarm에 위임하여 멀티 에이전트 기반으로 자동 실행하는 기능을 추가합니다.\n\n## Motivation\n\n### 현재 상황\n- zyflow는 OpenSpec 변경 제안과 태스크를 시각화하고 관리\n- 실제 코드 작업은 사용자가 수동으로 Claude Code CLI를 실행해야 함\n- 복잡한 작업은 단일 Claude 세션으로 처리하기 어려움", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1724", "text": "## Motivation\n\n### 현재 상황\n- zyflow는 OpenSpec 변경 제안과 태스크를 시각화하고 관리\n- 실제 코드 작업은 사용자가 수동으로 Claude Code CLI를 실행해야 함\n- 복잡한 작업은 단일 Claude 세션으로 처리하기 어려움\n\n### 목표\n- zyflow UI에서 \"작업 실행\" 버튼으로 claude-flow swarm 호출\n- OpenSpec 문서(proposal.md, tasks.md, design.md)를 맥락으로 전달\n- 멀티 에이전트가 협업하여 태스크 자동 완료\n- 실시간 진행 상황을 zyflow UI에서 모니터링", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1725", "text": "### 목표\n- zyflow UI에서 \"작업 실행\" 버튼으로 claude-flow swarm 호출\n- OpenSpec 문서(proposal.md, tasks.md, design.md)를 맥락으로 전달\n- 멀티 에이전트가 협업하여 태스크 자동 완료\n- 실시간 진행 상황을 zyflow UI에서 모니터링\n\n### 기대 효과\n- 복잡한 작업의 병렬 처리 (연구, 코딩, 테스트 에이전트 협업)\n- 사용자 개입 최소화\n- 작업 품질 향상 (여러 에이전트의 검토)\n\n## Scope", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1726", "text": "### 기대 효과\n- 복잡한 작업의 병렬 처리 (연구, 코딩, 테스트 에이전트 협업)\n- 사용자 개입 최소화\n- 작업 품질 향상 (여러 에이전트의 검토)\n\n## Scope\n\n### In Scope\n- claude-flow swarm 호출 API 엔드포인트\n- OpenSpec 문서 기반 프롬프트 생성\n- 실행 상태 실시간 스트리밍 (SSE)\n- 실행 결과 로깅 및 히스토리\n- 기본 UI (실행 버튼, 진행 상황 표시)", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1727", "text": "## Scope\n\n### In Scope\n- claude-flow swarm 호출 API 엔드포인트\n- OpenSpec 문서 기반 프롬프트 생성\n- 실행 상태 실시간 스트리밍 (SSE)\n- 실행 결과 로깅 및 히스토리\n- 기본 UI (실행 버튼, 진행 상황 표시)\n\n### Out of Scope\n- claude-flow 커스텀 에이전트 개발\n- 복잡한 워크플로우 편집기\n- 다중 프로젝트 동시 실행\n- 실행 취소/롤백 기능\n\n## Approach\n\n### 아키텍처", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1728", "text": "### Out of Scope\n- claude-flow 커스텀 에이전트 개발\n- 복잡한 워크플로우 편집기\n- 다중 프로젝트 동시 실행\n- 실행 취소/롤백 기능\n\n## Approach\n\n### 아키텍처\n\n```\nzyflow UI (React)\n    │\n    │ POST /api/claude-flow/execute\n    │ { projectPath, changeId, taskId?, mode }\n    ▼\nzyflow Server (Express)\n    │\n    │ 1. OpenSpec 문서 로드\n    │ 2. 프롬프트 조합\n    │ 3. child_process.spawn()\n    ▼\nnpx claude-flow@alpha swarm \"{prompt}\" --claude\n    │\n    │ stream-json 출력\n    ▼\nSSE로 클라이언트에 실시간 전달\n```\n\n### 실행 모드", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1729", "text": "### 실행 모드\n\n1. **Change 전체 실행**: 모든 미완료 태스크 순차 처리\n2. **단일 태스크 실행**: 특정 태스크만 처리\n3. **분석 모드**: 코드 변경 없이 분석만 (--analysis 플래그)\n\n### 프롬프트 구조\n\n```markdown\n## 프로젝트 맥락\n{CLAUDE.md 요약 또는 전체}\n\n## 현재 Change\nID: {changeId}\n제목: {proposal.md의 title}\n\n## 설계 문서\n{design.md 요약 - 있는 경우}\n\n## 현재 태스크\n{tasks.md에서 미완료 태스크}\n\n## 관련 스펙\n{specs/ 디렉토리의 관련 파일 목록}", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1730", "text": "```markdown\n## 프로젝트 맥락\n{CLAUDE.md 요약 또는 전체}\n\n## 현재 Change\nID: {changeId}\n제목: {proposal.md의 title}\n\n## 설계 문서\n{design.md 요약 - 있는 경우}\n\n## 현재 태스크\n{tasks.md에서 미완료 태스크}\n\n## 관련 스펙\n{specs/ 디렉토리의 관련 파일 목록}\n\n## 지시사항\n1. 위 태스크를 순서대로 구현하세요\n2. 각 태스크 완료 후 zyflow_mark_complete를 호출하세요\n3. 테스트가 있다면 반드시 통과시키세요\n```\n\n## Risks & Mitigations", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1731", "text": "## 관련 스펙\n{specs/ 디렉토리의 관련 파일 목록}\n\n## 지시사항\n1. 위 태스크를 순서대로 구현하세요\n2. 각 태스크 완료 후 zyflow_mark_complete를 호출하세요\n3. 테스트가 있다면 반드시 통과시키세요\n```\n\n## Risks & Mitigations\n\n| 리스크 | 완화 방안 |\n|--------|----------|\n| 프로세스 무한 실행 | 타임아웃 설정 (기본 30분) |\n| 잘못된 코드 생성 | --analysis 모드로 먼저 검토 |\n| 리소스 과다 사용 | 동시 실행 제한 (1개) |\n| 맥락 손실 | 핵심 문서 프롬프트에 직접 포함 |\n\n## Success Criteria", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1732", "text": "| 리스크 | 완화 방안 |\n|--------|----------|\n| 프로세스 무한 실행 | 타임아웃 설정 (기본 30분) |\n| 잘못된 코드 생성 | --analysis 모드로 먼저 검토 |\n| 리소스 과다 사용 | 동시 실행 제한 (1개) |\n| 맥락 손실 | 핵심 문서 프롬프트에 직접 포함 |\n\n## Success Criteria\n\n- [ ] zyflow UI에서 claude-flow 실행 버튼 동작\n- [ ] 실행 중 실시간 로그 표시\n- [ ] 태스크 완료 시 자동 체크박스 업데이트\n- [ ] 실행 히스토리 조회 가능", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1733", "text": "# Tasks\n\n## 1. Backend 기반 구축\n\n### 1.1 타입 정의\n- [x] ExecutionRequest, ExecutionStatus 타입 정의\n- [x] LogEntry, ExecutionResult 타입 정의\n- [x] API 응답 타입 정의\n\n### 1.2 프롬프트 빌더\n- [x] OpenSpecPromptBuilder 클래스 구현\n- [x] CLAUDE.md 로드 및 요약 기능\n- [x] proposal.md, design.md 로드\n- [x] tasks.md 파싱 및 미완료 태스크 추출\n- [x] 관련 specs 파일 목록 생성\n- [x] 최종 프롬프트 조합 함수", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1734", "text": "### 1.2 프롬프트 빌더\n- [x] OpenSpecPromptBuilder 클래스 구현\n- [x] CLAUDE.md 로드 및 요약 기능\n- [x] proposal.md, design.md 로드\n- [x] tasks.md 파싱 및 미완료 태스크 추출\n- [x] 관련 specs 파일 목록 생성\n- [x] 최종 프롬프트 조합 함수\n\n### 1.3 실행 관리자\n- [x] ClaudeFlowExecutor 클래스 구현\n- [x] child_process.spawn으로 claude-flow 실행\n- [x] stream-json 출력 파싱\n- [x] 실행 상태 관리 (Map 기반)\n- [x] 타임아웃 처리 (기본 30분)\n- [x] 프로세스 강제 종료 기능", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1735", "text": "### 1.3 실행 관리자\n- [x] ClaudeFlowExecutor 클래스 구현\n- [x] child_process.spawn으로 claude-flow 실행\n- [x] stream-json 출력 파싱\n- [x] 실행 상태 관리 (Map 기반)\n- [x] 타임아웃 처리 (기본 30분)\n- [x] 프로세스 강제 종료 기능\n\n### 1.4 API 엔드포인트\n- [x] POST /api/claude-flow/execute - 실행 시작\n- [x] GET /api/claude-flow/status/:id - 상태 조회\n- [x] GET /api/claude-flow/stream/:id - SSE 스트림\n- [x] POST /api/claude-flow/stop/:id - 실행 중지\n- [x] GET /api/claude-flow/history - 히스토리 조회\n\n## 2. Frontend 구현", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1736", "text": "### 1.4 API 엔드포인트\n- [x] POST /api/claude-flow/execute - 실행 시작\n- [x] GET /api/claude-flow/status/:id - 상태 조회\n- [x] GET /api/claude-flow/stream/:id - SSE 스트림\n- [x] POST /api/claude-flow/stop/:id - 실행 중지\n- [x] GET /api/claude-flow/history - 히스토리 조회\n\n## 2. Frontend 구현\n\n### 2.1 훅 및 상태 관리\n- [x] useClaudeFlowExecution 훅 구현\n- [x] SSE 연결 관리 로직\n- [x] React Query 캐시 무효화 연동", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1737", "text": "## 2. Frontend 구현\n\n### 2.1 훅 및 상태 관리\n- [x] useClaudeFlowExecution 훅 구현\n- [x] SSE 연결 관리 로직\n- [x] React Query 캐시 무효화 연동\n\n### 2.2 UI 컴포넌트\n- [x] ExecutionPanel 메인 컴포넌트\n- [x] 실행 모드 선택 UI (full/single/analysis)\n- [x] LogViewer 컴포넌트 (스크롤, 필터링)\n- [x] ProgressIndicator 컴포넌트\n- [x] 실행/중지 버튼\n\n### 2.3 ChangeDetail 통합\n- [x] ChangeDetail에 ExecutionPanel 추가\n- [x] 실행 상태에 따른 UI 변경\n- [x] 태스크 완료 시 자동 새로고침", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1738", "text": "### 2.3 ChangeDetail 통합\n- [x] ChangeDetail에 ExecutionPanel 추가\n- [x] 실행 상태에 따른 UI 변경\n- [x] 태스크 완료 시 자동 새로고침\n\n## 3. 테스트 및 문서화\n\n### 3.1 테스트\n- [x] 프롬프트 빌더 단위 테스트\n- [x] API 엔드포인트 통합 테스트\n- [x] E2E 테스트 (실행 → 완료 흐름)\n\n### 3.2 문서화\n- [x] README에 claude-flow 통합 섹션 추가\n- [x] API 문서 업데이트", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "1739", "text": "# claude-flow-execution\n\nclaude-flow를 통한 OpenSpec 작업 자동 실행 기능\n\n## ADDED Requirements\n\n### Requirement: 작업 실행 API\n\nzyflow 서버는 claude-flow swarm을 실행하는 API 엔드포인트를 제공해야 합니다(MUST).\n\n#### Scenario: Change 전체 실행 요청", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1740", "text": "## ADDED Requirements\n\n### Requirement: 작업 실행 API\n\nzyflow 서버는 claude-flow swarm을 실행하는 API 엔드포인트를 제공해야 합니다(MUST).\n\n#### Scenario: Change 전체 실행 요청\n\nGiven 사용자가 특정 프로젝트의 Change를 선택한 상태\nWhen POST /api/claude-flow/execute 요청을 보내면\n  ```json\n  {\n    \"projectPath\": \"/path/to/project\",\n    \"changeId\": \"feature-name\",\n    \"mode\": \"full\"\n  }\n  ```\nThen 새로운 실행 ID가 생성되고\nAnd claude-flow swarm 프로세스가 시작되며\nAnd 실행 ID와 초기 상태가 반환됩니다\n  ```json\n  {\n    \"id\": \"exec-uuid\",\n    \"status\": \"running\",\n    \"startedAt\": \"2024-12-18T...\"\n  }\n  ```", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1741", "text": "#### Scenario: 단일 태스크 실행 요청\n\nGiven 사용자가 특정 태스크를 선택한 상태\nWhen POST /api/claude-flow/execute 요청에 taskId를 포함하면\nThen 해당 태스크만 실행 대상으로 프롬프트가 생성됩니다\n\n#### Scenario: 분석 모드 실행\n\nGiven 사용자가 코드 변경 없이 분석만 원하는 경우\nWhen mode를 \"analysis\"로 설정하면\nThen claude-flow에 --analysis 플래그가 전달되어\nAnd 읽기 전용으로 실행됩니다\n\n### Requirement: 실시간 진행 상황 스트리밍\n\n시스템은 실행 중인 작업의 진행 상황을 SSE로 클라이언트에 전달해야 합니다(MUST).\n\n#### Scenario: SSE 스트림 연결", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1742", "text": "### Requirement: 실시간 진행 상황 스트리밍\n\n시스템은 실행 중인 작업의 진행 상황을 SSE로 클라이언트에 전달해야 합니다(MUST).\n\n#### Scenario: SSE 스트림 연결\n\nGiven 실행이 시작된 상태\nWhen GET /api/claude-flow/stream/:id 에 연결하면\nThen SSE 이벤트로 로그가 실시간 전달됩니다\n  ```\n  event: log\n  data: {\"type\":\"assistant\",\"content\":\"태스크 분석 중...\"}\n\n  event: log\n  data: {\"type\":\"tool_use\",\"name\":\"Read\",\"input\":{...}}\n  ```\n\n#### Scenario: 실행 완료 이벤트", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1743", "text": "#### Scenario: SSE 스트림 연결\n\nGiven 실행이 시작된 상태\nWhen GET /api/claude-flow/stream/:id 에 연결하면\nThen SSE 이벤트로 로그가 실시간 전달됩니다\n  ```\n  event: log\n  data: {\"type\":\"assistant\",\"content\":\"태스크 분석 중...\"}\n\n  event: log\n  data: {\"type\":\"tool_use\",\"name\":\"Read\",\"input\":{...}}\n  ```\n\n#### Scenario: 실행 완료 이벤트\n\nGiven 실행이 진행 중인 상태\nWhen claude-flow 프로세스가 종료되면\nThen SSE로 complete 이벤트가 전송되고\nAnd 연결이 종료됩니다\n\n### Requirement: 프롬프트 빌더", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1744", "text": "event: log\n  data: {\"type\":\"tool_use\",\"name\":\"Read\",\"input\":{...}}\n  ```\n\n#### Scenario: 실행 완료 이벤트\n\nGiven 실행이 진행 중인 상태\nWhen claude-flow 프로세스가 종료되면\nThen SSE로 complete 이벤트가 전송되고\nAnd 연결이 종료됩니다\n\n### Requirement: 프롬프트 빌더\n\n시스템은 OpenSpec 문서를 기반으로 claude-flow에 전달할 프롬프트를 생성해야 합니다(MUST).\n\n#### Scenario: 기본 프롬프트 생성", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1745", "text": "### Requirement: 프롬프트 빌더\n\n시스템은 OpenSpec 문서를 기반으로 claude-flow에 전달할 프롬프트를 생성해야 합니다(MUST).\n\n#### Scenario: 기본 프롬프트 생성\n\nGiven Change 디렉토리에 proposal.md와 tasks.md가 있을 때\nWhen 프롬프트 빌더가 실행되면\nThen 다음 섹션이 포함된 프롬프트가 생성됩니다:\n  - 프로젝트 맥락 (CLAUDE.md 기반)\n  - Change 정보 (proposal.md)\n  - 현재 미완료 태스크 목록\n  - 작업 지시사항\n\n#### Scenario: 설계 문서 포함", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1746", "text": "Given Change 디렉토리에 proposal.md와 tasks.md가 있을 때\nWhen 프롬프트 빌더가 실행되면\nThen 다음 섹션이 포함된 프롬프트가 생성됩니다:\n  - 프로젝트 맥락 (CLAUDE.md 기반)\n  - Change 정보 (proposal.md)\n  - 현재 미완료 태스크 목록\n  - 작업 지시사항\n\n#### Scenario: 설계 문서 포함\n\nGiven Change 디렉토리에 design.md가 존재할 때\nWhen 프롬프트가 생성되면\nThen 설계 문서 섹션이 프롬프트에 포함됩니다\n\n### Requirement: 실행 상태 관리\n\n시스템은 실행 중인 작업의 상태를 조회하고 관리할 수 있어야 합니다(MUST).", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1747", "text": "#### Scenario: 설계 문서 포함\n\nGiven Change 디렉토리에 design.md가 존재할 때\nWhen 프롬프트가 생성되면\nThen 설계 문서 섹션이 프롬프트에 포함됩니다\n\n### Requirement: 실행 상태 관리\n\n시스템은 실행 중인 작업의 상태를 조회하고 관리할 수 있어야 합니다(MUST).\n\n#### Scenario: 상태 조회\n\nGiven 실행 ID가 존재할 때\nWhen GET /api/claude-flow/status/:id 요청을 보내면\nThen 현재 실행 상태가 반환됩니다\n  ```json\n  {\n    \"id\": \"exec-uuid\",\n    \"status\": \"running\",\n    \"progress\": 45,\n    \"currentTask\": \"API 엔드포인트 구현\"\n  }\n  ```\n\n#### Scenario: 실행 중지", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1748", "text": "#### Scenario: 상태 조회\n\nGiven 실행 ID가 존재할 때\nWhen GET /api/claude-flow/status/:id 요청을 보내면\nThen 현재 실행 상태가 반환됩니다\n  ```json\n  {\n    \"id\": \"exec-uuid\",\n    \"status\": \"running\",\n    \"progress\": 45,\n    \"currentTask\": \"API 엔드포인트 구현\"\n  }\n  ```\n\n#### Scenario: 실행 중지\n\nGiven 실행이 진행 중일 때\nWhen POST /api/claude-flow/stop/:id 요청을 보내면\nThen claude-flow 프로세스가 종료되고\nAnd 상태가 \"stopped\"로 변경됩니다\n\n#### Scenario: 타임아웃 처리", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1749", "text": "#### Scenario: 실행 중지\n\nGiven 실행이 진행 중일 때\nWhen POST /api/claude-flow/stop/:id 요청을 보내면\nThen claude-flow 프로세스가 종료되고\nAnd 상태가 \"stopped\"로 변경됩니다\n\n#### Scenario: 타임아웃 처리\n\nGiven 실행이 30분 이상 지속될 때\nWhen 타임아웃이 발생하면\nThen 프로세스가 자동 종료되고\nAnd 상태가 \"failed\"로 변경되며\nAnd 타임아웃 에러가 기록됩니다\n\n### Requirement: 실행 히스토리\n\n시스템은 과거 실행 기록을 저장하고 조회할 수 있어야 합니다(SHALL).\n\n#### Scenario: 히스토리 조회", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1750", "text": "### Requirement: 실행 히스토리\n\n시스템은 과거 실행 기록을 저장하고 조회할 수 있어야 합니다(SHALL).\n\n#### Scenario: 히스토리 조회\n\nGiven 이전에 여러 실행이 완료된 상태\nWhen GET /api/claude-flow/history 요청을 보내면\nThen 최근 실행 목록이 반환됩니다\n  ```json\n  {\n    \"executions\": [\n      {\n        \"id\": \"exec-1\",\n        \"changeId\": \"feature-a\",\n        \"status\": \"completed\",\n        \"startedAt\": \"...\",\n        \"completedAt\": \"...\"\n      }\n    ]\n  }\n  ```", "metadata": {"file_path": "openspec/changes/archive/2026-01-04-integrate-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2025-12-17", "last_modified_date": "2025-12-17"}}
{"id": "1751", "text": "# Change: Phase 1 - 미사용 코드 정리\n\n## Summary\n\nZyFlow v0.5.0의 코드베이스에서 실제로 사용되지 않는 코드와 의존성을 제거합니다.\nclaude-flow MCP는 설정만 되어 있고 실제 호출이 0건임이 확인되었습니다.\n\n## Motivation\n\n- py-agents (88MB): TypeScript 코드베이스와 별도 운영, 실제 통합 코드 미발견\n- claude-flow: MCP 도구 호출 0건, CLI 직접 spawning만 사용\n- .claude/agents (90+ 파일): 대부분 미사용, Claude Code 공식 방식과 충돌\n\n## Scope\n\n### 제거 대상\n\n1. **py-agents/** (88MB)\n   - 전체 디렉토리 삭제\n   - package.json 스크립트 정리", "metadata": {"file_path": "openspec/changes/archive/2026-01-05-refactor-phase1-cleanup/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1752", "text": "## Scope\n\n### 제거 대상\n\n1. **py-agents/** (88MB)\n   - 전체 디렉토리 삭제\n   - package.json 스크립트 정리\n\n2. **server/claude-flow/** (2,081 LOC)\n   - executor.ts (787 LOC) - 제거\n   - consensus.ts (568 LOC) - 제거\n   - types.ts (322 LOC) - 간소화\n   - prompt-builder.ts (404 LOC) - 유지\n\n3. **.mcp.json**\n   - claude-flow@alpha 제거\n   - ruv-swarm 제거\n   - flow-nexus 제거\n   - zyflow만 유지\n\n4. **CLAUDE.md** (~100줄 제거)\n   - 미구현 hooks/SPARC/swarm 문서 제거\n\n5. **.claude/agents/** (90+ → 15 파일)\n   - 핵심 agents만 유지\n\n## Expected Impact", "metadata": {"file_path": "openspec/changes/archive/2026-01-05-refactor-phase1-cleanup/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1753", "text": "3. **.mcp.json**\n   - claude-flow@alpha 제거\n   - ruv-swarm 제거\n   - flow-nexus 제거\n   - zyflow만 유지\n\n4. **CLAUDE.md** (~100줄 제거)\n   - 미구현 hooks/SPARC/swarm 문서 제거\n\n5. **.claude/agents/** (90+ → 15 파일)\n   - 핵심 agents만 유지\n\n## Expected Impact\n\n- 88MB 용량 절감\n- ~2,400 LOC 제거\n- 75+ 파일 정리\n- 빌드/시작 시간 단축", "metadata": {"file_path": "openspec/changes/archive/2026-01-05-refactor-phase1-cleanup/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1754", "text": "# Tasks: Phase 1 - 미사용 코드 정리\n\n## 1. py-agents 제거\n\n- [x] py-agents/ 디렉토리 삭제\n- [x] package.json에서 py:server 스크립트 제거\n- [x] package.json에서 py:install 스크립트 제거\n- [x] package.json에서 test:py 스크립트 제거\n- [x] package.json에서 dev:full 스크립트 수정 (py:server 참조 제거)\n\n## 2. claude-flow 코드 정리", "metadata": {"file_path": "openspec/changes/archive/2026-01-05-refactor-phase1-cleanup/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-05"}}
{"id": "1755", "text": "## 1. py-agents 제거\n\n- [x] py-agents/ 디렉토리 삭제\n- [x] package.json에서 py:server 스크립트 제거\n- [x] package.json에서 py:install 스크립트 제거\n- [x] package.json에서 test:py 스크립트 제거\n- [x] package.json에서 dev:full 스크립트 수정 (py:server 참조 제거)\n\n## 2. claude-flow 코드 정리\n\n- [x] server/claude-flow/executor.ts 제거\n- [x] server/claude-flow/consensus.ts 제거\n- [x] server/claude-flow/types.ts 간소화 (prompt-builder 의존성만 유지)\n- [x] server/routes/claude-flow.ts 간소화 (executor 호출 제거)\n- [x] server/index.ts에서 claude-flow 라우터 참조 정리", "metadata": {"file_path": "openspec/changes/archive/2026-01-05-refactor-phase1-cleanup/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-05"}}
{"id": "1756", "text": "## 2. claude-flow 코드 정리\n\n- [x] server/claude-flow/executor.ts 제거\n- [x] server/claude-flow/consensus.ts 제거\n- [x] server/claude-flow/types.ts 간소화 (prompt-builder 의존성만 유지)\n- [x] server/routes/claude-flow.ts 간소화 (executor 호출 제거)\n- [x] server/index.ts에서 claude-flow 라우터 참조 정리\n\n## 3. MCP 설정 정리\n\n- [x] .mcp.json에서 claude-flow@alpha 제거\n- [x] .mcp.json에서 ruv-swarm 제거\n- [x] .mcp.json에서 flow-nexus 제거\n\n## 4. CLAUDE.md 간소화", "metadata": {"file_path": "openspec/changes/archive/2026-01-05-refactor-phase1-cleanup/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-05"}}
{"id": "1757", "text": "## 3. MCP 설정 정리\n\n- [x] .mcp.json에서 claude-flow@alpha 제거\n- [x] .mcp.json에서 ruv-swarm 제거\n- [x] .mcp.json에서 flow-nexus 제거\n\n## 4. CLAUDE.md 간소화\n\n- [x] SPARC Commands 섹션 제거\n- [x] Hooks Integration 섹션 제거\n- [x] Available Agents 54개 목록 제거\n- [x] MCP Tool Categories 제거\n- [x] Agent Coordination Protocol 제거\n- [x] 핵심 정보만 유지하도록 재작성\n\n## 5. .claude/agents 정리", "metadata": {"file_path": "openspec/changes/archive/2026-01-05-refactor-phase1-cleanup/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-05"}}
{"id": "1758", "text": "## 5. .claude/agents 정리\n\n- [x] consensus/ 디렉토리 제거\n- [x] hive-mind/ 디렉토리 제거\n- [x] neural/ 디렉토리 제거\n- [x] swarm/ 디렉토리 제거\n- [x] flow-nexus/ 디렉토리 제거\n- [x] optimization/ 디렉토리 제거\n- [x] sparc/ 디렉토리 제거\n- [x] github/ 대부분 제거 (pr-manager만 유지)\n- [x] core/ 핵심 파일만 유지 (coder, reviewer, tester, planner, researcher)\n\n## 6. 검증", "metadata": {"file_path": "openspec/changes/archive/2026-01-05-refactor-phase1-cleanup/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-05"}}
{"id": "1759", "text": "## 6. 검증\n\n- [x] npm run build 성공 확인\n- [x] npm run test 성공 확인 (기존 테스트 실패 존재 - 리팩토링 무관)\n- [x] npm run dev:all 정상 실행 확인 (포트 3000 사용 중 - 기존 서버 실행 중)\n- [x] MCP 서버 (zyflow) 정상 동작 확인 (build:mcp 성공, tools/list 응답 정상)", "metadata": {"file_path": "openspec/changes/archive/2026-01-05-refactor-phase1-cleanup/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-05"}}
{"id": "1760", "text": "# Change: Phase 2 - DB 중심 데이터 레이어 전환\n\n## Summary\n\ntasks.md 파일과 SQLite DB 간의 양방향 동기화(3,600+ LOC)를 제거하고,\nDB를 유일한 데이터 소스로 전환합니다.\n\n## Motivation\n\n### 현재 문제\n- 파일 편집 → DB sync 지연 → 데이터 불일치\n- DB 변경 → 파일 반영 실패 → 데이터 불일치\n- 충돌 발생 시 복잡한 recovery 로직 필요\n- 원격 프로젝트에서 sync 문제 빈번 발생\n\n### 해결 방안\n- DB를 유일한 데이터 소스로 지정\n- tasks.md는 Export 산출물로 역할 변경 (단방향)\n- 필요 시 수동 Import 기능 제공\n\n## Scope", "metadata": {"file_path": "openspec/changes/archive/2026-01-06-refactor-phase2-data-layer/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1761", "text": "### 해결 방안\n- DB를 유일한 데이터 소스로 지정\n- tasks.md는 Export 산출물로 역할 변경 (단방향)\n- 필요 시 수동 Import 기능 제공\n\n## Scope\n\n### 제거할 Sync 코드 (3,621 LOC)\n\n| 파일 | LOC |\n|------|-----|\n| server/sync.ts | 872 |\n| server/sync-recovery.ts | 1,068 |\n| server/sync-recovery-strategies.ts | 903 |\n| server/sync-failure-detector.ts | 778 |\n\n### 추가할 기능\n\n- Export: DB → tasks.md (수동 실행)\n- Import: tasks.md → DB (수동 실행)\n\n## Architecture", "metadata": {"file_path": "openspec/changes/archive/2026-01-06-refactor-phase2-data-layer/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1762", "text": "## Scope\n\n### 제거할 Sync 코드 (3,621 LOC)\n\n| 파일 | LOC |\n|------|-----|\n| server/sync.ts | 872 |\n| server/sync-recovery.ts | 1,068 |\n| server/sync-recovery-strategies.ts | 903 |\n| server/sync-failure-detector.ts | 778 |\n\n### 추가할 기능\n\n- Export: DB → tasks.md (수동 실행)\n- Import: tasks.md → DB (수동 실행)\n\n## Architecture\n\n### Before\n```\n┌─────────────────┐     ┌─────────────────┐\n│  tasks.md (File)│ ←──→│  SQLite (DB)    │\n└─────────────────┘     └─────────────────┘\n         ↓                       ↓\n   ┌──────────────────────────────┐\n   │      Sync Layer (3,600 LOC) │\n   └──────────────────────────────┘\n```", "metadata": {"file_path": "openspec/changes/archive/2026-01-06-refactor-phase2-data-layer/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1763", "text": "- Export: DB → tasks.md (수동 실행)\n- Import: tasks.md → DB (수동 실행)\n\n## Architecture\n\n### Before\n```\n┌─────────────────┐     ┌─────────────────┐\n│  tasks.md (File)│ ←──→│  SQLite (DB)    │\n└─────────────────┘     └─────────────────┘\n         ↓                       ↓\n   ┌──────────────────────────────┐\n   │      Sync Layer (3,600 LOC) │\n   └──────────────────────────────┘\n```\n\n### After\n```\n┌─────────────────┐\n│  SQLite (DB)    │ ← 유일한 데이터 소스\n└─────────────────┘\n         ↓\n┌──────────────────────────────┐\n│   Export Layer (~200 LOC)    │\n│   - tasks.md 내보내기 (수동) │\n│   - tasks.md 가져오기 (수동) │\n└──────────────────────────────┘\n```", "metadata": {"file_path": "openspec/changes/archive/2026-01-06-refactor-phase2-data-layer/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1764", "text": "### After\n```\n┌─────────────────┐\n│  SQLite (DB)    │ ← 유일한 데이터 소스\n└─────────────────┘\n         ↓\n┌──────────────────────────────┐\n│   Export Layer (~200 LOC)    │\n│   - tasks.md 내보내기 (수동) │\n│   - tasks.md 가져오기 (수동) │\n└──────────────────────────────┘\n```\n\n## Expected Impact\n\n- 3,621 LOC 제거\n- 데이터 일관성 보장\n- 버그 발생 지점 대폭 감소\n- 원격 프로젝트 안정성 향상", "metadata": {"file_path": "openspec/changes/archive/2026-01-06-refactor-phase2-data-layer/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1765", "text": "# Tasks: Phase 2 - DB 중심 데이터 레이어 전환\n\n## 1. Sync 코드 제거 ✅\n\n- [x] server/sync.ts 삭제\n- [x] server/sync-recovery.ts 삭제\n- [x] server/sync-recovery-strategies.ts 삭제\n- [x] server/sync-failure-detector.ts 삭제\n- [x] server/index.ts에서 sync 관련 import 제거\n\n## 2. File Watcher 제거 → 자동 동기화로 변경 ✅\n\n- [x] chokidar 기반 file watcher 코드 업데이트\n- [x] tasks.md 파일 변경 감지 시 DB 동기화\n- [x] server/index.ts에서 watcher 초기화\n- [x] WebSocket으로 클라이언트 알림\n\n## 3. API 수정 - DB 직접 접근 ✅", "metadata": {"file_path": "openspec/changes/archive/2026-01-06-refactor-phase2-data-layer/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-05", "last_modified_date": "2026-01-05"}}
{"id": "1766", "text": "## 2. File Watcher 제거 → 자동 동기화로 변경 ✅\n\n- [x] chokidar 기반 file watcher 코드 업데이트\n- [x] tasks.md 파일 변경 감지 시 DB 동기화\n- [x] server/index.ts에서 watcher 초기화\n- [x] WebSocket으로 클라이언트 알림\n\n## 3. API 수정 - DB 직접 접근 ✅\n\n- [x] server/routes/flow.ts: syncChangeTasksFromFile 함수 구현\n- [x] server/sync-tasks.ts 모듈 생성\n- [x] 원격 프로젝트 정상 동작 확인\n- [x] WebSocket 이벤트 정상 동작 확인\n\n## 4. 검증 완료 ✅", "metadata": {"file_path": "openspec/changes/archive/2026-01-06-refactor-phase2-data-layer/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-05", "last_modified_date": "2026-01-05"}}
{"id": "1767", "text": "## 3. API 수정 - DB 직접 접근 ✅\n\n- [x] server/routes/flow.ts: syncChangeTasksFromFile 함수 구현\n- [x] server/sync-tasks.ts 모듈 생성\n- [x] 원격 프로젝트 정상 동작 확인\n- [x] WebSocket 이벤트 정상 동작 확인\n\n## 4. 검증 완료 ✅\n\n- [x] API 서버 정상 동작 (http://localhost:3000)\n- [x] WebSocket 연결 정상 (ws://localhost:3000/ws)\n- [x] GET /api/flow/changes 정상 응답\n- [x] GET /api/tasks 정상 응답\n- [x] GET /api/projects 정상 응답\n- [x] Watcher 자동 동기화 테스트 완료\n\n## 결과", "metadata": {"file_path": "openspec/changes/archive/2026-01-06-refactor-phase2-data-layer/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-05", "last_modified_date": "2026-01-05"}}
{"id": "1768", "text": "## 4. 검증 완료 ✅\n\n- [x] API 서버 정상 동작 (http://localhost:3000)\n- [x] WebSocket 연결 정상 (ws://localhost:3000/ws)\n- [x] GET /api/flow/changes 정상 응답\n- [x] GET /api/tasks 정상 응답\n- [x] GET /api/projects 정상 응답\n- [x] Watcher 자동 동기화 테스트 완료\n\n## 결과\n\n- **제거된 코드**: ~3,600 LOC\n- **아키텍처**: DB를 유일한 데이터 소스로 사용\n- **동기화**: File watcher로 자동 동기화\n\ntest\n<!-- test Tue Jan  6 06:59:09 KST 2026 -->\n<!-- watcher test 1767657337 -->", "metadata": {"file_path": "openspec/changes/archive/2026-01-06-refactor-phase2-data-layer/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-05", "last_modified_date": "2026-01-05"}}
{"id": "1769", "text": "# Change: Phase 3 - 기능 간소화\n\n## Summary\n\n복잡하고 저사용 기능들을 간소화하거나 분리합니다:\n- Multi-AI Provider → Claude 전용\n- Remote SSH → 별도 플러그인 분리\n- Alert System → 핵심만 유지\n- Post-Task Agent → 제거 (Claude SDK 대체)\n\n## Motivation\n\n### Multi-AI Provider (7개 → 1개)\n- ZyFlow는 Claude Code 연동이 핵심 가치\n- 7개 프로바이더 지원은 복잡도만 증가\n- Consensus 투표 메커니즘은 과도한 복잡성", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1770", "text": "## Motivation\n\n### Multi-AI Provider (7개 → 1개)\n- ZyFlow는 Claude Code 연동이 핵심 가치\n- 7개 프로바이더 지원은 복잡도만 증가\n- Consensus 투표 메커니즘은 과도한 복잡성\n\n### Remote SSH\n- v0.5.0에서 추가된 니치 기능\n- 핵심 사용자에게는 필수 아님\n- 별도 플러그인으로 분리하여 선택적 사용\n\n### Alert System (5,000+ LOC)\n- 핵심 워크플로우와 연결 약함\n- GitHub 자체 Notifications로 대체 가능\n- 간단한 읽기 전용 알림만 유지", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1771", "text": "### Remote SSH\n- v0.5.0에서 추가된 니치 기능\n- 핵심 사용자에게는 필수 아님\n- 별도 플러그인으로 분리하여 선택적 사용\n\n### Alert System (5,000+ LOC)\n- 핵심 워크플로우와 연결 약함\n- GitHub 자체 Notifications로 대체 가능\n- 간단한 읽기 전용 알림만 유지\n\n### Post-Task Agent (15,000+ LOC)\n- 20개 자동화 작업 중 실제 사용 소수\n- quarantine-manager 단독 10,751 LOC\n- Claude SDK Hooks로 대체 가능\n\n## Scope\n\n### 3.1 Multi-AI → Claude 전용\n- server/ai/providers/ 에서 claude.ts만 유지\n- consensus.ts 제거\n- ConsensusUI 컴포넌트 제거", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1772", "text": "### Post-Task Agent (15,000+ LOC)\n- 20개 자동화 작업 중 실제 사용 소수\n- quarantine-manager 단독 10,751 LOC\n- Claude SDK Hooks로 대체 가능\n\n## Scope\n\n### 3.1 Multi-AI → Claude 전용\n- server/ai/providers/ 에서 claude.ts만 유지\n- consensus.ts 제거\n- ConsensusUI 컴포넌트 제거\n\n### 3.2 Remote SSH → 플러그인 분리\n- server/remote/ → zyflow-remote-plugin/\n- server/routes/remote.ts → 플러그인\n- src/components/remote/ → 플러그인\n\n### 3.3 Alert System 간소화\n- GitHub Actions 실패 알림만 유지 (~500 LOC)\n- alertProcessor.ts (1,902 LOC) 제거\n- Webhook, 패턴 분석, Auto-fix 제거", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1773", "text": "### 3.2 Remote SSH → 플러그인 분리\n- server/remote/ → zyflow-remote-plugin/\n- server/routes/remote.ts → 플러그인\n- src/components/remote/ → 플러그인\n\n### 3.3 Alert System 간소화\n- GitHub Actions 실패 알림만 유지 (~500 LOC)\n- alertProcessor.ts (1,902 LOC) 제거\n- Webhook, 패턴 분석, Auto-fix 제거\n\n### 3.4 Post-Task Agent 제거\n- mcp-server/tasks/ 전체 제거\n- quarantine-system 제거\n\n## Expected Impact\n\n- ~20,000 LOC 제거/분리\n- 핵심 기능에 집중\n- 유지보수 부담 대폭 감소", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1774", "text": "# Tasks: Phase 3 - 기능 간소화\n\n## 1. Multi-AI Provider → Claude 전용\n\n- [x] server/ai/providers/openai.ts 제거 (이전 세션에서 완료)\n- [x] server/ai/providers/gemini.ts 제거 (이전 세션에서 완료)\n- [x] server/ai/providers/qwen.ts 제거 (이전 세션에서 완료)\n- [x] server/ai/providers/kilo.ts 제거 (이전 세션에서 완료)\n- [x] server/ai/providers/opencode.ts 제거 (이전 세션에서 완료)\n- [x] server/ai/providers/index.ts 수정 (claude만 export) (이전 세션에서 완료)\n- [x] src/components/integrations/ConsensusUI.tsx 제거 (이전 세션에서 완료)\n- [x] src/hooks/useAI.", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1775", "text": "ts 제거 (이전 세션에서 완료)\n- [x] server/ai/providers/opencode.ts 제거 (이전 세션에서 완료)\n- [x] server/ai/providers/index.ts 수정 (claude만 export) (이전 세션에서 완료)\n- [x] src/components/integrations/ConsensusUI.tsx 제거 (이전 세션에서 완료)\n- [x] src/hooks/useAI.ts - 핵심 기능으로 유지\n- [x] src/hooks/useSwarm.ts - 핵심 기능으로 유지\n- [x] 설정 UI에서 Provider 선택 제거 (이전 세션에서 완료)\n\n## 2. Remote SSH → 플러그인 분리", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1776", "text": "tsx 제거 (이전 세션에서 완료)\n- [x] src/hooks/useAI.ts - 핵심 기능으로 유지\n- [x] src/hooks/useSwarm.ts - 핵심 기능으로 유지\n- [x] 설정 UI에서 Provider 선택 제거 (이전 세션에서 완료)\n\n## 2. Remote SSH → 플러그인 분리\n\n### 2.1 플러그인 패키지 생성\n- [x] packages/zyflow-remote-plugin/ 디렉토리 생성\n- [x] 플러그인 package.json 작성\n- [x] 플러그인 tsconfig.json 작성", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1777", "text": "### 2.2 코드 이동\n- [x] server/remote/ssh-manager.ts → 플러그인으로 이동\n- [x] server/remote/ssh-config-parser.ts → 플러그인으로 이동\n- [x] server/remote/remote-config.ts → 플러그인으로 이동\n- [x] server/remote/types.ts → 플러그인으로 이동\n- [x] server/routes/remote.ts → 플러그인으로 이동\n- [x] 플러그인 index.ts 생성 (전체 API export)\n- [x] src/components/remote/ → 프론트엔드 컴포넌트 유지 (API 통신)", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1778", "text": "### 2.3 메인 코드베이스 정리\n- [x] server/remote/ 디렉토리 제거\n- [x] server/routes/remote.ts 제거\n- [x] server/app.ts에서 remote 라우터 조건부 로딩 (플러그인 동적 import)\n- [x] 원격 프로젝트 접근 시 플러그인 체크 추가\n\n## 3. Alert System 간소화\n\n### 3.1 제거한 코드\n- [x] server/services/alertProcessor.ts 제거 (1,902 LOC 삭제)\n- [x] server/services/githubActionsPoller.ts 간소화 (processAlert 제거)\n- [x] Webhook 수신 로직 제거\n- [x] Alert 패턴 분석 로직 제거\n- [x] Auto-fix 기능 제거\n- [x] Risk 평가 로직 제거", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1779", "text": "## 3. Alert System 간소화\n\n### 3.1 제거한 코드\n- [x] server/services/alertProcessor.ts 제거 (1,902 LOC 삭제)\n- [x] server/services/githubActionsPoller.ts 간소화 (processAlert 제거)\n- [x] Webhook 수신 로직 제거\n- [x] Alert 패턴 분석 로직 제거\n- [x] Auto-fix 기능 제거\n- [x] Risk 평가 로직 제거\n\n### 3.2 간소화한 코드\n- [x] server/routes/alerts.ts 간소화 (~1,584 → ~512 LOC, 읽기 전용)\n- [x] src/hooks/useAlerts.ts - 기존 유지 (기본 기능에 필요)\n- [x] src/components/alerts/ - 기존 유지 (기본 기능에 필요)", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1780", "text": "### 3.2 간소화한 코드\n- [x] server/routes/alerts.ts 간소화 (~1,584 → ~512 LOC, 읽기 전용)\n- [x] src/hooks/useAlerts.ts - 기존 유지 (기본 기능에 필요)\n- [x] src/components/alerts/ - 기존 유지 (기본 기능에 필요)\n\n### 3.3 유지할 기능\n- [x] GitHub Actions 실패 알림 조회\n- [x] 프로젝트별 Alert 필터링\n- [x] Alert 목록 표시\n\n## 4. Post-Task Agent 제거", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1781", "text": "### 3.3 유지할 기능\n- [x] GitHub Actions 실패 알림 조회\n- [x] 프로젝트별 Alert 필터링\n- [x] Alert 목록 표시\n\n## 4. Post-Task Agent 제거\n\n- [x] mcp-server/tasks/ 전체 제거 (17개 파일)\n- [x] mcp-server/post-task-tools.ts 제거\n- [x] mcp-server/index.ts에서 post-task 관련 import 제거\n- [x] mcp-server/index.ts에서 post-task 관련 tool 정의 제거\n- [x] mcp-server/index.ts에서 post-task 관련 case 핸들러 제거\n\n## 5. 검증", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1782", "text": "- [x] mcp-server/tasks/ 전체 제거 (17개 파일)\n- [x] mcp-server/post-task-tools.ts 제거\n- [x] mcp-server/index.ts에서 post-task 관련 import 제거\n- [x] mcp-server/index.ts에서 post-task 관련 tool 정의 제거\n- [x] mcp-server/index.ts에서 post-task 관련 case 핸들러 제거\n\n## 5. 검증\n\n- [x] npm run build 성공 확인\n- [x] npm run test 실행 확인 (기존 테스트 일부 실패 - 리팩토링과 무관)\n- [x] 서버 실행 정상 동작 확인 (/api/health, /api/alerts)\n- [x] Alert 기본 기능 동작 확인 (목록 조회 정상)\n- [x] Remote SSH 플러그인 분리 확인 (플러그인 미설치 시 graceful 처리)\n\n---", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1783", "text": "- [x] npm run build 성공 확인\n- [x] npm run test 실행 확인 (기존 테스트 일부 실패 - 리팩토링과 무관)\n- [x] 서버 실행 정상 동작 확인 (/api/health, /api/alerts)\n- [x] Alert 기본 기능 동작 확인 (목록 조회 정상)\n- [x] Remote SSH 플러그인 분리 확인 (플러그인 미설치 시 graceful 처리)\n\n---\n\n## 완료 요약\n\n### 제거된 코드량\n- **Post-Task Agent**: ~15,000 LOC (17개 파일 + post-task-tools.ts)\n- **Alert Processor**: ~1,900 LOC\n- **Alerts Router 간소화**: ~1,000 LOC 감소\n- **Remote SSH 분리**: server/remote/ 디렉토리 → 플러그인으로 이동", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1784", "text": "---\n\n## 완료 요약\n\n### 제거된 코드량\n- **Post-Task Agent**: ~15,000 LOC (17개 파일 + post-task-tools.ts)\n- **Alert Processor**: ~1,900 LOC\n- **Alerts Router 간소화**: ~1,000 LOC 감소\n- **Remote SSH 분리**: server/remote/ 디렉토리 → 플러그인으로 이동\n\n### 새로 생성된 파일\n- `packages/zyflow-remote-plugin/package.json`\n- `packages/zyflow-remote-plugin/tsconfig.json`\n- `packages/zyflow-remote-plugin/src/index.ts`\n- `packages/zyflow-remote-plugin/src/types.ts`\n- `packages/zyflow-remote-plugin/src/ssh-manager.ts`\n- `packages/zyflow-remote-plugin/src/ssh-config-parser.ts`\n- `packages/zyflow-remote-plugin/src/remote-config.ts`\n- `packages/zyflow-remote-plugin/src/router.ts`", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1785", "text": "### 새로 생성된 파일\n- `packages/zyflow-remote-plugin/package.json`\n- `packages/zyflow-remote-plugin/tsconfig.json`\n- `packages/zyflow-remote-plugin/src/index.ts`\n- `packages/zyflow-remote-plugin/src/types.ts`\n- `packages/zyflow-remote-plugin/src/ssh-manager.ts`\n- `packages/zyflow-remote-plugin/src/ssh-config-parser.ts`\n- `packages/zyflow-remote-plugin/src/remote-config.ts`\n- `packages/zyflow-remote-plugin/src/router.ts`\n\n### 주요 변경사항\n1. **Remote 기능**: 플러그인으로 분리, 선택적 설치 가능\n2. **Alert 시스템**: 읽기 전용으로 간소화, 복잡한 처리 로직 제거\n3. **Post-Task Agent**: MCP 서버에서 완전 제거\n4. **Multi-AI Provider**: Claude 전용 (이전 세션에서 완료)", "metadata": {"file_path": "openspec/changes/archive/2026-01-07-refactor-phase3-simplify/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1786", "text": "# Change: 문서 뷰어 및 RAG 기반 지식 베이스 구축\n\n## Summary\n\nZyFlow 내에서 프로젝트의 모든 문서(/docs, README, OpenSpec)를 통합 열람하고, LLM 기반 RAG(Retrieval-Augmented Generation) 기술을 활용하여 자연어 질의응답이 가능한 \"지식 베이스(Knowledge Base)\" 시스템을 구축합니다.\n\n## Motivation", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-feat-docs-rag-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1787", "text": "## Motivation\n\n- **파편화된 정보**: 프로젝트 문서(`docs/`), 기획서(`openspec/`), 변경 이력(`CHANGELOG`)이 흩어져 있어 전체 맥락 파악이 어렵습니다.\n- **단순 검색의 한계**: 기존의 키워드 매칭 검색(`grep`)으로는 \"이 프로젝트의 인증 구조가 어떻게 돼?\"와 같은 추상적인 질문에 답을 얻기 힘듭니다.\n- **컨텍스트 스위칭 비용**: 개발 도중 문서를 확인하기 위해 IDE나 웹 브라우저, 파일 탐색기를 오가는 비용을 줄여야 합니다.\n\n## Proposed Solution", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-feat-docs-rag-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1788", "text": "## Proposed Solution\n\n### 1. Docs 통합 UI 신설\n\n- **네비게이션**: ZyFlow 사이드바에 `Docs` 탭 추가.\n- **트리 뷰**: `/docs` 디렉토리 구조와 루트 마크다운 파일, `/openspec` 스펙들을 통합 트리로 제공.\n- **마크다운 뷰어**: \n  - GFM(GitHub Flavored Markdown) 지원.\n  - **Mermaid 차트** 렌더링 지원 (아키텍처, 플로우차트).\n  - Syntax Highlighting.\n  - 내부 링크(Wiki style) 네비게이션 지원.\n\n### 2. 검색 엔진 고도화", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-feat-docs-rag-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1789", "text": "### 2. 검색 엔진 고도화\n\n- **통합 인덱싱**: `/docs`, `openspec/**/spec.md`, `openspec/**/proposal.md` 등 모든 마크다운 자원을 검색 대상으로 합니다.\n- **하이브리드 검색**:\n  - **키워드 검색**: 정확한 파일명이나 용어 찾기 (기존 구현 활용).\n  - **시맨틱 검색 (RAG)**: 문장이나 의도 기반 검색 (\"DB 스키마 변경 사항 보여줘\").\n\n### 3. RAG (AI 지식 베이스) 아키텍처", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-feat-docs-rag-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1790", "text": "### 3. RAG (AI 지식 베이스) 아키텍처\n\n- **벡터 저장소**: 로컬 환경 친화적인 임베딩 DB 도입 (예: `LanceDB` 또는 SQLite 기반 `sqlite-vss`).\n- **임베딩 파이프라인**: \n  - 파일 변경 감지(Watcher) → 텍스트 청킹(Chunking) → 임베딩 생성 → 벡터 DB 저장.\n- **AI 답변 생성**:\n  - 사용자 질문(채팅) → 관련 청크 검색(Retrieve) → LLM 컨텍스트 주입 → 답변 생성.\n  - \"AI에게 질문하기\" Floating Action Button을 문서 뷰어에 배치.\n\n## Implementation Details", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-feat-docs-rag-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1791", "text": "## Implementation Details\n\n### Phase 1: 기본 뷰어 구현\n- `routes/docs.ts` API를 활용하여 UI 트리 및 뷰어 개발.\n- 기존의 단순 검색 바 연동.\n- Mermaid 및 Code Block 렌더링 컴포넌트 추가.\n\n### Phase 2: OpenSpec 통합\n- OpenSpec의 `spec.md`, `proposal.md` 파일들도 Docs 섹션에서 탐색 가능하도록 가상 디렉토리 구조 매핑.\n- 문서 간 상호 참조 링크(`[Spec](...)`) 지원.", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-feat-docs-rag-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1792", "text": "### Phase 2: OpenSpec 통합\n- OpenSpec의 `spec.md`, `proposal.md` 파일들도 Docs 섹션에서 탐색 가능하도록 가상 디렉토리 구조 매핑.\n- 문서 간 상호 참조 링크(`[Spec](...)`) 지원.\n\n### Phase 3: RAG 파이프라인 구축 (Backend)\n- 문서 파싱 및 임베딩 로직 구현. (OpenAI Embeddings 또는 Local Embeddings)\n- 질문 처리를 위한 전용 REST API 엔드포인트 (`POST /api/docs/ask`).\n\n## Design Decisions", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-feat-docs-rag-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1793", "text": "## Design Decisions\n\n| 항목 | 결정 | 이유 |\n|------|------|------|\n| **벡터 DB** | `LanceDB` (파일 기반) | 별도 서버 설치 없이 로컬 파일시스템에 저장 가능하며 빠름. |\n| **Viewer** | `react-markdown` + `rehype` | 유연한 플러그인 생태계(Mermaid 등) 활용 용이. |\n| **문서 범위** | `/docs` + `/openspec` | 기술 문서와 기획 문서를 한 곳에서 봐야 함. |\n\n## Required Specs\n\n- [Docs Viewer UI Spec](specs/docs-viewer/spec.md)\n- [RAG Engine Spec](specs/rag-engine/spec.md)", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-feat-docs-rag-system/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1794", "text": "# Task: 문서 및 RAG 시스템 구현\n\n## Phase 1: Docs Viewer UI\n\n- [x] `DocsLayout` 및 사이드바 라우팅 추가\n- [x] 문서 트리 (`DocTree`) 컴포넌트 구현\n- [x] 마크다운 뷰어 (`MarkdownViewer`) 구현\n    - [x] GFM 스타일링 적용\n    - [x] `mermaid` 다이어그램 렌더링 지원\n    - [x] 코드 블록 Syntax Highlighting\n- [x] `routes/docs.ts` API 연동 (목록 불러오기, 내용 읽기)\n\n## Phase 2: OpenSpec 통합 및 검색 개선", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-feat-docs-rag-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-07"}}
{"id": "1795", "text": "## Phase 2: OpenSpec 통합 및 검색 개선\n\n- [x] OpenSpec 파일들을 문서 트리에 가상 병합하는 로직 추가\n- [x] 문서 편집 기능 추가 (`MarkdownEditor` 구현)\n- [x] 문서 내 내부 링크 핸들링 (클릭 시 해당 문서로 이동)\n- [x] 검색 UI 개선 (모달 형태의 `Cmd+K` 인터페이스)\n\n## Phase 3: RAG 백엔드 구축", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-feat-docs-rag-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-07"}}
{"id": "1796", "text": "## Phase 3: RAG 백엔드 구축\n\n- [x] 벡터 DB(`LanceDB`) 설치 및 설정\n- [x] 문서 임베딩 생성기 구현 (`Transformers.js` 사용)\n- [x] 파일 변경 감지 시 임베딩 업데이트 로직 (`watcher`) - 구현 완료\n- [x] `POST /api/docs/ask` API 구현 (질문 -> 검색 -> 컨텍스트 반환)\n- [x] `POST /api/docs/index` API 구현 (문서 인덱싱)\n- [x] `GET /api/docs/index/stats` API 구현 (인덱스 통계)\n- [x] `POST /api/docs/chat` API 구현 (스트리밍 채팅)\n\n## Phase 4: RAG UI 연동", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-feat-docs-rag-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-07"}}
{"id": "1797", "text": "## Phase 4: RAG UI 연동\n\n- [x] `RagChat` 컴포넌트 구현 (채팅 인터페이스)\n- [x] DocsViewer에 채팅 패널 통합\n- [x] 인덱싱 버튼 및 통계 표시\n- [x] 답변 스트리밍 처리 및 마크다운 렌더링\n- [x] 출처(Reference) 문서 표시 기능", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-feat-docs-rag-system/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-07"}}
{"id": "1798", "text": "# Tasks: Phase 2 - DB 중심 데이터 레이어 전환\n\n## 1. Sync 코드 제거 ✅\n\n- [x] server/sync.ts 삭제\n- [x] server/sync-recovery.ts 삭제\n- [x] server/sync-recovery-strategies.ts 삭제\n- [x] server/sync-failure-detector.ts 삭제\n- [x] server/index.ts에서 sync 관련 import 제거\n\n## 2. File Watcher → 자동 동기화 ✅\n\n- [x] chokidar 기반 file watcher 업데이트\n- [x] tasks.md 파일 변경 감지 시 DB 동기화\n- [x] server/index.ts에서 watcher 초기화\n- [x] WebSocket으로 클라이언트 알림\n\n## 3. API 수정 - DB 직접 접근 ✅", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase2-data-layer/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1799", "text": "## 2. File Watcher → 자동 동기화 ✅\n\n- [x] chokidar 기반 file watcher 업데이트\n- [x] tasks.md 파일 변경 감지 시 DB 동기화\n- [x] server/index.ts에서 watcher 초기화\n- [x] WebSocket으로 클라이언트 알림\n\n## 3. API 수정 - DB 직접 접근 ✅\n\n- [x] server/sync-tasks.ts 모듈 생성\n- [x] syncChangeTasksFromFile 함수 구현\n- [x] syncChangeTasksForProject 함수 구현\n- [x] flow.ts에서 sync-tasks import\n\n## 4. Remote Plugin 분리 대응 ✅", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase2-data-layer/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1800", "text": "## 3. API 수정 - DB 직접 접근 ✅\n\n- [x] server/sync-tasks.ts 모듈 생성\n- [x] syncChangeTasksFromFile 함수 구현\n- [x] syncChangeTasksForProject 함수 구현\n- [x] flow.ts에서 sync-tasks import\n\n## 4. Remote Plugin 분리 대응 ✅\n\n- [x] projects.ts - remote import를 optional dynamic import로 변경\n- [x] changes.ts - remote import를 optional dynamic import로 변경\n- [x] flow.ts - remote import를 optional dynamic import로 변경\n- [x] @zyflow/remote-plugin 미설치 시에도 로컬 프로젝트 정상 동작\n\n## 5. 검증 완료 ✅", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase2-data-layer/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1801", "text": "## 4. Remote Plugin 분리 대응 ✅\n\n- [x] projects.ts - remote import를 optional dynamic import로 변경\n- [x] changes.ts - remote import를 optional dynamic import로 변경\n- [x] flow.ts - remote import를 optional dynamic import로 변경\n- [x] @zyflow/remote-plugin 미설치 시에도 로컬 프로젝트 정상 동작\n\n## 5. 검증 완료 ✅\n\n- [x] API 서버 정상 동작 (http://localhost:3000)\n- [x] /api/projects/all-data 정상 응답\n- [x] /api/health 정상 응답\n- [x] WebSocket 서버 초기화\n- [x] File Watcher 자동 동기화 동작 확인", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase2-data-layer/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-06", "last_modified_date": "2026-01-06"}}
{"id": "1802", "text": "# Change: Phase 4 - Claude SDK 정렬\n\n## Summary\n\nZyFlow의 커스텀 구현을 Claude Code 공식 기능(Skills, Hooks, Sessions)으로 전환합니다.\n\n## Motivation\n\n### 현재 문제\n1. **.claude/agents/** 90+ 파일이 Claude Code 공식 방식과 충돌\n2. 커스텀 hooks/sessions는 Claude Code 업데이트 시 호환성 문제 가능\n3. 문서화되지 않은 커스텀 구현은 유지보수 어려움\n\n### Claude Code 공식 기능\n- **Skills (SKILL.md)**: 재사용 가능한 기능 확장\n- **Hooks**: PreToolUse, PostToolUse, Stop, SessionStart\n- **Sessions**: resume, fork 지원\n- **MCP Servers**: 외부 도구 연동\n\n## Scope", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1803", "text": "### Claude Code 공식 기능\n- **Skills (SKILL.md)**: 재사용 가능한 기능 확장\n- **Hooks**: PreToolUse, PostToolUse, Stop, SessionStart\n- **Sessions**: resume, fork 지원\n- **MCP Servers**: 외부 도구 연동\n\n## Scope\n\n### 4.1 .claude/ 디렉토리 정리\n\n**현재 (90+ 파일):**\n```\n.claude/\n├── agents/           # 90+ 파일\n│   ├── consensus/\n│   ├── core/\n│   ├── flow-nexus/\n│   ├── hive-mind/\n│   └── ...\n├── commands/\n├── plans/\n└── skills/\n```", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1804", "text": "## Scope\n\n### 4.1 .claude/ 디렉토리 정리\n\n**현재 (90+ 파일):**\n```\n.claude/\n├── agents/           # 90+ 파일\n│   ├── consensus/\n│   ├── core/\n│   ├── flow-nexus/\n│   ├── hive-mind/\n│   └── ...\n├── commands/\n├── plans/\n└── skills/\n```\n\n**변경 후 (15-20 파일):**\n```\n.claude/\n├── skills/           # 10-15 Skills\n│   ├── openspec/SKILL.md\n│   ├── code-review/SKILL.md\n│   └── git-workflow/SKILL.md\n├── agents/           # 핵심 5개만\n├── commands/         # 유지\n└── plans/            # 유지\n```", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1805", "text": "**변경 후 (15-20 파일):**\n```\n.claude/\n├── skills/           # 10-15 Skills\n│   ├── openspec/SKILL.md\n│   ├── code-review/SKILL.md\n│   └── git-workflow/SKILL.md\n├── agents/           # 핵심 5개만\n├── commands/         # 유지\n└── plans/            # 유지\n```\n\n### 4.2 Skills 생성\n- openspec: OpenSpec 워크플로우\n- code-review: 코드 리뷰\n- testing: 테스트 작성\n- git-workflow: Git 브랜치 관리\n\n### 4.3 SDK Hooks 활용\n- PreToolUse: 파일 편집 전 검증\n- PostToolUse: 편집 후 자동 포맷팅\n- SessionStart: 프로젝트 컨텍스트 로딩", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1806", "text": "### 4.2 Skills 생성\n- openspec: OpenSpec 워크플로우\n- code-review: 코드 리뷰\n- testing: 테스트 작성\n- git-workflow: Git 브랜치 관리\n\n### 4.3 SDK Hooks 활용\n- PreToolUse: 파일 편집 전 검증\n- PostToolUse: 편집 후 자동 포맷팅\n- SessionStart: 프로젝트 컨텍스트 로딩\n\n### 4.4 문서 정리\n- CLAUDE.md 간소화\n- 핵심 정보만 유지\n\n## Expected Impact\n\n- 90+ 파일 → 15-20 파일\n- Claude Code 공식 기능 활용\n- 업데이트 호환성 보장\n- 문서화된 표준 방식 사용", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1807", "text": "# Tasks: Phase 4 - Claude SDK 정렬\n\n**상태**: ✅ 완료  \n**완료일**: 2026-01-08\n\n## 1. .claude/agents 정리\n\n### 1.1 디렉토리 제거\n- [x] .claude/agents/consensus/ 제거 (이미 없음)\n- [x] .claude/agents/hive-mind/ 제거 (이미 없음)\n- [x] .claude/agents/neural/ 제거 (이미 없음)\n- [x] .claude/agents/swarm/ 제거 (이미 없음)\n- [x] .claude/agents/flow-nexus/ 제거 (이미 없음)\n- [x] .claude/agents/optimization/ 제거 (이미 없음)\n- [x] .claude/agents/training/ 제거 (이미 없음)", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-08"}}
{"id": "1808", "text": "### 1.2 핵심 agents 유지\n- [x] .claude/agents/core/coder.md 유지\n- [x] .claude/agents/core/reviewer.md 유지\n- [x] .claude/agents/core/tester.md 유지\n- [x] .claude/agents/core/planner.md 유지\n- [x] .claude/agents/core/researcher.md 유지\n\n## 2. Skills 생성\n\n### 2.1 OpenSpec Skill\n- [x] .claude/skills/openspec/SKILL.md 작성\n- [x] proposal 작성 지침 포함\n- [x] tasks.md 관리 지침 포함\n- [x] 7단계 파이프라인 워크플로우 포함", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-08"}}
{"id": "1809", "text": "## 2. Skills 생성\n\n### 2.1 OpenSpec Skill\n- [x] .claude/skills/openspec/SKILL.md 작성\n- [x] proposal 작성 지침 포함\n- [x] tasks.md 관리 지침 포함\n- [x] 7단계 파이프라인 워크플로우 포함\n\n### 2.2 Code Review Skill\n- [x] .claude/skills/code-review/SKILL.md 작성\n- [x] 코드 품질 체크리스트 포함\n- [x] 보안 검토 항목 포함\n\n### 2.3 Testing Skill\n- [x] .claude/skills/testing/SKILL.md 작성\n- [x] 테스트 작성 가이드라인 포함\n- [x] 커버리지 기준 포함", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-08"}}
{"id": "1810", "text": "### 2.2 Code Review Skill\n- [x] .claude/skills/code-review/SKILL.md 작성\n- [x] 코드 품질 체크리스트 포함\n- [x] 보안 검토 항목 포함\n\n### 2.3 Testing Skill\n- [x] .claude/skills/testing/SKILL.md 작성\n- [x] 테스트 작성 가이드라인 포함\n- [x] 커버리지 기준 포함\n\n### 2.4 Git Workflow Skill\n- [x] .claude/skills/git-workflow/SKILL.md 작성\n- [x] 브랜치 전략 포함\n- [x] 커밋 메시지 규칙 포함\n\n## 3. SDK Hooks 설정", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-08"}}
{"id": "1811", "text": "### 2.3 Testing Skill\n- [x] .claude/skills/testing/SKILL.md 작성\n- [x] 테스트 작성 가이드라인 포함\n- [x] 커버리지 기준 포함\n\n### 2.4 Git Workflow Skill\n- [x] .claude/skills/git-workflow/SKILL.md 작성\n- [x] 브랜치 전략 포함\n- [x] 커밋 메시지 규칙 포함\n\n## 3. SDK Hooks 설정\n\n- [x] .claude/settings.json에 hooks 설정 추가 (이미 구성됨)\n- [x] PreToolUse hook 구현 (이미 구성됨)\n- [x] PostToolUse hook 구현 (이미 구성됨)\n- [x] SessionStart hook 구현 (Stop hook으로 대체)\n\n## 4. MCP 설정 정리", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-08"}}
{"id": "1812", "text": "## 3. SDK Hooks 설정\n\n- [x] .claude/settings.json에 hooks 설정 추가 (이미 구성됨)\n- [x] PreToolUse hook 구현 (이미 구성됨)\n- [x] PostToolUse hook 구현 (이미 구성됨)\n- [x] SessionStart hook 구현 (Stop hook으로 대체)\n\n## 4. MCP 설정 정리\n\n- [x] .mcp.json 최종 정리 (이미 정리됨)\n- [x] zyflow MCP 서버만 유지 (확인 완료)\n- [x] 불필요한 설정 제거 (이미 없음)\n\n## 5. CLAUDE.md 최종 정리", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-08"}}
{"id": "1813", "text": "## 4. MCP 설정 정리\n\n- [x] .mcp.json 최종 정리 (이미 정리됨)\n- [x] zyflow MCP 서버만 유지 (확인 완료)\n- [x] 불필요한 설정 제거 (이미 없음)\n\n## 5. CLAUDE.md 최종 정리\n\n- [x] Project Overview 간소화\n- [x] Build Commands 유지\n- [x] Code Style & Best Practices 유지\n- [x] MCP 도구 목록 (zyflow만)\n- [x] Skills 사용법 추가\n- [x] 불필요한 섹션 모두 제거\n\n## 6. 문서화", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-08"}}
{"id": "1814", "text": "## 5. CLAUDE.md 최종 정리\n\n- [x] Project Overview 간소화\n- [x] Build Commands 유지\n- [x] Code Style & Best Practices 유지\n- [x] MCP 도구 목록 (zyflow만)\n- [x] Skills 사용법 추가\n- [x] 불필요한 섹션 모두 제거\n\n## 6. 문서화\n\n- [x] Skills 사용 가이드 작성 (docs/claude-sdk-guide.md)\n- [x] Hooks 설정 가이드 작성 (docs/claude-sdk-guide.md)\n- [x] 마이그레이션 완료 문서 작성 (docs/phase4-migration-complete.md)\n\n## 7. 검증", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-08"}}
{"id": "1815", "text": "## 6. 문서화\n\n- [x] Skills 사용 가이드 작성 (docs/claude-sdk-guide.md)\n- [x] Hooks 설정 가이드 작성 (docs/claude-sdk-guide.md)\n- [x] 마이그레이션 완료 문서 작성 (docs/phase4-migration-complete.md)\n\n## 7. 검증\n\n- [x] Claude Code에서 Skills 인식 확인 (4개 SKILL.md 파일 존재 확인)\n- [x] Skills 디렉토리 구조 확인 (openspec, code-review, testing, git-workflow)\n- [x] MCP 도구 정상 동작 확인 (npm run build:mcp 성공)\n- [x] Core agents 유지 확인 (5개 파일 존재)", "metadata": {"file_path": "openspec/changes/archive/2026-01-08-refactor-phase4-sdk/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-08"}}
{"id": "1816", "text": "# Change: OpenSpec 칸반 대시보드 v0.1\n\n## Why\n\nOpenSpec으로 스펙을 작성하면 tasks.md에 구현 체크리스트가 생성되지만, 이를 시각적으로 관리하고 진행 상황을 파악하기 어렵다. 칸반 형태의 대시보드로 OpenSpec 워크플로우를 시각화하면 개발 진행 상황을 한눈에 파악할 수 있다.\n\n## What Changes", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1817", "text": "## What Changes\n\n### 신규 기능\n- Vite + React + ShadcnUI 기반 웹 앱 초기 설정\n- 로컬 파일 시스템 접근을 위한 Express API 서버\n- OpenSpec changes/*/tasks.md 파싱 및 조회\n- 칸반 보드 UI (변경 제안별 태스크 그룹핑)\n- 태스크 카드 컴포넌트 (체크박스, 제목)\n- 체크박스 토글로 완료 상태 변경 (파일에 반영)\n- 세부 계획 요청 기능 (Claude에게 지시 → 파일 저장)", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1818", "text": "### 데이터 소스\n- `openspec/changes/*/tasks.md` - 태스크 체크리스트\n- `openspec/changes/*/proposal.md` - 변경 제안 요약\n- `.zyflow/plans/*.md` - 세부 구현 계획 (Claude가 생성)\n\n### 미포함 (v0.2+)\n- 테스트 상태 연동 (TDD)\n- OpenSpec specs/ 뷰어 (현재 스펙 조회)\n- zywiki 문서 통합\n- 드래그앤드롭 순서 변경\n\n## Impact\n\n- Affected specs: openspec-dashboard (신규)\n- Affected code: 전체 프로젝트 초기 설정\n- Dependencies:\n  - React 19, Vite 6, TypeScript\n  - ShadcnUI, TailwindCSS 4\n  - TanStack Query\n  - Express (로컬 API 서버)\n  - gray-matter (마크다운 파싱)", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1819", "text": "# Tasks: add-kanban-board\n\n## 1. 프로젝트 초기 설정\n\n- [x] 1.1 Vite + React + TypeScript 프로젝트 생성\n- [x] 1.2 TailwindCSS 4 설정\n- [x] 1.3 ShadcnUI 초기화 및 기본 컴포넌트 설치\n- [x] 1.4 절대 경로 import (`@/`) 설정\n- [x] 1.5 ESLint + Prettier 설정\n\n## 2. 로컬 API 서버", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1820", "text": "## 2. 로컬 API 서버\n\n- [x] 2.1 Express 서버 설정 (server/index.ts)\n- [x] 2.2 OpenSpec tasks.md 파싱 유틸리티\n- [x] 2.3 GET /api/changes - 변경 제안 목록 조회\n- [x] 2.4 GET /api/changes/:id/tasks - 특정 변경의 태스크 조회\n- [x] 2.5 PATCH /api/tasks/:changeId/:taskId - 체크박스 토글\n- [x] 2.6 Vite proxy 설정으로 API 연동\n\n## 3. 타입 정의", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1821", "text": "## 3. 타입 정의\n\n- [x] 3.1 Change 인터페이스 (proposal 정보)\n- [x] 3.2 Task 인터페이스 (체크리스트 항목)\n- [x] 3.3 TaskGroup 인터페이스 (섹션별 그룹)\n- [x] 3.4 API 응답 타입 정의\n\n## 4. 대시보드 UI", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1822", "text": "## 4. 대시보드 UI\n\n- [x] 4.1 기본 레이아웃 (헤더, 사이드바, 메인 영역)\n- [x] 4.2 ChangeList 컴포넌트 (사이드바 - 변경 제안 목록)\n- [x] 4.3 TaskBoard 컴포넌트 (메인 - 선택된 변경의 태스크)\n- [x] 4.4 TaskGroup 컴포넌트 (섹션별 그룹)\n- [x] 4.5 TaskItem 컴포넌트 (체크박스 + 제목)\n- [x] 4.6 ProgressBar 컴포넌트 (완료율 표시)\n\n## 5. 데이터 연동", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1823", "text": "## 5. 데이터 연동\n\n- [x] 5.1 TanStack Query 설정\n- [x] 5.2 useChanges 훅 구현 (변경 목록)\n- [x] 5.3 useTasks 훅 구현 (태스크 목록)\n- [x] 5.4 useToggleTask 훅 구현 (체크박스 토글)\n- [x] 5.5 Optimistic update 구현\n\n## 6. 세부 계획 기능\n\n- [x] 6.1 TaskDetail 패널 (태스크 클릭 시)\n- [x] 6.2 세부 계획 파일 조회 (.zyflow/plans/)\n- [x] 6.3 \"세부 계획 요청\" 버튼 (클립보드에 프롬프트 복사)\n\n## 7. 테스트", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1824", "text": "## 6. 세부 계획 기능\n\n- [x] 6.1 TaskDetail 패널 (태스크 클릭 시)\n- [x] 6.2 세부 계획 파일 조회 (.zyflow/plans/)\n- [x] 6.3 \"세부 계획 요청\" 버튼 (클립보드에 프롬프트 복사)\n\n## 7. 테스트\n\n- [x] 7.1 Vitest 설정\n- [x] 7.2 tasks.md 파싱 유틸리티 테스트\n- [x] 7.3 API 엔드포인트 테스트\n\n## 8. 문서화\n\n- [x] 8.1 README.md 작성\n- [x] 8.2 CLAUDE.md에 zyflow 지침 추가", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1825", "text": "## ADDED Requirements\n\n### Requirement: OpenSpec 변경 목록 조회\n시스템은 로컬 `openspec/changes/` 디렉토리의 모든 변경 제안을 조회할 수 있어야 한다(SHALL).\n\n#### Scenario: 변경 목록 조회 성공\n- **WHEN** 사용자가 대시보드를 열면\n- **THEN** 모든 활성 변경 제안 목록이 사이드바에 표시된다\n- **AND** 각 변경의 제목과 진행률이 표시된다\n\n#### Scenario: 변경 없음\n- **WHEN** `openspec/changes/` 디렉토리가 비어있으면\n- **THEN** \"활성 변경 제안이 없습니다\" 메시지가 표시된다", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/specs/openspec-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1826", "text": "#### Scenario: 변경 없음\n- **WHEN** `openspec/changes/` 디렉토리가 비어있으면\n- **THEN** \"활성 변경 제안이 없습니다\" 메시지가 표시된다\n\n### Requirement: 태스크 목록 조회\n시스템은 선택된 변경 제안의 `tasks.md` 파일을 파싱하여 체크리스트를 표시해야 한다(SHALL).\n\n#### Scenario: 태스크 목록 표시\n- **WHEN** 사용자가 변경 제안을 선택하면\n- **THEN** 해당 변경의 tasks.md 체크리스트가 그룹별로 표시된다\n- **AND** 각 태스크의 완료 상태(체크박스)가 표시된다", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/specs/openspec-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1827", "text": "#### Scenario: 태스크 목록 표시\n- **WHEN** 사용자가 변경 제안을 선택하면\n- **THEN** 해당 변경의 tasks.md 체크리스트가 그룹별로 표시된다\n- **AND** 각 태스크의 완료 상태(체크박스)가 표시된다\n\n#### Scenario: 그룹별 표시\n- **WHEN** tasks.md에 `## 1. 섹션명` 형식의 헤딩이 있으면\n- **THEN** 태스크가 섹션별로 그룹핑되어 표시된다\n\n### Requirement: 태스크 완료 상태 토글\n시스템은 태스크의 완료 상태를 토글하고 파일에 반영해야 한다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/specs/openspec-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1828", "text": "#### Scenario: 그룹별 표시\n- **WHEN** tasks.md에 `## 1. 섹션명` 형식의 헤딩이 있으면\n- **THEN** 태스크가 섹션별로 그룹핑되어 표시된다\n\n### Requirement: 태스크 완료 상태 토글\n시스템은 태스크의 완료 상태를 토글하고 파일에 반영해야 한다(SHALL).\n\n#### Scenario: 체크박스 토글\n- **WHEN** 사용자가 태스크 체크박스를 클릭하면\n- **THEN** 완료 상태가 토글된다\n- **AND** tasks.md 파일이 업데이트된다 (`- [ ]` ↔ `- [x]`)", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/specs/openspec-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1829", "text": "#### Scenario: 체크박스 토글\n- **WHEN** 사용자가 태스크 체크박스를 클릭하면\n- **THEN** 완료 상태가 토글된다\n- **AND** tasks.md 파일이 업데이트된다 (`- [ ]` ↔ `- [x]`)\n\n#### Scenario: 진행률 업데이트\n- **WHEN** 태스크 완료 상태가 변경되면\n- **THEN** 해당 변경의 진행률이 자동으로 업데이트된다\n\n### Requirement: 세부 계획 조회\n시스템은 태스크별 세부 구현 계획을 조회할 수 있어야 한다(SHALL).", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/specs/openspec-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1830", "text": "#### Scenario: 진행률 업데이트\n- **WHEN** 태스크 완료 상태가 변경되면\n- **THEN** 해당 변경의 진행률이 자동으로 업데이트된다\n\n### Requirement: 세부 계획 조회\n시스템은 태스크별 세부 구현 계획을 조회할 수 있어야 한다(SHALL).\n\n#### Scenario: 세부 계획 존재\n- **WHEN** `.zyflow/plans/{change-id}/{task-id}.md` 파일이 존재하면\n- **THEN** 태스크 상세 패널에서 세부 계획 내용이 표시된다", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/specs/openspec-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1831", "text": "### Requirement: 세부 계획 조회\n시스템은 태스크별 세부 구현 계획을 조회할 수 있어야 한다(SHALL).\n\n#### Scenario: 세부 계획 존재\n- **WHEN** `.zyflow/plans/{change-id}/{task-id}.md` 파일이 존재하면\n- **THEN** 태스크 상세 패널에서 세부 계획 내용이 표시된다\n\n#### Scenario: 세부 계획 없음\n- **WHEN** 세부 계획 파일이 없으면\n- **THEN** \"세부 계획 요청\" 버튼이 표시된다\n- **AND** 버튼 클릭 시 Claude에게 보낼 프롬프트가 클립보드에 복사된다", "metadata": {"file_path": "openspec/changes/archive/add-kanban-board/specs/openspec-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1832", "text": "# Design: 독립형 태스크 관리 시스템\n\n## Context\n\nzyflow는 OpenSpec 워크플로우 대시보드로, 큰 변경 제안을 관리함. 하지만 **작은 단순 작업**을 추적할 시스템이 없음.\n\n**요구사항**:\n- 독립형 (Supabase 등 외부 DB 의존 없음)\n- AI(Claude)가 CLI/MCP로 직접 제어 가능\n- 빠른 검색/필터링\n- 칸반 보드 UI\n\n## Goals / Non-Goals\n\n### Goals\n- SQLite 기반 로컬 태스크 DB\n- 프로젝트별 `.zyflow/tasks.db` 파일\n- CLI로 CRUD + 검색\n- MCP 도구로 Claude 연동\n- shadcn 칸반 보드 UI", "metadata": {"file_path": "openspec/changes/archive/add-task-management/design.md", "file_name": "design.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1833", "text": "## Goals / Non-Goals\n\n### Goals\n- SQLite 기반 로컬 태스크 DB\n- 프로젝트별 `.zyflow/tasks.db` 파일\n- CLI로 CRUD + 검색\n- MCP 도구로 Claude 연동\n- shadcn 칸반 보드 UI\n\n### Non-Goals\n- 클라우드 동기화\n- 멀티유저/협업 기능\n- 복잡한 프로젝트 관리 (간트 차트 등)\n- GitHub Issues 동기화 (v1에서는)\n\n## Decisions\n\n### 1. SQLite + Drizzle ORM\n\n**선택**: better-sqlite3 + Drizzle\n\n**이유**:\n- 동기식 API로 CLI에서 간단\n- Drizzle은 타입 안전하고 가벼움\n- FTS5로 풀텍스트 검색 가능", "metadata": {"file_path": "openspec/changes/archive/add-task-management/design.md", "file_name": "design.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1834", "text": "## Decisions\n\n### 1. SQLite + Drizzle ORM\n\n**선택**: better-sqlite3 + Drizzle\n\n**이유**:\n- 동기식 API로 CLI에서 간단\n- Drizzle은 타입 안전하고 가벼움\n- FTS5로 풀텍스트 검색 가능\n\n**대안 고려**:\n- sql.js: 브라우저에서도 동작하지만 성능 열세\n- Prisma: 무거움, SQLite 지원 제한적\n\n### 2. 패키지 구조", "metadata": {"file_path": "openspec/changes/archive/add-task-management/design.md", "file_name": "design.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1835", "text": "### 2. 패키지 구조\n\n```\npackages/tasks/\n├── src/\n│   ├── db/\n│   │   ├── schema.ts       # Drizzle 스키마\n│   │   ├── client.ts       # DB 연결\n│   │   └── migrations/     # 마이그레이션\n│   ├── core/\n│   │   ├── task.ts         # Task CRUD\n│   │   └── search.ts       # FTS5 검색\n│   ├── ui/                 # React 컴포넌트 (칸반)\n│   │   ├── kanban-board.tsx\n│   │   ├── task-card.tsx\n│   │   └── task-dialog.tsx\n│   └── index.ts            # Public API\n├── package.json\n└── tsconfig.json\n```\n\n### 3. DB 스키마\n\n```typescript\n// packages/tasks/src/db/schema.ts\nimport { sqliteTable, text, integer } from 'drizzle-orm/sqlite-core';", "metadata": {"file_path": "openspec/changes/archive/add-task-management/design.md", "file_name": "design.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1836", "text": "### 3. DB 스키마\n\n```typescript\n// packages/tasks/src/db/schema.ts\nimport { sqliteTable, text, integer } from 'drizzle-orm/sqlite-core';\n\nexport const tasks = sqliteTable('tasks', {\n  id: text('id').primaryKey(),           // nanoid\n  title: text('title').notNull(),\n  description: text('description'),\n  status: text('status').notNull().default('todo'),\n    // 'todo' | 'in-progress' | 'review' | 'done'\n  priority: text('priority').notNull().default('medium'),\n    // 'low' | 'medium' | 'high'\n  tags: text('tags'),                      // JSON array: [\"bug\", \"refactor\"]\n  assignee: text('assignee'),\n  order: integer('order').notNull().default(0),  // 칸반 정렬용\n  createdAt: integer('created_at', { mode: 'timestamp' }).notNull(),\n  updatedAt: integer('updated_at', { mode: 'timestamp' }).notNull(),\n});", "metadata": {"file_path": "openspec/changes/archive/add-task-management/design.md", "file_name": "design.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1837", "text": "// FTS5 가상 테이블 (검색용)\n// CREATE VIRTUAL TABLE tasks_fts USING fts5(title, description, content=tasks);\n```\n\n### 4. DB 파일 위치\n\n```\n<project-root>/\n├── .zyflow/\n│   ├── tasks.db          # SQLite 파일\n│   └── config.json       # 설정 (선택)\n├── src/\n└── ...\n```\n\n- 프로젝트별로 독립적인 태스크 DB\n- `.gitignore`에 추가하거나, 팀 공유 시 포함\n\n### 5. CLI 명령어\n\n```bash\n# 기존 zy CLI에 통합\nzy tasks list                           # 모든 태스크 (테이블)\nzy tasks list --status todo             # 필터링\nzy tasks list --kanban                  # 칸반 형태 출력", "metadata": {"file_path": "openspec/changes/archive/add-task-management/design.md", "file_name": "design.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1838", "text": "- 프로젝트별로 독립적인 태스크 DB\n- `.gitignore`에 추가하거나, 팀 공유 시 포함\n\n### 5. CLI 명령어\n\n```bash\n# 기존 zy CLI에 통합\nzy tasks list                           # 모든 태스크 (테이블)\nzy tasks list --status todo             # 필터링\nzy tasks list --kanban                  # 칸반 형태 출력\n\nzy tasks add \"버그: 모달 닫힘 이슈\"      # 생성\nzy tasks add \"리팩토링\" -p high -t refactor\n\nzy tasks view TASK-001                  # 상세 보기\nzy tasks edit TASK-001 --status in-progress\nzy tasks move TASK-001 done             # 상태 변경 단축\n\nzy tasks search \"모달\"                  # FTS5 검색\nzy tasks delete TASK-001                # 삭제\n```\n\n### 6. MCP 도구", "metadata": {"file_path": "openspec/changes/archive/add-task-management/design.md", "file_name": "design.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1839", "text": "zy tasks view TASK-001                  # 상세 보기\nzy tasks edit TASK-001 --status in-progress\nzy tasks move TASK-001 done             # 상태 변경 단축\n\nzy tasks search \"모달\"                  # FTS5 검색\nzy tasks delete TASK-001                # 삭제\n```\n\n### 6. MCP 도구\n\n```typescript\n// packages/mcp/src/tools/tasks.ts\nexport const taskTools = {\n  'task-list': {\n    description: 'List tasks with optional filtering',\n    parameters: { status, priority, tags, limit },\n  },\n  'task-create': {\n    description: 'Create a new task',\n    parameters: { title, description, priority, tags },\n  },\n  'task-update': {\n    description: 'Update task fields',\n    parameters: { id, status, priority, title, description },\n  },\n  'task-search': {\n    description: 'Full-text search tasks',\n    parameters: { query, limit },\n  },\n  'task-delete': {\n    description: 'Delete a task',\n    parameters: { id },\n  },\n};\n```", "metadata": {"file_path": "openspec/changes/archive/add-task-management/design.md", "file_name": "design.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1840", "text": "### 7. 칸반 UI\n\nshadcn CRUD Kanban Board 참고 (https://www.shadcn.io/blocks/crud-kanban-board-01):\n\n**컬럼 구성**:\n- To Do (todo)\n- In Progress (in-progress)\n- Review (review)\n- Done (done)\n\n**기능**:\n- 드래그 앤 드롭 (dnd-kit)\n- 인라인 생성/수정\n- 우선순위 표시 (색상 badge)\n- 태그 표시\n- 검색 + 필터 toolbar\n\n## Risks / Trade-offs", "metadata": {"file_path": "openspec/changes/archive/add-task-management/design.md", "file_name": "design.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1841", "text": "**컬럼 구성**:\n- To Do (todo)\n- In Progress (in-progress)\n- Review (review)\n- Done (done)\n\n**기능**:\n- 드래그 앤 드롭 (dnd-kit)\n- 인라인 생성/수정\n- 우선순위 표시 (색상 badge)\n- 태그 표시\n- 검색 + 필터 toolbar\n\n## Risks / Trade-offs\n\n| 리스크 | 완화 방안 |\n|--------|----------|\n| SQLite 바이너리 Git diff 불가 | `.gitignore` 또는 JSON export 명령 제공 |\n| better-sqlite3 네이티브 빌드 | prebuild 바이너리 사용, CI 캐싱 |\n| FTS5 한글 토크나이징 | unicode61 토크나이저 사용 |\n\n## Migration Plan", "metadata": {"file_path": "openspec/changes/archive/add-task-management/design.md", "file_name": "design.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1842", "text": "## Risks / Trade-offs\n\n| 리스크 | 완화 방안 |\n|--------|----------|\n| SQLite 바이너리 Git diff 불가 | `.gitignore` 또는 JSON export 명령 제공 |\n| better-sqlite3 네이티브 빌드 | prebuild 바이너리 사용, CI 캐싱 |\n| FTS5 한글 토크나이징 | unicode61 토크나이저 사용 |\n\n## Migration Plan\n\n1. **Phase 1**: `packages/tasks` 생성, DB 스키마, core 로직\n2. **Phase 2**: CLI 명령어 (`zy tasks`)\n3. **Phase 3**: MCP 도구 추가\n4. **Phase 4**: 칸반 UI (zyflow 대시보드에 통합)\n5. **Phase 5**: Backlog MCP 제거\n\n## Open Questions", "metadata": {"file_path": "openspec/changes/archive/add-task-management/design.md", "file_name": "design.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1843", "text": "## Migration Plan\n\n1. **Phase 1**: `packages/tasks` 생성, DB 스키마, core 로직\n2. **Phase 2**: CLI 명령어 (`zy tasks`)\n3. **Phase 3**: MCP 도구 추가\n4. **Phase 4**: 칸반 UI (zyflow 대시보드에 통합)\n5. **Phase 5**: Backlog MCP 제거\n\n## Open Questions\n\n- [x] 태그는 별도 테이블 vs JSON 컬럼? → **JSON 컬럼** (단순함 우선)\n- [ ] 태스크 ID 형식: nanoid vs TASK-001 형태?\n- [ ] 칸반 컬럼 커스터마이징 허용?", "metadata": {"file_path": "openspec/changes/archive/add-task-management/design.md", "file_name": "design.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1844", "text": "# Change: 독립형 태스크 관리 시스템 추가\n\n## Why\n\n현재 Backlog MCP가 있지만 실제로 활용되지 않고 있음:\n- OpenSpec `tasks.md`와 역할 중복\n- 진입점(워크플로우)이 불명확\n- 파일 기반이라 검색/필터링이 불편\n\nOpenSpec은 **설계가 필요한 큰 변경**용이고, **작은 단순 작업**(버그 수정, 리팩토링, 소소한 개선)을 관리할 도구가 없음.\n\n## What Changes", "metadata": {"file_path": "openspec/changes/archive/add-task-management/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1845", "text": "OpenSpec은 **설계가 필요한 큰 변경**용이고, **작은 단순 작업**(버그 수정, 리팩토링, 소소한 개선)을 관리할 도구가 없음.\n\n## What Changes\n\n- **SQLite 기반 태스크 DB**: 검색(FTS5), 필터링, 정렬 지원\n- **칸반 보드 UI**: shadcn CRUD Kanban Board 기반\n- **CLI**: `zy tasks add/list/move/search` 명령어\n- **MCP 통합**: 기존 zyflow MCP 서버에 태스크 도구 추가\n- **Backlog MCP 제거**: 역할 중복 해소\n\n## Impact", "metadata": {"file_path": "openspec/changes/archive/add-task-management/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1846", "text": "## What Changes\n\n- **SQLite 기반 태스크 DB**: 검색(FTS5), 필터링, 정렬 지원\n- **칸반 보드 UI**: shadcn CRUD Kanban Board 기반\n- **CLI**: `zy tasks add/list/move/search` 명령어\n- **MCP 통합**: 기존 zyflow MCP 서버에 태스크 도구 추가\n- **Backlog MCP 제거**: 역할 중복 해소\n\n## Impact\n\n- Affected specs: (신규) `task-management`\n- Affected code:\n  - `packages/tasks/` (신규 패키지)\n  - `packages/cli/` (태스크 명령어 추가)\n  - `packages/mcp/` (태스크 도구 추가)\n- **BREAKING**: Backlog MCP 서버 제거\n\n## 역할 분담", "metadata": {"file_path": "openspec/changes/archive/add-task-management/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1847", "text": "## Impact\n\n- Affected specs: (신규) `task-management`\n- Affected code:\n  - `packages/tasks/` (신규 패키지)\n  - `packages/cli/` (태스크 명령어 추가)\n  - `packages/mcp/` (태스크 도구 추가)\n- **BREAKING**: Backlog MCP 서버 제거\n\n## 역할 분담\n\n| 작업 유형 | 도구 |\n|----------|------|\n| 설계 필요한 큰 변경 | OpenSpec |\n| 단순 작업 (버그, 리팩토링) | zy-tasks |\n| 세션 내 임시 TODO | Claude TodoWrite |", "metadata": {"file_path": "openspec/changes/archive/add-task-management/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1848", "text": "# Tasks: 독립형 태스크 관리 시스템\n\n## 1. 패키지 설정\n- [x] 1.1 `server/tasks` 디렉토리 생성 (모노레포 대신 단일 패키지 구조 사용)\n- [x] 1.2 package.json에 의존성 추가 (better-sqlite3, drizzle-orm, nanoid)\n- [x] 1.3 tsconfig.mcp.json에 tasks 포함\n- [x] 1.4 빌드 확인", "metadata": {"file_path": "openspec/changes/archive/add-task-management/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1849", "text": "## 1. 패키지 설정\n- [x] 1.1 `server/tasks` 디렉토리 생성 (모노레포 대신 단일 패키지 구조 사용)\n- [x] 1.2 package.json에 의존성 추가 (better-sqlite3, drizzle-orm, nanoid)\n- [x] 1.3 tsconfig.mcp.json에 tasks 포함\n- [x] 1.4 빌드 확인\n\n## 2. DB 스키마 및 클라이언트\n- [x] 2.1 Drizzle 스키마 정의 (`server/tasks/db/schema.ts`)\n- [x] 2.2 DB 클라이언트 생성 (`server/tasks/db/client.ts`)\n- [x] 2.3 FTS5 가상 테이블 및 트리거 생성\n- [x] 2.4 DB 초기화 함수 (`initDb`)", "metadata": {"file_path": "openspec/changes/archive/add-task-management/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1850", "text": "## 3. Core 로직\n- [x] 3.1 Task CRUD 함수 (`server/tasks/core/task.ts`)\n  - [x] createTask\n  - [x] getTask\n  - [x] listTasks (필터링, 정렬)\n  - [x] updateTask\n  - [x] deleteTask\n  - [x] moveTask (상태 + 순서 변경)\n  - [x] getTasksByStatus (칸반용)\n- [x] 3.2 검색 함수 (`server/tasks/core/search.ts`)\n  - [x] searchTasks (FTS5 쿼리)\n  - [x] FTS 인덱스 동기화 트리거", "metadata": {"file_path": "openspec/changes/archive/add-task-management/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1851", "text": "## 4. CLI 명령어\n- [x] 4.1 `zy tasks list` 명령어 (--kanban 옵션 포함)\n- [x] 4.2 `zy tasks add` 명령어\n- [x] 4.3 `zy tasks view` 명령어\n- [x] 4.4 `zy tasks edit` 명령어\n- [x] 4.5 `zy tasks move` 명령어\n- [x] 4.6 `zy tasks search` 명령어\n- [x] 4.7 `zy tasks delete` 명령어\n- [x] 4.8 `zy tasks help` 명령어", "metadata": {"file_path": "openspec/changes/archive/add-task-management/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1852", "text": "## 5. MCP 도구\n- [x] 5.1 `task_list` 도구\n- [x] 5.2 `task_create` 도구\n- [x] 5.3 `task_update` 도구\n- [x] 5.4 `task_search` 도구\n- [x] 5.5 `task_delete` 도구\n- [x] 5.6 `task_view` 도구\n- [x] 5.7 MCP 서버에 도구 등록", "metadata": {"file_path": "openspec/changes/archive/add-task-management/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1853", "text": "## 6. REST API\n- [x] 6.1 GET /api/tasks - 태스크 목록 조회\n- [x] 6.2 POST /api/tasks - 태스크 생성\n- [x] 6.3 GET /api/tasks/:id - 태스크 조회\n- [x] 6.4 PATCH /api/tasks/:id - 태스크 수정\n- [x] 6.5 DELETE /api/tasks/:id - 태스크 삭제\n- [x] 6.6 GET /api/tasks/search - 태스크 검색", "metadata": {"file_path": "openspec/changes/archive/add-task-management/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1854", "text": "## 7. 칸반 UI\n- [x] 7.1 타입 정의 (`src/components/tasks/types.ts`)\n- [x] 7.2 TaskCard 컴포넌트 (드래그 가능)\n- [x] 7.3 TaskColumn 컴포넌트 (드롭 가능)\n- [x] 7.4 TaskDialog 컴포넌트 (생성/수정)\n- [x] 7.5 KanbanBoard 컴포넌트 (dnd-kit 통합)\n- [x] 7.6 useKanbanTasks hook\n- [x] 7.7 TasksPage 컴포넌트\n- [x] 7.8 사이드바에 Tasks 메뉴 추가\n- [x] 7.9 App.tsx 라우팅 추가", "metadata": {"file_path": "openspec/changes/archive/add-task-management/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1855", "text": "## 8. 정리\n- [x] 8.1 Backlog MCP 서버 설정 제거 (선택적) - 사용자가 선택적으로 제거 가능\n- [x] 8.2 관련 문서 정리 (CLAUDE.md에 태스크 관리 섹션 추가됨)\n- [x] 8.3 README 업데이트 (칸반 보드, CLI, MCP 태스크 도구 문서화)", "metadata": {"file_path": "openspec/changes/archive/add-task-management/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1856", "text": "## ADDED Requirements\n\n### Requirement: Task Storage\n\n시스템은 SQLite 데이터베이스에 태스크를 저장해야 한다 (SHALL).\n\n태스크는 다음 필드를 포함해야 한다:\n- `id`: 고유 식별자\n- `title`: 제목 (필수)\n- `description`: 설명 (선택)\n- `status`: 상태 (todo, in-progress, review, done)\n- `priority`: 우선순위 (low, medium, high)\n- `tags`: 태그 목록 (JSON 배열)\n- `order`: 정렬 순서\n- `createdAt`, `updatedAt`: 타임스탬프\n\n#### Scenario: 프로젝트별 DB 파일\n- **WHEN** 프로젝트 디렉토리에서 태스크 명령 실행\n- **THEN** `.zyflow/tasks.db` 파일이 생성/사용됨", "metadata": {"file_path": "openspec/changes/archive/add-task-management/specs/task-management/spec.md", "file_name": "spec.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1857", "text": "#### Scenario: 프로젝트별 DB 파일\n- **WHEN** 프로젝트 디렉토리에서 태스크 명령 실행\n- **THEN** `.zyflow/tasks.db` 파일이 생성/사용됨\n\n#### Scenario: DB 초기화\n- **WHEN** DB 파일이 없는 상태에서 첫 명령 실행\n- **THEN** 스키마가 자동 생성됨\n\n---\n\n### Requirement: Task CRUD\n\n시스템은 태스크 생성, 조회, 수정, 삭제 기능을 제공해야 한다 (SHALL).\n\n#### Scenario: 태스크 생성\n- **WHEN** `zy tasks add \"버그 수정\" --priority high --tags bug`\n- **THEN** 새 태스크가 생성되고 ID 반환\n\n#### Scenario: 태스크 목록 조회\n- **WHEN** `zy tasks list --status todo`\n- **THEN** todo 상태 태스크만 테이블로 출력", "metadata": {"file_path": "openspec/changes/archive/add-task-management/specs/task-management/spec.md", "file_name": "spec.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1858", "text": "시스템은 태스크 생성, 조회, 수정, 삭제 기능을 제공해야 한다 (SHALL).\n\n#### Scenario: 태스크 생성\n- **WHEN** `zy tasks add \"버그 수정\" --priority high --tags bug`\n- **THEN** 새 태스크가 생성되고 ID 반환\n\n#### Scenario: 태스크 목록 조회\n- **WHEN** `zy tasks list --status todo`\n- **THEN** todo 상태 태스크만 테이블로 출력\n\n#### Scenario: 태스크 수정\n- **WHEN** `zy tasks edit TASK-001 --status in-progress`\n- **THEN** 해당 태스크 상태가 변경됨\n\n#### Scenario: 태스크 삭제\n- **WHEN** `zy tasks delete TASK-001`\n- **THEN** 확인 후 태스크 삭제\n\n---\n\n### Requirement: Task Search", "metadata": {"file_path": "openspec/changes/archive/add-task-management/specs/task-management/spec.md", "file_name": "spec.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1859", "text": "#### Scenario: 태스크 수정\n- **WHEN** `zy tasks edit TASK-001 --status in-progress`\n- **THEN** 해당 태스크 상태가 변경됨\n\n#### Scenario: 태스크 삭제\n- **WHEN** `zy tasks delete TASK-001`\n- **THEN** 확인 후 태스크 삭제\n\n---\n\n### Requirement: Task Search\n\n시스템은 FTS5 기반 풀텍스트 검색을 제공해야 한다 (SHALL).\n\n#### Scenario: 제목/설명 검색\n- **WHEN** `zy tasks search \"모달\"`\n- **THEN** 제목 또는 설명에 \"모달\"이 포함된 태스크 반환\n\n#### Scenario: 한글 검색\n- **WHEN** 한글 키워드로 검색\n- **THEN** unicode61 토크나이저로 올바르게 검색됨\n\n---\n\n### Requirement: Task Status Flow", "metadata": {"file_path": "openspec/changes/archive/add-task-management/specs/task-management/spec.md", "file_name": "spec.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1860", "text": "#### Scenario: 제목/설명 검색\n- **WHEN** `zy tasks search \"모달\"`\n- **THEN** 제목 또는 설명에 \"모달\"이 포함된 태스크 반환\n\n#### Scenario: 한글 검색\n- **WHEN** 한글 키워드로 검색\n- **THEN** unicode61 토크나이저로 올바르게 검색됨\n\n---\n\n### Requirement: Task Status Flow\n\n시스템은 칸반 스타일 상태 흐름을 지원해야 한다 (SHALL).\n\n상태 값:\n- `todo`: 할 일\n- `in-progress`: 진행 중\n- `review`: 리뷰 대기\n- `done`: 완료\n\n#### Scenario: 상태 이동\n- **WHEN** `zy tasks move TASK-001 in-progress`\n- **THEN** 태스크 상태가 `in-progress`로 변경", "metadata": {"file_path": "openspec/changes/archive/add-task-management/specs/task-management/spec.md", "file_name": "spec.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1861", "text": "---\n\n### Requirement: Task Status Flow\n\n시스템은 칸반 스타일 상태 흐름을 지원해야 한다 (SHALL).\n\n상태 값:\n- `todo`: 할 일\n- `in-progress`: 진행 중\n- `review`: 리뷰 대기\n- `done`: 완료\n\n#### Scenario: 상태 이동\n- **WHEN** `zy tasks move TASK-001 in-progress`\n- **THEN** 태스크 상태가 `in-progress`로 변경\n\n#### Scenario: 순서 변경\n- **WHEN** 칸반 UI에서 드래그로 순서 변경\n- **THEN** `order` 필드가 업데이트됨\n\n---\n\n### Requirement: CLI Interface\n\n시스템은 `zy tasks` 하위 명령어를 제공해야 한다 (SHALL).", "metadata": {"file_path": "openspec/changes/archive/add-task-management/specs/task-management/spec.md", "file_name": "spec.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1862", "text": "#### Scenario: 상태 이동\n- **WHEN** `zy tasks move TASK-001 in-progress`\n- **THEN** 태스크 상태가 `in-progress`로 변경\n\n#### Scenario: 순서 변경\n- **WHEN** 칸반 UI에서 드래그로 순서 변경\n- **THEN** `order` 필드가 업데이트됨\n\n---\n\n### Requirement: CLI Interface\n\n시스템은 `zy tasks` 하위 명령어를 제공해야 한다 (SHALL).\n\n#### Scenario: 명령어 목록\n- **WHEN** `zy tasks --help`\n- **THEN** 사용 가능한 하위 명령어 표시:\n  - `list`, `add`, `view`, `edit`, `move`, `search`, `delete`\n\n#### Scenario: 칸반 형태 출력\n- **WHEN** `zy tasks list --kanban`\n- **THEN** 컬럼별로 그룹화된 ASCII 칸반 출력", "metadata": {"file_path": "openspec/changes/archive/add-task-management/specs/task-management/spec.md", "file_name": "spec.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1863", "text": "#### Scenario: 명령어 목록\n- **WHEN** `zy tasks --help`\n- **THEN** 사용 가능한 하위 명령어 표시:\n  - `list`, `add`, `view`, `edit`, `move`, `search`, `delete`\n\n#### Scenario: 칸반 형태 출력\n- **WHEN** `zy tasks list --kanban`\n- **THEN** 컬럼별로 그룹화된 ASCII 칸반 출력\n\n---\n\n### Requirement: MCP Integration\n\n시스템은 MCP 프로토콜로 태스크 도구를 노출해야 한다 (SHALL).\n\n#### Scenario: MCP 도구 목록\n- **WHEN** MCP 클라이언트가 도구 목록 요청\n- **THEN** `task-list`, `task-create`, `task-update`, `task-search`, `task-delete` 도구 제공", "metadata": {"file_path": "openspec/changes/archive/add-task-management/specs/task-management/spec.md", "file_name": "spec.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1864", "text": "---\n\n### Requirement: MCP Integration\n\n시스템은 MCP 프로토콜로 태스크 도구를 노출해야 한다 (SHALL).\n\n#### Scenario: MCP 도구 목록\n- **WHEN** MCP 클라이언트가 도구 목록 요청\n- **THEN** `task-list`, `task-create`, `task-update`, `task-search`, `task-delete` 도구 제공\n\n#### Scenario: Claude에서 태스크 생성\n- **WHEN** Claude가 `task-create` 도구 호출\n- **THEN** 태스크가 생성되고 결과 반환\n\n---\n\n### Requirement: Kanban UI\n\n시스템은 웹 기반 칸반 보드 UI를 제공해야 한다 (SHALL).", "metadata": {"file_path": "openspec/changes/archive/add-task-management/specs/task-management/spec.md", "file_name": "spec.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1865", "text": "#### Scenario: Claude에서 태스크 생성\n- **WHEN** Claude가 `task-create` 도구 호출\n- **THEN** 태스크가 생성되고 결과 반환\n\n---\n\n### Requirement: Kanban UI\n\n시스템은 웹 기반 칸반 보드 UI를 제공해야 한다 (SHALL).\n\n#### Scenario: 칸반 보드 표시\n- **WHEN** `/tasks` 라우트 접근\n- **THEN** 4개 컬럼(Todo, In Progress, Review, Done) 칸반 표시\n\n#### Scenario: 드래그 앤 드롭\n- **WHEN** 태스크 카드를 다른 컬럼으로 드래그\n- **THEN** 상태가 변경되고 DB에 저장", "metadata": {"file_path": "openspec/changes/archive/add-task-management/specs/task-management/spec.md", "file_name": "spec.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1866", "text": "#### Scenario: 칸반 보드 표시\n- **WHEN** `/tasks` 라우트 접근\n- **THEN** 4개 컬럼(Todo, In Progress, Review, Done) 칸반 표시\n\n#### Scenario: 드래그 앤 드롭\n- **WHEN** 태스크 카드를 다른 컬럼으로 드래그\n- **THEN** 상태가 변경되고 DB에 저장\n\n#### Scenario: 인라인 생성\n- **WHEN** 컬럼의 \"+\" 버튼 클릭\n- **THEN** 해당 상태로 새 태스크 생성 다이얼로그", "metadata": {"file_path": "openspec/changes/archive/add-task-management/specs/task-management/spec.md", "file_name": "spec.md", "creation_date": "2025-11-28", "last_modified_date": "2025-11-28"}}
{"id": "1867", "text": "# Design: Flow 중심 UI 아키텍처\n\n## Context\n\nZyFlow는 OpenSpec 기반 태스크 관리 도구로, \"Flow\"라는 이름처럼 개발 파이프라인 전체를 관리하는 것이 목표. 현재는 OpenSpec과 Kanban이 분리되어 있어 흐름 시각화가 부족함.\n\n**Stakeholders**: 개발자 (1인 또는 소규모 팀)\n**Constraints**: 기존 칸반 데이터 마이그레이션 필요, OpenSpec 파일 구조 호환성 유지\n\n## Goals / Non-Goals", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1868", "text": "**Stakeholders**: 개발자 (1인 또는 소규모 팀)\n**Constraints**: 기존 칸반 데이터 마이그레이션 필요, OpenSpec 파일 구조 호환성 유지\n\n## Goals / Non-Goals\n\n### Goals\n- 6단계 파이프라인(Spec → Task → Code → Test → Commit → Docs) 시각화\n- Change 단위로 전체 흐름 추적\n- OpenSpec과 DB 간 양방향 동기화\n- 3단계 정보 계층으로 인지 부하 최소화\n\n### Non-Goals\n- 다중 사용자/팀 협업 기능 (향후 고려)\n- 실시간 동기화 (수동 새로고침으로 충분)\n- Git 커밋 자동 추적 (수동 기록으로 시작)\n\n## Decisions", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1869", "text": "### Non-Goals\n- 다중 사용자/팀 협업 기능 (향후 고려)\n- 실시간 동기화 (수동 새로고침으로 충분)\n- Git 커밋 자동 추적 (수동 기록으로 시작)\n\n## Decisions\n\n### 1. 데이터 모델: Change 중심 구조\n\n**결정**: `changes` 테이블을 최상위 단위로 하고, `tasks`가 change_id로 연결\n\n**이유**:\n- Flow의 핵심 단위가 \"Change\" (하나의 기능/수정 단위)\n- OpenSpec의 changes 디렉토리 구조와 1:1 매핑\n- 독립 태스크(change_id=null)도 기존 칸반처럼 관리 가능", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1870", "text": "**결정**: `changes` 테이블을 최상위 단위로 하고, `tasks`가 change_id로 연결\n\n**이유**:\n- Flow의 핵심 단위가 \"Change\" (하나의 기능/수정 단위)\n- OpenSpec의 changes 디렉토리 구조와 1:1 매핑\n- 독립 태스크(change_id=null)도 기존 칸반처럼 관리 가능\n\n**대안 검토**:\n- A) OpenSpec 파일만 사용 (DB 없음) → 검색/필터링 어려움\n- B) Task만 사용하고 태그로 그룹화 → 파이프라인 단계 추적 복잡\n\n### 2. UI 패턴: 아코디언 + 탭 하이브리드", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1871", "text": "**대안 검토**:\n- A) OpenSpec 파일만 사용 (DB 없음) → 검색/필터링 어려움\n- B) Task만 사용하고 태그로 그룹화 → 파이프라인 단계 추적 복잡\n\n### 2. UI 패턴: 아코디언 + 탭 하이브리드\n\n**결정**: 아코디언으로 Change 목록, 펼치면 파이프라인 탭으로 상세 보기\n\n**이유**:\n- 아코디언: 여러 Change를 컴팩트하게 표시, 관심있는 것만 펼침\n- 탭: 모달 없이 인라인으로 각 단계 전환, 컨텍스트 유지\n- 3단계 계층으로 점진적 정보 공개", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1872", "text": "**이유**:\n- 아코디언: 여러 Change를 컴팩트하게 표시, 관심있는 것만 펼침\n- 탭: 모달 없이 인라인으로 각 단계 전환, 컨텍스트 유지\n- 3단계 계층으로 점진적 정보 공개\n\n**대안 검토**:\n- A) 중첩 아코디언 (깊이 4단계) → 너무 복잡, 인지 부하 높음\n- B) 모달 방식 → 컨텍스트 전환 빈번, 열고 닫기 번거로움\n- C) 스윔레인 칸반 → 넓은 화면 필요, 모바일 불친절\n\n### 3. OpenSpec 연동: 읽기 우선, 선택적 쓰기", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1873", "text": "### 3. OpenSpec 연동: 읽기 우선, 선택적 쓰기\n\n**결정**:\n- OpenSpec → DB: 동기화 버튼으로 가져오기\n- DB → OpenSpec: tasks.md 체크박스만 업데이트 (선택적)\n\n**이유**:\n- OpenSpec 파일은 버전 관리되는 문서로서 가치 유지\n- 복잡한 양방향 동기화 대신 단순한 단방향 우선\n- 충돌 최소화\n\n### 4. Stage 정의: 6단계 고정\n\n**결정**: `spec`, `task`, `code`, `test`, `commit`, `docs` 고정", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1874", "text": "**이유**:\n- OpenSpec 파일은 버전 관리되는 문서로서 가치 유지\n- 복잡한 양방향 동기화 대신 단순한 단방향 우선\n- 충돌 최소화\n\n### 4. Stage 정의: 6단계 고정\n\n**결정**: `spec`, `task`, `code`, `test`, `commit`, `docs` 고정\n\n**이유**:\n- 일반적인 개발 워크플로우 커버\n- UI/DB 구조 단순화\n- 커스텀 단계는 향후 확장 가능\n\n### 5. 진행률 계산\n\n**결정**: 각 단계별 완료 비율 평균으로 전체 진행률 계산", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1875", "text": "**이유**:\n- 일반적인 개발 워크플로우 커버\n- UI/DB 구조 단순화\n- 커스텀 단계는 향후 확장 가능\n\n### 5. 진행률 계산\n\n**결정**: 각 단계별 완료 비율 평균으로 전체 진행률 계산\n\n```\nprogress = (spec_done + task_done + code_done + test_done + commit_done + docs_done) / 6 * 100\n```\n\n**이유**:\n- 단순하고 직관적\n- 단계별 가중치는 복잡성 대비 이점 적음\n\n## Database Schema", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1876", "text": "**결정**: 각 단계별 완료 비율 평균으로 전체 진행률 계산\n\n```\nprogress = (spec_done + task_done + code_done + test_done + commit_done + docs_done) / 6 * 100\n```\n\n**이유**:\n- 단순하고 직관적\n- 단계별 가중치는 복잡성 대비 이점 적음\n\n## Database Schema\n\n```sql\n-- 프로젝트 (저장소)\nCREATE TABLE projects (\n  id            TEXT PRIMARY KEY,\n  name          TEXT NOT NULL,\n  path          TEXT NOT NULL UNIQUE,\n  created_at    DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updated_at    DATETIME DEFAULT CURRENT_TIMESTAMP\n);", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1877", "text": "**이유**:\n- 단순하고 직관적\n- 단계별 가중치는 복잡성 대비 이점 적음\n\n## Database Schema\n\n```sql\n-- 프로젝트 (저장소)\nCREATE TABLE projects (\n  id            TEXT PRIMARY KEY,\n  name          TEXT NOT NULL,\n  path          TEXT NOT NULL UNIQUE,\n  created_at    DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updated_at    DATETIME DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Change (Flow 최상위 단위)\nCREATE TABLE changes (\n  id            TEXT PRIMARY KEY,\n  project_id    TEXT NOT NULL,\n  title         TEXT NOT NULL,\n  spec_path     TEXT,\n  status        TEXT DEFAULT 'active',      -- active, completed, archived\n  current_stage TEXT DEFAULT 'spec',        -- spec, task, code, test, commit, docs\n  progress      INTEGER DEFAULT 0,\n  created_at    DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updated_at    DATETIME DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (project_id) REFERENCES projects(id)\n);", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1878", "text": "-- Tasks (기존 테이블 수정)\nCREATE TABLE tasks (\n  id            TEXT PRIMARY KEY,\n  change_id     TEXT,                       -- nullable for standalone tasks\n  project_id    TEXT NOT NULL,\n  stage         TEXT NOT NULL,              -- spec, task, code, test, commit, docs\n  title         TEXT NOT NULL,\n  description   TEXT,\n  status        TEXT DEFAULT 'todo',\n  priority      TEXT DEFAULT 'medium',\n  order_index   INTEGER DEFAULT 0,\n  created_at    DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updated_at    DATETIME DEFAULT CURRENT_TIMESTAMP,\n  completed_at  DATETIME,\n  FOREIGN KEY (change_id) REFERENCES changes(id),\n  FOREIGN KEY (project_id) REFERENCES projects(id)\n);\n```\n\n## UI Component Hierarchy", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1879", "text": "## UI Component Hierarchy\n\n```\nMainLayout\n├── Sidebar\n│   ├── ProjectList\n│   │   └── ProjectItem (선택 가능)\n│   ├── ProjectAddButton\n│   └── SettingsButton\n│\n└── MainContent\n    └── FlowPage\n        └── ChangeList\n            └── ChangeItem (아코디언)\n                ├── ChangeItemCollapsed (Level 1)\n                │   ├── ChevronIcon\n                │   ├── Title\n                │   ├── CurrentStageBadge\n                │   └── ProgressBar\n                │\n                └── ChangeItemExpanded (Level 2)\n                    ├── Header (클릭시 접힘)\n                    ├── PipelineBar (탭 역할)\n                    │   └── StageBox × 6 (클릭 가능)\n                    └── StageContent (탭 내용)\n                        └── TaskList\n                            └── TaskItem\n                                └── [상세보기] → TaskDetail (Level 3)\n```\n\n## API Endpoints", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1880", "text": "## API Endpoints\n\n| Method | Path | Description |\n|--------|------|-------------|\n| GET | `/api/projects` | 프로젝트 목록 |\n| POST | `/api/projects` | 프로젝트 추가 |\n| GET | `/api/projects/:id/changes` | Change 목록 (stages 집계 포함) |\n| POST | `/api/projects/:id/changes` | Change 생성 |\n| PATCH | `/api/projects/:id/changes/:cid` | Change 수정 |\n| POST | `/api/projects/:id/changes/sync` | OpenSpec에서 동기화 |\n| GET | `/api/projects/:id/tasks` | 태스크 목록 (필터: change_id, stage, status) |\n| POST | `/api/projects/:id/tasks` | 태스크 생성 |\n| PATCH | `/api/projects/:id/tasks/:tid` | 태스크 수정 |\n\n## Risks / Trade-offs", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1881", "text": "## Risks / Trade-offs\n\n| Risk | Mitigation |\n|------|------------|\n| 기존 칸반 데이터 손실 | 마이그레이션 스크립트로 change_id=null, stage='task'로 변환 |\n| OpenSpec 동기화 충돌 | 단방향(OpenSpec→DB) 우선, 충돌 시 사용자에게 선택 요청 |\n| 복잡한 UI로 사용성 저하 | 3단계 계층으로 점진적 공개, 스마트 기본값(진행중 자동 펼침) |\n\n## Migration Plan\n\n1. **Phase 1**: 스키마 추가 (기존 데이터 유지)\n   - projects, changes 테이블 생성\n   - tasks에 change_id, stage 컬럼 추가 (nullable)", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1882", "text": "## Migration Plan\n\n1. **Phase 1**: 스키마 추가 (기존 데이터 유지)\n   - projects, changes 테이블 생성\n   - tasks에 change_id, stage 컬럼 추가 (nullable)\n\n2. **Phase 2**: 데이터 마이그레이션\n   - 기존 tasks에 stage='task' 설정\n   - 독립 태스크로 유지 (change_id=null)\n\n3. **Phase 3**: UI 전환\n   - 새 Flow UI 구현\n   - 기존 OpenSpec/Kanban 탭 UI 코멘트 처리 (코드 보존, 향후 재사용 가능)\n   - 독립 태스크는 별도 섹션 또는 필터로 접근\n\n4. **Rollback**:\n   - change_id, stage 컬럼만 제거하면 기존 상태 복원 가능\n\n## Open Questions", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1883", "text": "3. **Phase 3**: UI 전환\n   - 새 Flow UI 구현\n   - 기존 OpenSpec/Kanban 탭 UI 코멘트 처리 (코드 보존, 향후 재사용 가능)\n   - 독립 태스크는 별도 섹션 또는 필터로 접근\n\n4. **Rollback**:\n   - change_id, stage 컬럼만 제거하면 기존 상태 복원 가능\n\n## Open Questions\n\n- [ ] 독립 태스크(Change에 속하지 않는 태스크)를 어디에 표시할까?\n  - 옵션 A: 별도 \"Standalone Tasks\" 섹션\n  - 옵션 B: 특수 \"Misc\" Change로 그룹화\n  - 옵션 C: 상단 필터로 \"Change 없는 태스크만\" 보기", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/design.md", "file_name": "design.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1884", "text": "# Change: Flow 중심 UI 아키텍처로 전환\n\n## Why\n\n현재 ZyFlow는 OpenSpec과 Kanban이 별도 탭으로 분리되어 있어 \"Flow\"라는 이름에 걸맞은 **파이프라인 흐름 시각화**가 없음. 사용자가 `Spec → Changes → Task → Code → Test → Commit → Docs` 전체 흐름을 한눈에 파악하기 어려움.\n\n## What Changes", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1885", "text": "## What Changes\n\n### UI 구조 변경\n- 기존 OpenSpec/Kanban 탭 구조 비활성화 (코드는 코멘트 처리하여 보존)\n- 사이드바: 프로젝트 → Changes 트리 구조\n  - 프로젝트 클릭: 대시보드 (전체 Changes 요약)\n  - Change 클릭: 상세 뷰 (7단계 탭)\n  - \"기타 작업\": 독립 tasks 칸반\n- 2가지 메인 뷰:\n  - 프로젝트 대시보드: Changes 목록 + 진행률 요약\n  - Change 상세: 7단계 파이프라인 탭", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1886", "text": "### 데이터 구조 변경\n- `changes` 테이블 신규 추가 (Flow의 최상위 단위)\n- `tasks` 테이블 확장:\n  - `change_id`, `stage` 필드 추가\n  - `group_title`, `group_order`, `task_order` 필드 추가 (tasks.md 구조 보존)\n- OpenSpec 파일과 DB 간 동기화 로직 구현 (DB가 운영 데이터의 Single Source of Truth)", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1887", "text": "### 파이프라인 단계 (7단계)\n1. **Spec**: OpenSpec proposal.md 연동\n2. **Changes**: OpenSpec 변경 제안 목록 (proposal 상세)\n3. **Tasks**: 칸반/리스트 뷰 전환 가능\n   - 칸반 뷰: Todo/Doing/Done 드래그앤드롭\n   - 리스트 뷰: tasks.md 그룹/번호 구조 유지 (1.1, 1.2, 2.1...)\n4. **Code**: 코딩 작업 추적\n5. **Test**: 테스트 작업 추적\n6. **Commit**: 커밋/CI 상태\n7. **Docs**: 문서화 작업 추적\n\n## Impact", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1888", "text": "## Impact\n\n- Affected specs: `flow-dashboard` (신규 생성)\n- Affected code:\n  - `src/components/` - UI 컴포넌트 전면 재구성\n  - `src/server/` - API 엔드포인트 추가/수정\n  - `src/lib/db/` - 스키마 마이그레이션\n  - `src/mcp-server/` - MCP 도구 업데이트", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/proposal.md", "file_name": "proposal.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1889", "text": "# Tasks: Flow 중심 UI 아키텍처로 전환\n\n**완료일**: 2025-12-02\n\n## 1. 데이터베이스 스키마\n\n- [x] 1.1 `projects` 테이블 생성 (id, name, path, timestamps) - 기존 config.ts 사용\n- [x] 1.2 `changes` 테이블 생성 (id, project_id, title, spec_path, status, current_stage, progress)\n- [x] 1.3 `tasks` 테이블 수정 (change_id, stage 필드 추가)\n- [x] 1.4 `tasks` 테이블 확장 (group_title, group_order, task_order 필드 추가)\n- [x] 1.5 인덱스 및 FTS5 검색 테이블 업데이트\n- [x] 1.6 마이그레이션 스크립트 작성\n\n## 2. 백엔드 API", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1890", "text": "## 2. 백엔드 API\n\n- [x] 2.1 Projects API 구현 (CRUD) - 기존 API 재사용\n- [x] 2.2 Changes API 구현 (CRUD + 진행률 계산)\n- [x] 2.3 Tasks API 수정 (change_id, stage 필터링 지원)\n- [x] 2.4 OpenSpec 동기화 API 구현 (proposal.md, tasks.md 파싱)\n- [x] 2.5 Stage별 집계 API 구현\n- [x] 2.6 프로젝트별 change counts API (DB 기반 통합)\n- [x] 2.7 tasks.md 파서 수정 (group_title, group_order, task_order 추출)\n\n## 3. 타입 정의", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1891", "text": "## 3. 타입 정의\n\n- [x] 3.1 Stage, ChangeStatus, TaskStatus 타입 정의\n- [x] 3.2 Stage 타입 확장 (7단계: spec, changes, task, code, test, commit, docs)\n- [x] 3.3 Project, Change, Task 인터페이스 정의\n- [x] 3.4 Task 인터페이스 확장 (groupTitle, groupOrder, taskOrder 필드)\n- [x] 3.5 ChangeWithStages 집계 타입 정의\n- [x] 3.6 API 요청/응답 타입 정의\n\n## 4. UI 레이아웃", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1892", "text": "## 4. UI 레이아웃\n\n- [x] 4.1 MainLayout 컴포넌트 수정 (사이드바 + 메인 영역)\n- [x] 4.2 FlowSidebar 리팩토링 (프로젝트 → Changes 트리 구조)\n- [x] 4.3 선택 상태 관리 (project | change | standalone-tasks)\n- [x] 4.4 \"기타 작업\" 항목 추가 (독립 tasks용)\n\n## 5. 프로젝트 대시보드\n\n- [x] 5.1 ProjectDashboard 컴포넌트 구현\n- [x] 5.2 Changes 요약 카드 (진행중/완료/전체)\n- [x] 5.3 Change별 진행률 목록\n- [x] 5.4 최근 활동 표시", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1893", "text": "## 5. 프로젝트 대시보드\n\n- [x] 5.1 ProjectDashboard 컴포넌트 구현\n- [x] 5.2 Changes 요약 카드 (진행중/완료/전체)\n- [x] 5.3 Change별 진행률 목록\n- [x] 5.4 최근 활동 표시\n\n## 6. Change 상세 뷰\n\n- [x] 6.1 ChangeDetail 컴포넌트 구현 (기존 ChangeItem 기반)\n- [x] 6.2 PipelineBar 7단계로 확장\n- [x] 6.3 Changes 탭 구현 (OpenSpec proposal 상세)\n- [x] 6.4 각 Stage별 콘텐츠 컴포넌트 수정\n\n## 7. Tasks 탭 (칸반/리스트 뷰)", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1894", "text": "## 7. Tasks 탭 (칸반/리스트 뷰)\n\n- [x] 7.1 TasksTab 컴포넌트 구현 (뷰 전환 지원)\n- [x] 7.2 KanbanView 컴포넌트 구현 (Todo/Doing/Done)\n- [x] 7.3 ListView 컴포넌트 구현 (그룹/번호 구조)\n- [x] 7.4 뷰 전환 토글 버튼\n- [x] 7.5 드래그앤드롭 지원 (칸반)\n\n## 8. 상태 관리", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1895", "text": "## 8. 상태 관리\n\n- [x] 8.1 useProjectsAllData 훅 사용\n- [x] 8.2 useFlowChanges 훅 구현\n- [x] 8.3 useFlowTasks 훅 구현\n- [x] 8.4 useFlowChangeCounts 훅 - DB 기반으로 통합\n- [x] 8.5 선택 상태 관리 (selectedItem: {type, id})\n\n## 9. OpenSpec 연동", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1896", "text": "## 9. OpenSpec 연동\n\n- [x] 9.1 OpenSpec 파일 스캐너 구현 (changes 디렉토리)\n- [x] 9.2 proposal.md 파서 구현\n- [x] 9.3 tasks.md 파서 구현 (체크박스 → 상태)\n- [x] 9.4 tasks.md 파서 확장 (그룹 제목/순서 추출)\n- [x] 9.5 동기화 로직 구현 (OpenSpec → DB)\n- [x] 9.6 Spec 내용 조회 API 구현\n\n## 10. 독립 Tasks (기타 작업)\n\n- [x] 10.1 StandaloneTasks 컴포넌트 구현\n- [x] 10.2 칸반 뷰 (change_id = null인 tasks)\n- [x] 10.3 Task 추가/수정/삭제 기능", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1897", "text": "## 10. 독립 Tasks (기타 작업)\n\n- [x] 10.1 StandaloneTasks 컴포넌트 구현\n- [x] 10.2 칸반 뷰 (change_id = null인 tasks)\n- [x] 10.3 Task 추가/수정/삭제 기능\n\n## 11. MCP 서버 업데이트\n\n- [x] 11.1 zyflow_list_projects 도구 추가\n- [x] 11.2 zyflow_list_changes 도구 수정\n- [x] 11.3 zyflow_get_change_detail 도구 추가 (stages 포함)\n- [x] 11.4 task 관련 도구 수정 (change_id, stage 지원)\n\n## 12. 테스트", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1898", "text": "## 11. MCP 서버 업데이트\n\n- [x] 11.1 zyflow_list_projects 도구 추가\n- [x] 11.2 zyflow_list_changes 도구 수정\n- [x] 11.3 zyflow_get_change_detail 도구 추가 (stages 포함)\n- [x] 11.4 task 관련 도구 수정 (change_id, stage 지원)\n\n## 12. 테스트\n\n- [x] 12.1 DB 스키마 테스트\n- [x] 12.2 API 엔드포인트 테스트\n- [x] 12.3 OpenSpec 파서 테스트\n- [x] 12.4 UI 컴포넌트 테스트\n\n## 13. 문서화", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1899", "text": "## 12. 테스트\n\n- [x] 12.1 DB 스키마 테스트\n- [x] 12.2 API 엔드포인트 테스트\n- [x] 12.3 OpenSpec 파서 테스트\n- [x] 12.4 UI 컴포넌트 테스트\n\n## 13. 문서화\n\n- [x] 13.1 README.md 업데이트\n- [x] 13.2 API 문서 작성\n- [x] 13.3 MCP 도구 사용법 업데이트\n\n## 14. 추가 기능 (Git 워크플로우 통합)", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1900", "text": "## 13. 문서화\n\n- [x] 13.1 README.md 업데이트\n- [x] 13.2 API 문서 작성\n- [x] 13.3 MCP 도구 사용법 업데이트\n\n## 14. 추가 기능 (Git 워크플로우 통합)\n\n- [x] 14.1 Change 브랜치 관리 기능\n- [x] 14.2 커밋 워크플로우 구현\n- [x] 14.3 푸시 및 PR 생성 기능\n- [x] 14.4 충돌 감지 및 해결 기능\n- [x] 14.5 원격 상태 동기화\n\n## 15. Change Log & Replay 시스템", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1901", "text": "- [x] 14.1 Change 브랜치 관리 기능\n- [x] 14.2 커밋 워크플로우 구현\n- [x] 14.3 푸시 및 PR 생성 기능\n- [x] 14.4 충돌 감지 및 해결 기능\n- [x] 14.5 원격 상태 동기화\n\n## 15. Change Log & Replay 시스템\n\n- [x] 15.1 이벤트 로깅 시스템 구현\n- [x] 15.2 리플레이 엔진 구현\n- [x] 15.3 롤백 포인트 관리\n- [x] 15.4 이벤트 검색 및 통계\n- [x] 15.5 MCP 도구 연동\n\n---\n\n## 진행률 요약", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1902", "text": "## 15. Change Log & Replay 시스템\n\n- [x] 15.1 이벤트 로깅 시스템 구현\n- [x] 15.2 리플레이 엔진 구현\n- [x] 15.3 롤백 포인트 관리\n- [x] 15.4 이벤트 검색 및 통계\n- [x] 15.5 MCP 도구 연동\n\n---\n\n## 진행률 요약\n\n### 전체 진행률: 100% (70/70 항목 완료) ✅\n\n### 카테고리별 진행률:\n1. **데이터베이스 스키마**: 100% (6/6) ✅\n2. **백엔드 API**: 100% (7/7) ✅\n3.", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1903", "text": "---\n\n## 진행률 요약\n\n### 전체 진행률: 100% (70/70 항목 완료) ✅\n\n### 카테고리별 진행률:\n1. **데이터베이스 스키마**: 100% (6/6) ✅\n2. **백엔드 API**: 100% (7/7) ✅\n3. **타입 정의**: 100% (6/6) ✅\n4. **UI 레이아웃**: 100% (4/4) ✅\n5. **프로젝트 대시보드**: 100% (4/4) ✅\n6. **Change 상세 뷰**: 100% (4/4) ✅\n7. **Tasks 탭**: 100% (5/5) ✅\n8.", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1904", "text": "**타입 정의**: 100% (6/6) ✅\n4. **UI 레이아웃**: 100% (4/4) ✅\n5. **프로젝트 대시보드**: 100% (4/4) ✅\n6. **Change 상세 뷰**: 100% (4/4) ✅\n7. **Tasks 탭**: 100% (5/5) ✅\n8. **상태 관리**: 100% (5/5) ✅\n9. **OpenSpec 연동**: 100% (6/6) ✅\n10. **독립 Tasks**: 100% (3/3) ✅\n11. **MCP 서버**: 100% (4/4) ✅\n12. **테스트**: 100% (4/4) ✅\n13. **문서화**: 100% (3/3) ✅\n14.", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1905", "text": "**상태 관리**: 100% (5/5) ✅\n9. **OpenSpec 연동**: 100% (6/6) ✅\n10. **독립 Tasks**: 100% (3/3) ✅\n11. **MCP 서버**: 100% (4/4) ✅\n12. **테스트**: 100% (4/4) ✅\n13. **문서화**: 100% (3/3) ✅\n14. **Git 워크플로우**: 100% (5/5) ✅\n15. **Change Log & Replay**: 100% (5/5) ✅", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1906", "text": "### 완료된 주요 성과:\n- Flow 중심 UI 아키텍처로 성공적으로 전환 완료\n- 7단계 파이프라인 (spec → changes → task → code → test → commit → docs) 구현\n- Git 워크플로우 통합으로 개발 생산성 향상\n- Change Log & Replay 시스템으로 운영 안정성 강화\n- MCP 서버 확장으로 AI 도구 연동 기능 강화\n- UI 컴포넌트 테스트 (stages, PipelineBar, StageContent) 구현\n- REST API 문서 작성 (docs/api.md)\n- MCP 도구 사용 가이드 작성 (docs/mcp-tools.md)\n- README.md 업데이트 (7단계 파이프라인, 프로젝트 구조, 기술 스택)", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/tasks.md", "file_name": "tasks.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1907", "text": "# Flow Dashboard Specification\n\n## ADDED Requirements\n\n### Requirement: Project Selection\nThe system SHALL provide a sidebar for selecting projects (repositories).\n\n#### Scenario: Display project list\n- **WHEN** the user opens the application\n- **THEN** the sidebar SHALL display all registered projects\n- **AND** the currently selected project SHALL be highlighted\n\n#### Scenario: Switch project\n- **WHEN** the user clicks a different project in the sidebar\n- **THEN** the main content SHALL update to show that project's changes\n- **AND** the sidebar selection SHALL reflect the new project\n\n#### Scenario: Add new project\n- **WHEN** the user clicks the \"Add Project\" button\n- **THEN** a modal SHALL appear to enter project path\n- **AND** upon confirmation, the project SHALL be added to the list\n\n### Requirement: Change List Display\nThe system SHALL display all Changes for the selected project in an accordion format.", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/specs/flow-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1908", "text": "#### Scenario: Switch project\n- **WHEN** the user clicks a different project in the sidebar\n- **THEN** the main content SHALL update to show that project's changes\n- **AND** the sidebar selection SHALL reflect the new project\n\n#### Scenario: Add new project\n- **WHEN** the user clicks the \"Add Project\" button\n- **THEN** a modal SHALL appear to enter project path\n- **AND** upon confirmation, the project SHALL be added to the list\n\n### Requirement: Change List Display\nThe system SHALL display all Changes for the selected project in an accordion format.\n\n#### Scenario: Display collapsed change\n- **WHEN** a Change is in collapsed state (Level 1)\n- **THEN** the system SHALL show: title, current stage badge, and progress bar in a single row\n\n#### Scenario: Display expanded change\n- **WHEN** a Change is in expanded state (Level 2)\n- **THEN** the system SHALL show: pipeline bar with 6 stages and tab content for the selected stage", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/specs/flow-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1909", "text": "### Requirement: Change List Display\nThe system SHALL display all Changes for the selected project in an accordion format.\n\n#### Scenario: Display collapsed change\n- **WHEN** a Change is in collapsed state (Level 1)\n- **THEN** the system SHALL show: title, current stage badge, and progress bar in a single row\n\n#### Scenario: Display expanded change\n- **WHEN** a Change is in expanded state (Level 2)\n- **THEN** the system SHALL show: pipeline bar with 6 stages and tab content for the selected stage\n\n#### Scenario: Toggle change expansion\n- **WHEN** the user clicks on a collapsed Change\n- **THEN** the Change SHALL expand to show Level 2 content\n- **WHEN** the user clicks on an expanded Change header\n- **THEN** the Change SHALL collapse to Level 1\n\n### Requirement: Pipeline Visualization\nThe system SHALL visualize the 6-stage pipeline (Spec, Task, Code, Test, Commit, Docs) as a horizontal bar.", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/specs/flow-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1910", "text": "#### Scenario: Toggle change expansion\n- **WHEN** the user clicks on a collapsed Change\n- **THEN** the Change SHALL expand to show Level 2 content\n- **WHEN** the user clicks on an expanded Change header\n- **THEN** the Change SHALL collapse to Level 1\n\n### Requirement: Pipeline Visualization\nThe system SHALL visualize the 6-stage pipeline (Spec, Task, Code, Test, Commit, Docs) as a horizontal bar.\n\n#### Scenario: Display stage status\n- **WHEN** displaying the pipeline bar\n- **THEN** each stage SHALL show its status: completed (✓), in-progress (●), or pending (○)\n- **AND** stages with tasks SHALL show completion count (e.g., \"3/5\")\n\n#### Scenario: Stage as tab selector\n- **WHEN** the user clicks a stage in the pipeline bar\n- **THEN** the tab content below SHALL update to show that stage's details\n- **AND** the clicked stage SHALL be visually highlighted as active", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/specs/flow-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1911", "text": "#### Scenario: Display stage status\n- **WHEN** displaying the pipeline bar\n- **THEN** each stage SHALL show its status: completed (✓), in-progress (●), or pending (○)\n- **AND** stages with tasks SHALL show completion count (e.g., \"3/5\")\n\n#### Scenario: Stage as tab selector\n- **WHEN** the user clicks a stage in the pipeline bar\n- **THEN** the tab content below SHALL update to show that stage's details\n- **AND** the clicked stage SHALL be visually highlighted as active\n\n### Requirement: Stage Tab Content\nThe system SHALL display stage-specific content in a tabbed panel below the pipeline bar.\n\n#### Scenario: Display Spec tab\n- **WHEN** the Spec tab is selected\n- **THEN** the system SHALL display the proposal summary from OpenSpec\n- **AND** provide a link to view the full spec document", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/specs/flow-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1912", "text": "#### Scenario: Stage as tab selector\n- **WHEN** the user clicks a stage in the pipeline bar\n- **THEN** the tab content below SHALL update to show that stage's details\n- **AND** the clicked stage SHALL be visually highlighted as active\n\n### Requirement: Stage Tab Content\nThe system SHALL display stage-specific content in a tabbed panel below the pipeline bar.\n\n#### Scenario: Display Spec tab\n- **WHEN** the Spec tab is selected\n- **THEN** the system SHALL display the proposal summary from OpenSpec\n- **AND** provide a link to view the full spec document\n\n#### Scenario: Display Task/Code/Test/Docs tabs\n- **WHEN** any of Task, Code, Test, or Docs tabs is selected\n- **THEN** the system SHALL display the list of tasks for that stage\n- **AND** each task SHALL show its status and title\n\n#### Scenario: Display Commit tab\n- **WHEN** the Commit tab is selected\n- **THEN** the system SHALL display commit/CI status for the Change", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/specs/flow-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1913", "text": "#### Scenario: Display Task/Code/Test/Docs tabs\n- **WHEN** any of Task, Code, Test, or Docs tabs is selected\n- **THEN** the system SHALL display the list of tasks for that stage\n- **AND** each task SHALL show its status and title\n\n#### Scenario: Display Commit tab\n- **WHEN** the Commit tab is selected\n- **THEN** the system SHALL display commit/CI status for the Change\n\n### Requirement: Task Detail View\nThe system SHALL provide a Level 3 detail view for tasks when content is extensive.\n\n#### Scenario: Open task detail modal\n- **WHEN** the user clicks \"View Details\" on a task\n- **THEN** a modal SHALL appear showing full task description and metadata\n\n#### Scenario: Navigate to task detail page\n- **WHEN** task content is too large for a modal\n- **THEN** the \"View Details\" action SHALL navigate to a dedicated task page\n- **AND** the page SHALL provide a back navigation to return to the Flow view", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/specs/flow-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1914", "text": "### Requirement: Task Detail View\nThe system SHALL provide a Level 3 detail view for tasks when content is extensive.\n\n#### Scenario: Open task detail modal\n- **WHEN** the user clicks \"View Details\" on a task\n- **THEN** a modal SHALL appear showing full task description and metadata\n\n#### Scenario: Navigate to task detail page\n- **WHEN** task content is too large for a modal\n- **THEN** the \"View Details\" action SHALL navigate to a dedicated task page\n- **AND** the page SHALL provide a back navigation to return to the Flow view\n\n### Requirement: Smart Default Expansion\nThe system SHALL automatically expand Changes and tabs based on current progress.\n\n#### Scenario: Auto-expand in-progress change\n- **WHEN** the user loads the Flow view\n- **THEN** Changes with status \"in-progress\" SHALL be automatically expanded\n\n#### Scenario: Auto-select current stage tab\n- **WHEN** a Change is expanded\n- **THEN** the tab for the current_stage SHALL be automatically selected", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/specs/flow-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1915", "text": "### Requirement: Smart Default Expansion\nThe system SHALL automatically expand Changes and tabs based on current progress.\n\n#### Scenario: Auto-expand in-progress change\n- **WHEN** the user loads the Flow view\n- **THEN** Changes with status \"in-progress\" SHALL be automatically expanded\n\n#### Scenario: Auto-select current stage tab\n- **WHEN** a Change is expanded\n- **THEN** the tab for the current_stage SHALL be automatically selected\n\n### Requirement: OpenSpec Synchronization\nThe system SHALL synchronize Changes from OpenSpec files to the database.\n\n#### Scenario: Manual sync trigger\n- **WHEN** the user clicks the \"Sync from OpenSpec\" button\n- **THEN** the system SHALL scan the openspec/changes directory\n- **AND** create or update Changes in the database\n\n#### Scenario: Parse tasks.md\n- **WHEN** synchronizing a Change with tasks.md\n- **THEN** the system SHALL parse checkbox items (- [ ] / - [x])\n- **AND** create corresponding tasks with appropriate status", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/specs/flow-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1916", "text": "### Requirement: OpenSpec Synchronization\nThe system SHALL synchronize Changes from OpenSpec files to the database.\n\n#### Scenario: Manual sync trigger\n- **WHEN** the user clicks the \"Sync from OpenSpec\" button\n- **THEN** the system SHALL scan the openspec/changes directory\n- **AND** create or update Changes in the database\n\n#### Scenario: Parse tasks.md\n- **WHEN** synchronizing a Change with tasks.md\n- **THEN** the system SHALL parse checkbox items (- [ ] / - [x])\n- **AND** create corresponding tasks with appropriate status\n\n### Requirement: Standalone Tasks Support\nThe system SHALL support tasks not associated with any Change (legacy kanban compatibility).\n\n#### Scenario: Display standalone tasks\n- **WHEN** the project has tasks with change_id=null\n- **THEN** the system SHALL display them in a separate \"Standalone Tasks\" section", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/specs/flow-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1917", "text": "#### Scenario: Parse tasks.md\n- **WHEN** synchronizing a Change with tasks.md\n- **THEN** the system SHALL parse checkbox items (- [ ] / - [x])\n- **AND** create corresponding tasks with appropriate status\n\n### Requirement: Standalone Tasks Support\nThe system SHALL support tasks not associated with any Change (legacy kanban compatibility).\n\n#### Scenario: Display standalone tasks\n- **WHEN** the project has tasks with change_id=null\n- **THEN** the system SHALL display them in a separate \"Standalone Tasks\" section\n\n#### Scenario: Create standalone task\n- **WHEN** the user creates a task without selecting a Change\n- **THEN** the task SHALL be created with change_id=null\n- **AND** appear in the Standalone Tasks section", "metadata": {"file_path": "openspec/changes/archive/refactor-flow-ui-architecture/specs/flow-dashboard/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "1918", "text": "# ZyFlow MCP Server 구현\n\n## 개요\n\nZyFlow를 MCP(Model Context Protocol) 서버로 구현하여 Claude Code에서 OpenSpec 태스크를 자동으로 실행할 수 있게 한다.\n\n## 배경\n\n### 현재 문제점\n\n1. **CLI Spawn 방식의 한계**\n   - 매번 새 Claude 세션 시작 → 컨텍스트 0에서 시작\n   - CLAUDE.md, 코드 구조 등 매번 다시 읽어야 함\n   - 토큰 사용량 ~12,000/태스크 (비효율)\n\n2. **프롬프트 복사 방식의 한계**\n   - 자동화 불가능 (수동 복사/붙여넣기)\n   - 연속 태스크 실행 불편", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1919", "text": "2. **프롬프트 복사 방식의 한계**\n   - 자동화 불가능 (수동 복사/붙여넣기)\n   - 연속 태스크 실행 불편\n\n3. **Hook 기반 방식의 한계**\n   - 세션 경계에 의존 (세션 종료 후 다음 세션에서 이어받기)\n   - 컨텍스트 단절\n   - 복잡한 흐름 (디버깅 어려움)\n\n### MCP 방식의 장점", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1920", "text": "3. **Hook 기반 방식의 한계**\n   - 세션 경계에 의존 (세션 종료 후 다음 세션에서 이어받기)\n   - 컨텍스트 단절\n   - 복잡한 흐름 (디버깅 어려움)\n\n### MCP 방식의 장점\n\n- **컨텍스트 유지**: 기존 Claude 세션에서 MCP Tool 호출 → 100% 컨텍스트 보존\n- **자동화**: \"다음 5개 태스크 실행해줘\" 한 마디로 연속 실행\n- **토큰 효율**: ~2,500 토큰/태스크 (5배 절감)\n- **안전성**: 사용자가 직접 승인 (dangerously-skip-permissions 불필요)\n\n## 설계\n\n### MCP Tools 정의", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1921", "text": "## 설계\n\n### MCP Tools 정의\n\n```typescript\ntools: [\n  {\n    name: \"zyflow_list_changes\",\n    description: \"현재 프로젝트의 OpenSpec 변경 제안 목록 조회\",\n    inputSchema: {\n      type: \"object\",\n      properties: {},\n      required: []\n    }\n  },\n  {\n    name: \"zyflow_get_tasks\",\n    description: \"특정 변경 제안의 태스크 목록 조회\",\n    inputSchema: {\n      type: \"object\",\n      properties: {\n        changeId: { type: \"string\", description: \"변경 제안 ID\" }\n      },\n      required: [\"changeId\"]\n    }\n  },\n  {\n    name: \"zyflow_get_next_task\",\n    description: \"다음 미완료 태스크와 실행에 필요한 컨텍스트 조회\",\n    inputSchema: {\n      type: \"object\",\n      properties: {\n        changeId: { type: \"string\",", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1922", "text": "inputSchema: {\n      type: \"object\",\n      properties: {\n        changeId: { type: \"string\", description: \"변경 제안 ID\" }\n      },\n      required: [\"changeId\"]\n    }\n  },\n  {\n    name: \"zyflow_get_next_task\",\n    description: \"다음 미완료 태스크와 실행에 필요한 컨텍스트 조회\",\n    inputSchema: {\n      type: \"object\",\n      properties: {\n        changeId: { type: \"string\", description: \"변경 제안 ID\" }\n      },\n      required: [\"changeId\"]\n    }\n  },\n  {\n    name: \"zyflow_get_task_context\",\n    description: \"특정 태스크 실행에 필요한 상세 컨텍스트 조회\",\n    inputSchema: {\n      type: \"object\",\n      properties: {\n        changeId: { type: \"string\", description: \"변경 제안 ID\" },\n        taskId: { type: \"string\",", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1923", "text": "description: \"변경 제안 ID\" }\n      },\n      required: [\"changeId\"]\n    }\n  },\n  {\n    name: \"zyflow_get_task_context\",\n    description: \"특정 태스크 실행에 필요한 상세 컨텍스트 조회\",\n    inputSchema: {\n      type: \"object\",\n      properties: {\n        changeId: { type: \"string\", description: \"변경 제안 ID\" },\n        taskId: { type: \"string\", description: \"태스크 ID\" }\n      },\n      required: [\"changeId\", \"taskId\"]\n    }\n  },\n  {\n    name: \"zyflow_mark_complete\",\n    description: \"태스크를 완료로 표시\",\n    inputSchema: {\n      type: \"object\",\n      properties: {\n        changeId: { type: \"string\", description: \"변경 제안 ID\" },\n        taskId: { type: \"string\", description: \"태스크 ID\" }\n      },\n      required: [\"changeId\",", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1924", "text": "description: \"태스크 ID\" }\n      },\n      required: [\"changeId\", \"taskId\"]\n    }\n  },\n  {\n    name: \"zyflow_mark_complete\",\n    description: \"태스크를 완료로 표시\",\n    inputSchema: {\n      type: \"object\",\n      properties: {\n        changeId: { type: \"string\", description: \"변경 제안 ID\" },\n        taskId: { type: \"string\", description: \"태스크 ID\" }\n      },\n      required: [\"changeId\", \"taskId\"]\n    }\n  },\n  {\n    name: \"zyflow_mark_incomplete\",\n    description: \"태스크를 미완료로 표시 (되돌리기)\",\n    inputSchema: {\n      type: \"object\",\n      properties: {\n        changeId: { type: \"string\", description: \"변경 제안 ID\" },\n        taskId: { type: \"string\", description: \"태스크 ID\" }\n      },\n      required: [\"changeId\",", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1925", "text": "required: [\"changeId\", \"taskId\"]\n    }\n  },\n  {\n    name: \"zyflow_mark_incomplete\",\n    description: \"태스크를 미완료로 표시 (되돌리기)\",\n    inputSchema: {\n      type: \"object\",\n      properties: {\n        changeId: { type: \"string\", description: \"변경 제안 ID\" },\n        taskId: { type: \"string\", description: \"태스크 ID\" }\n      },\n      required: [\"changeId\", \"taskId\"]\n    }\n  }\n]\n```\n\n### 컨텍스트 반환 형식", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1926", "text": "description: \"변경 제안 ID\" },\n        taskId: { type: \"string\", description: \"태스크 ID\" }\n      },\n      required: [\"changeId\", \"taskId\"]\n    }\n  }\n]\n```\n\n### 컨텍스트 반환 형식\n\n`zyflow_get_next_task` 응답:\n```json\n{\n  \"task\": {\n    \"id\": \"task-1-1\",\n    \"title\": \"FixedExpenseTemplate 타입 정의\",\n    \"completed\": false,\n    \"group\": \"1. 데이터 모델 정의\"\n  },\n  \"context\": {\n    \"changeId\": \"auto-generate-fixed-expense-transactions\",\n    \"proposal\": \"## 개요\\n고정 지출 자동 생성...\",\n    \"relatedSpec\": \"## FixedExpense Spec\\n...\",\n    \"suggestedFiles\": [\n      \"src/types/expense.ts\",\n      \"src/services/expenseService.ts\"\n    ],\n    \"completedTasks\": [\"task-0-1\", \"task-0-2\"],\n    \"remainingTasks\": 8\n  }\n}\n```", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1927", "text": "### 아키텍처\n\n```\n┌─────────────────────────────────────────────┐\n│  Claude Code (기존 세션)                     │\n│                                             │\n│  사용자: \"다음 태스크 해줘\"                   │\n│  Claude: MCP Tool 호출                       │\n└──────────────┬──────────────────────────────┘\n               │ stdio (JSON-RPC)\n               ▼\n┌──────────────────────────────────────────────┐\n│  ZyFlow MCP Server                           │\n│  ├─ index.ts (서버 초기화, Tool 라우팅)       │\n│  ├─ tools.ts (6개 Tool 핸들러)               │\n│  └─ context.", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1928", "text": "ts (서버 초기화, Tool 라우팅)       │\n│  ├─ tools.ts (6개 Tool 핸들러)               │\n│  └─ context.ts (컨텍스트 수집 로직)           │\n└──────────────┬───────────────────────────────┘\n               │\n               ▼\n┌──────────────────────────────────────────────┐\n│  기존 모듈 재사용                             │\n│  ├─ server/parser.ts (tasks.md 파싱)         │\n│  └─ server/config.ts (프로젝트 설정)          │\n└──────────────────────────────────────────────┘\n```\n\n### 파일 구조", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1929", "text": "ts (tasks.md 파싱)         │\n│  └─ server/config.ts (프로젝트 설정)          │\n└──────────────────────────────────────────────┘\n```\n\n### 파일 구조\n\n```\n/Users/hansoo./ZELLYY/zyflow/\n├── mcp-server/\n│   ├── index.ts          # MCP 서버 진입점\n│   ├── tools.ts          # Tool 핸들러들\n│   └── context.ts        # 컨텍스트 생성 로직\n├── server/\n│   ├── parser.ts         # 기존 파서 (재사용)\n│   ├── config.ts         # 기존 설정 (재사용)\n│   └── index.ts          # Express API (웹 UI용 유지)\n├── dist/\n│   └── mcp-server/       # 빌드 결과물\n└── package.json          # MCP 빌드 스크립트 추가\n```\n\n## 구현 계획", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1930", "text": "## 구현 계획\n\n### Phase 1: MCP 서버 기본 구조\n- @modelcontextprotocol/sdk 설치\n- mcp-server/index.ts 생성 (Server 초기화)\n- stdio 전송 설정\n\n### Phase 2: Tool 핸들러 구현\n- zyflow_list_changes 구현\n- zyflow_get_tasks 구현\n- zyflow_get_next_task 구현\n- zyflow_get_task_context 구현\n- zyflow_mark_complete 구현\n- zyflow_mark_incomplete 구현\n\n### Phase 3: 컨텍스트 수집 로직\n- proposal.md 읽기\n- 관련 spec 파일 찾기\n- 완료/미완료 태스크 집계\n- 관련 파일 추천 로직", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1931", "text": "### Phase 3: 컨텍스트 수집 로직\n- proposal.md 읽기\n- 관련 spec 파일 찾기\n- 완료/미완료 태스크 집계\n- 관련 파일 추천 로직\n\n### Phase 4: 빌드 및 배포\n- package.json에 빌드 스크립트 추가\n- TypeScript 빌드 설정\n- Claude Code settings 등록 가이드 작성\n\n### Phase 5: 테스트 및 문서화\n- 각 Tool 단위 테스트\n- Claude Code에서 통합 테스트\n- README 작성\n\n## Claude Code 연동 설정\n\n구현 완료 후 `~/.claude/settings.json`에 추가:", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1932", "text": "### Phase 4: 빌드 및 배포\n- package.json에 빌드 스크립트 추가\n- TypeScript 빌드 설정\n- Claude Code settings 등록 가이드 작성\n\n### Phase 5: 테스트 및 문서화\n- 각 Tool 단위 테스트\n- Claude Code에서 통합 테스트\n- README 작성\n\n## Claude Code 연동 설정\n\n구현 완료 후 `~/.claude/settings.json`에 추가:\n\n```json\n{\n  \"mcpServers\": {\n    \"zyflow\": {\n      \"command\": \"node\",\n      \"args\": [\"/Users/hansoo./ZELLYY/zyflow/dist/mcp-server/index.js\"],\n      \"env\": {\n        \"ZYFLOW_PROJECT\": \"/Users/hansoo./ZELLYY/zellyy-money\"\n      }\n    }\n  }\n}\n```\n\n## 사용 예시\n\n```\n사용자: \"auto-generate-fixed-expense-transactions 의 다음 태스크 해줘\"", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1933", "text": "```json\n{\n  \"mcpServers\": {\n    \"zyflow\": {\n      \"command\": \"node\",\n      \"args\": [\"/Users/hansoo./ZELLYY/zyflow/dist/mcp-server/index.js\"],\n      \"env\": {\n        \"ZYFLOW_PROJECT\": \"/Users/hansoo./ZELLYY/zellyy-money\"\n      }\n    }\n  }\n}\n```\n\n## 사용 예시\n\n```\n사용자: \"auto-generate-fixed-expense-transactions 의 다음 태스크 해줘\"\n\nClaude: [MCP Tool 호출: zyflow_get_next_task]\n\n        다음 태스크를 확인했습니다:\n        - Task: FixedExpenseTemplate 타입 정의\n        - Group: 1. 데이터 모델 정의\n\n        proposal을 확인하니 고정 지출 템플릿에는 다음 필드가 필요합니다:\n        - name, amount, category, frequency, nextDate...\n\n        src/types/expense.ts에 타입을 추가하겠습니다.", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1934", "text": "Claude: [MCP Tool 호출: zyflow_get_next_task]\n\n        다음 태스크를 확인했습니다:\n        - Task: FixedExpenseTemplate 타입 정의\n        - Group: 1. 데이터 모델 정의\n\n        proposal을 확인하니 고정 지출 템플릿에는 다음 필드가 필요합니다:\n        - name, amount, category, frequency, nextDate...\n\n        src/types/expense.ts에 타입을 추가하겠습니다.\n\n        [파일 수정 진행...]\n\n        완료했습니다. 태스크를 완료로 표시할까요?\n\n사용자: \"응\"\n\nClaude: [MCP Tool 호출: zyflow_mark_complete]\n\n        태스크가 완료되었습니다. (3/12 완료)\n        다음 태스크를 진행할까요?\n```\n\n## 기존 코드 정리", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1935", "text": "[파일 수정 진행...]\n\n        완료했습니다. 태스크를 완료로 표시할까요?\n\n사용자: \"응\"\n\nClaude: [MCP Tool 호출: zyflow_mark_complete]\n\n        태스크가 완료되었습니다. (3/12 완료)\n        다음 태스크를 진행할까요?\n```\n\n## 기존 코드 정리\n\nMCP 서버 구현 후 제거할 수 있는 코드:\n- server/index.ts의 `/api/claude/*` 엔드포인트들\n- src/hooks/useClaude.ts\n- src/components/dashboard/ExecutionModal.tsx\n\n단, 웹 UI에서 진행상황 표시가 필요하면 별도 설계 필요.\n\n## 의존성\n\n```json\n{\n  \"dependencies\": {\n    \"@modelcontextprotocol/sdk\": \"^1.0.0\"\n  }\n}\n```", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1936", "text": "MCP 서버 구현 후 제거할 수 있는 코드:\n- server/index.ts의 `/api/claude/*` 엔드포인트들\n- src/hooks/useClaude.ts\n- src/components/dashboard/ExecutionModal.tsx\n\n단, 웹 UI에서 진행상황 표시가 필요하면 별도 설계 필요.\n\n## 의존성\n\n```json\n{\n  \"dependencies\": {\n    \"@modelcontextprotocol/sdk\": \"^1.0.0\"\n  }\n}\n```\n\n## 성공 기준", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1937", "text": "단, 웹 UI에서 진행상황 표시가 필요하면 별도 설계 필요.\n\n## 의존성\n\n```json\n{\n  \"dependencies\": {\n    \"@modelcontextprotocol/sdk\": \"^1.0.0\"\n  }\n}\n```\n\n## 성공 기준\n\n1. Claude Code에서 `zyflow_get_tasks` 호출 시 태스크 목록 반환\n2. `zyflow_get_next_task`로 컨텍스트 포함 태스크 정보 조회 가능\n3. `zyflow_mark_complete`로 tasks.md 파일 자동 업데이트\n4. 연속 태스크 실행 시 컨텍스트 유지 확인\n5. 토큰 사용량 5배 절감 검증", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/proposal.md", "file_name": "proposal.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1938", "text": "# ZyFlow MCP Server 태스크\n\n## 1. 프로젝트 설정\n\n- [x] @modelcontextprotocol/sdk 패키지 설치\n- [x] mcp-server 디렉토리 구조 생성\n- [x] tsconfig.json에 mcp-server 빌드 설정 추가\n- [x] package.json에 빌드 스크립트 추가 (build:mcp)\n\n## 2. MCP 서버 기본 구조\n\n- [x] mcp-server/index.ts 생성 (Server 초기화)\n- [x] stdio 전송 설정\n- [x] Tool 라우팅 기본 구조 작성\n- [x] 에러 핸들링 설정\n\n## 3. Tool 핸들러 구현", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1939", "text": "## 2. MCP 서버 기본 구조\n\n- [x] mcp-server/index.ts 생성 (Server 초기화)\n- [x] stdio 전송 설정\n- [x] Tool 라우팅 기본 구조 작성\n- [x] 에러 핸들링 설정\n\n## 3. Tool 핸들러 구현\n\n- [x] zyflow_list_changes 구현 (변경 제안 목록)\n- [x] zyflow_get_tasks 구현 (태스크 목록)\n- [x] zyflow_get_next_task 구현 (다음 미완료 태스크 + 컨텍스트)\n- [x] zyflow_get_task_context 구현 (상세 컨텍스트)\n- [x] zyflow_mark_complete 구현 (완료 표시)\n- [x] zyflow_mark_incomplete 구현 (미완료로 되돌리기)", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1940", "text": "## 4. 컨텍스트 수집 로직\n\n- [x] mcp-server/context.ts 생성\n- [x] proposal.md 읽기 로직\n- [x] 관련 spec 파일 찾기 로직\n- [x] 완료/미완료 태스크 집계\n- [x] 관련 파일 추천 로직 (선택적)\n\n## 5. 기존 모듈 통합\n\n- [x] server/parser.ts를 mcp-server에서 import 가능하도록 조정\n- [x] server/config.ts 재사용 확인\n- [x] 공통 타입 정의 분리 (types.ts)\n\n## 6. 빌드 및 배포\n\n- [x] TypeScript 빌드 테스트\n- [x] dist/mcp-server/index.js 생성 확인\n- [x] 실행 권한 설정 (필요시)\n\n## 7. Claude Code 연동", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1941", "text": "- [x] server/parser.ts를 mcp-server에서 import 가능하도록 조정\n- [x] server/config.ts 재사용 확인\n- [x] 공통 타입 정의 분리 (types.ts)\n\n## 6. 빌드 및 배포\n\n- [x] TypeScript 빌드 테스트\n- [x] dist/mcp-server/index.js 생성 확인\n- [x] 실행 권한 설정 (필요시)\n\n## 7. Claude Code 연동\n\n- [x] ~/.claude/settings.json 설정 가이드 작성\n- [x] 환경변수 설정 방법 문서화\n- [x] MCP 서버 등록 테스트\n\n## 8. 테스트", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1942", "text": "## 6. 빌드 및 배포\n\n- [x] TypeScript 빌드 테스트\n- [x] dist/mcp-server/index.js 생성 확인\n- [x] 실행 권한 설정 (필요시)\n\n## 7. Claude Code 연동\n\n- [x] ~/.claude/settings.json 설정 가이드 작성\n- [x] 환경변수 설정 방법 문서화\n- [x] MCP 서버 등록 테스트\n\n## 8. 테스트\n\n- [x] zyflow_list_changes 테스트\n- [x] zyflow_get_tasks 테스트\n- [x] zyflow_get_next_task 테스트\n- [x] zyflow_mark_complete 테스트\n- [x] 연속 태스크 실행 테스트\n- [x] 에러 케이스 테스트\n\n## 9. 문서화 및 정리", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1943", "text": "## 8. 테스트\n\n- [x] zyflow_list_changes 테스트\n- [x] zyflow_get_tasks 테스트\n- [x] zyflow_get_next_task 테스트\n- [x] zyflow_mark_complete 테스트\n- [x] 연속 태스크 실행 테스트\n- [x] 에러 케이스 테스트\n\n## 9. 문서화 및 정리\n\n- [x] README.md에 MCP 서버 사용법 추가\n- [x] 기존 CLI spawn 코드 제거 (선택적) - 웹 UI 기능 유지를 위해 보존\n- [x] 웹 UI 연동 방안 검토 (선택적) - MCP와 웹 UI 병행 사용 가능", "metadata": {"file_path": "openspec/changes/archive/zyflow-mcp-server/tasks.md", "file_name": "tasks.md", "creation_date": "2025-11-27", "last_modified_date": "2025-11-27"}}
{"id": "1944", "text": "# Change: claude-flow 외부 의존성 제거\n\n## Why\n\nclaude-flow@alpha는 외부 npm 패키지로, Claude Agent SDK 도입 후 더 이상 필요하지 않습니다. 공식 SDK를 사용하면 외부 의존성을 줄이고 유지보수성이 향상됩니다.\n\n## What Changes", "metadata": {"file_path": "openspec/changes/refactor-remove-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "1945", "text": "claude-flow@alpha는 외부 npm 패키지로, Claude Agent SDK 도입 후 더 이상 필요하지 않습니다. 공식 SDK를 사용하면 외부 의존성을 줄이고 유지보수성이 향상됩니다.\n\n## What Changes\n\n- **server/claude-flow/** 디렉토리 제거 (executor, consensus 관련 코드)\n- **server/routes/claude-flow.ts** 제거 또는 간소화\n- **src/hooks/useClaudeFlowExecution.ts** 제거\n- **src/hooks/useSwarm.ts** 제거\n- **.claude/settings.json** hooks에서 `claude-flow@alpha` 호출 제거\n- **src/config/api.ts**에서 claudeFlow 엔드포인트 제거\n- **src/types/index.ts**에서 claude-flow 관련 타입 제거\n- **BREAKING**: `/api/claude-flow/*` API 엔드포인트 제거", "metadata": {"file_path": "openspec/changes/refactor-remove-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "1946", "text": "## Impact\n\n- Affected specs: `claude-flow-execution` (제거 또는 아카이브)\n- Affected code:\n  - `server/claude-flow/`\n  - `server/routes/claude-flow.ts`\n  - `src/hooks/useClaudeFlowExecution.ts`\n  - `src/hooks/useSwarm.ts`\n  - `src/config/api.ts`\n  - `src/types/index.ts`\n  - `.claude/settings.json`\n  \n## Migration\n\n1. claude-flow 기반 Swarm 기능 → Claude Agent SDK 기반으로 마이그레이션 (필요시)\n2. 기존 hooks → 단순 스크립트 또는 제거\n3. prompt-builder.ts는 자체 구현이므로 유지 가능", "metadata": {"file_path": "openspec/changes/refactor-remove-claude-flow/proposal.md", "file_name": "proposal.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "1947", "text": "# Tasks: claude-flow 외부 의존성 제거\n\n## 1. 서버 코드 정리\n\n### 1.1 server/claude-flow 디렉토리\n- [x] executor.ts 제거 (이미 제거된 경우 확인)\n- [x] consensus.ts 제거 (이미 제거된 경우 확인)\n- [x] types.ts 정리 (prompt-builder 의존성만 유지)\n- [x] 불필요한 파일 제거\n\n### 1.2 라우트 정리\n- [x] server/routes/claude-flow.ts 제거 또는 간소화\n- [x] server/app.ts에서 claude-flow 라우터 참조 제거\n\n## 2. 프론트엔드 코드 정리", "metadata": {"file_path": "openspec/changes/refactor-remove-claude-flow/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "1948", "text": "### 1.2 라우트 정리\n- [x] server/routes/claude-flow.ts 제거 또는 간소화\n- [x] server/app.ts에서 claude-flow 라우터 참조 제거\n\n## 2. 프론트엔드 코드 정리\n\n### 2.1 Hooks 제거\n- [x] src/hooks/useClaudeFlowExecution.ts 제거\n- [x] src/hooks/useSwarm.ts 정리 (하위 호환 래퍼 유지)\n- [x] 관련 import 정리\n\n### 2.2 설정 및 타입 정리\n- [x] src/config/api.ts에서 claudeFlow 엔드포인트 제거\n- [x] src/types/index.ts에서 claude-flow 관련 타입 유지 (UI 호환성)\n\n## 3. Claude SDK 설정 정리", "metadata": {"file_path": "openspec/changes/refactor-remove-claude-flow/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "1949", "text": "### 2.2 설정 및 타입 정리\n- [x] src/config/api.ts에서 claudeFlow 엔드포인트 제거\n- [x] src/types/index.ts에서 claude-flow 관련 타입 유지 (UI 호환성)\n\n## 3. Claude SDK 설정 정리\n\n### 3.1 settings.json 수정\n- [x] .claude/settings.json에서 claude-flow@alpha 호출 제거\n- [x] hooks 단순화 또는 제거\n- [x] 필요한 hooks만 유지\n\n## 4. 스펙 정리\n\n- [x] openspec/specs/claude-flow-execution/ 아카이브 또는 제거\n- [x] 관련 스펙 문서 정리\n\n## 5. 테스트 및 검증", "metadata": {"file_path": "openspec/changes/refactor-remove-claude-flow/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "1950", "text": "### 3.1 settings.json 수정\n- [x] .claude/settings.json에서 claude-flow@alpha 호출 제거\n- [x] hooks 단순화 또는 제거\n- [x] 필요한 hooks만 유지\n\n## 4. 스펙 정리\n\n- [x] openspec/specs/claude-flow-execution/ 아카이브 또는 제거\n- [x] 관련 스펙 문서 정리\n\n## 5. 테스트 및 검증\n\n- [x] prompt-builder.test.ts 수정 (필요시)\n- [x] npm run lint 통과 확인\n- [x] npm run test 통과 확인\n- [x] npm run build 성공 확인\n\n## 6. 문서화\n\n- [x] CLAUDE.md 업데이트 (claude-flow 참조 제거) - 이미 없음\n- [x] 마이그레이션 완료 문서 작성", "metadata": {"file_path": "openspec/changes/refactor-remove-claude-flow/tasks.md", "file_name": "tasks.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "1951", "text": "## REMOVED Requirements\n\n### Requirement: claude-flow Swarm 실행 API\n\n**Reason**: Claude Agent SDK 도입으로 외부 claude-flow 패키지가 더 이상 필요하지 않음\n\n**Migration**: \n- Swarm 멀티에이전트 기능이 필요한 경우 Claude Agent SDK 기반으로 재구현\n- 기존 API 호출 코드는 새 API로 마이그레이션 필요\n\n#### Scenario: API 엔드포인트 제거\n- **WHEN** `/api/claude-flow/*` 엔드포인트 호출 시\n- **THEN** 404 Not Found 반환 (엔드포인트 제거됨)\n\n### Requirement: claude-flow 스트리밍\n\n**Reason**: 외부 의존성 제거\n\n**Migration**: 필요시 Vercel AI SDK 스트리밍으로 대체", "metadata": {"file_path": "openspec/changes/refactor-remove-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "1952", "text": "#### Scenario: API 엔드포인트 제거\n- **WHEN** `/api/claude-flow/*` 엔드포인트 호출 시\n- **THEN** 404 Not Found 반환 (엔드포인트 제거됨)\n\n### Requirement: claude-flow 스트리밍\n\n**Reason**: 외부 의존성 제거\n\n**Migration**: 필요시 Vercel AI SDK 스트리밍으로 대체\n\n#### Scenario: 스트리밍 엔드포인트 제거\n- **WHEN** `/api/claude-flow/stream/:id` 호출 시\n- **THEN** 404 Not Found 반환 (엔드포인트 제거됨)\n\n### Requirement: claude-flow 상태 관리\n\n**Reason**: 외부 의존성 제거\n\n**Migration**: 필요시 자체 상태 관리 구현", "metadata": {"file_path": "openspec/changes/refactor-remove-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "1953", "text": "**Migration**: 필요시 Vercel AI SDK 스트리밍으로 대체\n\n#### Scenario: 스트리밍 엔드포인트 제거\n- **WHEN** `/api/claude-flow/stream/:id` 호출 시\n- **THEN** 404 Not Found 반환 (엔드포인트 제거됨)\n\n### Requirement: claude-flow 상태 관리\n\n**Reason**: 외부 의존성 제거\n\n**Migration**: 필요시 자체 상태 관리 구현\n\n#### Scenario: 상태 API 제거\n- **WHEN** `/api/claude-flow/status/:id` 호출 시\n- **THEN** 404 Not Found 반환 (엔드포인트 제거됨)\n\n### Requirement: claude-flow 프롬프트 생성\n\n**Reason**: prompt-builder는 자체 구현이므로 유지, claude-flow 의존 부분만 제거", "metadata": {"file_path": "openspec/changes/refactor-remove-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "1954", "text": "**Reason**: 외부 의존성 제거\n\n**Migration**: 필요시 자체 상태 관리 구현\n\n#### Scenario: 상태 API 제거\n- **WHEN** `/api/claude-flow/status/:id` 호출 시\n- **THEN** 404 Not Found 반환 (엔드포인트 제거됨)\n\n### Requirement: claude-flow 프롬프트 생성\n\n**Reason**: prompt-builder는 자체 구현이므로 유지, claude-flow 의존 부분만 제거\n\n**Migration**: OpenSpecPromptBuilder 클래스는 유지\n\n#### Scenario: 프롬프트 빌더 유지\n- **WHEN** OpenSpec 변경에 대한 프롬프트 생성 필요 시\n- **THEN** OpenSpecPromptBuilder 클래스 사용 (기존과 동일)", "metadata": {"file_path": "openspec/changes/refactor-remove-claude-flow/specs/claude-flow-execution/spec.md", "file_name": "spec.md", "creation_date": "2026-01-08", "last_modified_date": "2026-01-08"}}
{"id": "1955", "text": "# agent-orchestration Specification\n\n## Purpose\nTBD - created by archiving change add-langgraph-deepagents-integration. Update Purpose after archive.\n## Requirements\n### Requirement: Agent Execution Engine\n\n시스템은 OpenSpec 변경 제안의 태스크를 LangGraph 기반 에이전트로 자동 실행할 수 있어야 합니다(SHALL).\n\n#### Scenario: 변경 제안 자동 실행\n- **GIVEN** 승인된 OpenSpec 변경 제안이 있을 때\n- **WHEN** 사용자가 에이전트 실행을 시작하면\n- **THEN** LangGraph StateGraph가 생성되어 태스크를 순차 실행합니다\n- **AND** 각 태스크 완료 시 tasks.md가 자동 업데이트됩니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1956", "text": "#### Scenario: 변경 제안 자동 실행\n- **GIVEN** 승인된 OpenSpec 변경 제안이 있을 때\n- **WHEN** 사용자가 에이전트 실행을 시작하면\n- **THEN** LangGraph StateGraph가 생성되어 태스크를 순차 실행합니다\n- **AND** 각 태스크 완료 시 tasks.md가 자동 업데이트됩니다\n\n#### Scenario: 실행 중단 및 재개\n- **GIVEN** 에이전트가 태스크를 실행 중일 때\n- **WHEN** 사용자가 실행을 중단하면\n- **THEN** 현재 상태가 체크포인트로 저장됩니다\n- **AND** 나중에 해당 체크포인트에서 재개할 수 있습니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1957", "text": "#### Scenario: 실행 중단 및 재개\n- **GIVEN** 에이전트가 태스크를 실행 중일 때\n- **WHEN** 사용자가 실행을 중단하면\n- **THEN** 현재 상태가 체크포인트로 저장됩니다\n- **AND** 나중에 해당 체크포인트에서 재개할 수 있습니다\n\n#### Scenario: 에러 복구\n- **GIVEN** 태스크 실행 중 에러가 발생했을 때\n- **WHEN** 에러가 감지되면\n- **THEN** 실행이 중단되고 에러 상태가 기록됩니다\n- **AND** 사용자는 에러를 확인하고 재시도하거나 건너뛸 수 있습니다\n\n---\n\n### Requirement: OpenSpec Context Injection\n\nDeepAgent는 OpenSpec 문서(proposal, design, spec)를 컨텍스트로 활용해야 합니다(MUST).", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1958", "text": "---\n\n### Requirement: OpenSpec Context Injection\n\nDeepAgent는 OpenSpec 문서(proposal, design, spec)를 컨텍스트로 활용해야 합니다(MUST).\n\n#### Scenario: 컨텍스트 자동 주입\n- **GIVEN** OpenSpec 변경 제안이 선택되었을 때\n- **WHEN** DeepAgent가 초기화되면\n- **THEN** proposal.md 내용이 시스템 프롬프트에 포함됩니다\n- **AND** design.md 결정사항이 참조 가능합니다\n- **AND** spec.md 시나리오가 검증 기준으로 활용됩니다\n\n#### Scenario: 태스크별 컨텍스트\n- **GIVEN** 특정 태스크를 실행할 때\n- **WHEN** 태스크에 관련 파일이 지정되어 있으면\n- **THEN** 해당 파일들이 에이전트 컨텍스트에 포함됩니다\n\n---", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1959", "text": "#### Scenario: 태스크별 컨텍스트\n- **GIVEN** 특정 태스크를 실행할 때\n- **WHEN** 태스크에 관련 파일이 지정되어 있으면\n- **THEN** 해당 파일들이 에이전트 컨텍스트에 포함됩니다\n\n---\n\n### Requirement: Agent Session Management\n\n시스템은 에이전트 실행 세션을 관리해야 합니다(SHALL).\n\n#### Scenario: 세션 생성\n- **GIVEN** 사용자가 에이전트 실행을 요청할 때\n- **WHEN** 실행이 시작되면\n- **THEN** 고유한 세션 ID가 생성됩니다\n- **AND** 세션 상태가 \"running\"으로 설정됩니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1960", "text": "---\n\n### Requirement: Agent Session Management\n\n시스템은 에이전트 실행 세션을 관리해야 합니다(SHALL).\n\n#### Scenario: 세션 생성\n- **GIVEN** 사용자가 에이전트 실행을 요청할 때\n- **WHEN** 실행이 시작되면\n- **THEN** 고유한 세션 ID가 생성됩니다\n- **AND** 세션 상태가 \"running\"으로 설정됩니다\n\n#### Scenario: 세션 상태 조회\n- **GIVEN** 실행 중인 세션이 있을 때\n- **WHEN** 상태를 조회하면\n- **THEN** 현재 진행 중인 태스크, 완료된 태스크 수, 전체 진행률이 반환됩니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1961", "text": "#### Scenario: 세션 상태 조회\n- **GIVEN** 실행 중인 세션이 있을 때\n- **WHEN** 상태를 조회하면\n- **THEN** 현재 진행 중인 태스크, 완료된 태스크 수, 전체 진행률이 반환됩니다\n\n#### Scenario: 프로젝트당 세션 제한\n- **GIVEN** 프로젝트에 이미 실행 중인 세션이 있을 때\n- **WHEN** 새로운 실행을 시작하려고 하면\n- **THEN** 기존 세션을 중단하거나 대기할지 선택할 수 있습니다\n\n---\n\n### Requirement: Real-time Execution Streaming\n\n에이전트 실행 과정을 실시간으로 스트리밍해야 합니다(SHALL).", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1962", "text": "#### Scenario: 프로젝트당 세션 제한\n- **GIVEN** 프로젝트에 이미 실행 중인 세션이 있을 때\n- **WHEN** 새로운 실행을 시작하려고 하면\n- **THEN** 기존 세션을 중단하거나 대기할지 선택할 수 있습니다\n\n---\n\n### Requirement: Real-time Execution Streaming\n\n에이전트 실행 과정을 실시간으로 스트리밍해야 합니다(SHALL).\n\n#### Scenario: SSE 스트리밍\n- **GIVEN** 에이전트가 실행 중일 때\n- **WHEN** 클라이언트가 스트림에 연결하면\n- **THEN** 실행 이벤트(task_start, task_complete, log, error)가 실시간으로 전송됩니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1963", "text": "---\n\n### Requirement: Real-time Execution Streaming\n\n에이전트 실행 과정을 실시간으로 스트리밍해야 합니다(SHALL).\n\n#### Scenario: SSE 스트리밍\n- **GIVEN** 에이전트가 실행 중일 때\n- **WHEN** 클라이언트가 스트림에 연결하면\n- **THEN** 실행 이벤트(task_start, task_complete, log, error)가 실시간으로 전송됩니다\n\n#### Scenario: LLM 응답 스트리밍\n- **GIVEN** 에이전트가 LLM에 요청 중일 때\n- **WHEN** LLM이 응답을 생성하면\n- **THEN** 토큰 단위로 응답이 스트리밍됩니다\n\n---\n\n### Requirement: Agent MCP Tools\n\nClaude Code에서 에이전트를 제어할 수 있는 MCP 도구를 제공해야 합니다(SHALL).", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1964", "text": "#### Scenario: LLM 응답 스트리밍\n- **GIVEN** 에이전트가 LLM에 요청 중일 때\n- **WHEN** LLM이 응답을 생성하면\n- **THEN** 토큰 단위로 응답이 스트리밍됩니다\n\n---\n\n### Requirement: Agent MCP Tools\n\nClaude Code에서 에이전트를 제어할 수 있는 MCP 도구를 제공해야 합니다(SHALL).\n\n#### Scenario: MCP로 실행 시작\n- **GIVEN** Claude Code에서 ZyFlow MCP 서버에 연결되어 있을 때\n- **WHEN** zyflow_execute_change 도구를 호출하면\n- **THEN** 지정된 변경 제안의 에이전트 실행이 시작됩니다\n- **AND** 세션 ID가 반환됩니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1965", "text": "---\n\n### Requirement: Agent MCP Tools\n\nClaude Code에서 에이전트를 제어할 수 있는 MCP 도구를 제공해야 합니다(SHALL).\n\n#### Scenario: MCP로 실행 시작\n- **GIVEN** Claude Code에서 ZyFlow MCP 서버에 연결되어 있을 때\n- **WHEN** zyflow_execute_change 도구를 호출하면\n- **THEN** 지정된 변경 제안의 에이전트 실행이 시작됩니다\n- **AND** 세션 ID가 반환됩니다\n\n#### Scenario: MCP로 상태 조회\n- **GIVEN** 실행 중인 세션이 있을 때\n- **WHEN** zyflow_get_agent_status 도구를 호출하면\n- **THEN** 현재 세션의 상태와 진행률이 반환됩니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1966", "text": "#### Scenario: MCP로 상태 조회\n- **GIVEN** 실행 중인 세션이 있을 때\n- **WHEN** zyflow_get_agent_status 도구를 호출하면\n- **THEN** 현재 세션의 상태와 진행률이 반환됩니다\n\n#### Scenario: MCP로 실행 제어\n- **GIVEN** 실행 중인 세션이 있을 때\n- **WHEN** zyflow_stop_agent 또는 zyflow_resume_agent를 호출하면\n- **THEN** 세션이 중단되거나 재개됩니다\n\n---\n\n### Requirement: Agent UI Integration\n\nZyFlow UI에서 에이전트와 상호작용할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1967", "text": "#### Scenario: MCP로 실행 제어\n- **GIVEN** 실행 중인 세션이 있을 때\n- **WHEN** zyflow_stop_agent 또는 zyflow_resume_agent를 호출하면\n- **THEN** 세션이 중단되거나 재개됩니다\n\n---\n\n### Requirement: Agent UI Integration\n\nZyFlow UI에서 에이전트와 상호작용할 수 있어야 합니다(SHALL).\n\n#### Scenario: 채팅 인터페이스\n- **GIVEN** 에이전트 페이지에 접근했을 때\n- **WHEN** 사용자가 메시지를 입력하면\n- **THEN** 에이전트가 응답하고 대화 기록이 표시됩니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1968", "text": "---\n\n### Requirement: Agent UI Integration\n\nZyFlow UI에서 에이전트와 상호작용할 수 있어야 합니다(SHALL).\n\n#### Scenario: 채팅 인터페이스\n- **GIVEN** 에이전트 페이지에 접근했을 때\n- **WHEN** 사용자가 메시지를 입력하면\n- **THEN** 에이전트가 응답하고 대화 기록이 표시됩니다\n\n#### Scenario: 실행 상태 시각화\n- **GIVEN** 에이전트가 실행 중일 때\n- **WHEN** UI를 확인하면\n- **THEN** 현재 진행 중인 태스크, Todo 리스트, 생성된 파일 목록이 표시됩니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1969", "text": "#### Scenario: 실행 상태 시각화\n- **GIVEN** 에이전트가 실행 중일 때\n- **WHEN** UI를 확인하면\n- **THEN** 현재 진행 중인 태스크, Todo 리스트, 생성된 파일 목록이 표시됩니다\n\n#### Scenario: 파일 뷰어\n- **GIVEN** 에이전트가 파일을 생성/수정했을 때\n- **WHEN** 파일 목록에서 파일을 선택하면\n- **THEN** 구문 강조가 적용된 파일 내용이 표시됩니다\n\n---\n\n### Requirement: Multi-CLI Support\n\n시스템은 다양한 CLI 기반 에이전트를 지원해야 합니다(SHALL).", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1970", "text": "#### Scenario: 파일 뷰어\n- **GIVEN** 에이전트가 파일을 생성/수정했을 때\n- **WHEN** 파일 목록에서 파일을 선택하면\n- **THEN** 구문 강조가 적용된 파일 내용이 표시됩니다\n\n---\n\n### Requirement: Multi-CLI Support\n\n시스템은 다양한 CLI 기반 에이전트를 지원해야 합니다(SHALL).\n\n#### Scenario: CLI 선택\n- **GIVEN** 에이전트 페이지에 접근했을 때\n- **WHEN** 사용자가 CLI를 선택하면\n- **THEN** Claude Code, Gemini CLI, Qwen CLI, Kilo Code, OpenCode 중 하나를 선택할 수 있습니다\n- **AND** 선택한 CLI가 기본값으로 저장됩니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1971", "text": "---\n\n### Requirement: Multi-CLI Support\n\n시스템은 다양한 CLI 기반 에이전트를 지원해야 합니다(SHALL).\n\n#### Scenario: CLI 선택\n- **GIVEN** 에이전트 페이지에 접근했을 때\n- **WHEN** 사용자가 CLI를 선택하면\n- **THEN** Claude Code, Gemini CLI, Qwen CLI, Kilo Code, OpenCode 중 하나를 선택할 수 있습니다\n- **AND** 선택한 CLI가 기본값으로 저장됩니다\n\n#### Scenario: CLI 프로세스 관리\n- **GIVEN** CLI가 선택되어 있을 때\n- **WHEN** 에이전트 실행이 시작되면\n- **THEN** 해당 CLI 프로세스가 스폰되어 MCP 서버에 연결됩니다\n- **AND** stdin/stdout 스트리밍이 UI에 표시됩니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1972", "text": "#### Scenario: CLI 프로세스 관리\n- **GIVEN** CLI가 선택되어 있을 때\n- **WHEN** 에이전트 실행이 시작되면\n- **THEN** 해당 CLI 프로세스가 스폰되어 MCP 서버에 연결됩니다\n- **AND** stdin/stdout 스트리밍이 UI에 표시됩니다\n\n#### Scenario: 커스텀 CLI 등록\n- **GIVEN** 사용자가 다른 MCP 호환 CLI를 사용하려고 할 때\n- **WHEN** 커스텀 CLI 등록 다이얼로그를 열면\n- **THEN** 명령어, 인자, MCP 플래그를 설정할 수 있습니다\n- **AND** 등록된 CLI가 선택 목록에 추가됩니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1973", "text": "#### Scenario: 커스텀 CLI 등록\n- **GIVEN** 사용자가 다른 MCP 호환 CLI를 사용하려고 할 때\n- **WHEN** 커스텀 CLI 등록 다이얼로그를 열면\n- **THEN** 명령어, 인자, MCP 플래그를 설정할 수 있습니다\n- **AND** 등록된 CLI가 선택 목록에 추가됩니다\n\n#### Scenario: CLI 전환\n- **GIVEN** 에이전트 세션이 종료된 상태에서\n- **WHEN** 다른 CLI를 선택하면\n- **THEN** 다음 실행부터 새로운 CLI가 사용됩니다\n- **AND** 기존 MCP 연결 설정은 그대로 유지됩니다", "metadata": {"file_path": "openspec/specs/agent-orchestration/spec.md", "file_name": "spec.md", "creation_date": "2025-12-11", "last_modified_date": "2025-12-11"}}
{"id": "1974", "text": "# alert-system Specification\n\n## Purpose\nTBD - created by archiving change add-alert-system. Update Purpose after archive.\n## Requirements\n### Requirement: Webhook 수신 및 파싱\n\n시스템은 외부 서비스의 Webhook을 수신하고 파싱할 수 있어야 합니다(SHALL).\n\n#### Scenario: GitHub Workflow 웹훅 수신\n- **GIVEN** GitHub Actions에서 workflow가 완료되었을 때\n- **WHEN** `/api/alerts/webhooks/github` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 workflow 실행 결과를 파싱하여 Alert로 저장합니다\n- **AND** 실패한 경우 severity를 `critical`로 설정합니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1975", "text": "#### Scenario: GitHub Workflow 웹훅 수신\n- **GIVEN** GitHub Actions에서 workflow가 완료되었을 때\n- **WHEN** `/api/alerts/webhooks/github` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 workflow 실행 결과를 파싱하여 Alert로 저장합니다\n- **AND** 실패한 경우 severity를 `critical`로 설정합니다\n\n#### Scenario: Vercel 배포 웹훅 수신\n- **GIVEN** Vercel에서 배포가 완료되었을 때\n- **WHEN** `/api/alerts/webhooks/vercel` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 배포 결과를 파싱하여 Alert로 저장합니다\n- **AND** 에러 배포는 severity를 `critical`로 설정합니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1976", "text": "#### Scenario: Vercel 배포 웹훅 수신\n- **GIVEN** Vercel에서 배포가 완료되었을 때\n- **WHEN** `/api/alerts/webhooks/vercel` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 배포 결과를 파싱하여 Alert로 저장합니다\n- **AND** 에러 배포는 severity를 `critical`로 설정합니다\n\n#### Scenario: Sentry 이슈 웹훅 수신\n- **GIVEN** Sentry에서 새 이슈가 생성되었을 때\n- **WHEN** `/api/alerts/webhooks/sentry` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 이슈 정보를 파싱하여 Alert로 저장합니다\n- **AND** level에 따라 severity를 매핑합니다 (fatal→critical, error→warning)", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1977", "text": "#### Scenario: Sentry 이슈 웹훅 수신\n- **GIVEN** Sentry에서 새 이슈가 생성되었을 때\n- **WHEN** `/api/alerts/webhooks/sentry` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 이슈 정보를 파싱하여 Alert로 저장합니다\n- **AND** level에 따라 severity를 매핑합니다 (fatal→critical, error→warning)\n\n#### Scenario: Supabase 웹훅 수신\n- **GIVEN** Supabase에서 이벤트가 발생했을 때\n- **WHEN** `/api/alerts/webhooks/supabase` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 이벤트를 파싱하여 Alert로 저장합니다\n\n---\n\n### Requirement: Alert 관리 API", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1978", "text": "#### Scenario: Supabase 웹훅 수신\n- **GIVEN** Supabase에서 이벤트가 발생했을 때\n- **WHEN** `/api/alerts/webhooks/supabase` 엔드포인트로 웹훅이 전달되면\n- **THEN** 시스템은 이벤트를 파싱하여 Alert로 저장합니다\n\n---\n\n### Requirement: Alert 관리 API\n\n시스템은 Alert를 조회, 필터링, 상태 변경할 수 있어야 합니다(SHALL).\n\n#### Scenario: Alert 목록 조회\n- **GIVEN** 시스템에 저장된 Alert가 있을 때\n- **WHEN** `GET /api/alerts`를 호출하면\n- **THEN** Alert 목록이 반환됩니다\n- **AND** source, severity, status로 필터링할 수 있습니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1979", "text": "---\n\n### Requirement: Alert 관리 API\n\n시스템은 Alert를 조회, 필터링, 상태 변경할 수 있어야 합니다(SHALL).\n\n#### Scenario: Alert 목록 조회\n- **GIVEN** 시스템에 저장된 Alert가 있을 때\n- **WHEN** `GET /api/alerts`를 호출하면\n- **THEN** Alert 목록이 반환됩니다\n- **AND** source, severity, status로 필터링할 수 있습니다\n\n#### Scenario: Alert 상세 조회\n- **GIVEN** 특정 Alert ID가 있을 때\n- **WHEN** `GET /api/alerts/:id`를 호출하면\n- **THEN** Alert 상세 정보가 반환됩니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1980", "text": "#### Scenario: Alert 상세 조회\n- **GIVEN** 특정 Alert ID가 있을 때\n- **WHEN** `GET /api/alerts/:id`를 호출하면\n- **THEN** Alert 상세 정보가 반환됩니다\n\n#### Scenario: Alert 상태 변경\n- **GIVEN** pending 상태의 Alert가 있을 때\n- **WHEN** `PATCH /api/alerts/:id`로 status를 `resolved`로 변경하면\n- **THEN** Alert 상태가 업데이트됩니다\n- **AND** resolved_at 타임스탬프가 기록됩니다\n\n#### Scenario: Alert 무시\n- **GIVEN** pending 상태의 Alert가 있을 때\n- **WHEN** `POST /api/alerts/:id/ignore`를 호출하면\n- **THEN** Alert 상태가 `ignored`로 변경됩니다\n\n---\n\n### Requirement: Agent 분석\n\n시스템은 AI Agent를 통해 Alert를 자동 분석할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1981", "text": "#### Scenario: Alert 무시\n- **GIVEN** pending 상태의 Alert가 있을 때\n- **WHEN** `POST /api/alerts/:id/ignore`를 호출하면\n- **THEN** Alert 상태가 `ignored`로 변경됩니다\n\n---\n\n### Requirement: Agent 분석\n\n시스템은 AI Agent를 통해 Alert를 자동 분석할 수 있어야 합니다(SHALL).\n\n#### Scenario: 자동 분석 수행\n- **GIVEN** 새로운 Alert가 생성되었을 때\n- **WHEN** 백그라운드 처리 프로세스가 실행되면\n- **THEN** Agent가 Alert 패턴을 분석합니다\n- **AND** rootCause, suggestedFix, confidence 등이 analysis 필드에 저장됩니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1982", "text": "시스템은 AI Agent를 통해 Alert를 자동 분석할 수 있어야 합니다(SHALL).\n\n#### Scenario: 자동 분석 수행\n- **GIVEN** 새로운 Alert가 생성되었을 때\n- **WHEN** 백그라운드 처리 프로세스가 실행되면\n- **THEN** Agent가 Alert 패턴을 분석합니다\n- **AND** rootCause, suggestedFix, confidence 등이 analysis 필드에 저장됩니다\n\n#### Scenario: 수동 분석 트리거\n- **GIVEN** pending 상태의 Alert가 있을 때\n- **WHEN** `POST /api/alerts/:id/analyze`를 호출하면\n- **THEN** Agent 분석이 즉시 실행됩니다\n- **AND** 분석 결과가 반환됩니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1983", "text": "#### Scenario: 수동 분석 트리거\n- **GIVEN** pending 상태의 Alert가 있을 때\n- **WHEN** `POST /api/alerts/:id/analyze`를 호출하면\n- **THEN** Agent 분석이 즉시 실행됩니다\n- **AND** 분석 결과가 반환됩니다\n\n#### Scenario: 소스별 패턴 분석\n- **GIVEN** GitHub workflow 실패 Alert가 있을 때\n- **WHEN** 분석을 수행하면\n- **THEN** 빌드 실패, 테스트 실패, 타입 에러 등 패턴을 식별합니다\n- **AND** 자동 수정 가능 여부(autoFixable)를 판단합니다\n\n---\n\n### Requirement: 위험도 평가\n\n시스템은 분석 결과를 바탕으로 위험도를 평가할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1984", "text": "---\n\n### Requirement: 위험도 평가\n\n시스템은 분석 결과를 바탕으로 위험도를 평가할 수 있어야 합니다(SHALL).\n\n#### Scenario: Low Risk 평가\n- **GIVEN** 린트 에러나 포맷팅 이슈 Alert일 때\n- **WHEN** 위험도를 평가하면\n- **THEN** `low` 위험도가 반환됩니다\n- **AND** `auto_approve` 권장 조치가 반환됩니다\n\n#### Scenario: Medium Risk 평가\n- **GIVEN** 일반적인 빌드 실패 Alert일 때\n- **WHEN** 위험도를 평가하면\n- **THEN** `medium` 위험도가 반환됩니다\n- **AND** `pr_with_review` 권장 조치가 반환됩니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1985", "text": "#### Scenario: Medium Risk 평가\n- **GIVEN** 일반적인 빌드 실패 Alert일 때\n- **WHEN** 위험도를 평가하면\n- **THEN** `medium` 위험도가 반환됩니다\n- **AND** `pr_with_review` 권장 조치가 반환됩니다\n\n#### Scenario: High Risk 평가\n- **GIVEN** 프로덕션 환경의 critical Alert일 때\n- **WHEN** 위험도를 평가하면\n- **THEN** `high` 위험도가 반환됩니다\n- **AND** `manual_review` 권장 조치가 반환됩니다\n\n---\n\n### Requirement: Auto-fix 실행\n\n시스템은 분석 결과에 따라 자동 수정을 시도할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1986", "text": "#### Scenario: High Risk 평가\n- **GIVEN** 프로덕션 환경의 critical Alert일 때\n- **WHEN** 위험도를 평가하면\n- **THEN** `high` 위험도가 반환됩니다\n- **AND** `manual_review` 권장 조치가 반환됩니다\n\n---\n\n### Requirement: Auto-fix 실행\n\n시스템은 분석 결과에 따라 자동 수정을 시도할 수 있어야 합니다(SHALL).\n\n#### Scenario: Workflow 재시도\n- **GIVEN** GitHub workflow 실패이고 autoFixAction이 `retry`일 때\n- **WHEN** auto-fix가 실행되면\n- **THEN** GitHub API를 통해 workflow를 재실행합니다\n- **AND** 결과가 resolution 필드에 기록됩니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1987", "text": "---\n\n### Requirement: Auto-fix 실행\n\n시스템은 분석 결과에 따라 자동 수정을 시도할 수 있어야 합니다(SHALL).\n\n#### Scenario: Workflow 재시도\n- **GIVEN** GitHub workflow 실패이고 autoFixAction이 `retry`일 때\n- **WHEN** auto-fix가 실행되면\n- **THEN** GitHub API를 통해 workflow를 재실행합니다\n- **AND** 결과가 resolution 필드에 기록됩니다\n\n#### Scenario: Vercel 재배포\n- **GIVEN** Vercel 배포 실패이고 autoFixAction이 `redeploy`일 때\n- **WHEN** auto-fix가 실행되면\n- **THEN** Vercel API를 통해 재배포를 트리거합니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1988", "text": "#### Scenario: Vercel 재배포\n- **GIVEN** Vercel 배포 실패이고 autoFixAction이 `redeploy`일 때\n- **WHEN** auto-fix가 실행되면\n- **THEN** Vercel API를 통해 재배포를 트리거합니다\n\n#### Scenario: Auto-fix 스킵\n- **GIVEN** 위험도가 `high`이거나 confidence가 낮을 때\n- **WHEN** auto-fix 판단을 수행하면\n- **THEN** auto-fix를 스킵하고 수동 검토를 권장합니다\n\n---\n\n### Requirement: Slack 알림\n\n시스템은 Slack으로 알림을 발송할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1989", "text": "#### Scenario: Auto-fix 스킵\n- **GIVEN** 위험도가 `high`이거나 confidence가 낮을 때\n- **WHEN** auto-fix 판단을 수행하면\n- **THEN** auto-fix를 스킵하고 수동 검토를 권장합니다\n\n---\n\n### Requirement: Slack 알림\n\n시스템은 Slack으로 알림을 발송할 수 있어야 합니다(SHALL).\n\n#### Scenario: Critical Alert 알림\n- **GIVEN** Slack 웹훅이 설정되어 있고 onCritical 규칙이 활성화되어 있을 때\n- **WHEN** critical severity Alert가 처리되면\n- **THEN** Slack으로 알림이 발송됩니다\n- **AND** Alert 상세 정보와 링크가 포함됩니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1990", "text": "시스템은 Slack으로 알림을 발송할 수 있어야 합니다(SHALL).\n\n#### Scenario: Critical Alert 알림\n- **GIVEN** Slack 웹훅이 설정되어 있고 onCritical 규칙이 활성화되어 있을 때\n- **WHEN** critical severity Alert가 처리되면\n- **THEN** Slack으로 알림이 발송됩니다\n- **AND** Alert 상세 정보와 링크가 포함됩니다\n\n#### Scenario: Auto-fix 완료 알림\n- **GIVEN** Slack 웹훅이 설정되어 있고 onAutofix 규칙이 활성화되어 있을 때\n- **WHEN** auto-fix가 성공적으로 완료되면\n- **THEN** Slack으로 완료 알림이 발송됩니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1991", "text": "#### Scenario: Auto-fix 완료 알림\n- **GIVEN** Slack 웹훅이 설정되어 있고 onAutofix 규칙이 활성화되어 있을 때\n- **WHEN** auto-fix가 성공적으로 완료되면\n- **THEN** Slack으로 완료 알림이 발송됩니다\n\n#### Scenario: 알림 테스트\n- **GIVEN** Slack 웹훅이 설정되어 있을 때\n- **WHEN** `POST /api/alerts/notification-config/test`를 호출하면\n- **THEN** 테스트 메시지가 Slack으로 발송됩니다\n\n---\n\n### Requirement: WebSocket 실시간 알림\n\n시스템은 WebSocket을 통해 실시간 알림을 전송할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1992", "text": "#### Scenario: 알림 테스트\n- **GIVEN** Slack 웹훅이 설정되어 있을 때\n- **WHEN** `POST /api/alerts/notification-config/test`를 호출하면\n- **THEN** 테스트 메시지가 Slack으로 발송됩니다\n\n---\n\n### Requirement: WebSocket 실시간 알림\n\n시스템은 WebSocket을 통해 실시간 알림을 전송할 수 있어야 합니다(SHALL).\n\n#### Scenario: Alert 생성 브로드캐스트\n- **GIVEN** WebSocket 연결이 활성화되어 있을 때\n- **WHEN** 새 Alert가 생성되면\n- **THEN** `alert.created` 이벤트가 브로드캐스트됩니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1993", "text": "---\n\n### Requirement: WebSocket 실시간 알림\n\n시스템은 WebSocket을 통해 실시간 알림을 전송할 수 있어야 합니다(SHALL).\n\n#### Scenario: Alert 생성 브로드캐스트\n- **GIVEN** WebSocket 연결이 활성화되어 있을 때\n- **WHEN** 새 Alert가 생성되면\n- **THEN** `alert.created` 이벤트가 브로드캐스트됩니다\n\n#### Scenario: Alert 처리 완료 브로드캐스트\n- **GIVEN** WebSocket 연결이 활성화되어 있을 때\n- **WHEN** Alert 처리가 완료되면\n- **THEN** `alert.processed` 이벤트가 브로드캐스트됩니다\n\n---\n\n### Requirement: Webhook 설정 관리\n\n시스템은 Webhook 엔드포인트 설정을 관리할 수 있어야 합니다(SHALL).", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1994", "text": "#### Scenario: Alert 처리 완료 브로드캐스트\n- **GIVEN** WebSocket 연결이 활성화되어 있을 때\n- **WHEN** Alert 처리가 완료되면\n- **THEN** `alert.processed` 이벤트가 브로드캐스트됩니다\n\n---\n\n### Requirement: Webhook 설정 관리\n\n시스템은 Webhook 엔드포인트 설정을 관리할 수 있어야 합니다(SHALL).\n\n#### Scenario: Webhook 생성\n- **GIVEN** 사용자가 새 Webhook을 추가하려고 할 때\n- **WHEN** `POST /api/alerts/webhook-configs`를 호출하면\n- **THEN** 고유한 endpoint URL과 secret이 생성됩니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1995", "text": "---\n\n### Requirement: Webhook 설정 관리\n\n시스템은 Webhook 엔드포인트 설정을 관리할 수 있어야 합니다(SHALL).\n\n#### Scenario: Webhook 생성\n- **GIVEN** 사용자가 새 Webhook을 추가하려고 할 때\n- **WHEN** `POST /api/alerts/webhook-configs`를 호출하면\n- **THEN** 고유한 endpoint URL과 secret이 생성됩니다\n\n#### Scenario: Webhook 활성화/비활성화\n- **GIVEN** 기존 Webhook 설정이 있을 때\n- **WHEN** enabled 상태를 변경하면\n- **THEN** 해당 Webhook의 수신이 활성화/비활성화됩니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1996", "text": "#### Scenario: Webhook 활성화/비활성화\n- **GIVEN** 기존 Webhook 설정이 있을 때\n- **WHEN** enabled 상태를 변경하면\n- **THEN** 해당 Webhook의 수신이 활성화/비활성화됩니다\n\n#### Scenario: Secret 재생성\n- **GIVEN** 기존 Webhook 설정이 있을 때\n- **WHEN** `POST /api/alerts/webhook-configs/:id/regenerate-secret`를 호출하면\n- **THEN** 새 secret이 생성되어 반환됩니다\n\n---\n\n### Requirement: UI 컴포넌트\n\n시스템은 Alert를 관리할 수 있는 UI를 제공해야 합니다(SHALL).", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1997", "text": "#### Scenario: Secret 재생성\n- **GIVEN** 기존 Webhook 설정이 있을 때\n- **WHEN** `POST /api/alerts/webhook-configs/:id/regenerate-secret`를 호출하면\n- **THEN** 새 secret이 생성되어 반환됩니다\n\n---\n\n### Requirement: UI 컴포넌트\n\n시스템은 Alert를 관리할 수 있는 UI를 제공해야 합니다(SHALL).\n\n#### Scenario: AlertCenter 표시\n- **GIVEN** 사용자가 Alerts 메뉴를 클릭했을 때\n- **WHEN** AlertCenter 컴포넌트가 렌더링되면\n- **THEN** Alert 목록과 통계가 표시됩니다\n- **AND** 필터 옵션이 제공됩니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1998", "text": "시스템은 Alert를 관리할 수 있는 UI를 제공해야 합니다(SHALL).\n\n#### Scenario: AlertCenter 표시\n- **GIVEN** 사용자가 Alerts 메뉴를 클릭했을 때\n- **WHEN** AlertCenter 컴포넌트가 렌더링되면\n- **THEN** Alert 목록과 통계가 표시됩니다\n- **AND** 필터 옵션이 제공됩니다\n\n#### Scenario: AlertDetail 표시\n- **GIVEN** 사용자가 특정 Alert를 클릭했을 때\n- **WHEN** AlertDetail 컴포넌트가 렌더링되면\n- **THEN** Alert 상세 정보가 표시됩니다\n- **AND** Analyze, Auto Process 버튼이 제공됩니다", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "1999", "text": "#### Scenario: AlertDetail 표시\n- **GIVEN** 사용자가 특정 Alert를 클릭했을 때\n- **WHEN** AlertDetail 컴포넌트가 렌더링되면\n- **THEN** Alert 상세 정보가 표시됩니다\n- **AND** Analyze, Auto Process 버튼이 제공됩니다\n\n#### Scenario: AlertSettings 표시\n- **GIVEN** 사용자가 Settings 버튼을 클릭했을 때\n- **WHEN** AlertSettings 컴포넌트가 렌더링되면\n- **THEN** Webhook 설정과 Notification 설정이 표시됩니다\n\n---", "metadata": {"file_path": "openspec/specs/alert-system/spec.md", "file_name": "spec.md", "creation_date": "2026-01-04", "last_modified_date": "2026-01-04"}}
{"id": "2000", "text": "# diagram-generator Specification\n\n## Purpose\nTBD - created by archiving change add-gitdiagram-integration. Update Purpose after archive.\n## Requirements\n### Requirement: Diagram Generation from Repository\n\n시스템은 로컬 저장소 경로를 입력받아 Mermaid.js 형식의 시스템 아키텍처 다이어그램을 생성해야 한다(SHALL).\n\n#### Scenario: 프로젝트 다이어그램 생성 성공\n\n- **GIVEN** 유효한 로컬 저장소 경로\n- **WHEN** `diagram_generate` MCP 도구가 호출되면\n- **THEN** 파일 트리와 README를 분석하여 Mermaid 다이어그램 코드를 반환한다\n- **AND** 다이어그램의 각 컴포넌트는 실제 파일/디렉토리 경로와 매핑된다\n\n#### Scenario: 대규모 저장소 토큰 제한", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2001", "text": "#### Scenario: 대규모 저장소 토큰 제한\n\n- **GIVEN** 파일 트리가 50,000 토큰을 초과하는 저장소\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** 주요 디렉토리만 포함하여 토큰 제한 내에서 처리한다\n- **AND** 제외된 항목에 대한 경고를 반환한다\n\n#### Scenario: README가 없는 저장소\n\n- **GIVEN** README.md 파일이 없는 저장소\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** 파일 트리만으로 다이어그램을 생성한다\n- **AND** 정확도가 낮을 수 있다는 경고를 포함한다\n\n---\n\n### Requirement: Three-Stage Prompt Pipeline", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2002", "text": "#### Scenario: README가 없는 저장소\n\n- **GIVEN** README.md 파일이 없는 저장소\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** 파일 트리만으로 다이어그램을 생성한다\n- **AND** 정확도가 낮을 수 있다는 경고를 포함한다\n\n---\n\n### Requirement: Three-Stage Prompt Pipeline\n\n다이어그램 생성은 3단계 프롬프트 파이프라인을 통해 수행되어야 한다(MUST).\n\n#### Scenario: Stage 1 - 아키텍처 설명 생성\n\n- **GIVEN** 파일 트리와 README 내용\n- **WHEN** 첫 번째 프롬프트가 실행되면\n- **THEN** 프로젝트 타입, 주요 컴포넌트, 상호작용을 텍스트로 설명한다", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2003", "text": "#### Scenario: Stage 1 - 아키텍처 설명 생성\n\n- **GIVEN** 파일 트리와 README 내용\n- **WHEN** 첫 번째 프롬프트가 실행되면\n- **THEN** 프로젝트 타입, 주요 컴포넌트, 상호작용을 텍스트로 설명한다\n\n#### Scenario: Stage 2 - 컴포넌트 매핑\n\n- **GIVEN** Stage 1의 설명\n- **WHEN** 두 번째 프롬프트가 실행되면\n- **THEN** 설명된 컴포넌트를 실제 파일/디렉토리 경로에 매핑한다\n\n#### Scenario: Stage 3 - Mermaid 코드 생성", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2004", "text": "#### Scenario: Stage 2 - 컴포넌트 매핑\n\n- **GIVEN** Stage 1의 설명\n- **WHEN** 두 번째 프롬프트가 실행되면\n- **THEN** 설명된 컴포넌트를 실제 파일/디렉토리 경로에 매핑한다\n\n#### Scenario: Stage 3 - Mermaid 코드 생성\n\n- **GIVEN** Stage 1 설명과 Stage 2 매핑\n- **WHEN** 세 번째 프롬프트가 실행되면\n- **THEN** 유효한 Mermaid flowchart 코드를 생성한다\n- **AND** 클릭 이벤트로 파일 경로를 연결한다\n\n---\n\n### Requirement: LLM Provider Abstraction\n\n시스템은 여러 LLM 제공자를 지원하여 다이어그램을 생성해야 한다(SHALL).\n\n#### Scenario: Claude API 사용 (기본값)", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2005", "text": "---\n\n### Requirement: LLM Provider Abstraction\n\n시스템은 여러 LLM 제공자를 지원하여 다이어그램을 생성해야 한다(SHALL).\n\n#### Scenario: Claude API 사용 (기본값)\n\n- **GIVEN** `ANTHROPIC_API_KEY` 환경변수가 설정됨\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** Claude API를 사용하여 다이어그램을 생성한다\n\n#### Scenario: OpenAI API 사용 (대체)\n\n- **GIVEN** `OPENAI_API_KEY` 환경변수가 설정되고 Claude 키가 없음\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** OpenAI API (o4-mini)를 사용하여 다이어그램을 생성한다\n\n#### Scenario: API 키 미설정", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2006", "text": "#### Scenario: OpenAI API 사용 (대체)\n\n- **GIVEN** `OPENAI_API_KEY` 환경변수가 설정되고 Claude 키가 없음\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** OpenAI API (o4-mini)를 사용하여 다이어그램을 생성한다\n\n#### Scenario: API 키 미설정\n\n- **GIVEN** LLM API 키가 설정되지 않음\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** 적절한 에러 메시지와 함께 설정 가이드를 반환한다\n\n---\n\n### Requirement: MCP Tool Integration\n\nMCP 서버에 다이어그램 생성 도구가 노출되어야 한다(MUST).\n\n#### Scenario: diagram_generate 도구 호출", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2007", "text": "#### Scenario: API 키 미설정\n\n- **GIVEN** LLM API 키가 설정되지 않음\n- **WHEN** 다이어그램 생성이 요청되면\n- **THEN** 적절한 에러 메시지와 함께 설정 가이드를 반환한다\n\n---\n\n### Requirement: MCP Tool Integration\n\nMCP 서버에 다이어그램 생성 도구가 노출되어야 한다(MUST).\n\n#### Scenario: diagram_generate 도구 호출\n\n- **GIVEN** MCP 클라이언트 (Claude Code)\n- **WHEN** `diagram_generate` 도구를 호출하면\n- **THEN** 저장소 경로를 입력받아 Mermaid 코드를 반환한다\n\n#### Scenario: diagram_from_change 도구 호출", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2008", "text": "---\n\n### Requirement: MCP Tool Integration\n\nMCP 서버에 다이어그램 생성 도구가 노출되어야 한다(MUST).\n\n#### Scenario: diagram_generate 도구 호출\n\n- **GIVEN** MCP 클라이언트 (Claude Code)\n- **WHEN** `diagram_generate` 도구를 호출하면\n- **THEN** 저장소 경로를 입력받아 Mermaid 코드를 반환한다\n\n#### Scenario: diagram_from_change 도구 호출\n\n- **GIVEN** OpenSpec 변경 ID\n- **WHEN** `diagram_from_change` 도구를 호출하면\n- **THEN** 변경에 영향받는 파일을 하이라이트한 다이어그램을 반환한다\n\n---\n\n### Requirement: Mermaid Rendering in Frontend\n\n프론트엔드에서 생성된 Mermaid 다이어그램을 렌더링해야 한다(SHALL).\n\n#### Scenario: 다이어그램 렌더링", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2009", "text": "- **GIVEN** OpenSpec 변경 ID\n- **WHEN** `diagram_from_change` 도구를 호출하면\n- **THEN** 변경에 영향받는 파일을 하이라이트한 다이어그램을 반환한다\n\n---\n\n### Requirement: Mermaid Rendering in Frontend\n\n프론트엔드에서 생성된 Mermaid 다이어그램을 렌더링해야 한다(SHALL).\n\n#### Scenario: 다이어그램 렌더링\n\n- **GIVEN** 유효한 Mermaid 코드\n- **WHEN** DiagramViewer 컴포넌트에 전달되면\n- **THEN** SVG로 렌더링하여 화면에 표시한다\n\n#### Scenario: 인터랙티브 네비게이션", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2010", "text": "#### Scenario: 다이어그램 렌더링\n\n- **GIVEN** 유효한 Mermaid 코드\n- **WHEN** DiagramViewer 컴포넌트에 전달되면\n- **THEN** SVG로 렌더링하여 화면에 표시한다\n\n#### Scenario: 인터랙티브 네비게이션\n\n- **GIVEN** 렌더링된 다이어그램\n- **WHEN** 컴포넌트를 클릭하면\n- **THEN** 해당 파일/디렉토리로 네비게이션한다\n\n#### Scenario: 줌/팬 컨트롤", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2011", "text": "#### Scenario: 인터랙티브 네비게이션\n\n- **GIVEN** 렌더링된 다이어그램\n- **WHEN** 컴포넌트를 클릭하면\n- **THEN** 해당 파일/디렉토리로 네비게이션한다\n\n#### Scenario: 줌/팬 컨트롤\n\n- **GIVEN** 렌더링된 다이어그램\n- **WHEN** 마우스 휠 또는 드래그 조작 시\n- **THEN** 다이어그램을 줌인/줌아웃하거나 이동할 수 있다\n\n---\n\n### Requirement: Upstream Synchronization\n\nGitDiagram 업스트림 변경을 추적하고 반영할 수 있어야 한다(SHALL).\n\n#### Scenario: 업스트림 버전 추적", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2012", "text": "- **GIVEN** 렌더링된 다이어그램\n- **WHEN** 마우스 휠 또는 드래그 조작 시\n- **THEN** 다이어그램을 줌인/줌아웃하거나 이동할 수 있다\n\n---\n\n### Requirement: Upstream Synchronization\n\nGitDiagram 업스트림 변경을 추적하고 반영할 수 있어야 한다(SHALL).\n\n#### Scenario: 업스트림 버전 추적\n\n- **GIVEN** `packages/gitdiagram-core/package.json`\n- **WHEN** upstream 필드를 확인하면\n- **THEN** 포팅된 GitDiagram 커밋 해시와 동기화 날짜를 확인할 수 있다\n\n#### Scenario: 업스트림 변경 감지", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2013", "text": "---\n\n### Requirement: Upstream Synchronization\n\nGitDiagram 업스트림 변경을 추적하고 반영할 수 있어야 한다(SHALL).\n\n#### Scenario: 업스트림 버전 추적\n\n- **GIVEN** `packages/gitdiagram-core/package.json`\n- **WHEN** upstream 필드를 확인하면\n- **THEN** 포팅된 GitDiagram 커밋 해시와 동기화 날짜를 확인할 수 있다\n\n#### Scenario: 업스트림 변경 감지\n\n- **GIVEN** 동기화 체크 스크립트 실행\n- **WHEN** GitDiagram 저장소에 새 커밋이 있으면\n- **THEN** 경고 메시지로 업데이트가 필요함을 알린다", "metadata": {"file_path": "openspec/specs/diagram-generator/spec.md", "file_name": "spec.md", "creation_date": "2025-12-13", "last_modified_date": "2025-12-13"}}
{"id": "2014", "text": "# env-auto-import Specification\n\n## Purpose\nTBD - created by archiving change add-env-auto-import. Update Purpose after archive.\n## Requirements\n### Requirement: Environment Variable Scanning\n\n시스템은 프로젝트 디렉토리에서 환경변수 파일을 스캔하고 알려진 서비스 패턴을 감지할 수 있어야 한다(SHALL).\n\n지원하는 환경변수 파일:\n- `.env`\n- `.env.local`\n- `.env.development`\n- `.env.production`\n- `.env.*.local`\n\n#### Scenario: 단일 .env 파일 스캔\n\n- **GIVEN** 프로젝트 루트에 `.env` 파일이 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 파일이 파싱되고 알려진 서비스 패턴이 감지된다\n\n#### Scenario: 여러 .env 파일 스캔", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2015", "text": "#### Scenario: 단일 .env 파일 스캔\n\n- **GIVEN** 프로젝트 루트에 `.env` 파일이 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 파일이 파싱되고 알려진 서비스 패턴이 감지된다\n\n#### Scenario: 여러 .env 파일 스캔\n\n- **GIVEN** `.env`와 `.env.local` 파일이 모두 존재한다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 모든 파일이 스캔되고 결과가 파일별로 그룹화된다\n\n#### Scenario: .env 파일 없음", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2016", "text": "#### Scenario: 여러 .env 파일 스캔\n\n- **GIVEN** `.env`와 `.env.local` 파일이 모두 존재한다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 모든 파일이 스캔되고 결과가 파일별로 그룹화된다\n\n#### Scenario: .env 파일 없음\n\n- **GIVEN** 프로젝트에 `.env*` 파일이 없다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 빈 결과가 반환되고 적절한 메시지가 표시된다\n\n---\n\n### Requirement: Service Pattern Recognition\n\n시스템은 환경변수 이름과 값을 분석하여 알려진 서비스를 자동으로 인식해야 한다(SHALL).", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2017", "text": "지원하는 서비스:\n- **인증/Git**: GitHub, GitLab, Bitbucket\n- **BaaS**: Supabase, Firebase, PocketBase, Appwrite\n- **배포**: Vercel, Netlify, Cloudflare, AWS, GCP, Azure\n- **모니터링**: Sentry, LogRocket, DataDog\n- **결제**: Stripe, PayPal, Paddle\n- **AI/ML**: OpenAI, Anthropic, Cohere, Replicate, HuggingFace\n- **데이터베이스**: PostgreSQL, MySQL, MongoDB, Redis, PlanetScale, Neon, Upstash\n- **이메일**: SendGrid, Resend, Postmark, Mailgun\n- **인증 서비스**: Clerk, Auth0, NextAuth, Supabase Auth\n- **메시징**: Twilio, Vonage\n- **스토리지**: S3, Cloudflare R2, Uploadthing\n- **검색**: Algolia, Typesense, Meilisearch\n\n#### Scenario: Supabase 자동 감지", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2018", "text": "#### Scenario: Supabase 자동 감지\n\n- **GIVEN** `.env` 파일에 `SUPABASE_URL`과 `SUPABASE_ANON_KEY`가 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** Supabase 서비스가 감지되고 해당 credential이 추출된다\n\n#### Scenario: Next.js 접두사 처리\n\n- **GIVEN** `.env` 파일에 `NEXT_PUBLIC_SUPABASE_URL`이 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** `NEXT_PUBLIC_` 접두사를 제거하고 Supabase로 인식한다\n\n#### Scenario: 여러 서비스 동시 감지", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2019", "text": "#### Scenario: Next.js 접두사 처리\n\n- **GIVEN** `.env` 파일에 `NEXT_PUBLIC_SUPABASE_URL`이 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** `NEXT_PUBLIC_` 접두사를 제거하고 Supabase로 인식한다\n\n#### Scenario: 여러 서비스 동시 감지\n\n- **GIVEN** `.env` 파일에 GitHub, Supabase, Stripe 관련 변수가 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** 세 서비스가 모두 개별적으로 감지된다\n\n#### Scenario: DATABASE_URL 자동 분류\n\n- **GIVEN** `DATABASE_URL=postgres://...` 형식의 변수가 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** URL 스키마를 분석하여 PostgreSQL로 분류된다\n\n---", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2020", "text": "#### Scenario: DATABASE_URL 자동 분류\n\n- **GIVEN** `DATABASE_URL=postgres://...` 형식의 변수가 있다\n- **WHEN** 환경변수 스캔을 실행한다\n- **THEN** URL 스키마를 분석하여 PostgreSQL로 분류된다\n\n---\n\n### Requirement: Import Preview\n\n시스템은 임포트 전에 감지된 서비스 목록을 미리보기로 표시해야 한다(SHALL).\n\n#### Scenario: 미리보기 표시\n\n- **GIVEN** 스캔 결과에 3개의 서비스가 감지되었다\n- **WHEN** 임포트 미리보기를 요청한다\n- **THEN** 각 서비스별로 감지된 credential과 등록 여부 선택 UI가 표시된다\n\n#### Scenario: 기존 계정 중복 감지", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2021", "text": "#### Scenario: 미리보기 표시\n\n- **GIVEN** 스캔 결과에 3개의 서비스가 감지되었다\n- **WHEN** 임포트 미리보기를 요청한다\n- **THEN** 각 서비스별로 감지된 credential과 등록 여부 선택 UI가 표시된다\n\n#### Scenario: 기존 계정 중복 감지\n\n- **GIVEN** 스캔 결과에 이미 등록된 GitHub 계정과 동일한 username이 감지되었다\n- **WHEN** 임포트 미리보기를 표시한다\n- **THEN** 해당 항목에 \"이미 등록됨\" 경고가 표시되고 업데이트 옵션이 제공된다\n\n#### Scenario: 민감 정보 마스킹", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2022", "text": "#### Scenario: 기존 계정 중복 감지\n\n- **GIVEN** 스캔 결과에 이미 등록된 GitHub 계정과 동일한 username이 감지되었다\n- **WHEN** 임포트 미리보기를 표시한다\n- **THEN** 해당 항목에 \"이미 등록됨\" 경고가 표시되고 업데이트 옵션이 제공된다\n\n#### Scenario: 민감 정보 마스킹\n\n- **GIVEN** 미리보기에 API 키가 포함되어 있다\n- **WHEN** 미리보기 화면을 표시한다\n- **THEN** 토큰과 키 값은 `sk-...****` 형태로 마스킹된다\n\n---\n\n### Requirement: Selective Import\n\n사용자는 감지된 서비스 중 원하는 항목만 선택하여 임포트할 수 있어야 한다(SHALL).", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2023", "text": "- **GIVEN** 미리보기에 API 키가 포함되어 있다\n- **WHEN** 미리보기 화면을 표시한다\n- **THEN** 토큰과 키 값은 `sk-...****` 형태로 마스킹된다\n\n---\n\n### Requirement: Selective Import\n\n사용자는 감지된 서비스 중 원하는 항목만 선택하여 임포트할 수 있어야 한다(SHALL).\n\n#### Scenario: 부분 임포트\n\n- **GIVEN** 5개의 서비스가 감지되었다\n- **WHEN** 사용자가 2개만 선택하고 임포트한다\n- **THEN** 선택된 2개의 서비스만 등록되고 나머지는 무시된다\n\n#### Scenario: 기존 계정 업데이트", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2024", "text": "#### Scenario: 부분 임포트\n\n- **GIVEN** 5개의 서비스가 감지되었다\n- **WHEN** 사용자가 2개만 선택하고 임포트한다\n- **THEN** 선택된 2개의 서비스만 등록되고 나머지는 무시된다\n\n#### Scenario: 기존 계정 업데이트\n\n- **GIVEN** 감지된 GitHub 계정이 이미 등록되어 있다\n- **WHEN** \"업데이트\" 옵션을 선택하고 임포트한다\n- **THEN** 기존 계정의 credential이 새 값으로 업데이트된다\n\n#### Scenario: 임포트 결과 표시\n\n- **GIVEN** 임포트가 완료되었다\n- **WHEN** 결과를 확인한다\n- **THEN** 생성/업데이트/스킵된 항목 수가 표시된다\n\n---", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2025", "text": "#### Scenario: 임포트 결과 표시\n\n- **GIVEN** 임포트가 완료되었다\n- **WHEN** 결과를 확인한다\n- **THEN** 생성/업데이트/스킵된 항목 수가 표시된다\n\n---\n\n### Requirement: MCP Tool Integration\n\nAI 어시스턴트가 환경변수 스캔 및 임포트를 수행할 수 있는 MCP 도구를 제공해야 한다(SHALL).\n\n#### Scenario: MCP로 환경변수 스캔\n\n- **GIVEN** 프로젝트에 `.env` 파일이 있다\n- **WHEN** AI가 `integration_scan_env` 도구를 호출한다\n- **THEN** 감지된 서비스 목록이 반환된다 (credential 값은 마스킹)\n\n#### Scenario: MCP로 자동 임포트", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2026", "text": "#### Scenario: MCP로 환경변수 스캔\n\n- **GIVEN** 프로젝트에 `.env` 파일이 있다\n- **WHEN** AI가 `integration_scan_env` 도구를 호출한다\n- **THEN** 감지된 서비스 목록이 반환된다 (credential 값은 마스킹)\n\n#### Scenario: MCP로 자동 임포트\n\n- **GIVEN** 스캔 결과에 2개의 서비스가 감지되었다\n- **WHEN** AI가 `integration_import_env` 도구를 호출한다\n- **THEN** 감지된 서비스가 자동으로 등록되고 결과가 반환된다\n\n---\n\n### Requirement: Extended Service Types\n\n시스템은 기본 제공 서비스 타입 외에 확장된 서비스 타입을 지원해야 한다(SHALL).", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2027", "text": "- **GIVEN** 스캔 결과에 2개의 서비스가 감지되었다\n- **WHEN** AI가 `integration_import_env` 도구를 호출한다\n- **THEN** 감지된 서비스가 자동으로 등록되고 결과가 반환된다\n\n---\n\n### Requirement: Extended Service Types\n\n시스템은 기본 제공 서비스 타입 외에 확장된 서비스 타입을 지원해야 한다(SHALL).\n\n기존 타입: `github`, `supabase`, `vercel`, `sentry`, `custom`\n\n확장 타입:\n- `firebase`, `aws`, `gcp`, `azure`\n- `stripe`, `openai`, `anthropic`\n- `mongodb`, `postgresql`, `redis`\n- `sendgrid`, `resend`, `twilio`\n- `clerk`, `auth0`\n\n#### Scenario: 새 서비스 타입 등록", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2028", "text": "기존 타입: `github`, `supabase`, `vercel`, `sentry`, `custom`\n\n확장 타입:\n- `firebase`, `aws`, `gcp`, `azure`\n- `stripe`, `openai`, `anthropic`\n- `mongodb`, `postgresql`, `redis`\n- `sendgrid`, `resend`, `twilio`\n- `clerk`, `auth0`\n\n#### Scenario: 새 서비스 타입 등록\n\n- **GIVEN** OpenAI API 키가 감지되었다\n- **WHEN** 임포트를 실행한다\n- **THEN** `openai` 타입의 서비스 계정이 생성된다\n\n#### Scenario: Custom 타입 폴백\n\n- **GIVEN** 알려지지 않은 패턴의 환경변수가 있다\n- **WHEN** 수동으로 임포트를 요청한다\n- **THEN** `custom` 타입으로 등록할 수 있다", "metadata": {"file_path": "openspec/specs/env-auto-import/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2029", "text": "# integration-hub Specification\n\n## Purpose\nTBD - created by archiving change add-integration-hub. Update Purpose after archive.\n## Requirements\n### Requirement: Service Account Management\n\n시스템은 다양한 외부 서비스의 계정 정보를 중앙에서 관리할 수 있어야 한다(SHALL).\n\n시스템은 다음 서비스 타입을 지원해야 한다(MUST):\n- GitHub (username, PAT, SSH key path)\n- Supabase (project URL, anon key, service role key)\n- Vercel (token, team ID)\n- Sentry (DSN, auth token, org slug, project slug)\n- Custom (사용자 정의 key-value)\n\n#### Scenario: GitHub 계정 등록\n\n- **GIVEN** 사용자가 Integrations 설정 페이지에 있다\n- **WHEN** GitHub 서비스 계정을 추가하고 username과 PAT를 입력한다\n- **THEN** 계정이 암호화되어 저장되고 목록에 표시된다", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2030", "text": "#### Scenario: GitHub 계정 등록\n\n- **GIVEN** 사용자가 Integrations 설정 페이지에 있다\n- **WHEN** GitHub 서비스 계정을 추가하고 username과 PAT를 입력한다\n- **THEN** 계정이 암호화되어 저장되고 목록에 표시된다\n\n#### Scenario: 서비스 계정 수정\n\n- **GIVEN** 등록된 GitHub 계정 \"hansooha\"가 있다\n- **WHEN** 해당 계정의 PAT를 새 값으로 변경한다\n- **THEN** 새 토큰이 암호화되어 저장된다\n\n#### Scenario: 서비스 계정 삭제\n\n- **GIVEN** 등록된 계정이 프로젝트에 연결되어 있지 않다\n- **WHEN** 계정을 삭제한다\n- **THEN** 계정이 영구 삭제된다\n\n#### Scenario: 연결된 계정 삭제 시도", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2031", "text": "#### Scenario: 서비스 계정 삭제\n\n- **GIVEN** 등록된 계정이 프로젝트에 연결되어 있지 않다\n- **WHEN** 계정을 삭제한다\n- **THEN** 계정이 영구 삭제된다\n\n#### Scenario: 연결된 계정 삭제 시도\n\n- **GIVEN** 등록된 계정이 하나 이상의 프로젝트에 연결되어 있다\n- **WHEN** 계정을 삭제하려고 한다\n- **THEN** 경고 메시지가 표시되고 연결된 프로젝트 목록을 보여준다\n\n---\n\n### Requirement: Project Integration Mapping\n\n시스템은 각 프로젝트가 사용할 서비스 계정을 지정할 수 있어야 한다(SHALL).\n\n#### Scenario: 프로젝트에 GitHub 계정 연결", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2032", "text": "---\n\n### Requirement: Project Integration Mapping\n\n시스템은 각 프로젝트가 사용할 서비스 계정을 지정할 수 있어야 한다(SHALL).\n\n#### Scenario: 프로젝트에 GitHub 계정 연결\n\n- **GIVEN** 프로젝트 \"zywiki\"와 GitHub 계정 \"zellycloud\"가 있다\n- **WHEN** 프로젝트 설정에서 GitHub 연동을 \"zellycloud\"로 선택한다\n- **THEN** 해당 프로젝트는 zellycloud 계정을 사용하도록 매핑된다\n\n#### Scenario: 프로젝트 연동 현황 조회\n\n- **GIVEN** 여러 프로젝트가 다양한 서비스에 연결되어 있다\n- **WHEN** Settings > Integrations의 Project Mappings 섹션을 본다\n- **THEN** 각 프로젝트별로 연결된 서비스 계정이 한눈에 표시된다\n\n---", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2033", "text": "#### Scenario: 프로젝트 연동 현황 조회\n\n- **GIVEN** 여러 프로젝트가 다양한 서비스에 연결되어 있다\n- **WHEN** Settings > Integrations의 Project Mappings 섹션을 본다\n- **THEN** 각 프로젝트별로 연결된 서비스 계정이 한눈에 표시된다\n\n---\n\n### Requirement: Environment Configuration\n\n시스템은 프로젝트별로 환경(local, staging, production)에 따른 설정을 관리할 수 있어야 한다(SHALL).\n\n#### Scenario: 환경 설정 추가\n\n- **GIVEN** 프로젝트 \"zywiki\"가 있다\n- **WHEN** staging 환경을 추가하고 서버 URL과 DB URL을 입력한다\n- **THEN** 환경 설정이 암호화되어 저장된다\n\n#### Scenario: 현재 환경 선택", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2034", "text": "### Requirement: Environment Configuration\n\n시스템은 프로젝트별로 환경(local, staging, production)에 따른 설정을 관리할 수 있어야 한다(SHALL).\n\n#### Scenario: 환경 설정 추가\n\n- **GIVEN** 프로젝트 \"zywiki\"가 있다\n- **WHEN** staging 환경을 추가하고 서버 URL과 DB URL을 입력한다\n- **THEN** 환경 설정이 암호화되어 저장된다\n\n#### Scenario: 현재 환경 선택\n\n- **GIVEN** 프로젝트에 local, staging, production 환경이 설정되어 있다\n- **WHEN** 사용자가 \"staging\"을 현재 환경으로 선택한다\n- **THEN** 해당 환경의 설정이 활성화되고 컨텍스트에 반영된다\n\n#### Scenario: 환경 변수 조회", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2035", "text": "#### Scenario: 현재 환경 선택\n\n- **GIVEN** 프로젝트에 local, staging, production 환경이 설정되어 있다\n- **WHEN** 사용자가 \"staging\"을 현재 환경으로 선택한다\n- **THEN** 해당 환경의 설정이 활성화되고 컨텍스트에 반영된다\n\n#### Scenario: 환경 변수 조회\n\n- **GIVEN** staging 환경에 `DATABASE_URL`이 설정되어 있다\n- **WHEN** MCP 도구로 환경 변수를 조회한다\n- **THEN** 해당 환경의 변수 값이 반환된다\n\n---\n\n### Requirement: Test Account Management\n\n시스템은 프로젝트별 테스트 계정 정보를 저장하고 관리할 수 있어야 한다(SHALL).\n\n#### Scenario: 테스트 계정 등록", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2036", "text": "#### Scenario: 환경 변수 조회\n\n- **GIVEN** staging 환경에 `DATABASE_URL`이 설정되어 있다\n- **WHEN** MCP 도구로 환경 변수를 조회한다\n- **THEN** 해당 환경의 변수 값이 반환된다\n\n---\n\n### Requirement: Test Account Management\n\n시스템은 프로젝트별 테스트 계정 정보를 저장하고 관리할 수 있어야 한다(SHALL).\n\n#### Scenario: 테스트 계정 등록\n\n- **GIVEN** 프로젝트 \"zywiki\"가 있다\n- **WHEN** admin 역할의 테스트 계정 (email, password)을 등록한다\n- **THEN** 비밀번호가 암호화되어 저장된다\n\n#### Scenario: 테스트 계정 조회 (UI)", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2037", "text": "시스템은 프로젝트별 테스트 계정 정보를 저장하고 관리할 수 있어야 한다(SHALL).\n\n#### Scenario: 테스트 계정 등록\n\n- **GIVEN** 프로젝트 \"zywiki\"가 있다\n- **WHEN** admin 역할의 테스트 계정 (email, password)을 등록한다\n- **THEN** 비밀번호가 암호화되어 저장된다\n\n#### Scenario: 테스트 계정 조회 (UI)\n\n- **GIVEN** 테스트 계정이 등록되어 있다\n- **WHEN** 프로젝트 상세의 Test Accounts 섹션을 본다\n- **THEN** 이메일은 보이고 비밀번호는 마스킹(••••)되어 표시된다\n\n#### Scenario: 테스트 계정 비밀번호 복사", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2038", "text": "#### Scenario: 테스트 계정 조회 (UI)\n\n- **GIVEN** 테스트 계정이 등록되어 있다\n- **WHEN** 프로젝트 상세의 Test Accounts 섹션을 본다\n- **THEN** 이메일은 보이고 비밀번호는 마스킹(••••)되어 표시된다\n\n#### Scenario: 테스트 계정 비밀번호 복사\n\n- **GIVEN** 테스트 계정의 비밀번호가 마스킹되어 있다\n- **WHEN** 복사 버튼을 클릭한다\n- **THEN** 원본 비밀번호가 클립보드에 복사된다\n\n---\n\n### Requirement: Secure Credential Storage\n\n시스템은 모든 민감 정보를 암호화하여 저장해야 한다(MUST).\n\n#### Scenario: 토큰 암호화 저장", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2039", "text": "- **GIVEN** 테스트 계정의 비밀번호가 마스킹되어 있다\n- **WHEN** 복사 버튼을 클릭한다\n- **THEN** 원본 비밀번호가 클립보드에 복사된다\n\n---\n\n### Requirement: Secure Credential Storage\n\n시스템은 모든 민감 정보를 암호화하여 저장해야 한다(MUST).\n\n#### Scenario: 토큰 암호화 저장\n\n- **GIVEN** 사용자가 GitHub PAT를 입력한다\n- **WHEN** 저장 버튼을 클릭한다\n- **THEN** 토큰은 AES-256-GCM으로 암호화되어 데이터베이스에 저장된다\n\n#### Scenario: 마스터 키 관리 (macOS)", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2040", "text": "---\n\n### Requirement: Secure Credential Storage\n\n시스템은 모든 민감 정보를 암호화하여 저장해야 한다(MUST).\n\n#### Scenario: 토큰 암호화 저장\n\n- **GIVEN** 사용자가 GitHub PAT를 입력한다\n- **WHEN** 저장 버튼을 클릭한다\n- **THEN** 토큰은 AES-256-GCM으로 암호화되어 데이터베이스에 저장된다\n\n#### Scenario: 마스터 키 관리 (macOS)\n\n- **GIVEN** macOS 환경에서 앱을 처음 실행한다\n- **WHEN** 암호화가 필요한 데이터를 저장한다\n- **THEN** 마스터 키는 macOS Keychain에 안전하게 저장된다\n\n#### Scenario: 민감 정보 UI 표시", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2041", "text": "#### Scenario: 마스터 키 관리 (macOS)\n\n- **GIVEN** macOS 환경에서 앱을 처음 실행한다\n- **WHEN** 암호화가 필요한 데이터를 저장한다\n- **THEN** 마스터 키는 macOS Keychain에 안전하게 저장된다\n\n#### Scenario: 민감 정보 UI 표시\n\n- **GIVEN** 암호화된 API 키가 저장되어 있다\n- **WHEN** UI에서 해당 정보를 표시한다\n- **THEN** `sk-...****` 형태로 마스킹되어 표시된다\n\n---\n\n### Requirement: MCP Integration Tools\n\n시스템은 AI 어시스턴트가 프로젝트 컨텍스트를 자동으로 조회할 수 있는 MCP 도구를 제공해야 한다(SHALL).\n\n기존 요구사항에 다음 시나리오를 추가한다:\n\n#### Scenario: 설정 소스 표시", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2042", "text": "---\n\n### Requirement: MCP Integration Tools\n\n시스템은 AI 어시스턴트가 프로젝트 컨텍스트를 자동으로 조회할 수 있는 MCP 도구를 제공해야 한다(SHALL).\n\n기존 요구사항에 다음 시나리오를 추가한다:\n\n#### Scenario: 설정 소스 표시\n\n- **GIVEN** 프로젝트에 로컬 설정이 있다\n- **WHEN** AI가 `integration_context` 도구를 호출한다\n- **THEN** 응답에 설정 소스(`local` 또는 `global`)가 포함된다\n\n#### Scenario: 하이브리드 설정 조회", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2043", "text": "기존 요구사항에 다음 시나리오를 추가한다:\n\n#### Scenario: 설정 소스 표시\n\n- **GIVEN** 프로젝트에 로컬 설정이 있다\n- **WHEN** AI가 `integration_context` 도구를 호출한다\n- **THEN** 응답에 설정 소스(`local` 또는 `global`)가 포함된다\n\n#### Scenario: 하이브리드 설정 조회\n\n- **GIVEN** 프로젝트의 계정 매핑은 로컬에 있다\n- **AND** 테스트 계정은 전역 DB에만 있다\n- **WHEN** `integration_context` 도구를 호출한다\n- **THEN** 두 소스의 데이터가 병합되어 반환된다\n- **AND** 각 섹션별 소스가 표시된다\n\n### Requirement: Automatic Git Configuration", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2044", "text": "#### Scenario: 하이브리드 설정 조회\n\n- **GIVEN** 프로젝트의 계정 매핑은 로컬에 있다\n- **AND** 테스트 계정은 전역 DB에만 있다\n- **WHEN** `integration_context` 도구를 호출한다\n- **THEN** 두 소스의 데이터가 병합되어 반환된다\n- **AND** 각 섹션별 소스가 표시된다\n\n### Requirement: Automatic Git Configuration\n\n시스템은 프로젝트 디렉토리에서 자동으로 올바른 Git 계정을 설정해야 한다(SHALL).\n\n#### Scenario: Git 계정 자동 감지", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2045", "text": "### Requirement: Automatic Git Configuration\n\n시스템은 프로젝트 디렉토리에서 자동으로 올바른 Git 계정을 설정해야 한다(SHALL).\n\n#### Scenario: Git 계정 자동 감지\n\n- **GIVEN** 프로젝트 \"dev-convert\"가 GitHub \"hansooha\"에 연결되어 있다\n- **WHEN** 해당 프로젝트 디렉토리에서 git 작업을 수행한다\n- **THEN** hansooha 계정의 인증 정보가 사용된다\n\n#### Scenario: 멀티 계정 충돌 방지\n\n- **GIVEN** \"zywiki\"는 zellycloud, \"admin-console\"은 hansooha에 연결되어 있다\n- **WHEN** 각 프로젝트 디렉토리에서 git push를 수행한다\n- **THEN** 각각 올바른 계정으로 인증된다", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2046", "text": "#### Scenario: 멀티 계정 충돌 방지\n\n- **GIVEN** \"zywiki\"는 zellycloud, \"admin-console\"은 hansooha에 연결되어 있다\n- **WHEN** 각 프로젝트 디렉토리에서 git push를 수행한다\n- **THEN** 각각 올바른 계정으로 인증된다\n\n### Requirement: Project Local Settings\n\n시스템은 프로젝트 디렉토리 내 `.zyflow/` 폴더에 설정을 저장하고 조회할 수 있어야 한다(SHALL).\n\n로컬 설정은 다음 파일로 구성된다(MUST):\n- `settings.json` - 계정 매핑 및 기본 환경 설정\n- `environments/*.env` - 환경별 변수 파일\n- `test-accounts.json` - 테스트 계정 (암호화)\n\n#### Scenario: 로컬 설정 초기화", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2047", "text": "로컬 설정은 다음 파일로 구성된다(MUST):\n- `settings.json` - 계정 매핑 및 기본 환경 설정\n- `environments/*.env` - 환경별 변수 파일\n- `test-accounts.json` - 테스트 계정 (암호화)\n\n#### Scenario: 로컬 설정 초기화\n\n- **GIVEN** 프로젝트 \"/Users/hansoo/myproject\"가 있다\n- **WHEN** `integration_init_local` 도구를 호출한다\n- **THEN** `/Users/hansoo/myproject/.zyflow/` 디렉토리가 생성된다\n- **AND** 기본 `settings.json` 파일이 생성된다\n\n#### Scenario: 로컬 설정 우선 조회", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2048", "text": "#### Scenario: 로컬 설정 초기화\n\n- **GIVEN** 프로젝트 \"/Users/hansoo/myproject\"가 있다\n- **WHEN** `integration_init_local` 도구를 호출한다\n- **THEN** `/Users/hansoo/myproject/.zyflow/` 디렉토리가 생성된다\n- **AND** 기본 `settings.json` 파일이 생성된다\n\n#### Scenario: 로컬 설정 우선 조회\n\n- **GIVEN** 프로젝트에 `.zyflow/settings.json`이 있다\n- **AND** 전역 DB에도 해당 프로젝트 설정이 있다\n- **WHEN** `integration_context` 도구를 호출한다\n- **THEN** 로컬 설정이 우선적으로 반환된다\n- **AND** 응답에 `source: \"local\"` 필드가 포함된다\n\n#### Scenario: 전역 설정 Fallback", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2049", "text": "#### Scenario: 로컬 설정 우선 조회\n\n- **GIVEN** 프로젝트에 `.zyflow/settings.json`이 있다\n- **AND** 전역 DB에도 해당 프로젝트 설정이 있다\n- **WHEN** `integration_context` 도구를 호출한다\n- **THEN** 로컬 설정이 우선적으로 반환된다\n- **AND** 응답에 `source: \"local\"` 필드가 포함된다\n\n#### Scenario: 전역 설정 Fallback\n\n- **GIVEN** 프로젝트에 `.zyflow/` 폴더가 없다\n- **AND** 전역 DB에 해당 프로젝트 설정이 있다\n- **WHEN** `integration_context` 도구를 호출한다\n- **THEN** 전역 DB에서 설정이 반환된다\n- **AND** 응답에 `source: \"global\"` 필드가 포함된다\n\n---\n\n### Requirement: Local Environment Files", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2050", "text": "#### Scenario: 전역 설정 Fallback\n\n- **GIVEN** 프로젝트에 `.zyflow/` 폴더가 없다\n- **AND** 전역 DB에 해당 프로젝트 설정이 있다\n- **WHEN** `integration_context` 도구를 호출한다\n- **THEN** 전역 DB에서 설정이 반환된다\n- **AND** 응답에 `source: \"global\"` 필드가 포함된다\n\n---\n\n### Requirement: Local Environment Files\n\n시스템은 프로젝트 로컬의 `.env` 파일에서 환경 변수를 읽을 수 있어야 한다(SHALL).\n\n#### Scenario: 로컬 환경 변수 조회", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2051", "text": "---\n\n### Requirement: Local Environment Files\n\n시스템은 프로젝트 로컬의 `.env` 파일에서 환경 변수를 읽을 수 있어야 한다(SHALL).\n\n#### Scenario: 로컬 환경 변수 조회\n\n- **GIVEN** 프로젝트에 `.zyflow/environments/local.env` 파일이 있다\n- **AND** 파일에 `DATABASE_URL=postgres://localhost/db`가 정의되어 있다\n- **WHEN** `integration_get_env` 도구를 호출한다\n- **THEN** `DATABASE_URL` 변수가 반환된다\n\n#### Scenario: 환경 파일 선택\n\n- **GIVEN** 프로젝트에 `local.env`, `staging.env`, `production.env`가 있다\n- **AND** `settings.json`의 `defaultEnvironment`가 \"staging\"이다\n- **WHEN** envId 없이 `integration_get_env`를 호출한다\n- **THEN** `staging.env`의 변수가 반환된다\n\n---\n\n### Requirement: Export to Local", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2052", "text": "#### Scenario: 환경 파일 선택\n\n- **GIVEN** 프로젝트에 `local.env`, `staging.env`, `production.env`가 있다\n- **AND** `settings.json`의 `defaultEnvironment`가 \"staging\"이다\n- **WHEN** envId 없이 `integration_get_env`를 호출한다\n- **THEN** `staging.env`의 변수가 반환된다\n\n---\n\n### Requirement: Export to Local\n\n시스템은 전역 DB의 설정을 프로젝트 로컬로 내보낼 수 있어야 한다(SHALL).\n\n#### Scenario: 전역 설정 내보내기", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2053", "text": "---\n\n### Requirement: Export to Local\n\n시스템은 전역 DB의 설정을 프로젝트 로컬로 내보낼 수 있어야 한다(SHALL).\n\n#### Scenario: 전역 설정 내보내기\n\n- **GIVEN** 전역 DB에 프로젝트 \"myproject\"의 설정이 있다\n- **WHEN** UI에서 \"Export to Project\" 버튼을 클릭한다\n- **THEN** 프로젝트의 `.zyflow/` 폴더에 설정 파일이 생성된다\n- **AND** 환경 변수는 개별 `.env` 파일로 저장된다\n- **AND** 테스트 계정은 암호화되어 저장된다\n\n#### Scenario: MCP 도구로 내보내기", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2054", "text": "- **GIVEN** 전역 DB에 프로젝트 \"myproject\"의 설정이 있다\n- **WHEN** UI에서 \"Export to Project\" 버튼을 클릭한다\n- **THEN** 프로젝트의 `.zyflow/` 폴더에 설정 파일이 생성된다\n- **AND** 환경 변수는 개별 `.env` 파일로 저장된다\n- **AND** 테스트 계정은 암호화되어 저장된다\n\n#### Scenario: MCP 도구로 내보내기\n\n- **GIVEN** 전역 DB에 프로젝트 설정이 있다\n- **WHEN** `integration_export_to_local` 도구를 호출한다\n- **THEN** 로컬 설정 파일이 생성된다\n- **AND** 생성된 파일 목록이 반환된다", "metadata": {"file_path": "openspec/specs/integration-hub/spec.md", "file_name": "spec.md", "creation_date": "2025-12-10", "last_modified_date": "2025-12-10"}}
{"id": "2055", "text": "# ZyFlow\n\nOpenSpec 기반 소프트웨어 개발 플로우 관리 도구 - Claude Code MCP 서버\n\n## 주요 기능\n\n### Flow UI (7단계 파이프라인)\n- **Spec**: 기능 명세서 관리\n- **Changes**: OpenSpec 변경 제안 (proposal.md, design.md)\n- **Tasks**: 태스크 목록 관리 (칸반/리스트 뷰)\n- **Code**: 코드 구현 추적\n- **Test**: 테스트 실행 관리\n- **Commit**: Git 커밋/푸시 워크플로우\n- **Docs**: 문서화 작업 추적", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2056", "text": "### 핵심 기능\n- **MCP 서버**: Claude Code에서 직접 태스크/변경 관리\n- **웹 대시보드**: 프로젝트별 OpenSpec 변경 제안 및 진행률 시각화\n- **칸반 보드**: 독립형 태스크 관리 시스템 (SQLite + FTS5 검색)\n- **Multi-Project Watcher**: 여러 프로젝트의 tasks.md 파일 실시간 감시 및 동기화\n- **Git 워크플로우**: 브랜치 관리, 커밋, 푸시, PR 생성\n- **Change Log & Replay**: 이벤트 로깅 및 리플레이 시스템\n\n## 설치\n\n```bash\nnpm install\nnpm run build:mcp\n```\n\n## MCP 서버 설정\n\n### 전역 설정 (모든 프로젝트에서 사용)", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2057", "text": "## 설치\n\n```bash\nnpm install\nnpm run build:mcp\n```\n\n## MCP 서버 설정\n\n### 전역 설정 (모든 프로젝트에서 사용)\n\n`~/.claude.json`에 다음 설정 추가:\n\n```json\n{\n  \"mcpServers\": {\n    \"zyflow\": {\n      \"type\": \"stdio\",\n      \"command\": \"node\",\n      \"args\": [\"/path/to/zyflow/dist/mcp-server/index.js\"],\n      \"env\": {}\n    }\n  }\n}\n```\n\n> **Note**: `ZYFLOW_PROJECT` 환경변수가 없으면 현재 작업 디렉토리(`process.cwd()`)를 프로젝트 경로로 사용합니다.\n\n### 프로젝트별 설정 (특정 프로젝트 전용)\n\n프로젝트의 `.mcp.json`에 다음 설정 추가:", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2058", "text": "> **Note**: `ZYFLOW_PROJECT` 환경변수가 없으면 현재 작업 디렉토리(`process.cwd()`)를 프로젝트 경로로 사용합니다.\n\n### 프로젝트별 설정 (특정 프로젝트 전용)\n\n프로젝트의 `.mcp.json`에 다음 설정 추가:\n\n```json\n{\n  \"mcpServers\": {\n    \"zyflow\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/zyflow/dist/mcp-server/index.js\"],\n      \"env\": {\n        \"ZYFLOW_PROJECT\": \"/path/to/your/project\"\n      }\n    }\n  }\n}\n```\n\n## 사용 가능한 MCP 도구\n\n### OpenSpec 도구", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2059", "text": "## 사용 가능한 MCP 도구\n\n### OpenSpec 도구\n\n| 도구 | 설명 |\n|------|------|\n| `zyflow_list_changes` | 현재 프로젝트의 OpenSpec 변경 제안 목록 조회 |\n| `zyflow_get_tasks` | 특정 변경 제안의 전체 태스크 목록 조회 |\n| `zyflow_get_next_task` | 다음 미완료 태스크와 컨텍스트 조회 |\n| `zyflow_get_task_context` | 특정 태스크의 상세 컨텍스트 조회 |\n| `zyflow_mark_complete` | 태스크를 완료로 표시 |\n| `zyflow_mark_incomplete` | 태스크를 미완료로 되돌리기 |\n\n### 태스크 관리 도구", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2060", "text": "### 태스크 관리 도구\n\n| 도구 | 설명 |\n|------|------|\n| `task_create` | 새 태스크 생성 (순차 번호 ID 자동 생성, origin='inbox') |\n| `task_list` | 태스크 목록 조회 (kanban: true로 상태별 그룹화) |\n| `task_view` | 태스크 상세 조회 |\n| `task_update` | 태스크 수정 (상태, 제목, 설명 등) |\n| `task_delete` | 태스크 삭제 |\n| `task_search` | 태스크 검색 (FTS5 전문 검색) |\n| `task_archive` | 완료된 태스크를 아카이브로 이동 |\n| `task_unarchive` | 아카이브된 태스크 복원 |\n\n### Change Log & Replay 도구", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2061", "text": "### Change Log & Replay 도구\n\n| 도구 | 설명 |\n|------|------|\n| `get_events` | 변경 이벤트 조회 (필터링 지원) |\n| `get_event_statistics` | 이벤트 통계 조회 |\n| `search_events` | 텍스트로 이벤트 검색 |\n| `export_events` | 이벤트 내보내기 (JSON/CSV/SQL) |\n| `create_replay_session` | 리플레이 세션 생성 |\n| `start_replay` | 리플레이 세션 시작 |\n| `get_replay_progress` | 리플레이 진행 상황 조회 |\n\n## 태스크 출처 구분 (Origin)\n\n태스크는 `origin` 필드로 출처를 구분합니다:", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2062", "text": "## 태스크 출처 구분 (Origin)\n\n태스크는 `origin` 필드로 출처를 구분합니다:\n\n| Origin | 설명 |\n|--------|------|\n| `openspec` | OpenSpec tasks.md에서 동기화된 태스크 |\n| `inbox` | MCP/CLI를 통해 수동으로 생성된 태스크 |\n| `imported` | 외부 시스템에서 가져온 태스크 (향후 지원) |\n\n## 사용 예시\n\n```\n사용자: \"zyflow-mcp-server의 다음 태스크 해줘\"\n\nClaude: [zyflow_get_next_task 호출]\n        다음 태스크: README.md에 MCP 서버 사용법 추가\n\n        [작업 수행...]\n\n        완료했습니다. 태스크를 완료로 표시할까요?\n\n사용자: \"응\"", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2063", "text": "## 사용 예시\n\n```\n사용자: \"zyflow-mcp-server의 다음 태스크 해줘\"\n\nClaude: [zyflow_get_next_task 호출]\n        다음 태스크: README.md에 MCP 서버 사용법 추가\n\n        [작업 수행...]\n\n        완료했습니다. 태스크를 완료로 표시할까요?\n\n사용자: \"응\"\n\nClaude: [zyflow_mark_complete 호출]\n        태스크가 완료되었습니다. (35/37 완료)\n```\n\n## 웹 대시보드\n\n```bash\n# 서버 + 클라이언트 동시 실행\nnpm run dev:all\n\n# 또는 개별 실행\nnpm run server  # API 서버 (포트 3001)\nnpm run dev     # Vite 개발 서버\n```\n\n## CLI 사용법\n\n```bash\n# 태스크 목록 (칸반 형식)\nzy tasks list --kanban", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2064", "text": "## 웹 대시보드\n\n```bash\n# 서버 + 클라이언트 동시 실행\nnpm run dev:all\n\n# 또는 개별 실행\nnpm run server  # API 서버 (포트 3001)\nnpm run dev     # Vite 개발 서버\n```\n\n## CLI 사용법\n\n```bash\n# 태스크 목록 (칸반 형식)\nzy tasks list --kanban\n\n# 태스크 생성\nzy tasks add \"버그 수정: 로그인 오류\" --priority high --tags bug,urgent\n\n# 태스크 상태 변경\nzy tasks move TASK-1 in-progress\n\n# 태스크 검색\nzy tasks search \"로그인\"\n\n# 태스크 삭제\nzy tasks delete TASK-1\n```\n\n## 스크립트", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2065", "text": "# 태스크 검색\nzy tasks search \"로그인\"\n\n# 태스크 삭제\nzy tasks delete TASK-1\n```\n\n## 스크립트\n\n| 스크립트 | 설명 |\n|---------|------|\n| `npm run dev` | Vite 개발 서버 실행 |\n| `npm run build` | 프로덕션 빌드 |\n| `npm run server` | API 서버 실행 (Multi-Project Watcher 포함) |\n| `npm run dev:all` | 서버 + 클라이언트 동시 실행 |\n| `npm run build:mcp` | MCP 서버 빌드 |\n| `npm run mcp` | MCP 서버 실행 |\n| `npm run lint` | ESLint 검사 |\n| `npm run lint:fix` | ESLint 자동 수정 |\n| `npm run format` | Prettier 포맷팅 |\n| `npm run test` | Vitest 테스트 실행 |\n| `npm run test:watch` | Vitest 감시 모드 |\n\n## 환경 변수", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2066", "text": "## 환경 변수\n\n| 변수 | 설명 | 기본값 |\n|------|------|--------|\n| `ZYFLOW_PROJECT` | 대상 프로젝트 경로 | 현재 디렉토리 |\n\n## 데이터 저장소\n\n- **태스크 DB**: 각 프로젝트의 `.zyflow/tasks.db` (SQLite)\n- **OpenSpec 태스크**: `openspec/changes/{change-id}/tasks.md`\n\n## 프로젝트 구조\n\n```\nzyflow/\n├── src/                    # React 프론트엔드\n│   ├── components/\n│   │   ├── flow/          # Flow UI 컴포넌트 (PipelineBar, StageContent 등)\n│   │   ├── git/           # Git 워크플로우 컴포넌트\n│   │   └── ui/            # 공통 UI 컴포넌트\n│   ├── hooks/             # React Query 훅\n│   ├── constants/         # 상수 정의 (STAGES,", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2067", "text": "StageContent 등)\n│   │   ├── git/           # Git 워크플로우 컴포넌트\n│   │   └── ui/            # 공통 UI 컴포넌트\n│   ├── hooks/             # React Query 훅\n│   ├── constants/         # 상수 정의 (STAGES, STAGE_CONFIG)\n│   └── types/             # TypeScript 타입 정의\n├── server/                 # Express API 서버\n│   ├── tasks/             # 태스크 관리 모듈 (SQLite)\n│   ├── git/               # Git 워크플로우 API\n│   └── watcher.ts         # Multi-Project Watcher\n├── mcp-server/            # MCP 서버 (Claude Code 통합)\n└── openspec/              # OpenSpec 변경 제안 및 스펙\n```\n\n## 기술 스택", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2068", "text": "ts         # Multi-Project Watcher\n├── mcp-server/            # MCP 서버 (Claude Code 통합)\n└── openspec/              # OpenSpec 변경 제안 및 스펙\n```\n\n## 기술 스택\n\n- **Frontend**: React 19, Vite, TailwindCSS 4, React Query, dnd-kit\n- **Backend**: Express, SQLite (better-sqlite3), Drizzle ORM\n- **MCP**: @modelcontextprotocol/sdk\n- **Testing**: Vitest, @testing-library/react, Playwright\n\n## Claude Code 통합 (Claude-Flow)\n\nZyFlow는 Claude Code CLI와 통합되어 태스크를 자동으로 실행할 수 있습니다.\n\n### 주요 기능", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2069", "text": "## 기술 스택\n\n- **Frontend**: React 19, Vite, TailwindCSS 4, React Query, dnd-kit\n- **Backend**: Express, SQLite (better-sqlite3), Drizzle ORM\n- **MCP**: @modelcontextprotocol/sdk\n- **Testing**: Vitest, @testing-library/react, Playwright\n\n## Claude Code 통합 (Claude-Flow)\n\nZyFlow는 Claude Code CLI와 통합되어 태스크를 자동으로 실행할 수 있습니다.\n\n### 주요 기능\n\n- **OpenSpec 기반 프롬프트 생성**: proposal.md, design.md, tasks.md를 자동으로 분석하여 컨텍스트 생성\n- **실시간 스트리밍**: SSE를 통해 Claude Code 실행 결과를 실시간으로 확인\n- **태스크 단위 실행**: 개별 태스크 선택하여 실행 가능\n- **실행 제어**: 실행 중 중지 및 재시작 지원\n\n### 사용 방법", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2070", "text": "### 주요 기능\n\n- **OpenSpec 기반 프롬프트 생성**: proposal.md, design.md, tasks.md를 자동으로 분석하여 컨텍스트 생성\n- **실시간 스트리밍**: SSE를 통해 Claude Code 실행 결과를 실시간으로 확인\n- **태스크 단위 실행**: 개별 태스크 선택하여 실행 가능\n- **실행 제어**: 실행 중 중지 및 재시작 지원\n\n### 사용 방법\n\n1. **웹 대시보드에서**:\n   - Changes 목록에서 특정 Change 선택\n   - Tasks 탭에서 실행할 태스크의 \"실행\" 버튼 클릭\n   - 실행 모달에서 진행 상황 실시간 확인", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2071", "text": "### 사용 방법\n\n1. **웹 대시보드에서**:\n   - Changes 목록에서 특정 Change 선택\n   - Tasks 탭에서 실행할 태스크의 \"실행\" 버튼 클릭\n   - 실행 모달에서 진행 상황 실시간 확인\n\n2. **실행 모드**:\n   - `single`: 선택한 단일 태스크만 실행\n   - `full`: 미완료 태스크 전체 실행\n   - `analysis`: 코드 변경 없이 분석만 수행\n\n### 기술 스택\n\n- **Backend**: node-pty (TTY 에뮬레이션), stream-json 출력 파싱\n- **Frontend**: SSE (Server-Sent Events), React Query 연동\n- **프로세스 관리**: PM2\n\n### API 엔드포인트", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2072", "text": "### 기술 스택\n\n- **Backend**: node-pty (TTY 에뮬레이션), stream-json 출력 파싱\n- **Frontend**: SSE (Server-Sent Events), React Query 연동\n- **프로세스 관리**: PM2\n\n### API 엔드포인트\n\n| 엔드포인트 | 설명 |\n|-----------|------|\n| `POST /api/claude/execute` | 태스크 실행 시작 (SSE 스트리밍) |\n| `GET /api/claude/status/:runId` | 실행 상태 조회 |\n| `POST /api/claude/stop/:runId` | 실행 중지 |\n| `GET /api/claude/logs/:changeId` | 실행 로그 조회 |\n\n### 프롬프트 빌더\n\nOpenSpecPromptBuilder가 다음 문서를 자동으로 로드합니다:", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2073", "text": "### 프롬프트 빌더\n\nOpenSpecPromptBuilder가 다음 문서를 자동으로 로드합니다:\n\n- `CLAUDE.md`: 프로젝트 맥락 (요약 버전)\n- `openspec/changes/{id}/proposal.md`: 변경 제안 내용\n- `openspec/changes/{id}/design.md`: 설계 문서 (있는 경우)\n- `openspec/changes/{id}/tasks.md`: 태스크 목록 (미완료 항목 추출)\n- `openspec/changes/{id}/specs/`: 관련 스펙 파일 목록\n\n---\n\n## 라이선스\n\nPrivate - Zellycloud", "metadata": {"file_path": "README.md", "file_name": "README.md", "creation_date": "2025-12-18", "last_modified_date": "2025-12-18"}}
{"id": "2074", "text": "# ZyFlow - Claude Code Configuration\n\n## Project Overview\n\nOpenSpec 기반 소프트웨어 개발 플로우 관리 도구. MCP 서버를 통해 태스크 관리 지원.\n\n## Build Commands\n\n```bash\nnpm run dev          # Vite 개발 서버\nnpm run build        # 프로덕션 빌드\nnpm run server       # API 서버 실행\nnpm run dev:all      # 서버 + 클라이언트 동시 실행\nnpm run build:mcp    # MCP 서버 빌드\nnpm run test         # Vitest 테스트 실행\nnpm run lint         # ESLint 검사\n```\n\n## Code Style & Best Practices\n\n- **Modular Design**: 파일당 500줄 이하\n- **Environment Safety**: 시크릿 하드코딩 금지\n- **Test-First**: 테스트 먼저 작성\n- **Clean Architecture**: 관심사 분리\n\n## File Organization", "metadata": {"file_path": "CLAUDE.md", "file_name": "CLAUDE.md", "creation_date": "2025-12-13", "last_modified_date": "2026-01-07"}}
{"id": "2075", "text": "## Code Style & Best Practices\n\n- **Modular Design**: 파일당 500줄 이하\n- **Environment Safety**: 시크릿 하드코딩 금지\n- **Test-First**: 테스트 먼저 작성\n- **Clean Architecture**: 관심사 분리\n\n## File Organization\n\n- `/src` - React 프론트엔드\n- `/server` - Express API 서버\n- `/mcp-server` - MCP 서버 (Claude Code 통합)\n- `/openspec` - OpenSpec 변경 제안 및 스펙\n- `/tests` - 테스트 파일\n- `/docs` - 문서\n\n## MCP 도구 (ZyFlow)\n\nZyFlow MCP 서버 제공 도구:\n- `zyflow_get_tasks` - 태스크 목록 조회\n- `zyflow_update_task` - 태스크 상태 업데이트\n- `zyflow_get_project` - 프로젝트 정보 조회\n\n## Skills 사용법", "metadata": {"file_path": "CLAUDE.md", "file_name": "CLAUDE.md", "creation_date": "2025-12-13", "last_modified_date": "2026-01-07"}}
{"id": "2076", "text": "## MCP 도구 (ZyFlow)\n\nZyFlow MCP 서버 제공 도구:\n- `zyflow_get_tasks` - 태스크 목록 조회\n- `zyflow_update_task` - 태스크 상태 업데이트\n- `zyflow_get_project` - 프로젝트 정보 조회\n\n## Skills 사용법\n\n4개의 핵심 스킬 제공:\n\n| 스킬 | 경로 | 용도 |\n|------|------|------|\n| OpenSpec | `.claude/skills/openspec/` | 스펙 주도 개발, proposal 작성 |\n| Code Review | `.claude/skills/code-review/` | 코드 품질, 보안 검토 |\n| Testing | `.claude/skills/testing/` | 테스트 작성, 커버리지 관리 |\n| Git Workflow | `.claude/skills/git-workflow/` | 브랜치 전략, 커밋 규칙 |", "metadata": {"file_path": "CLAUDE.md", "file_name": "CLAUDE.md", "creation_date": "2025-12-13", "last_modified_date": "2026-01-07"}}
{"id": "2077", "text": "**스킬 참조 방법:**\n```\n# 스킬 파일 읽기\n.claude/skills/[skill-name]/SKILL.md\n```\n\n## Core Agents\n\n5개의 핵심 에이전트 (`.claude/agents/core/`):\n- **coder.md** - 코드 작성 전문\n- **reviewer.md** - 코드 리뷰 전문\n- **tester.md** - 테스트 작성 전문\n- **planner.md** - 계획 수립 전문\n- **researcher.md** - 조사/분석 전문\n\n## Important Instructions\n\n- 요청된 것만 수행 (그 이상, 이하 금지)\n- 새 파일 생성보다 기존 파일 수정 선호\n- 루트 폴더에 작업 파일 저장 금지", "metadata": {"file_path": "CLAUDE.md", "file_name": "CLAUDE.md", "creation_date": "2025-12-13", "last_modified_date": "2026-01-07"}}
